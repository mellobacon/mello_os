var Ba=Object.defineProperty;var Ia=(r,e,t)=>e in r?Ba(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var st=(r,e,t)=>(Ia(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))n(u);new MutationObserver(u=>{for(const p of u)if(p.type==="childList")for(const m of p.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function t(u){const p={};return u.integrity&&(p.integrity=u.integrity),u.referrerPolicy&&(p.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?p.credentials="include":u.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function n(u){if(u.ep)return;u.ep=!0;const p=t(u);fetch(u.href,p)}})();function $e(){}function Pa(r,e){for(const t in e)r[t]=e[t];return r}function so(r){return r()}function Un(){return Object.create(null)}function Nt(r){r.forEach(so)}function En(r){return typeof r=="function"}function Qe(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let Tr;function xa(r,e){return r===e?!0:(Tr||(Tr=document.createElement("a")),Tr.href=e,r===Tr.href)}function Ma(r){return Object.keys(r).length===0}function oo(r,e,t,n){if(r){const u=ao(r,e,t,n);return r[0](u)}}function ao(r,e,t,n){return r[1]&&n?Pa(t.ctx.slice(),r[1](n(e))):t.ctx}function lo(r,e,t,n){if(r[2]&&n){const u=r[2](n(t));if(e.dirty===void 0)return u;if(typeof u=="object"){const p=[],m=Math.max(e.dirty.length,u.length);for(let i=0;i<m;i+=1)p[i]=e.dirty[i]|u[i];return p}return e.dirty|u}return e.dirty}function co(r,e,t,n,u,p){if(u){const m=ao(e,t,n,p);r.p(m,u)}}function ho(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function uo(r){return r&&En(r.destroy)?r.destroy:$e}function be(r,e){r.appendChild(e)}function xe(r,e,t){r.insertBefore(e,t||null)}function Ie(r){r.parentNode&&r.parentNode.removeChild(r)}function we(r){return document.createElement(r)}function At(r){return document.createTextNode(r)}function je(){return At(" ")}function Tt(r,e,t,n){return r.addEventListener(e,t,n),()=>r.removeEventListener(e,t,n)}function Fa(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function _e(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function Na(r){return Array.from(r.childNodes)}function vr(r,e){e=""+e,r.data!==e&&(r.data=e)}function Or(r,e,t,n){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,n?"important":"")}let gr;function fr(r){gr=r}function ja(){if(!gr)throw new Error("Function called outside component initialization");return gr}function Dt(r){ja().$$.on_mount.push(r)}function Cn(r,e){const t=r.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const Yt=[],it=[];let Zt=[];const Hn=[],Ua=Promise.resolve();let sn=!1;function Ha(){sn||(sn=!0,Ua.then(fo))}function on(r){Zt.push(r)}const ui=new Set;let Ht=0;function fo(){if(Ht!==0)return;const r=gr;do{try{for(;Ht<Yt.length;){const e=Yt[Ht];Ht++,fr(e),$a(e.$$)}}catch(e){throw Yt.length=0,Ht=0,e}for(fr(null),Yt.length=0,Ht=0;it.length;)it.pop()();for(let e=0;e<Zt.length;e+=1){const t=Zt[e];ui.has(t)||(ui.add(t),t())}Zt.length=0}while(Yt.length);for(;Hn.length;)Hn.pop()();sn=!1,ui.clear(),fr(r)}function $a(r){if(r.fragment!==null){r.update(),Nt(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(on)}}function Wa(r){const e=[],t=[];Zt.forEach(n=>r.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Zt=e}const xr=new Set;let qa;function Te(r,e){r&&r.i&&(xr.delete(r),r.i(e))}function Oe(r,e,t,n){if(r&&r.o){if(xr.has(r))return;xr.add(r),qa.c.push(()=>{xr.delete(r),n&&(t&&r.d(1),n())}),r.o(e)}else n&&n()}function De(r){r&&r.c()}function ke(r,e,t){const{fragment:n,after_update:u}=r.$$;n&&n.m(e,t),on(()=>{const p=r.$$.on_mount.map(so).filter(En);r.$$.on_destroy?r.$$.on_destroy.push(...p):Nt(p),r.$$.on_mount=[]}),u.forEach(on)}function Le(r,e){const t=r.$$;t.fragment!==null&&(Wa(t.after_update),Nt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function za(r,e){r.$$.dirty[0]===-1&&(Yt.push(r),Ha(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function et(r,e,t,n,u,p,m=null,i=[-1]){const l=gr;fr(r);const h=r.$$={fragment:null,ctx:[],props:p,update:$e,not_equal:u,bound:Un(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:Un(),dirty:i,skip_bound:!1,root:e.target||l.$$.root};m&&m(h.root);let b=!1;if(h.ctx=t?t(r,e.props||{},(f,y,...C)=>{const w=C.length?C[0]:y;return h.ctx&&u(h.ctx[f],h.ctx[f]=w)&&(!h.skip_bound&&h.bound[f]&&h.bound[f](w),b&&za(r,f)),y}):[],h.update(),b=!0,Nt(h.before_update),h.fragment=n?n(h.ctx):!1,e.target){if(e.hydrate){const f=Na(e.target);h.fragment&&h.fragment.l(f),f.forEach(Ie)}else h.fragment&&h.fragment.c();e.intro&&Te(r.$$.fragment),ke(r,e.target,e.anchor),fo()}fr(l)}class tt{constructor(){st(this,"$$");st(this,"$$set")}$destroy(){Le(this,1),this.$destroy=$e}$on(e,t){if(!En(t))return $e;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const u=n.indexOf(t);u!==-1&&n.splice(u,1)}}$set(e){this.$$set&&!Ma(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Va="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Va);var fi={dragStart:!0},$n=(r,e,t)=>Math.min(Math.max(r,e),t),di=r=>typeof r=="string",Ka=([r,e],t,n)=>{const u=(p,m)=>m===0?0:Math.ceil(p/m)*m;return[u(t,r),u(n,e)]},Wn=(r,e)=>r.some(t=>e.some(n=>t.contains(n)));function _i(r,e){if(r===void 0)return;if(an(r))return r.getBoundingClientRect();if(typeof r=="object"){const{top:n=0,left:u=0,right:p=0,bottom:m=0}=r;return{top:n,right:window.innerWidth-p,bottom:window.innerHeight-m,left:u}}if(r==="parent")return e.parentNode.getBoundingClientRect();const t=document.querySelector(r);if(t===null)throw new Error("The selector provided for bound doesn't exists in the document.");return t.getBoundingClientRect()}var kr=(r,e,t)=>r.style.setProperty(e,t),an=r=>r instanceof HTMLElement,_o=(r,e={})=>{let t,n,{bounds:u,axis:p="both",gpuAcceleration:m=!0,legacyTranslate:i=!0,transform:l,applyUserSelectHack:h=!0,disabled:b=!1,ignoreMultitouch:f=!1,recomputeBounds:y=fi,grid:C,position:w,cancel:S,handle:a,defaultClass:s="neodrag",defaultClassDragging:o="neodrag-dragging",defaultClassDragged:c="neodrag-dragged",defaultPosition:d={x:0,y:0},onDragStart:_,onDrag:E,onDragEnd:k}=e,v=!1,O=0,M=0,$=0,L=0,q=0,Z=0,{x:re,y:ie}=w?{x:(w==null?void 0:w.x)??0,y:(w==null?void 0:w.y)??0}:d;z(re,ie);let ne,x,F,P,U,G="",H=!!w;y={...fi,...y};const K=document.body.style,Y=r.classList;function z(V=O,ee=M){if(!l){if(i){let ue=`${+V}px, ${+ee}px`;return kr(r,"transform",m?`translate3d(${ue}, 0)`:`translate(${ue})`)}return kr(r,"translate",`${+V}px ${+ee}px ${m?"1px":""}`)}const le=l({offsetX:V,offsetY:ee,rootNode:r});di(le)&&kr(r,"transform",le)}const g=(V,ee)=>{const le={offsetX:O,offsetY:M,rootNode:r,currentNode:U};r.dispatchEvent(new CustomEvent(V,{detail:le})),ee==null||ee(le)},A=addEventListener;A("pointerdown",j,!1),A("pointerup",D,!1),A("pointermove",B,!1),kr(r,"touch-action","none");const I=()=>{let V=r.offsetWidth/x.width;return isNaN(V)&&(V=1),V};function j(V){if(b||V.button===2||f&&!V.isPrimary)return;if(y.dragStart&&(ne=_i(u,r)),di(a)&&di(S)&&a===S)throw new Error("`handle` selector can't be same as `cancel` selector");if(Y.add(s),F=function(pe,oe){if(!pe)return[oe];if(an(pe))return[pe];if(Array.isArray(pe))return pe;const Me=oe.querySelectorAll(pe);if(Me===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(Me.values())}(a,r),P=function(pe,oe){if(!pe)return[];if(an(pe))return[pe];if(Array.isArray(pe))return pe;const Me=oe.querySelectorAll(pe);if(Me===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(Me.values())}(S,r),t=/(both|x)/.test(p),n=/(both|y)/.test(p),Wn(P,F))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const ee=V.composedPath()[0];if(!F.some(pe=>{var oe;return pe.contains(ee)||((oe=pe.shadowRoot)==null?void 0:oe.contains(ee))})||Wn(P,[ee]))return;U=F.length===1?r:F.find(pe=>pe.contains(ee)),v=!0,x=r.getBoundingClientRect(),h&&(G=K.userSelect,K.userSelect="none"),g("neodrag:start",_);const{clientX:le,clientY:ue}=V,ce=I();t&&($=le-re/ce),n&&(L=ue-ie/ce),ne&&(q=le-x.left,Z=ue-x.top)}function D(){v&&(y.dragEnd&&(ne=_i(u,r)),Y.remove(o),Y.add(c),h&&(K.userSelect=G),g("neodrag:end",k),t&&($=O),n&&(L=M),v=!1)}function B(V){if(!v)return;y.drag&&(ne=_i(u,r)),Y.add(o),V.preventDefault(),x=r.getBoundingClientRect();let ee=V.clientX,le=V.clientY;const ue=I();if(ne){const ce={left:ne.left+q,top:ne.top+Z,right:ne.right+q-x.width,bottom:ne.bottom+Z-x.height};ee=$n(ee,ce.left,ce.right),le=$n(le,ce.top,ce.bottom)}if(Array.isArray(C)){let[ce,pe]=C;if(isNaN(+ce)||ce<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+pe)||pe<0)throw new Error("2nd argument of `grid` must be a valid positive number");let oe=ee-$,Me=le-L;[oe,Me]=Ka([ce/ue,pe/ue],oe,Me),ee=$+oe,le=L+Me}t&&(O=Math.round((ee-$)*ue)),n&&(M=Math.round((le-L)*ue)),re=O,ie=M,g("neodrag",E),z()}return{destroy:()=>{const V=removeEventListener;V("pointerdown",j,!1),V("pointerup",D,!1),V("pointermove",B,!1)},update:V=>{var le,ue;p=V.axis||"both",b=V.disabled??!1,f=V.ignoreMultitouch??!1,a=V.handle,u=V.bounds,y=V.recomputeBounds??fi,S=V.cancel,h=V.applyUserSelectHack??!0,C=V.grid,m=V.gpuAcceleration??!0,i=V.legacyTranslate??!0,l=V.transform;const ee=Y.contains(c);Y.remove(s,c),s=V.defaultClass??"neodrag",o=V.defaultClassDragging??"neodrag-dragging",c=V.defaultClassDragged??"neodrag-dragged",Y.add(s),ee&&Y.add(c),H&&(re=O=((le=V.position)==null?void 0:le.x)??O,ie=M=((ue=V.position)==null?void 0:ue.y)??M,z())}}};function Ga(r){let e,t,n,u,p,m,i,l;return{c(){e=we("div"),t=we("div"),n=At(r[0]),u=je(),p=we("div"),m=we("button"),_e(t,"class","title svelte-1lu78hb"),_e(m,"class","close button svelte-1lu78hb"),_e(p,"class","window-buttons svelte-1lu78hb"),_e(e,"class","header svelte-1lu78hb")},m(h,b){xe(h,e,b),be(e,t),be(t,n),be(e,u),be(e,p),be(p,m),i||(l=Tt(m,"click",r[1]),i=!0)},p(h,[b]){b&1&&vr(n,h[0])},i:$e,o:$e,d(h){h&&Ie(e),i=!1,l()}}}function Ya(r,e,t){let{title:n=""}=e;function u(p){Cn.call(this,r,p)}return r.$$set=p=>{"title"in p&&t(0,n=p.title)},[n,u]}class po extends tt{constructor(e){super(),et(this,e,Ya,Ga,Qe,{title:0})}}function Xa(r){let e,t,n,u,p,m,i;t=new po({props:{title:r[0]}}),t.$on("click",r[3]);const l=r[6].default,h=oo(l,r,r[5],null);return{c(){e=we("div"),De(t.$$.fragment),n=je(),u=we("div"),h&&h.c(),_e(u,"class","program-content svelte-wavsic"),_e(e,"class","program svelte-wavsic")},m(b,f){xe(b,e,f),ke(t,e,null),be(e,n),be(e,u),h&&h.m(u,null),r[8](e),p=!0,m||(i=[Tt(e,"mousedown",r[2]),Tt(e,"resize",r[7]),uo(_o.call(null,e,{handle:".header",bounds:"#icons"}))],m=!0)},p(b,[f]){const y={};f&1&&(y.title=b[0]),t.$set(y),h&&h.p&&(!p||f&32)&&co(h,l,b,b[5],p?lo(l,b[5],f,null):ho(b[5]),null)},i(b){p||(Te(t.$$.fragment,b),Te(h,b),p=!0)},o(b){Oe(t.$$.fragment,b),Oe(h,b),p=!1},d(b){b&&Ie(e),Le(t),h&&h.d(b),r[8](null),m=!1,Nt(i)}}}function ln(){for(const r of document.getElementsByClassName("program")){const e=r;e.style.zIndex="1",e.getElementsByClassName("header")[0].style.backgroundColor="#747c94"}}function Ja(r,e,t){let{$$slots:n={},$$scope:u}=e,{name:p="Window Title"}=e,{index:m=1}=e,i;Dt(()=>{i&&(t(1,i.style.zIndex=`${m}`,i),t(1,i.style.top=`${(i.parentElement.clientHeight-320)/2}px`,i),t(1,i.style.left=`${(i.parentElement.clientWidth-450)/2}px`,i),ln(),i.getElementsByClassName("header")[0].style.backgroundColor="#1f3b9a")});function l(){ln(),t(1,i.style.zIndex=`${m+1}`,i),i.getElementsByClassName("header")[0].style.backgroundColor="#1f3b9a"}function h(){i.remove()}function b(y){Cn.call(this,r,y)}function f(y){it[y?"unshift":"push"](()=>{i=y,t(1,i)})}return r.$$set=y=>{"name"in y&&t(0,p=y.name),"index"in y&&t(4,m=y.index),"$$scope"in y&&t(5,u=y.$$scope)},[p,i,l,h,m,u,n,b,f]}class at extends tt{constructor(e){super(),et(this,e,Ja,Xa,Qe,{name:0,index:4})}}function qn(r){let e,t,n,u,p;return{c(){e=we("div"),t=we("div"),n=je(),u=we("div"),p=At(r[2]),_e(t,"class","icon svelte-1jte0y8"),_e(u,"class","message"),_e(e,"class","alert svelte-1jte0y8")},m(m,i){xe(m,e,i),be(e,t),r[11](t),be(e,n),be(e,u),be(u,p)},p(m,i){i&4&&vr(p,m[2])},d(m){m&&Ie(e),r[11](null)}}}function Za(r){let e,t,n,u,p,m,i,l;n=new po({props:{title:r[1]}}),n.$on("click",r[6]);let h=r[0]==="alert"&&qn(r);return{c(){e=we("div"),t=we("div"),De(n.$$.fragment),u=je(),p=we("div"),h&&h.c(),_e(p,"class","dialog-content svelte-1jte0y8"),_e(t,"class","dialog svelte-1jte0y8"),_e(e,"id","dialog-overlay"),_e(e,"class","svelte-1jte0y8")},m(b,f){xe(b,e,f),be(e,t),ke(n,t,null),be(t,u),be(t,p),h&&h.m(p,null),r[12](t),r[13](e),m=!0,i||(l=[uo(_o.call(null,t,{handle:".header",bounds:"#icons"})),Tt(e,"click",Fa(r[7]))],i=!0)},p(b,[f]){const y={};f&2&&(y.title=b[1]),n.$set(y),b[0]==="alert"?h?h.p(b,f):(h=qn(b),h.c(),h.m(p,null)):h&&(h.d(1),h=null)},i(b){m||(Te(n.$$.fragment,b),m=!0)},o(b){Oe(n.$$.fragment,b),m=!1},d(b){b&&Ie(e),Le(n),h&&h.d(),r[12](null),r[13](null),i=!1,Nt(l)}}}function Qa(r,e,t){let{type:n="alert"}=e,{action_type:u="info"}=e,{input_type:p="text"}=e,{title:m="Dialog"}=e,{message:i=""}=e,{randomPos:l=!1}=e,h,b,f,y,C={info:"https://win98icons.alexmeub.com/icons/png/msg_information-0.png",warning:"https://win98icons.alexmeub.com/icons/png/msg_warning-0.png",error:"https://win98icons.alexmeub.com/icons/png/msg_error-0.png",confirm:"https://win98icons.alexmeub.com/icons/png/msg_question-0.png",success:"https://win98icons.alexmeub.com/icons/png/check-0.png"};Dt(()=>{t(4,b.style.backgroundImage=`url("${C[u]}")`,b),l&&(t(5,f.style.left=`${Math.random()*(h.clientWidth-300-0)+0}px`,f),t(5,f.style.top=`${Math.random()*(h.clientHeight-200-0)+0}px`,f)),y=f.getAnimations()[0],y.finish(),ln()});function w(){h.remove()}function S(c){c.target===h&&y.play()}function a(c){it[c?"unshift":"push"](()=>{b=c,t(4,b)})}function s(c){it[c?"unshift":"push"](()=>{f=c,t(5,f)})}function o(c){it[c?"unshift":"push"](()=>{h=c,t(3,h)})}return r.$$set=c=>{"type"in c&&t(0,n=c.type),"action_type"in c&&t(8,u=c.action_type),"input_type"in c&&t(9,p=c.input_type),"title"in c&&t(1,m=c.title),"message"in c&&t(2,i=c.message),"randomPos"in c&&t(10,l=c.randomPos)},[n,m,i,h,b,f,w,S,u,p,l,a,s,o]}class go extends tt{constructor(e){super(),et(this,e,Qa,Za,Qe,{type:0,action_type:8,input_type:9,title:1,message:2,randomPos:10})}}function el(r){let e,t,n,u,p,m,i;return{c(){e=we("div"),t=we("span"),n=je(),u=we("div"),p=At(r[0]),_e(t,"class","logo svelte-19mtfhv"),_e(u,"class","name svelte-19mtfhv"),_e(e,"class","desktop-icon svelte-19mtfhv"),_e(e,"draggable","true"),_e(e,"title",r[0])},m(l,h){xe(l,e,h),be(e,t),r[6](t),be(e,n),be(e,u),be(u,p),m||(i=Tt(e,"click",r[7]),m=!0)},p(l,[h]){h&1&&vr(p,l[0]),h&1&&_e(e,"title",l[0])},i:$e,o:$e,d(l){l&&Ie(e),r[6](null),m=!1,i()}}}function tl(r,e,t){let{name:n="Program Icon"}=e,{icon:u="https://win98icons.alexmeub.com/icons/png/executable-0.png"}=e,{program:p}=e,{error:m=!1}=e,i,l;Dt(()=>{t(1,i.style.backgroundImage=`url('${u}')`,i),l=document.getElementById("icons")});let h=1;function b(C){if(m){new go({target:l,props:{action_type:"error",title:"Error opening program",message:`The program "${C}" cannot be found.`}});return}new p({target:l,props:{name:C,index:h++}})}function f(C){it[C?"unshift":"push"](()=>{i=C,t(1,i)})}const y=()=>{b(n)};return r.$$set=C=>{"name"in C&&t(0,n=C.name),"icon"in C&&t(3,u=C.icon),"program"in C&&t(4,p=C.program),"error"in C&&t(5,m=C.error)},[n,i,b,u,p,m,f,y]}class ft extends tt{constructor(e){super(),et(this,e,tl,el,Qe,{name:0,icon:3,program:4,error:5})}}function rl(r){let e,t,n,u,p,m;return{c(){e=we("button"),t=we("span"),n=At(`Start\r
    `),u=we("div"),u.innerHTML='<div class="menu-item svelte-g2todd">Help</div> <div class="menu-item svelte-g2todd">Shut Down...</div>',_e(t,"class","logo svelte-g2todd"),_e(u,"id","start-menu"),_e(u,"class","svelte-g2todd"),_e(e,"id","start-button"),_e(e,"class","svelte-g2todd")},m(i,l){xe(i,e,l),be(e,t),r[6](t),be(e,n),be(e,u),r[7](u),r[8](e),p||(m=[Tt(window,"click",r[5]),Tt(e,"click",r[3])],p=!0)},p:$e,i:$e,o:$e,d(i){i&&Ie(e),r[6](null),r[7](null),r[8](null),p=!1,Nt(m)}}}let il="https://assets.codepen.io/345377/start.png";function nl(r,e,t){let n=null,u=null,p=null;Dt(()=>{u&&t(1,u.style.backgroundImage=`url('${il}')`,u)});function m(){p&&t(2,p.style.visibility=p.style.visibility==="visible"?"hidden":"visible",p)}function i(){p&&t(2,p.style.visibility="hidden",p)}const l=y=>{y.target!==n&&i()};function h(y){it[y?"unshift":"push"](()=>{u=y,t(1,u)})}function b(y){it[y?"unshift":"push"](()=>{p=y,t(2,p)})}function f(y){it[y?"unshift":"push"](()=>{n=y,t(0,n)})}return[n,u,p,m,i,l,h,b,f]}class sl extends tt{constructor(e){super(),et(this,e,nl,rl,Qe,{})}}function ol(r){let e,t,n;return t=new sl({}),{c(){e=we("div"),De(t.$$.fragment),_e(e,"id","taskbar"),_e(e,"class","svelte-tux838")},m(u,p){xe(u,e,p),ke(t,e,null),r[2](e),n=!0},p:$e,i(u){n||(Te(t.$$.fragment,u),n=!0)},o(u){Oe(t.$$.fragment,u),n=!1},d(u){u&&Ie(e),Le(t),r[2](null)}}}function al(r,e,t){let{alignment:n="left"}=e,u=null;Dt(()=>{if(u)switch(n){case"left":t(0,u.style.height="100%",u),t(0,u.style.width="44px",u),t(0,u.style.alignSelf="flex-start",u);break;case"top":t(0,u.style.width="100%",u),t(0,u.style.height="44px",u),t(0,u.style.alignSelf="flex-start",u);break;case"bottom":t(0,u.style.width="100%",u),t(0,u.style.height="44px",u),t(0,u.style.alignSelf="flex-end",u);break}});function p(m){it[m?"unshift":"push"](()=>{u=m,t(0,u)})}return r.$$set=m=>{"alignment"in m&&t(1,n=m.alignment)},[u,n,p]}class ll extends tt{constructor(e){super(),et(this,e,al,ol,Qe,{alignment:1})}}function cl(r){let e,t,n,u;return{c(){e=we("button"),t=At(r[0]),_e(e,"class","button svelte-1dpuff4")},m(p,m){xe(p,e,m),be(e,t),r[6](e),n||(u=Tt(e,"click",r[5]),n=!0)},p(p,[m]){m&1&&vr(t,p[0])},i:$e,o:$e,d(p){p&&Ie(e),r[6](null),n=!1,u()}}}function hl(r,e,t){let{width:n=""}=e,{height:u=""}=e,{label:p="Button"}=e,{direction:m="center"}=e,i;Dt(()=>{t(1,i.style.height=u,i),t(1,i.style.width=n,i),t(1,i.style.alignSelf=m,i)});function l(b){Cn.call(this,r,b)}function h(b){it[b?"unshift":"push"](()=>{i=b,t(1,i)})}return r.$$set=b=>{"width"in b&&t(2,n=b.width),"height"in b&&t(3,u=b.height),"label"in b&&t(0,p=b.label),"direction"in b&&t(4,m=b.direction)},[p,i,n,u,m,l,h]}class cn extends tt{constructor(e){super(),et(this,e,hl,cl,Qe,{width:2,height:3,label:0,direction:4})}}function ul(r){let e,t,n;const u=r[6].default,p=oo(u,r,r[5],null);return{c(){e=we("div"),p&&p.c(),_e(e,"class",t="container "+r[0]+" svelte-y3o6ka")},m(m,i){xe(m,e,i),p&&p.m(e,null),r[7](e),n=!0},p(m,[i]){p&&p.p&&(!n||i&32)&&co(p,u,m,m[5],n?lo(u,m[5],i,null):ho(m[5]),null),(!n||i&1&&t!==(t="container "+m[0]+" svelte-y3o6ka"))&&_e(e,"class",t)},i(m){n||(Te(p,m),n=!0)},o(m){Oe(p,m),n=!1},d(m){m&&Ie(e),p&&p.d(m),r[7](null)}}}function fl(r,e,t){let{$$slots:n={},$$scope:u}=e,{width:p="100%"}=e,{height:m="200px"}=e,{_class:i=""}=e,{inset:l=!0}=e,h;Dt(()=>{t(1,h.style.width=p,h),t(1,h.style.height=m,h),l&&t(1,h.style.boxShadow="inset -1.5px -1.5px 0 0 #fcfcfc, inset 1.5px 1.5px 0 0 #a099a1",h)});function b(f){it[f?"unshift":"push"](()=>{h=f,t(1,h)})}return r.$$set=f=>{"width"in f&&t(2,p=f.width),"height"in f&&t(3,m=f.height),"_class"in f&&t(0,i=f._class),"inset"in f&&t(4,l=f.inset),"$$scope"in f&&t(5,u=f.$$scope)},[i,h,p,m,l,u,n,b]}class yr extends tt{constructor(e){super(),et(this,e,fl,ul,Qe,{width:2,height:3,_class:0,inset:4})}}function dl(r){let e;return{c(){e=we("div"),e.innerHTML='<h3 class="svelte-krh3sy">About</h3> <p class="svelte-krh3sy">A fake OS styled as Windows 95 using web dev magic (Svelte, TypeScript and CSS basically)</p> <h3 class="svelte-krh3sy">Features</h3> <ul class="svelte-krh3sy"><li class="svelte-krh3sy">Working windows -- well some anyways</li> <li class="svelte-krh3sy">Working terminal</li> <li class="svelte-krh3sy">An easter egg just because</li> <li class="svelte-krh3sy">Virtual filesystem</li> <li class="svelte-krh3sy">More to come...</li></ul> <h3 class="svelte-krh3sy">Changelog</h3> <h4 class="svelte-krh3sy">0.1</h4> <ul class="svelte-krh3sy"><li class="svelte-krh3sy">Initial deployment</li></ul> <h4 class="svelte-krh3sy">0.2</h4> <ul class="svelte-krh3sy"><li class="svelte-krh3sy">Added a basic virtual filesystem. Just supports directories for now</li> <li class="svelte-krh3sy">Added terminal commands to navigate filesystem. Namely dir, mkdir, rmdir</li> <li class="svelte-krh3sy">Added actual info to welcome window</li></ul> <h3 class="svelte-krh3sy">Links</h3> <p class="svelte-krh3sy"><a href="https://github.com/mellobacon/mello_os">GitHub</a></p>',_e(e,"class","info svelte-krh3sy")},m(t,n){xe(t,e,n)},p:$e,d(t){t&&Ie(e)}}}function _l(r){let e,t,n,u,p,m,i;return u=new yr({props:{height:"180px",$$slots:{default:[dl]},$$scope:{ctx:r}}}),m=new cn({props:{width:"120px",direction:"flex-end",label:"Close"}}),m.$on("click",r[3]),{c(){e=we("div"),t=we("h2"),t.textContent="Welcome to Mello OS",n=je(),De(u.$$.fragment),p=je(),De(m.$$.fragment),_e(t,"class","svelte-krh3sy"),_e(e,"class","welcome svelte-krh3sy")},m(l,h){xe(l,e,h),be(e,t),be(e,n),ke(u,e,null),be(e,p),ke(m,e,null),i=!0},p(l,h){const b={};h&32&&(b.$$scope={dirty:h,ctx:l}),u.$set(b)},i(l){i||(Te(u.$$.fragment,l),Te(m.$$.fragment,l),i=!0)},o(l){Oe(u.$$.fragment,l),Oe(m.$$.fragment,l),i=!1},d(l){l&&Ie(e),Le(u),Le(m)}}}function pl(r){let e,t,n={name:r[1],index:r[0],$$slots:{default:[_l]},$$scope:{ctx:r}};return e=new at({props:n}),r[4](e),{c(){De(e.$$.fragment)},m(u,p){ke(e,u,p),t=!0},p(u,[p]){const m={};p&2&&(m.name=u[1]),p&1&&(m.index=u[0]),p&32&&(m.$$scope={dirty:p,ctx:u}),e.$set(m)},i(u){t||(Te(e.$$.fragment,u),t=!0)},o(u){Oe(e.$$.fragment,u),t=!1},d(u){r[4](null),Le(e,u)}}}function gl(r,e,t){let{index:n}=e,{name:u}=e,p;function m(){p.$destroy()}function i(l){it[l?"unshift":"push"](()=>{p=l,t(2,p)})}return r.$$set=l=>{"index"in l&&t(0,n=l.index),"name"in l&&t(1,u=l.name)},[n,u,p,m,i]}class ml extends tt{constructor(e){super(),et(this,e,gl,pl,Qe,{index:0,name:1})}}function vl(r){let e;return{c(){e=we("textarea"),_e(e,"autocomplete","off"),_e(e,"spellcheck","false"),_e(e,"class","svelte-4g3yux")},m(t,n){xe(t,e,n)},p:$e,d(t){t&&Ie(e)}}}function yl(r){let e,t,n;return t=new yr({props:{height:"100%",_class:"notepad-container",$$slots:{default:[vl]},$$scope:{ctx:r}}}),{c(){e=we("div"),De(t.$$.fragment),_e(e,"class","notepad svelte-4g3yux")},m(u,p){xe(u,e,p),ke(t,e,null),n=!0},p(u,p){const m={};p&4&&(m.$$scope={dirty:p,ctx:u}),t.$set(m)},i(u){n||(Te(t.$$.fragment,u),n=!0)},o(u){Oe(t.$$.fragment,u),n=!1},d(u){u&&Ie(e),Le(t)}}}function bl(r){let e,t;return e=new at({props:{name:r[1],index:r[0],$$slots:{default:[yl]},$$scope:{ctx:r}}}),{c(){De(e.$$.fragment)},m(n,u){ke(e,n,u),t=!0},p(n,[u]){const p={};u&2&&(p.name=n[1]),u&1&&(p.index=n[0]),u&4&&(p.$$scope={dirty:u,ctx:n}),e.$set(p)},i(n){t||(Te(e.$$.fragment,n),t=!0)},o(n){Oe(e.$$.fragment,n),t=!1},d(n){Le(e,n)}}}function Sl(r,e,t){let{index:n}=e,{name:u}=e;return r.$$set=p=>{"index"in p&&t(0,n=p.index),"name"in p&&t(1,u=p.name)},[n,u]}class wl extends tt{constructor(e){super(),et(this,e,Sl,bl,Qe,{index:0,name:1})}}function El(r){let e,t,n,u,p;return{c(){e=we("label"),t=At(r[0]),n=At(":"),u=je(),p=we("input"),_e(e,"for","input"),_e(p,"class","input svelte-k5iely"),_e(p,"type",r[1]),Or(p,"height",r[3]),Or(p,"width",r[2])},m(m,i){xe(m,e,i),be(e,t),be(e,n),xe(m,u,i),xe(m,p,i)},p(m,[i]){i&1&&vr(t,m[0]),i&2&&_e(p,"type",m[1]),i&8&&Or(p,"height",m[3]),i&4&&Or(p,"width",m[2])},i:$e,o:$e,d(m){m&&(Ie(e),Ie(u),Ie(p))}}}function Cl(r,e,t){let{label:n="Input"}=e,{type:u="text"}=e,{width:p=""}=e,{height:m=""}=e;return r.$$set=i=>{"label"in i&&t(0,n=i.label),"type"in i&&t(1,u=i.type),"width"in i&&t(2,p=i.width),"height"in i&&t(3,m=i.height)},[n,u,p,m]}class zn extends tt{constructor(e){super(),et(this,e,Cl,El,Qe,{label:0,type:1,width:2,height:3})}}function Rl(r){let e,t,n,u,p,m,i;return{c(){e=we("h2"),e.textContent="Funds: $1000",t=je(),n=we("h3"),n.textContent="Income: $2/hr",u=je(),p=we("h3"),p.textContent="Expenses: $50.700/month",m=je(),i=we("h3"),i.textContent="Budget: $20.84 over",_e(e,"class","svelte-1eqswdx"),_e(n,"class","svelte-1eqswdx"),_e(p,"class","svelte-1eqswdx"),_e(i,"class","svelte-1eqswdx")},m(l,h){xe(l,e,h),xe(l,t,h),xe(l,n,h),xe(l,u,h),xe(l,p,h),xe(l,m,h),xe(l,i,h)},p:$e,d(l){l&&(Ie(e),Ie(t),Ie(n),Ie(u),Ie(p),Ie(m),Ie(i))}}}function Al(r){let e,t,n,u,p,m,i,l,h,b,f,y;return t=new yr({props:{height:"100%",width:"300px",_class:"wallet-container",$$slots:{default:[Rl]},$$scope:{ctx:r}}}),p=new zn({props:{label:"Deposit",width:"100%"}}),i=new cn({props:{label:"Transfer"}}),h=new zn({props:{label:"Withdraw",width:"100%"}}),f=new cn({props:{label:"Transfer"}}),{c(){e=we("div"),De(t.$$.fragment),n=je(),u=we("div"),De(p.$$.fragment),m=je(),De(i.$$.fragment),l=je(),De(h.$$.fragment),b=je(),De(f.$$.fragment),_e(u,"class","buttons svelte-1eqswdx"),_e(e,"class","wallet svelte-1eqswdx")},m(C,w){xe(C,e,w),ke(t,e,null),be(e,n),be(e,u),ke(p,u,null),be(u,m),ke(i,u,null),be(u,l),ke(h,u,null),be(u,b),ke(f,u,null),y=!0},p(C,w){const S={};w&4&&(S.$$scope={dirty:w,ctx:C}),t.$set(S)},i(C){y||(Te(t.$$.fragment,C),Te(p.$$.fragment,C),Te(i.$$.fragment,C),Te(h.$$.fragment,C),Te(f.$$.fragment,C),y=!0)},o(C){Oe(t.$$.fragment,C),Oe(p.$$.fragment,C),Oe(i.$$.fragment,C),Oe(h.$$.fragment,C),Oe(f.$$.fragment,C),y=!1},d(C){C&&Ie(e),Le(t),Le(p),Le(i),Le(h),Le(f)}}}function Tl(r){let e,t;return e=new at({props:{name:r[1],index:r[0],$$slots:{default:[Al]},$$scope:{ctx:r}}}),{c(){De(e.$$.fragment)},m(n,u){ke(e,n,u),t=!0},p(n,[u]){const p={};u&2&&(p.name=n[1]),u&1&&(p.index=n[0]),u&4&&(p.$$scope={dirty:u,ctx:n}),e.$set(p)},i(n){t||(Te(e.$$.fragment,n),t=!0)},o(n){Oe(e.$$.fragment,n),t=!1},d(n){Le(e,n)}}}function Ol(r,e,t){let{index:n}=e,{name:u}=e;return r.$$set=p=>{"index"in p&&t(0,n=p.index),"name"in p&&t(1,u=p.name)},[n,u]}class kl extends tt{constructor(e){super(),et(this,e,Ol,Tl,Qe,{index:0,name:1})}}var Ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mo(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Ll(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(n){var u=Object.getOwnPropertyDescriptor(r,n);Object.defineProperty(t,n,u.get?u:{enumerable:!0,get:function(){return r[n]}})}),t}var vo={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,()=>(()=>{var t={4567:function(m,i,l){var h=this&&this.__decorate||function(c,d,_,E){var k,v=arguments.length,O=v<3?d:E===null?E=Object.getOwnPropertyDescriptor(d,_):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(c,d,_,E);else for(var M=c.length-1;M>=0;M--)(k=c[M])&&(O=(v<3?k(O):v>3?k(d,_,O):k(d,_))||O);return v>3&&O&&Object.defineProperty(d,_,O),O},b=this&&this.__param||function(c,d){return function(_,E){d(_,E,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.AccessibilityManager=void 0;const f=l(9042),y=l(6114),C=l(9924),w=l(844),S=l(5596),a=l(4725),s=l(3656);let o=i.AccessibilityManager=class extends w.Disposable{constructor(c,d){super(),this._terminal=c,this._renderService=d,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let _=0;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);if(this._topBoundaryFocusListener=_=>this._handleBoundaryFocus(_,0),this._bottomBoundaryFocusListener=_=>this._handleBoundaryFocus(_,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new C.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(_=>this._handleResize(_.rows))),this.register(this._terminal.onRender(_=>this._refreshRows(_.start,_.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(_=>this._handleChar(_))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(_=>this._handleTab(_))),this.register(this._terminal.onKey(_=>this._handleKey(_.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new S.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,s.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(c){for(let d=0;d<c;d++)this._handleChar(" ")}_handleChar(c){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==c&&(this._charsToAnnounce+=c):this._charsToAnnounce+=c,c===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),y.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,y.isMac&&this._liveRegion.remove()}_handleKey(c){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(c)||this._charsToConsume.push(c)}_refreshRows(c,d){this._liveRegionDebouncer.refresh(c,d,this._terminal.rows)}_renderRows(c,d){const _=this._terminal.buffer,E=_.lines.length.toString();for(let k=c;k<=d;k++){const v=_.translateBufferLineToString(_.ydisp+k,!0),O=(_.ydisp+k+1).toString(),M=this._rowElements[k];M&&(v.length===0?M.innerText=" ":M.textContent=v,M.setAttribute("aria-posinset",O),M.setAttribute("aria-setsize",E))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(c,d){const _=c.target,E=this._rowElements[d===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(d===0?"1":`${this._terminal.buffer.lines.length}`)||c.relatedTarget!==E)return;let k,v;if(d===0?(k=_,v=this._rowElements.pop(),this._rowContainer.removeChild(v)):(k=this._rowElements.shift(),v=_,this._rowContainer.removeChild(k)),k.removeEventListener("focus",this._topBoundaryFocusListener),v.removeEventListener("focus",this._bottomBoundaryFocusListener),d===0){const O=this._createAccessibilityTreeNode();this._rowElements.unshift(O),this._rowContainer.insertAdjacentElement("afterbegin",O)}else{const O=this._createAccessibilityTreeNode();this._rowElements.push(O),this._rowContainer.appendChild(O)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(d===0?-1:1),this._rowElements[d===0?1:this._rowElements.length-2].focus(),c.preventDefault(),c.stopImmediatePropagation()}_handleResize(c){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let d=this._rowContainer.children.length;d<this._terminal.rows;d++)this._rowElements[d]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[d]);for(;this._rowElements.length>c;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const c=document.createElement("div");return c.setAttribute("role","listitem"),c.tabIndex=-1,this._refreshRowDimensions(c),c}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let c=0;c<this._terminal.rows;c++)this._refreshRowDimensions(this._rowElements[c])}}_refreshRowDimensions(c){c.style.height=`${this._renderService.dimensions.css.cell.height}px`}};i.AccessibilityManager=o=h([b(1,a.IRenderService)],o)},3614:(m,i)=>{function l(y){return y.replace(/\r?\n/g,"\r")}function h(y,C){return C?"\x1B[200~"+y+"\x1B[201~":y}function b(y,C,w,S){y=h(y=l(y),w.decPrivateModes.bracketedPasteMode&&S.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(y,!0),C.value=""}function f(y,C,w){const S=w.getBoundingClientRect(),a=y.clientX-S.left-10,s=y.clientY-S.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${a}px`,C.style.top=`${s}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(i,"__esModule",{value:!0}),i.rightClickHandler=i.moveTextAreaUnderMouseCursor=i.paste=i.handlePasteEvent=i.copyHandler=i.bracketTextForPaste=i.prepareTextForTerminal=void 0,i.prepareTextForTerminal=l,i.bracketTextForPaste=h,i.copyHandler=function(y,C){y.clipboardData&&y.clipboardData.setData("text/plain",C.selectionText),y.preventDefault()},i.handlePasteEvent=function(y,C,w,S){y.stopPropagation(),y.clipboardData&&b(y.clipboardData.getData("text/plain"),C,w,S)},i.paste=b,i.moveTextAreaUnderMouseCursor=f,i.rightClickHandler=function(y,C,w,S,a){f(y,C,w),a&&S.rightClickSelect(y),C.value=S.selectionText,C.select()}},7239:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorContrastCache=void 0;const h=l(1505);i.ColorContrastCache=class{constructor(){this._color=new h.TwoKeyMap,this._css=new h.TwoKeyMap}setCss(b,f,y){this._css.set(b,f,y)}getCss(b,f){return this._css.get(b,f)}setColor(b,f,y){this._color.set(b,f,y)}getColor(b,f){return this._color.get(b,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.addDisposableDomListener=void 0,i.addDisposableDomListener=function(l,h,b,f){l.addEventListener(h,b,f);let y=!1;return{dispose:()=>{y||(y=!0,l.removeEventListener(h,b,f))}}}},6465:function(m,i,l){var h=this&&this.__decorate||function(a,s,o,c){var d,_=arguments.length,E=_<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,s,o,c);else for(var k=a.length-1;k>=0;k--)(d=a[k])&&(E=(_<3?d(E):_>3?d(s,o,E):d(s,o))||E);return _>3&&E&&Object.defineProperty(s,o,E),E},b=this&&this.__param||function(a,s){return function(o,c){s(o,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Linkifier2=void 0;const f=l(3656),y=l(8460),C=l(844),w=l(2585);let S=i.Linkifier2=class extends C.Disposable{get currentLink(){return this._currentLink}constructor(a){super(),this._bufferService=a,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new y.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new y.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(a){return this._linkProviders.push(a),{dispose:()=>{const s=this._linkProviders.indexOf(a);s!==-1&&this._linkProviders.splice(s,1)}}}attachToDom(a,s,o){this._element=a,this._mouseService=s,this._renderService=o,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(a){if(this._lastMouseEvent=a,!this._element||!this._mouseService)return;const s=this._positionFromMouseEvent(a,this._element,this._mouseService);if(!s)return;this._isMouseOut=!1;const o=a.composedPath();for(let c=0;c<o.length;c++){const d=o[c];if(d.classList.contains("xterm"))break;if(d.classList.contains("xterm-hover"))return}this._lastBufferCell&&s.x===this._lastBufferCell.x&&s.y===this._lastBufferCell.y||(this._handleHover(s),this._lastBufferCell=s)}_handleHover(a){if(this._activeLine!==a.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(a,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,a)||(this._clearCurrentLink(),this._askForLink(a,!0))}_askForLink(a,s){var o,c;this._activeProviderReplies&&s||((o=this._activeProviderReplies)===null||o===void 0||o.forEach(_=>{_==null||_.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=a.y);let d=!1;for(const[_,E]of this._linkProviders.entries())s?!((c=this._activeProviderReplies)===null||c===void 0)&&c.get(_)&&(d=this._checkLinkProviderResult(_,a,d)):E.provideLinks(a.y,k=>{var v,O;if(this._isMouseOut)return;const M=k==null?void 0:k.map($=>({link:$}));(v=this._activeProviderReplies)===null||v===void 0||v.set(_,M),d=this._checkLinkProviderResult(_,a,d),((O=this._activeProviderReplies)===null||O===void 0?void 0:O.size)===this._linkProviders.length&&this._removeIntersectingLinks(a.y,this._activeProviderReplies)})}_removeIntersectingLinks(a,s){const o=new Set;for(let c=0;c<s.size;c++){const d=s.get(c);if(d)for(let _=0;_<d.length;_++){const E=d[_],k=E.link.range.start.y<a?0:E.link.range.start.x,v=E.link.range.end.y>a?this._bufferService.cols:E.link.range.end.x;for(let O=k;O<=v;O++){if(o.has(O)){d.splice(_--,1);break}o.add(O)}}}}_checkLinkProviderResult(a,s,o){var c;if(!this._activeProviderReplies)return o;const d=this._activeProviderReplies.get(a);let _=!1;for(let E=0;E<a;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(_=!0);if(!_&&d){const E=d.find(k=>this._linkAtPosition(k.link,s));E&&(o=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviders.length&&!o)for(let E=0;E<this._activeProviderReplies.size;E++){const k=(c=this._activeProviderReplies.get(E))===null||c===void 0?void 0:c.find(v=>this._linkAtPosition(v.link,s));if(k){o=!0,this._handleNewLink(k);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(a){if(!this._element||!this._mouseService||!this._currentLink)return;const s=this._positionFromMouseEvent(a,this._element,this._mouseService);s&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,s)&&this._currentLink.link.activate(a,this._currentLink.link.text)}_clearCurrentLink(a,s){this._element&&this._currentLink&&this._lastMouseEvent&&(!a||!s||this._currentLink.link.range.start.y>=a&&this._currentLink.link.range.end.y<=s)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(a){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(a.link,s)&&(this._currentLink=a,this._currentLink.state={decorations:{underline:a.link.decorations===void 0||a.link.decorations.underline,pointerCursor:a.link.decorations===void 0||a.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,a.link,this._lastMouseEvent),a.link.decorations={},Object.defineProperties(a.link.decorations,{pointerCursor:{get:()=>{var o,c;return(c=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||c===void 0?void 0:c.decorations.pointerCursor},set:o=>{var c,d;!((c=this._currentLink)===null||c===void 0)&&c.state&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&((d=this._element)===null||d===void 0||d.classList.toggle("xterm-cursor-pointer",o)))}},underline:{get:()=>{var o,c;return(c=(o=this._currentLink)===null||o===void 0?void 0:o.state)===null||c===void 0?void 0:c.decorations.underline},set:o=>{var c,d,_;!((c=this._currentLink)===null||c===void 0)&&c.state&&((_=(d=this._currentLink)===null||d===void 0?void 0:d.state)===null||_===void 0?void 0:_.decorations.underline)!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(a.link,o))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(o=>{if(!this._currentLink)return;const c=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,d=this._bufferService.buffer.ydisp+1+o.end;if(this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=d&&(this._clearCurrentLink(c,d),this._lastMouseEvent&&this._element)){const _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._askForLink(_,!1)}})))}_linkHover(a,s,o){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!0),this._currentLink.state.decorations.pointerCursor&&a.classList.add("xterm-cursor-pointer")),s.hover&&s.hover(o,s.text)}_fireUnderlineEvent(a,s){const o=a.range,c=this._bufferService.buffer.ydisp,d=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-c-1,o.end.x,o.end.y-c-1,void 0);(s?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(d)}_linkLeave(a,s,o){var c;!((c=this._currentLink)===null||c===void 0)&&c.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!1),this._currentLink.state.decorations.pointerCursor&&a.classList.remove("xterm-cursor-pointer")),s.leave&&s.leave(o,s.text)}_linkAtPosition(a,s){const o=a.range.start.y*this._bufferService.cols+a.range.start.x,c=a.range.end.y*this._bufferService.cols+a.range.end.x,d=s.y*this._bufferService.cols+s.x;return o<=d&&d<=c}_positionFromMouseEvent(a,s,o){const c=o.getCoords(a,s,this._bufferService.cols,this._bufferService.rows);if(c)return{x:c[0],y:c[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(a,s,o,c,d){return{x1:a,y1:s,x2:o,y2:c,cols:this._bufferService.cols,fg:d}}};i.Linkifier2=S=h([b(0,w.IBufferService)],S)},9042:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.tooMuchOutput=i.promptLabel=void 0,i.promptLabel="Terminal input",i.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(m,i,l){var h=this&&this.__decorate||function(S,a,s,o){var c,d=arguments.length,_=d<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(S,a,s,o);else for(var E=S.length-1;E>=0;E--)(c=S[E])&&(_=(d<3?c(_):d>3?c(a,s,_):c(a,s))||_);return d>3&&_&&Object.defineProperty(a,s,_),_},b=this&&this.__param||function(S,a){return function(s,o){a(s,o,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkProvider=void 0;const f=l(511),y=l(2585);let C=i.OscLinkProvider=class{constructor(S,a,s){this._bufferService=S,this._optionsService=a,this._oscLinkService=s}provideLinks(S,a){var s;const o=this._bufferService.buffer.lines.get(S-1);if(!o)return void a(void 0);const c=[],d=this._optionsService.rawOptions.linkHandler,_=new f.CellData,E=o.getTrimmedLength();let k=-1,v=-1,O=!1;for(let M=0;M<E;M++)if(v!==-1||o.hasContent(M)){if(o.loadCell(M,_),_.hasExtendedAttrs()&&_.extended.urlId){if(v===-1){v=M,k=_.extended.urlId;continue}O=_.extended.urlId!==k}else v!==-1&&(O=!0);if(O||v!==-1&&M===E-1){const $=(s=this._oscLinkService.getLinkData(k))===null||s===void 0?void 0:s.uri;if($){const L={start:{x:v+1,y:S},end:{x:M+(O||M!==E-1?0:1),y:S}};let q=!1;if(!(d!=null&&d.allowNonHttpProtocols))try{const Z=new URL($);["http:","https:"].includes(Z.protocol)||(q=!0)}catch{q=!0}q||c.push({text:$,range:L,activate:(Z,re)=>d?d.activate(Z,re,L):w(0,re),hover:(Z,re)=>{var ie;return(ie=d==null?void 0:d.hover)===null||ie===void 0?void 0:ie.call(d,Z,re,L)},leave:(Z,re)=>{var ie;return(ie=d==null?void 0:d.leave)===null||ie===void 0?void 0:ie.call(d,Z,re,L)}})}O=!1,_.hasExtendedAttrs()&&_.extended.urlId?(v=M,k=_.extended.urlId):(v=-1,k=-1)}}a(c)}};function w(S,a){if(confirm(`Do you want to navigate to ${a}?

WARNING: This link could potentially be dangerous`)){const s=window.open();if(s){try{s.opener=null}catch{}s.location.href=a}else console.warn("Opening link blocked as opener could not be cleared")}}i.OscLinkProvider=C=h([b(0,y.IBufferService),b(1,y.IOptionsService),b(2,y.IOscLinkService)],C)},6193:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.RenderDebouncer=void 0,i.RenderDebouncer=class{constructor(l,h){this._parentWindow=l,this._renderCallback=h,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(l){return this._refreshCallbacks.push(l),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(l,h,b){this._rowCount=b,l=l!==void 0?l:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const l=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,h),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const l of this._refreshCallbacks)l(0);this._refreshCallbacks=[]}}},5596:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ScreenDprMonitor=void 0;const h=l(844);class b extends h.Disposable{constructor(y){super(),this._parentWindow=y,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,h.toDisposable)(()=>{this.clearListener()}))}setListener(y){this._listener&&this.clearListener(),this._listener=y,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var y;this._outerListener&&((y=this._resolutionMediaMatchList)===null||y===void 0||y.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}i.ScreenDprMonitor=b},3236:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Terminal=void 0;const h=l(3614),b=l(3656),f=l(6465),y=l(9042),C=l(3730),w=l(1680),S=l(3107),a=l(5744),s=l(2950),o=l(1296),c=l(428),d=l(4269),_=l(5114),E=l(8934),k=l(3230),v=l(9312),O=l(4725),M=l(6731),$=l(8055),L=l(8969),q=l(8460),Z=l(844),re=l(6114),ie=l(8437),ne=l(2584),x=l(7399),F=l(5941),P=l(9074),U=l(2585),G=l(5435),H=l(4567),K=typeof window<"u"?window.document:null;class Y extends L.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(g={}){super(g),this.browser=re,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new Z.MutableDisposable),this._onCursorMove=this.register(new q.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new q.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new q.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new q.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new q.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new q.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new q.EventEmitter),this._onBlur=this.register(new q.EventEmitter),this._onA11yCharEmitter=this.register(new q.EventEmitter),this._onA11yTabEmitter=this.register(new q.EventEmitter),this._onWillOpen=this.register(new q.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(f.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(C.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(U.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((A,I)=>this.refresh(A,I))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(A=>this._reportWindowsOptions(A))),this.register(this._inputHandler.onColor(A=>this._handleColorEvent(A))),this.register((0,q.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,q.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,q.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,q.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(A=>this._afterResize(A.cols,A.rows))),this.register((0,Z.toDisposable)(()=>{var A,I;this._customKeyEventHandler=void 0,(I=(A=this.element)===null||A===void 0?void 0:A.parentNode)===null||I===void 0||I.removeChild(this.element)}))}_handleColorEvent(g){if(this._themeService)for(const A of g){let I,j="";switch(A.index){case 256:I="foreground",j="10";break;case 257:I="background",j="11";break;case 258:I="cursor",j="12";break;default:I="ansi",j="4;"+A.index}switch(A.type){case 0:const D=$.color.toColorRGB(I==="ansi"?this._themeService.colors.ansi[A.index]:this._themeService.colors[I]);this.coreService.triggerDataEvent(`${ne.C0.ESC}]${j};${(0,F.toRgbString)(D)}${ne.C1_ESCAPED.ST}`);break;case 1:if(I==="ansi")this._themeService.modifyColors(B=>B.ansi[A.index]=$.rgba.toColor(...A.color));else{const B=I;this._themeService.modifyColors(V=>V[B]=$.rgba.toColor(...A.color))}break;case 2:this._themeService.restoreColor(A.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(g){g?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(H.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(g){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ne.C0.ESC+"[I"),this.updateCursorStyle(g),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var g;return(g=this.textarea)===null||g===void 0?void 0:g.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ne.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const g=this.buffer.ybase+this.buffer.y,A=this.buffer.lines.get(g);if(!A)return;const I=Math.min(this.buffer.x,this.cols-1),j=this._renderService.dimensions.css.cell.height,D=A.getWidth(I),B=this._renderService.dimensions.css.cell.width*D,V=this.buffer.y*this._renderService.dimensions.css.cell.height,ee=I*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ee+"px",this.textarea.style.top=V+"px",this.textarea.style.width=B+"px",this.textarea.style.height=j+"px",this.textarea.style.lineHeight=j+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,b.addDisposableDomListener)(this.element,"copy",A=>{this.hasSelection()&&(0,h.copyHandler)(A,this._selectionService)}));const g=A=>(0,h.handlePasteEvent)(A,this.textarea,this.coreService,this.optionsService);this.register((0,b.addDisposableDomListener)(this.textarea,"paste",g)),this.register((0,b.addDisposableDomListener)(this.element,"paste",g)),re.isFirefox?this.register((0,b.addDisposableDomListener)(this.element,"mousedown",A=>{A.button===2&&(0,h.rightClickHandler)(A,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,b.addDisposableDomListener)(this.element,"contextmenu",A=>{(0,h.rightClickHandler)(A,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),re.isLinux&&this.register((0,b.addDisposableDomListener)(this.element,"auxclick",A=>{A.button===1&&(0,h.moveTextAreaUnderMouseCursor)(A,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,b.addDisposableDomListener)(this.textarea,"keyup",g=>this._keyUp(g),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keydown",g=>this._keyDown(g),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"keypress",g=>this._keyPress(g),!0)),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionupdate",g=>this._compositionHelper.compositionupdate(g))),this.register((0,b.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,b.addDisposableDomListener)(this.textarea,"input",g=>this._inputEvent(g),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(g){var A;if(!g)throw new Error("Terminal requires a parent element.");g.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=g.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),g.appendChild(this.element);const I=K.createDocumentFragment();this._viewportElement=K.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),I.appendChild(this._viewportElement),this._viewportScrollArea=K.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=K.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=K.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),I.appendChild(this.screenElement),this.textarea=K.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",y.promptLabel),re.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(_.CoreBrowserService,this.textarea,(A=this._document.defaultView)!==null&&A!==void 0?A:window),this._instantiationService.setService(O.ICoreBrowserService,this._coreBrowserService),this.register((0,b.addDisposableDomListener)(this.textarea,"focus",j=>this._handleTextAreaFocus(j))),this.register((0,b.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(c.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(O.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(M.ThemeService),this._instantiationService.setService(O.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(d.CharacterJoinerService),this._instantiationService.setService(O.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(O.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(j=>this._onRender.fire(j))),this.onResize(j=>this._renderService.resize(j.cols,j.rows)),this._compositionView=K.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(s.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(I);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(O.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(v.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(O.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(j=>this._renderService.handleSelectionChanged(j.start,j.end,j.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(j=>{this.textarea.value=j,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(j=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,b.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(S.BufferDecorationRenderer,this.screenElement)),this.register((0,b.addDisposableDomListener)(this.element,"mousedown",j=>this._selectionService.handleMouseDown(j))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(H.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",j=>this._handleScreenReaderModeOptionChange(j))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",j=>{!this._overviewRulerRenderer&&j&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(a.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(o.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const g=this,A=this.element;function I(B){const V=g._mouseService.getMouseReportCoords(B,g.screenElement);if(!V)return!1;let ee,le;switch(B.overrideType||B.type){case"mousemove":le=32,B.buttons===void 0?(ee=3,B.button!==void 0&&(ee=B.button<3?B.button:3)):ee=1&B.buttons?0:4&B.buttons?1:2&B.buttons?2:3;break;case"mouseup":le=0,ee=B.button<3?B.button:3;break;case"mousedown":le=1,ee=B.button<3?B.button:3;break;case"wheel":if(g.viewport.getLinesScrolled(B)===0)return!1;le=B.deltaY<0?0:1,ee=4;break;default:return!1}return!(le===void 0||ee===void 0||ee>4)&&g.coreMouseService.triggerMouseEvent({col:V.col,row:V.row,x:V.x,y:V.y,button:ee,action:le,ctrl:B.ctrlKey,alt:B.altKey,shift:B.shiftKey})}const j={mouseup:null,wheel:null,mousedrag:null,mousemove:null},D={mouseup:B=>(I(B),B.buttons||(this._document.removeEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.removeEventListener("mousemove",j.mousedrag)),this.cancel(B)),wheel:B=>(I(B),this.cancel(B,!0)),mousedrag:B=>{B.buttons&&I(B)},mousemove:B=>{B.buttons||I(B)}};this.register(this.coreMouseService.onProtocolChange(B=>{B?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(B)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&B?j.mousemove||(A.addEventListener("mousemove",D.mousemove),j.mousemove=D.mousemove):(A.removeEventListener("mousemove",j.mousemove),j.mousemove=null),16&B?j.wheel||(A.addEventListener("wheel",D.wheel,{passive:!1}),j.wheel=D.wheel):(A.removeEventListener("wheel",j.wheel),j.wheel=null),2&B?j.mouseup||(A.addEventListener("mouseup",D.mouseup),j.mouseup=D.mouseup):(this._document.removeEventListener("mouseup",j.mouseup),A.removeEventListener("mouseup",j.mouseup),j.mouseup=null),4&B?j.mousedrag||(j.mousedrag=D.mousedrag):(this._document.removeEventListener("mousemove",j.mousedrag),j.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,b.addDisposableDomListener)(A,"mousedown",B=>{if(B.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(B))return I(B),j.mouseup&&this._document.addEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.addEventListener("mousemove",j.mousedrag),this.cancel(B)})),this.register((0,b.addDisposableDomListener)(A,"wheel",B=>{if(!j.wheel){if(!this.buffer.hasScrollback){const V=this.viewport.getLinesScrolled(B);if(V===0)return;const ee=ne.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(B.deltaY<0?"A":"B");let le="";for(let ue=0;ue<Math.abs(V);ue++)le+=ee;return this.coreService.triggerDataEvent(le,!0),this.cancel(B,!0)}return this.viewport.handleWheel(B)?this.cancel(B):void 0}},{passive:!1})),this.register((0,b.addDisposableDomListener)(A,"touchstart",B=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(B),this.cancel(B)},{passive:!0})),this.register((0,b.addDisposableDomListener)(A,"touchmove",B=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(B)?void 0:this.cancel(B)},{passive:!1}))}refresh(g,A){var I;(I=this._renderService)===null||I===void 0||I.refreshRows(g,A)}updateCursorStyle(g){var A;!((A=this._selectionService)===null||A===void 0)&&A.shouldColumnSelect(g)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(g,A,I=0){var j;I===1?(super.scrollLines(g,A,I),this.refresh(0,this.rows-1)):(j=this.viewport)===null||j===void 0||j.scrollLines(g)}paste(g){(0,h.paste)(g,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(g){this._customKeyEventHandler=g}registerLinkProvider(g){return this.linkifier2.registerLinkProvider(g)}registerCharacterJoiner(g){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const A=this._characterJoinerService.register(g);return this.refresh(0,this.rows-1),A}deregisterCharacterJoiner(g){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(g)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(g){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+g)}registerDecoration(g){return this._decorationService.registerDecoration(g)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(g,A,I){this._selectionService.setSelection(g,A,I)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var g;(g=this._selectionService)===null||g===void 0||g.clearSelection()}selectAll(){var g;(g=this._selectionService)===null||g===void 0||g.selectAll()}selectLines(g,A){var I;(I=this._selectionService)===null||I===void 0||I.selectLines(g,A)}_keyDown(g){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(g)===!1)return!1;const A=this.browser.isMac&&this.options.macOptionIsMeta&&g.altKey;if(!A&&!this._compositionHelper.keydown(g))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;A||g.key!=="Dead"&&g.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const I=(0,x.evaluateKeyboardEvent)(g,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(g),I.type===3||I.type===2){const j=this.rows-1;return this.scrollLines(I.type===2?-j:j),this.cancel(g,!0)}return I.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,g)||(I.cancel&&this.cancel(g,!0),!I.key||!!(g.key&&!g.ctrlKey&&!g.altKey&&!g.metaKey&&g.key.length===1&&g.key.charCodeAt(0)>=65&&g.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(I.key!==ne.C0.ETX&&I.key!==ne.C0.CR||(this.textarea.value=""),this._onKey.fire({key:I.key,domEvent:g}),this._showCursor(),this.coreService.triggerDataEvent(I.key,!0),!this.optionsService.rawOptions.screenReaderMode||g.altKey||g.ctrlKey?this.cancel(g,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(g,A){const I=g.isMac&&!this.options.macOptionIsMeta&&A.altKey&&!A.ctrlKey&&!A.metaKey||g.isWindows&&A.altKey&&A.ctrlKey&&!A.metaKey||g.isWindows&&A.getModifierState("AltGraph");return A.type==="keypress"?I:I&&(!A.keyCode||A.keyCode>47)}_keyUp(g){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(g)===!1||(function(A){return A.keyCode===16||A.keyCode===17||A.keyCode===18}(g)||this.focus(),this.updateCursorStyle(g),this._keyPressHandled=!1)}_keyPress(g){let A;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(g)===!1)return!1;if(this.cancel(g),g.charCode)A=g.charCode;else if(g.which===null||g.which===void 0)A=g.keyCode;else{if(g.which===0||g.charCode===0)return!1;A=g.which}return!(!A||(g.altKey||g.ctrlKey||g.metaKey)&&!this._isThirdLevelShift(this.browser,g)||(A=String.fromCharCode(A),this._onKey.fire({key:A,domEvent:g}),this._showCursor(),this.coreService.triggerDataEvent(A,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(g){if(g.data&&g.inputType==="insertText"&&(!g.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const A=g.data;return this.coreService.triggerDataEvent(A,!0),this.cancel(g),!0}return!1}resize(g,A){g!==this.cols||A!==this.rows?super.resize(g,A):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(g,A){var I,j;(I=this._charSizeService)===null||I===void 0||I.measure(),(j=this.viewport)===null||j===void 0||j.syncScrollArea(!0)}clear(){var g;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let A=1;A<this.rows;A++)this.buffer.lines.push(this.buffer.getBlankLine(ie.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(g=this.viewport)===null||g===void 0||g.reset(),this.refresh(0,this.rows-1)}}reset(){var g,A;this.options.rows=this.rows,this.options.cols=this.cols;const I=this._customKeyEventHandler;this._setup(),super.reset(),(g=this._selectionService)===null||g===void 0||g.reset(),this._decorationService.reset(),(A=this.viewport)===null||A===void 0||A.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1)}clearTextureAtlas(){var g;(g=this._renderService)===null||g===void 0||g.clearTextureAtlas()}_reportFocus(){var g;!((g=this.element)===null||g===void 0)&&g.classList.contains("focus")?this.coreService.triggerDataEvent(ne.C0.ESC+"[I"):this.coreService.triggerDataEvent(ne.C0.ESC+"[O")}_reportWindowsOptions(g){if(this._renderService)switch(g){case G.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const A=this._renderService.dimensions.css.canvas.width.toFixed(0),I=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ne.C0.ESC}[4;${I};${A}t`);break;case G.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const j=this._renderService.dimensions.css.cell.width.toFixed(0),D=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ne.C0.ESC}[6;${D};${j}t`)}}cancel(g,A){if(this.options.cancelEvents||A)return g.preventDefault(),g.stopPropagation(),!1}}i.Terminal=Y},9924:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TimeBasedDebouncer=void 0,i.TimeBasedDebouncer=class{constructor(l,h=1e3){this._renderCallback=l,this._debounceThresholdMS=h,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(l,h,b){this._rowCount=b,l=l!==void 0?l:0,h=h!==void 0?h:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,l):l,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,h):h;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const y=f-this._lastRefreshMs,C=this._debounceThresholdMS-y;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const l=Math.max(this._rowStart,0),h=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(l,h)}}},1680:function(m,i,l){var h=this&&this.__decorate||function(s,o,c,d){var _,E=arguments.length,k=E<3?o:d===null?d=Object.getOwnPropertyDescriptor(o,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(s,o,c,d);else for(var v=s.length-1;v>=0;v--)(_=s[v])&&(k=(E<3?_(k):E>3?_(o,c,k):_(o,c))||k);return E>3&&k&&Object.defineProperty(o,c,k),k},b=this&&this.__param||function(s,o){return function(c,d){o(c,d,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=void 0;const f=l(3656),y=l(4725),C=l(8460),w=l(844),S=l(2585);let a=i.Viewport=class extends w.Disposable{constructor(s,o,c,d,_,E,k,v){super(),this._viewportElement=s,this._scrollArea=o,this._bufferService=c,this._optionsService=d,this._charSizeService=_,this._renderService=E,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(O=>this._renderDimensions=O)),this._handleThemeChange(v.colors),this.register(v.onChangeColors(O=>this._handleThemeChange(O))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(s){this._viewportElement.style.backgroundColor=s.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(s){if(s)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const o=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==o&&(this._lastRecordedBufferHeight=o,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const s=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==s&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=s),this._refreshAnimationFrame=null}syncScrollArea(s=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(s);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(s)}_handleScroll(s){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const o=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const s=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(s*(this._smoothScrollState.target-this._smoothScrollState.origin)),s<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(s,o){const c=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(o<0&&this._viewportElement.scrollTop!==0||o>0&&c<this._lastRecordedBufferHeight)||(s.cancelable&&s.preventDefault(),!1)}handleWheel(s){const o=this._getPixelsScrolled(s);return o!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+o:this._smoothScrollState.target+=o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=o,this._bubbleScroll(s,o))}scrollLines(s){if(s!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const o=s*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+o,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!1})}_getPixelsScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let o=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_LINE?o*=this._currentRowHeight:s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._currentRowHeight*this._bufferService.rows),o}getBufferElements(s,o){var c;let d,_="";const E=[],k=o??this._bufferService.buffer.lines.length,v=this._bufferService.buffer.lines;for(let O=s;O<k;O++){const M=v.get(O);if(!M)continue;const $=(c=v.get(O+1))===null||c===void 0?void 0:c.isWrapped;if(_+=M.translateToString(!$),!$||O===v.length-1){const L=document.createElement("div");L.textContent=_,E.push(L),_.length>0&&(d=L),_=""}}return{bufferElements:E,cursorElement:d}}getLinesScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let o=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(o/=this._currentRowHeight+0,this._wheelPartialScroll+=o,o=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(o*=this._bufferService.rows),o}_applyScrollModifier(s,o){const c=this._optionsService.rawOptions.fastScrollModifier;return c==="alt"&&o.altKey||c==="ctrl"&&o.ctrlKey||c==="shift"&&o.shiftKey?s*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:s*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(s){this._lastTouchY=s.touches[0].pageY}handleTouchMove(s){const o=this._lastTouchY-s.touches[0].pageY;return this._lastTouchY=s.touches[0].pageY,o!==0&&(this._viewportElement.scrollTop+=o,this._bubbleScroll(s,o))}};i.Viewport=a=h([b(2,S.IBufferService),b(3,S.IOptionsService),b(4,y.ICharSizeService),b(5,y.IRenderService),b(6,y.ICoreBrowserService),b(7,y.IThemeService)],a)},3107:function(m,i,l){var h=this&&this.__decorate||function(a,s,o,c){var d,_=arguments.length,E=_<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,s,o,c);else for(var k=a.length-1;k>=0;k--)(d=a[k])&&(E=(_<3?d(E):_>3?d(s,o,E):d(s,o))||E);return _>3&&E&&Object.defineProperty(s,o,E),E},b=this&&this.__param||function(a,s){return function(o,c){s(o,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferDecorationRenderer=void 0;const f=l(3656),y=l(4725),C=l(844),w=l(2585);let S=i.BufferDecorationRenderer=class extends C.Disposable{constructor(a,s,o,c){super(),this._screenElement=a,this._bufferService=s,this._decorationService=o,this._renderService=c,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(d=>this._removeDecoration(d))),this.register((0,C.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const a of this._decorationService.decorations)this._renderDecoration(a);this._dimensionsChanged=!1}_renderDecoration(a){this._refreshStyle(a),this._dimensionsChanged&&this._refreshXPosition(a)}_createElement(a){var s,o;const c=document.createElement("div");c.classList.add("xterm-decoration"),c.classList.toggle("xterm-decoration-top-layer",((s=a==null?void 0:a.options)===null||s===void 0?void 0:s.layer)==="top"),c.style.width=`${Math.round((a.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,c.style.height=(a.options.height||1)*this._renderService.dimensions.css.cell.height+"px",c.style.top=(a.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",c.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const d=(o=a.options.x)!==null&&o!==void 0?o:0;return d&&d>this._bufferService.cols&&(c.style.display="none"),this._refreshXPosition(a,c),c}_refreshStyle(a){const s=a.marker.line-this._bufferService.buffers.active.ydisp;if(s<0||s>=this._bufferService.rows)a.element&&(a.element.style.display="none",a.onRenderEmitter.fire(a.element));else{let o=this._decorationElements.get(a);o||(o=this._createElement(a),a.element=o,this._decorationElements.set(a,o),this._container.appendChild(o),a.onDispose(()=>{this._decorationElements.delete(a),o.remove()})),o.style.top=s*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",a.onRenderEmitter.fire(o)}}_refreshXPosition(a,s=a.element){var o;if(!s)return;const c=(o=a.options.x)!==null&&o!==void 0?o:0;(a.options.anchor||"left")==="right"?s.style.right=c?c*this._renderService.dimensions.css.cell.width+"px":"":s.style.left=c?c*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(a){var s;(s=this._decorationElements.get(a))===null||s===void 0||s.remove(),this._decorationElements.delete(a),a.dispose()}};i.BufferDecorationRenderer=S=h([b(1,w.IBufferService),b(2,w.IDecorationService),b(3,y.IRenderService)],S)},5871:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorZoneStore=void 0,i.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(l){if(l.options.overviewRulerOptions){for(const h of this._zones)if(h.color===l.options.overviewRulerOptions.color&&h.position===l.options.overviewRulerOptions.position){if(this._lineIntersectsZone(h,l.marker.line))return;if(this._lineAdjacentToZone(h,l.marker.line,l.options.overviewRulerOptions.position))return void this._addLineToZone(h,l.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=l.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=l.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=l.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=l.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:l.options.overviewRulerOptions.color,position:l.options.overviewRulerOptions.position,startBufferLine:l.marker.line,endBufferLine:l.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(l){this._linePadding=l}_lineIntersectsZone(l,h){return h>=l.startBufferLine&&h<=l.endBufferLine}_lineAdjacentToZone(l,h,b){return h>=l.startBufferLine-this._linePadding[b||"full"]&&h<=l.endBufferLine+this._linePadding[b||"full"]}_addLineToZone(l,h){l.startBufferLine=Math.min(l.startBufferLine,h),l.endBufferLine=Math.max(l.endBufferLine,h)}}},5744:function(m,i,l){var h=this&&this.__decorate||function(d,_,E,k){var v,O=arguments.length,M=O<3?_:k===null?k=Object.getOwnPropertyDescriptor(_,E):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(d,_,E,k);else for(var $=d.length-1;$>=0;$--)(v=d[$])&&(M=(O<3?v(M):O>3?v(_,E,M):v(_,E))||M);return O>3&&M&&Object.defineProperty(_,E,M),M},b=this&&this.__param||function(d,_){return function(E,k){_(E,k,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OverviewRulerRenderer=void 0;const f=l(5871),y=l(3656),C=l(4725),w=l(844),S=l(2585),a={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let c=i.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(d,_,E,k,v,O,M){var $;super(),this._viewportElement=d,this._screenElement=_,this._bufferService=E,this._decorationService=k,this._renderService=v,this._optionsService=O,this._coreBrowseService=M,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),($=this._viewportElement.parentElement)===null||$===void 0||$.insertBefore(this._canvas,this._viewportElement);const L=this._canvas.getContext("2d");if(!L)throw new Error("Ctx cannot be null");this._ctx=L,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var q;(q=this._canvas)===null||q===void 0||q.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,y.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const d=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);s.full=this._canvas.width,s.left=d,s.center=_,s.right=d,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=s.left,o.right=s.left+s.center}_refreshDrawHeightConstants(){a.full=Math.round(2*this._coreBrowseService.dpr);const d=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(d,12),6)*this._coreBrowseService.dpr);a.left=_,a.center=_,a.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*a.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;const d=this._colorZoneStore.zones;for(const _ of d)_.position!=="full"&&this._renderColorZone(_);for(const _ of d)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(d){this._ctx.fillStyle=d.color,this._ctx.fillRect(o[d.position||"full"],Math.round((this._canvas.height-1)*(d.startBufferLine/this._bufferService.buffers.active.lines.length)-a[d.position||"full"]/2),s[d.position||"full"],Math.round((this._canvas.height-1)*((d.endBufferLine-d.startBufferLine)/this._bufferService.buffers.active.lines.length)+a[d.position||"full"]))}_queueRefresh(d,_){this._shouldUpdateDimensions=d||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};i.OverviewRulerRenderer=c=h([b(2,S.IBufferService),b(3,S.IDecorationService),b(4,C.IRenderService),b(5,S.IOptionsService),b(6,C.ICoreBrowserService)],c)},2950:function(m,i,l){var h=this&&this.__decorate||function(S,a,s,o){var c,d=arguments.length,_=d<3?a:o===null?o=Object.getOwnPropertyDescriptor(a,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(S,a,s,o);else for(var E=S.length-1;E>=0;E--)(c=S[E])&&(_=(d<3?c(_):d>3?c(a,s,_):c(a,s))||_);return d>3&&_&&Object.defineProperty(a,s,_),_},b=this&&this.__param||function(S,a){return function(s,o){a(s,o,S)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CompositionHelper=void 0;const f=l(4725),y=l(2585),C=l(2584);let w=i.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(S,a,s,o,c,d){this._textarea=S,this._compositionView=a,this._bufferService=s,this._optionsService=o,this._coreService=c,this._renderService=d,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(S){this._compositionView.textContent=S.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(S){if(this._isComposing||this._isSendingComposition){if(S.keyCode===229||S.keyCode===16||S.keyCode===17||S.keyCode===18)return!1;this._finalizeComposition(!1)}return S.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(S){if(this._compositionView.classList.remove("active"),this._isComposing=!1,S){const a={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let s;this._isSendingComposition=!1,a.start+=this._dataAlreadySent.length,s=this._isComposing?this._textarea.value.substring(a.start,a.end):this._textarea.value.substring(a.start),s.length>0&&this._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;const a=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(a,!0)}}_handleAnyTextareaChanges(){const S=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const a=this._textarea.value,s=a.replace(S,"");this._dataAlreadySent=s,a.length>S.length?this._coreService.triggerDataEvent(s,!0):a.length<S.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):a.length===S.length&&a!==S&&this._coreService.triggerDataEvent(a,!0)}},0)}updateCompositionElements(S){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const a=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),s=this._renderService.dimensions.css.cell.height,o=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,c=a*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=c+"px",this._compositionView.style.top=o+"px",this._compositionView.style.height=s+"px",this._compositionView.style.lineHeight=s+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const d=this._compositionView.getBoundingClientRect();this._textarea.style.left=c+"px",this._textarea.style.top=o+"px",this._textarea.style.width=Math.max(d.width,1)+"px",this._textarea.style.height=Math.max(d.height,1)+"px",this._textarea.style.lineHeight=d.height+"px"}S||setTimeout(()=>this.updateCompositionElements(!0),0)}}};i.CompositionHelper=w=h([b(2,y.IBufferService),b(3,y.IOptionsService),b(4,y.ICoreService),b(5,f.IRenderService)],w)},9806:(m,i)=>{function l(h,b,f){const y=f.getBoundingClientRect(),C=h.getComputedStyle(f),w=parseInt(C.getPropertyValue("padding-left")),S=parseInt(C.getPropertyValue("padding-top"));return[b.clientX-y.left-w,b.clientY-y.top-S]}Object.defineProperty(i,"__esModule",{value:!0}),i.getCoords=i.getCoordsRelativeToElement=void 0,i.getCoordsRelativeToElement=l,i.getCoords=function(h,b,f,y,C,w,S,a,s){if(!w)return;const o=l(h,b,f);return o?(o[0]=Math.ceil((o[0]+(s?S/2:0))/S),o[1]=Math.ceil(o[1]/a),o[0]=Math.min(Math.max(o[0],1),y+(s?1:0)),o[1]=Math.min(Math.max(o[1],1),C),o):void 0}},9504:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.moveToCellSequence=void 0;const h=l(2584);function b(a,s,o,c){const d=a-f(a,o),_=s-f(s,o),E=Math.abs(d-_)-function(k,v,O){let M=0;const $=k-f(k,O),L=v-f(v,O);for(let q=0;q<Math.abs($-L);q++){const Z=y(k,v)==="A"?-1:1,re=O.buffer.lines.get($+Z*q);re!=null&&re.isWrapped&&M++}return M}(a,s,o);return S(E,w(y(a,s),c))}function f(a,s){let o=0,c=s.buffer.lines.get(a),d=c==null?void 0:c.isWrapped;for(;d&&a>=0&&a<s.rows;)o++,c=s.buffer.lines.get(--a),d=c==null?void 0:c.isWrapped;return o}function y(a,s){return a>s?"A":"B"}function C(a,s,o,c,d,_){let E=a,k=s,v="";for(;E!==o||k!==c;)E+=d?1:-1,d&&E>_.cols-1?(v+=_.buffer.translateBufferLineToString(k,!1,a,E),E=0,a=0,k++):!d&&E<0&&(v+=_.buffer.translateBufferLineToString(k,!1,0,a+1),E=_.cols-1,a=E,k--);return v+_.buffer.translateBufferLineToString(k,!1,a,E)}function w(a,s){const o=s?"O":"[";return h.C0.ESC+o+a}function S(a,s){a=Math.floor(a);let o="";for(let c=0;c<a;c++)o+=s;return o}i.moveToCellSequence=function(a,s,o,c){const d=o.buffer.x,_=o.buffer.y;if(!o.buffer.hasScrollback)return function(v,O,M,$,L,q){return b(O,$,L,q).length===0?"":S(C(v,O,v,O-f(O,L),!1,L).length,w("D",q))}(d,_,0,s,o,c)+b(_,s,o,c)+function(v,O,M,$,L,q){let Z;Z=b(O,$,L,q).length>0?$-f($,L):O;const re=$,ie=function(ne,x,F,P,U,G){let H;return H=b(F,P,U,G).length>0?P-f(P,U):x,ne<F&&H<=P||ne>=F&&H<P?"C":"D"}(v,O,M,$,L,q);return S(C(v,Z,M,re,ie==="C",L).length,w(ie,q))}(d,_,a,s,o,c);let E;if(_===s)return E=d>a?"D":"C",S(Math.abs(d-a),w(E,c));E=_>s?"D":"C";const k=Math.abs(_-s);return S(function(v,O){return O.cols-v}(_>s?a:d,o)+(k-1)*o.cols+1+((_>s?d:a)-1),w(E,c))}},1296:function(m,i,l){var h=this&&this.__decorate||function(L,q,Z,re){var ie,ne=arguments.length,x=ne<3?q:re===null?re=Object.getOwnPropertyDescriptor(q,Z):re;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(L,q,Z,re);else for(var F=L.length-1;F>=0;F--)(ie=L[F])&&(x=(ne<3?ie(x):ne>3?ie(q,Z,x):ie(q,Z))||x);return ne>3&&x&&Object.defineProperty(q,Z,x),x},b=this&&this.__param||function(L,q){return function(Z,re){q(Z,re,L)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRenderer=void 0;const f=l(3787),y=l(2550),C=l(2223),w=l(6171),S=l(4725),a=l(8055),s=l(8460),o=l(844),c=l(2585),d="xterm-dom-renderer-owner-",_="xterm-rows",E="xterm-fg-",k="xterm-bg-",v="xterm-focus",O="xterm-selection";let M=1,$=i.DomRenderer=class extends o.Disposable{constructor(L,q,Z,re,ie,ne,x,F,P,U){super(),this._element=L,this._screenElement=q,this._viewportElement=Z,this._linkifier2=re,this._charSizeService=ne,this._optionsService=x,this._bufferService=F,this._coreBrowserService=P,this._themeService=U,this._terminalClass=M++,this._rowElements=[],this.onRequestRedraw=this.register(new s.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(_),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(O),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(G=>this._injectCss(G))),this._injectCss(this._themeService.colors),this._rowFactory=ie.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(d+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(G=>this._handleLinkHover(G))),this.register(this._linkifier2.onHideLinkUnderline(G=>this._handleLinkLeave(G))),this.register((0,o.toDisposable)(()=>{this._element.classList.remove(d+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new y.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const L=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*L,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*L),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/L),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/L),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const Z of this._rowElements)Z.style.width=`${this.dimensions.css.canvas.width}px`,Z.style.height=`${this.dimensions.css.cell.height}px`,Z.style.lineHeight=`${this.dimensions.css.cell.height}px`,Z.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const q=`${this._terminalSelector} .${_} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=q,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(L){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let q=`${this._terminalSelector} .${_} { color: ${L.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;q+=`${this._terminalSelector} .${_} .xterm-dim { color: ${a.color.multiplyOpacity(L.foreground,.5).css};}`,q+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,q+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",q+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${L.cursor.css};  color: ${L.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${L.cursor.css}; }}`,q+=`${this._terminalSelector} .${_}.${v} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_}.${v} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-block { background-color: ${L.cursor.css}; color: ${L.cursorAccent.css};}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${L.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${L.cursor.css} inset;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${L.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,q+=`${this._terminalSelector} .${O} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${O} div { position: absolute; background-color: ${L.selectionBackgroundOpaque.css};}${this._terminalSelector} .${O} div { position: absolute; background-color: ${L.selectionInactiveBackgroundOpaque.css};}`;for(const[Z,re]of L.ansi.entries())q+=`${this._terminalSelector} .${E}${Z} { color: ${re.css}; }${this._terminalSelector} .${E}${Z}.xterm-dim { color: ${a.color.multiplyOpacity(re,.5).css}; }${this._terminalSelector} .${k}${Z} { background-color: ${re.css}; }`;q+=`${this._terminalSelector} .${E}${C.INVERTED_DEFAULT_COLOR} { color: ${a.color.opaque(L.background).css}; }${this._terminalSelector} .${E}${C.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${a.color.multiplyOpacity(a.color.opaque(L.background),.5).css}; }${this._terminalSelector} .${k}${C.INVERTED_DEFAULT_COLOR} { background-color: ${L.foreground.css}; }`,this._themeStyleElement.textContent=q}_setDefaultSpacing(){const L=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${L}px`,this._rowFactory.defaultSpacing=L}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(L,q){for(let Z=this._rowElements.length;Z<=q;Z++){const re=document.createElement("div");this._rowContainer.appendChild(re),this._rowElements.push(re)}for(;this._rowElements.length>q;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(L,q){this._refreshRowElements(L,q),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(v)}handleFocus(){this._rowContainer.classList.add(v),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(L,q,Z){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(L,q,Z),this.renderRows(0,this._bufferService.rows-1),!L||!q)return;const re=L[1]-this._bufferService.buffer.ydisp,ie=q[1]-this._bufferService.buffer.ydisp,ne=Math.max(re,0),x=Math.min(ie,this._bufferService.rows-1);if(ne>=this._bufferService.rows||x<0)return;const F=document.createDocumentFragment();if(Z){const P=L[0]>q[0];F.appendChild(this._createSelectionElement(ne,P?q[0]:L[0],P?L[0]:q[0],x-ne+1))}else{const P=re===ne?L[0]:0,U=ne===ie?q[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(ne,P,U));const G=x-ne-1;if(F.appendChild(this._createSelectionElement(ne+1,0,this._bufferService.cols,G)),ne!==x){const H=ie===x?q[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(x,0,H))}}this._selectionContainer.appendChild(F)}_createSelectionElement(L,q,Z,re=1){const ie=document.createElement("div");return ie.style.height=re*this.dimensions.css.cell.height+"px",ie.style.top=L*this.dimensions.css.cell.height+"px",ie.style.left=q*this.dimensions.css.cell.width+"px",ie.style.width=this.dimensions.css.cell.width*(Z-q)+"px",ie}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const L of this._rowElements)L.replaceChildren()}renderRows(L,q){const Z=this._bufferService.buffer,re=Z.ybase+Z.y,ie=Math.min(Z.x,this._bufferService.cols-1),ne=this._optionsService.rawOptions.cursorBlink,x=this._optionsService.rawOptions.cursorStyle,F=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=L;P<=q;P++){const U=P+Z.ydisp,G=this._rowElements[P],H=Z.lines.get(U);if(!G||!H)break;G.replaceChildren(...this._rowFactory.createRow(H,U,U===re,x,F,ie,ne,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${d}${this._terminalClass}`}_handleLinkHover(L){this._setCellUnderline(L.x1,L.x2,L.y1,L.y2,L.cols,!0)}_handleLinkLeave(L){this._setCellUnderline(L.x1,L.x2,L.y1,L.y2,L.cols,!1)}_setCellUnderline(L,q,Z,re,ie,ne){Z<0&&(L=0),re<0&&(q=0);const x=this._bufferService.rows-1;Z=Math.max(Math.min(Z,x),0),re=Math.max(Math.min(re,x),0),ie=Math.min(ie,this._bufferService.cols);const F=this._bufferService.buffer,P=F.ybase+F.y,U=Math.min(F.x,ie-1),G=this._optionsService.rawOptions.cursorBlink,H=this._optionsService.rawOptions.cursorStyle,K=this._optionsService.rawOptions.cursorInactiveStyle;for(let Y=Z;Y<=re;++Y){const z=Y+F.ydisp,g=this._rowElements[Y],A=F.lines.get(z);if(!g||!A)break;g.replaceChildren(...this._rowFactory.createRow(A,z,z===P,H,K,U,G,this.dimensions.css.cell.width,this._widthCache,ne?Y===Z?L:0:-1,ne?(Y===re?q:ie)-1:-1))}}};i.DomRenderer=$=h([b(4,c.IInstantiationService),b(5,S.ICharSizeService),b(6,c.IOptionsService),b(7,c.IBufferService),b(8,S.ICoreBrowserService),b(9,S.IThemeService)],$)},3787:function(m,i,l){var h=this&&this.__decorate||function(E,k,v,O){var M,$=arguments.length,L=$<3?k:O===null?O=Object.getOwnPropertyDescriptor(k,v):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(E,k,v,O);else for(var q=E.length-1;q>=0;q--)(M=E[q])&&(L=($<3?M(L):$>3?M(k,v,L):M(k,v))||L);return $>3&&L&&Object.defineProperty(k,v,L),L},b=this&&this.__param||function(E,k){return function(v,O){k(v,O,E)}};Object.defineProperty(i,"__esModule",{value:!0}),i.DomRendererRowFactory=void 0;const f=l(2223),y=l(643),C=l(511),w=l(2585),S=l(8055),a=l(4725),s=l(4269),o=l(6171),c=l(3734);let d=i.DomRendererRowFactory=class{constructor(E,k,v,O,M,$,L){this._document=E,this._characterJoinerService=k,this._optionsService=v,this._coreBrowserService=O,this._coreService=M,this._decorationService=$,this._themeService=L,this._workCell=new C.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,k,v){this._selectionStart=E,this._selectionEnd=k,this._columnSelectMode=v}createRow(E,k,v,O,M,$,L,q,Z,re,ie){const ne=[],x=this._characterJoinerService.getJoinedCharacters(k),F=this._themeService.colors;let P,U=E.getNoBgTrimmedLength();v&&U<$+1&&(U=$+1);let G=0,H="",K=0,Y=0,z=0,g=!1,A=0,I=!1,j=0;const D=[],B=re!==-1&&ie!==-1;for(let V=0;V<U;V++){E.loadCell(V,this._workCell);let ee=this._workCell.getWidth();if(ee===0)continue;let le=!1,ue=V,ce=this._workCell;if(x.length>0&&V===x[0][0]){le=!0;const ge=x.shift();ce=new s.JoinedCellData(this._workCell,E.translateToString(!0,ge[0],ge[1]),ge[1]-ge[0]),ue=ge[1]-1,ee=ce.getWidth()}const pe=this._isCellInSelection(V,k),oe=v&&V===$,Me=B&&V>=re&&V<=ie;let Ue=!1;this._decorationService.forEachDecorationAtCell(V,k,void 0,ge=>{Ue=!0});let Ce=ce.getChars()||y.WHITESPACE_CELL_CHAR;if(Ce===" "&&(ce.isUnderline()||ce.isOverline())&&(Ce=" "),j=ee*q-Z.get(Ce,ce.isBold(),ce.isItalic()),P){if(G&&(pe&&I||!pe&&!I&&ce.bg===K)&&(pe&&I&&F.selectionForeground||ce.fg===Y)&&ce.extended.ext===z&&Me===g&&j===A&&!oe&&!le&&!Ue){H+=Ce,G++;continue}G&&(P.textContent=H),P=this._document.createElement("span"),G=0,H=""}else P=this._document.createElement("span");if(K=ce.bg,Y=ce.fg,z=ce.extended.ext,g=Me,A=j,I=pe,le&&$>=V&&$<=ue&&($=V),!this._coreService.isCursorHidden&&oe){if(D.push("xterm-cursor"),this._coreBrowserService.isFocused)L&&D.push("xterm-cursor-blink"),D.push(O==="bar"?"xterm-cursor-bar":O==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(M)switch(M){case"outline":D.push("xterm-cursor-outline");break;case"block":D.push("xterm-cursor-block");break;case"bar":D.push("xterm-cursor-bar");break;case"underline":D.push("xterm-cursor-underline")}}if(ce.isBold()&&D.push("xterm-bold"),ce.isItalic()&&D.push("xterm-italic"),ce.isDim()&&D.push("xterm-dim"),H=ce.isInvisible()?y.WHITESPACE_CELL_CHAR:ce.getChars()||y.WHITESPACE_CELL_CHAR,ce.isUnderline()&&(D.push(`xterm-underline-${ce.extended.underlineStyle}`),H===" "&&(H=" "),!ce.isUnderlineColorDefault()))if(ce.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${c.AttributeData.toColorRGB(ce.getUnderlineColor()).join(",")})`;else{let ge=ce.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ce.isBold()&&ge<8&&(ge+=8),P.style.textDecorationColor=F.ansi[ge].css}ce.isOverline()&&(D.push("xterm-overline"),H===" "&&(H=" ")),ce.isStrikethrough()&&D.push("xterm-strikethrough"),Me&&(P.style.textDecoration="underline");let Se=ce.getFgColor(),X=ce.getFgColorMode(),Q=ce.getBgColor(),he=ce.getBgColorMode();const de=!!ce.isInverse();if(de){const ge=Se;Se=Q,Q=ge;const We=X;X=he,he=We}let fe,ye,me,Ee=!1;switch(this._decorationService.forEachDecorationAtCell(V,k,void 0,ge=>{ge.options.layer!=="top"&&Ee||(ge.backgroundColorRGB&&(he=50331648,Q=ge.backgroundColorRGB.rgba>>8&16777215,fe=ge.backgroundColorRGB),ge.foregroundColorRGB&&(X=50331648,Se=ge.foregroundColorRGB.rgba>>8&16777215,ye=ge.foregroundColorRGB),Ee=ge.options.layer==="top")}),!Ee&&pe&&(fe=this._coreBrowserService.isFocused?F.selectionBackgroundOpaque:F.selectionInactiveBackgroundOpaque,Q=fe.rgba>>8&16777215,he=50331648,Ee=!0,F.selectionForeground&&(X=50331648,Se=F.selectionForeground.rgba>>8&16777215,ye=F.selectionForeground)),Ee&&D.push("xterm-decoration-top"),he){case 16777216:case 33554432:me=F.ansi[Q],D.push(`xterm-bg-${Q}`);break;case 50331648:me=S.rgba.toColor(Q>>16,Q>>8&255,255&Q),this._addStyle(P,`background-color:#${_((Q>>>0).toString(16),"0",6)}`);break;default:de?(me=F.foreground,D.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):me=F.background}switch(fe||ce.isDim()&&(fe=S.color.multiplyOpacity(me,.5)),X){case 16777216:case 33554432:ce.isBold()&&Se<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Se+=8),this._applyMinimumContrast(P,me,F.ansi[Se],ce,fe,void 0)||D.push(`xterm-fg-${Se}`);break;case 50331648:const ge=S.rgba.toColor(Se>>16&255,Se>>8&255,255&Se);this._applyMinimumContrast(P,me,ge,ce,fe,ye)||this._addStyle(P,`color:#${_(Se.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,me,F.foreground,ce,fe,void 0)||de&&D.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}D.length&&(P.className=D.join(" "),D.length=0),oe||le||Ue?P.textContent=H:G++,j!==this.defaultSpacing&&(P.style.letterSpacing=`${j}px`),ne.push(P),V=ue}return P&&G&&(P.textContent=H),ne}_applyMinimumContrast(E,k,v,O,M,$){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,o.excludeFromContrastRatioDemands)(O.getCode()))return!1;const L=this._getContrastCache(O);let q;if(M||$||(q=L.getColor(k.rgba,v.rgba)),q===void 0){const Z=this._optionsService.rawOptions.minimumContrastRatio/(O.isDim()?2:1);q=S.color.ensureContrastRatio(M||k,$||v,Z),L.setColor((M||k).rgba,($||v).rgba,q??null)}return!!q&&(this._addStyle(E,`color:${q.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,k){E.setAttribute("style",`${E.getAttribute("style")||""}${k};`)}_isCellInSelection(E,k){const v=this._selectionStart,O=this._selectionEnd;return!(!v||!O)&&(this._columnSelectMode?v[0]<=O[0]?E>=v[0]&&k>=v[1]&&E<O[0]&&k<=O[1]:E<v[0]&&k>=v[1]&&E>=O[0]&&k<=O[1]:k>v[1]&&k<O[1]||v[1]===O[1]&&k===v[1]&&E>=v[0]&&E<O[0]||v[1]<O[1]&&k===O[1]&&E<O[0]||v[1]<O[1]&&k===v[1]&&E>=v[0])}};function _(E,k,v){for(;E.length<v;)E=k+E;return E}i.DomRendererRowFactory=d=h([b(1,a.ICharacterJoinerService),b(2,w.IOptionsService),b(3,a.ICoreBrowserService),b(4,w.ICoreService),b(5,w.IDecorationService),b(6,a.IThemeService)],d)},2550:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WidthCache=void 0,i.WidthCache=class{constructor(l){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=l.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const h=l.createElement("span"),b=l.createElement("span");b.style.fontWeight="bold";const f=l.createElement("span");f.style.fontStyle="italic";const y=l.createElement("span");y.style.fontWeight="bold",y.style.fontStyle="italic",this._measureElements=[h,b,f,y],this._container.appendChild(h),this._container.appendChild(b),this._container.appendChild(f),this._container.appendChild(y),l.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(l,h,b,f){l===this._font&&h===this._fontSize&&b===this._weight&&f===this._weightBold||(this._font=l,this._fontSize=h,this._weight=b,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${b}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${b}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(l,h,b){let f=0;if(!h&&!b&&l.length===1&&(f=l.charCodeAt(0))<256)return this._flat[f]!==-9999?this._flat[f]:this._flat[f]=this._measure(l,0);let y=l;h&&(y+="B"),b&&(y+="I");let C=this._holey.get(y);if(C===void 0){let w=0;h&&(w|=1),b&&(w|=2),C=this._measure(l,w),this._holey.set(y,C)}return C}_measure(l,h){const b=this._measureElements[h];return b.textContent=l.repeat(32),b.offsetWidth/32}}},2223:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TEXT_BASELINE=i.DIM_OPACITY=i.INVERTED_DEFAULT_COLOR=void 0;const h=l(6114);i.INVERTED_DEFAULT_COLOR=257,i.DIM_OPACITY=.5,i.TEXT_BASELINE=h.isFirefox||h.isLegacyEdge?"bottom":"ideographic"},6171:(m,i)=>{function l(h){return 57508<=h&&h<=57558}Object.defineProperty(i,"__esModule",{value:!0}),i.createRenderDimensions=i.excludeFromContrastRatioDemands=i.isRestrictedPowerlineGlyph=i.isPowerlineGlyph=i.throwIfFalsy=void 0,i.throwIfFalsy=function(h){if(!h)throw new Error("value must not be falsy");return h},i.isPowerlineGlyph=l,i.isRestrictedPowerlineGlyph=function(h){return 57520<=h&&h<=57527},i.excludeFromContrastRatioDemands=function(h){return l(h)||function(b){return 9472<=b&&b<=9631}(h)},i.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionModel=void 0,i.SelectionModel=class{constructor(l){this._bufferService=l,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?l%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)-1]:[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[l,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const l=this.selectionStart[0]+this.selectionStartLength;return l>this._bufferService.cols?[l%this._bufferService.cols,this.selectionStart[1]+Math.floor(l/this._bufferService.cols)]:[Math.max(l,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const l=this.selectionStart,h=this.selectionEnd;return!(!l||!h)&&(l[1]>h[1]||l[1]===h[1]&&l[0]>h[0])}handleTrim(l){return this.selectionStart&&(this.selectionStart[1]-=l),this.selectionEnd&&(this.selectionEnd[1]-=l),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(m,i,l){var h=this&&this.__decorate||function(a,s,o,c){var d,_=arguments.length,E=_<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,s,o,c);else for(var k=a.length-1;k>=0;k--)(d=a[k])&&(E=(_<3?d(E):_>3?d(s,o,E):d(s,o))||E);return _>3&&E&&Object.defineProperty(s,o,E),E},b=this&&this.__param||function(a,s){return function(o,c){s(o,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharSizeService=void 0;const f=l(2585),y=l(8460),C=l(844);let w=i.CharSizeService=class extends C.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(a,s,o){super(),this._optionsService=o,this.width=0,this.height=0,this._onCharSizeChange=this.register(new y.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new S(a,s,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const a=this._measureStrategy.measure();a.width===this.width&&a.height===this.height||(this.width=a.width,this.height=a.height,this._onCharSizeChange.fire())}};i.CharSizeService=w=h([b(2,f.IOptionsService)],w);class S{constructor(s,o,c){this._document=s,this._parentElement=o,this._optionsService=c,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const s={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return s.width!==0&&s.height!==0&&(this._result.width=s.width/32,this._result.height=Math.ceil(s.height)),this._result}}},4269:function(m,i,l){var h=this&&this.__decorate||function(s,o,c,d){var _,E=arguments.length,k=E<3?o:d===null?d=Object.getOwnPropertyDescriptor(o,c):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(s,o,c,d);else for(var v=s.length-1;v>=0;v--)(_=s[v])&&(k=(E<3?_(k):E>3?_(o,c,k):_(o,c))||k);return E>3&&k&&Object.defineProperty(o,c,k),k},b=this&&this.__param||function(s,o){return function(c,d){o(c,d,s)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CharacterJoinerService=i.JoinedCellData=void 0;const f=l(3734),y=l(643),C=l(511),w=l(2585);class S extends f.AttributeData{constructor(o,c,d){super(),this.content=0,this.combinedData="",this.fg=o.fg,this.bg=o.bg,this.combinedData=c,this._width=d}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(o){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.JoinedCellData=S;let a=i.CharacterJoinerService=class yo{constructor(o){this._bufferService=o,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(o){const c={id:this._nextCharacterJoinerId++,handler:o};return this._characterJoiners.push(c),c.id}deregister(o){for(let c=0;c<this._characterJoiners.length;c++)if(this._characterJoiners[c].id===o)return this._characterJoiners.splice(c,1),!0;return!1}getJoinedCharacters(o){if(this._characterJoiners.length===0)return[];const c=this._bufferService.buffer.lines.get(o);if(!c||c.length===0)return[];const d=[],_=c.translateToString(!0);let E=0,k=0,v=0,O=c.getFg(0),M=c.getBg(0);for(let $=0;$<c.getTrimmedLength();$++)if(c.loadCell($,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==O||this._workCell.bg!==M){if($-E>1){const L=this._getJoinedRanges(_,v,k,c,E);for(let q=0;q<L.length;q++)d.push(L[q])}E=$,v=k,O=this._workCell.fg,M=this._workCell.bg}k+=this._workCell.getChars().length||y.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){const $=this._getJoinedRanges(_,v,k,c,E);for(let L=0;L<$.length;L++)d.push($[L])}return d}_getJoinedRanges(o,c,d,_,E){const k=o.substring(c,d);let v=[];try{v=this._characterJoiners[0].handler(k)}catch(O){console.error(O)}for(let O=1;O<this._characterJoiners.length;O++)try{const M=this._characterJoiners[O].handler(k);for(let $=0;$<M.length;$++)yo._mergeRanges(v,M[$])}catch(M){console.error(M)}return this._stringRangesToCellRanges(v,_,E),v}_stringRangesToCellRanges(o,c,d){let _=0,E=!1,k=0,v=o[_];if(v){for(let O=d;O<this._bufferService.cols;O++){const M=c.getWidth(O),$=c.getString(O).length||y.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!E&&v[0]<=k&&(v[0]=O,E=!0),v[1]<=k){if(v[1]=O,v=o[++_],!v)break;v[0]<=k?(v[0]=O,E=!0):E=!1}k+=$}}v&&(v[1]=this._bufferService.cols)}}static _mergeRanges(o,c){let d=!1;for(let _=0;_<o.length;_++){const E=o[_];if(d){if(c[1]<=E[0])return o[_-1][1]=c[1],o;if(c[1]<=E[1])return o[_-1][1]=Math.max(c[1],E[1]),o.splice(_,1),o;o.splice(_,1),_--}else{if(c[1]<=E[0])return o.splice(_,0,c),o;if(c[1]<=E[1])return E[0]=Math.min(c[0],E[0]),o;c[0]<E[1]&&(E[0]=Math.min(c[0],E[0]),d=!0)}}return d?o[o.length-1][1]=c[1]:o.push(c),o}};i.CharacterJoinerService=a=h([b(0,w.IBufferService)],a)},5114:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreBrowserService=void 0,i.CoreBrowserService=class{constructor(l,h){this._textarea=l,this.window=h,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(m,i,l){var h=this&&this.__decorate||function(w,S,a,s){var o,c=arguments.length,d=c<3?S:s===null?s=Object.getOwnPropertyDescriptor(S,a):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")d=Reflect.decorate(w,S,a,s);else for(var _=w.length-1;_>=0;_--)(o=w[_])&&(d=(c<3?o(d):c>3?o(S,a,d):o(S,a))||d);return c>3&&d&&Object.defineProperty(S,a,d),d},b=this&&this.__param||function(w,S){return function(a,s){S(a,s,w)}};Object.defineProperty(i,"__esModule",{value:!0}),i.MouseService=void 0;const f=l(4725),y=l(9806);let C=i.MouseService=class{constructor(w,S){this._renderService=w,this._charSizeService=S}getCoords(w,S,a,s,o){return(0,y.getCoords)(window,w,S,a,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,o)}getMouseReportCoords(w,S){const a=(0,y.getCoordsRelativeToElement)(window,w,S);if(this._charSizeService.hasValidSize)return a[0]=Math.min(Math.max(a[0],0),this._renderService.dimensions.css.canvas.width-1),a[1]=Math.min(Math.max(a[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(a[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(a[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(a[0]),y:Math.floor(a[1])}}};i.MouseService=C=h([b(0,f.IRenderService),b(1,f.ICharSizeService)],C)},3230:function(m,i,l){var h=this&&this.__decorate||function(d,_,E,k){var v,O=arguments.length,M=O<3?_:k===null?k=Object.getOwnPropertyDescriptor(_,E):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(d,_,E,k);else for(var $=d.length-1;$>=0;$--)(v=d[$])&&(M=(O<3?v(M):O>3?v(_,E,M):v(_,E))||M);return O>3&&M&&Object.defineProperty(_,E,M),M},b=this&&this.__param||function(d,_){return function(E,k){_(E,k,d)}};Object.defineProperty(i,"__esModule",{value:!0}),i.RenderService=void 0;const f=l(3656),y=l(6193),C=l(5596),w=l(4725),S=l(8460),a=l(844),s=l(7226),o=l(2585);let c=i.RenderService=class extends a.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(d,_,E,k,v,O,M,$){if(super(),this._rowCount=d,this._charSizeService=k,this._renderer=this.register(new a.MutableDisposable),this._pausedResizeTask=new s.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new y.RenderDebouncer(M.window,(L,q)=>this._renderRows(L,q)),this.register(this._renderDebouncer),this._screenDprMonitor=new C.ScreenDprMonitor(M.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(O.onResize(()=>this._fullRefresh())),this.register(O.buffers.onBufferActivate(()=>{var L;return(L=this._renderer.value)===null||L===void 0?void 0:L.clear()})),this.register(E.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(v.onDecorationRegistered(()=>this._fullRefresh())),this.register(v.onDecorationRemoved(()=>this._fullRefresh())),this.register(E.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(O.cols,O.rows),this._fullRefresh()})),this.register(E.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(O.buffer.y,O.buffer.y,!0))),this.register((0,f.addDisposableDomListener)(M.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register($.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in M.window){const L=new M.window.IntersectionObserver(q=>this._handleIntersectionChange(q[q.length-1]),{threshold:0});L.observe(_),this.register({dispose:()=>L.disconnect()})}}_handleIntersectionChange(d){this._isPaused=d.isIntersecting===void 0?d.intersectionRatio===0:!d.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(d,_,E=!1){this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(d,_,this._rowCount))}_renderRows(d,_){this._renderer.value&&(d=Math.min(d,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(d,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:d,end:_}),this._onRender.fire({start:d,end:_}),this._isNextRenderRedrawOnly=!0)}resize(d,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(d){this._renderer.value=d,this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(d){return this._renderDebouncer.addRefreshCallback(d)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var d,_;this._renderer.value&&((_=(d=this._renderer.value).clearTextureAtlas)===null||_===void 0||_.call(d),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(d,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(d,_)):this._renderer.value.handleResize(d,_),this._fullRefresh())}handleCharSizeChanged(){var d;(d=this._renderer.value)===null||d===void 0||d.handleCharSizeChanged()}handleBlur(){var d;(d=this._renderer.value)===null||d===void 0||d.handleBlur()}handleFocus(){var d;(d=this._renderer.value)===null||d===void 0||d.handleFocus()}handleSelectionChanged(d,_,E){var k;this._selectionState.start=d,this._selectionState.end=_,this._selectionState.columnSelectMode=E,(k=this._renderer.value)===null||k===void 0||k.handleSelectionChanged(d,_,E)}handleCursorMove(){var d;(d=this._renderer.value)===null||d===void 0||d.handleCursorMove()}clear(){var d;(d=this._renderer.value)===null||d===void 0||d.clear()}};i.RenderService=c=h([b(2,o.IOptionsService),b(3,w.ICharSizeService),b(4,o.IDecorationService),b(5,o.IBufferService),b(6,w.ICoreBrowserService),b(7,w.IThemeService)],c)},9312:function(m,i,l){var h=this&&this.__decorate||function(v,O,M,$){var L,q=arguments.length,Z=q<3?O:$===null?$=Object.getOwnPropertyDescriptor(O,M):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(v,O,M,$);else for(var re=v.length-1;re>=0;re--)(L=v[re])&&(Z=(q<3?L(Z):q>3?L(O,M,Z):L(O,M))||Z);return q>3&&Z&&Object.defineProperty(O,M,Z),Z},b=this&&this.__param||function(v,O){return function(M,$){O(M,$,v)}};Object.defineProperty(i,"__esModule",{value:!0}),i.SelectionService=void 0;const f=l(9806),y=l(9504),C=l(456),w=l(4725),S=l(8460),a=l(844),s=l(6114),o=l(4841),c=l(511),d=l(2585),_=" ",E=new RegExp(_,"g");let k=i.SelectionService=class extends a.Disposable{constructor(v,O,M,$,L,q,Z,re,ie){super(),this._element=v,this._screenElement=O,this._linkifier=M,this._bufferService=$,this._coreService=L,this._mouseService=q,this._optionsService=Z,this._renderService=re,this._coreBrowserService=ie,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new c.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new S.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new S.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new S.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=ne=>this._handleMouseMove(ne),this._mouseUpListener=ne=>this._handleMouseUp(ne),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(ne=>this._handleTrim(ne)),this.register(this._bufferService.buffers.onBufferActivate(ne=>this._handleBufferActivate(ne))),this.enable(),this._model=new C.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,a.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const v=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!v||!O||v[0]===O[0]&&v[1]===O[1])}get selectionText(){const v=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;if(!v||!O)return"";const M=this._bufferService.buffer,$=[];if(this._activeSelectionMode===3){if(v[0]===O[0])return"";const L=v[0]<O[0]?v[0]:O[0],q=v[0]<O[0]?O[0]:v[0];for(let Z=v[1];Z<=O[1];Z++){const re=M.translateBufferLineToString(Z,!0,L,q);$.push(re)}}else{const L=v[1]===O[1]?O[0]:void 0;$.push(M.translateBufferLineToString(v[1],!0,v[0],L));for(let q=v[1]+1;q<=O[1]-1;q++){const Z=M.lines.get(q),re=M.translateBufferLineToString(q,!0);Z!=null&&Z.isWrapped?$[$.length-1]+=re:$.push(re)}if(v[1]!==O[1]){const q=M.lines.get(O[1]),Z=M.translateBufferLineToString(O[1],!0,0,O[0]);q&&q.isWrapped?$[$.length-1]+=Z:$.push(Z)}}return $.map(L=>L.replace(E," ")).join(s.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(v){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),s.isLinux&&v&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(v){const O=this._getMouseBufferCoords(v),M=this._model.finalSelectionStart,$=this._model.finalSelectionEnd;return!!(M&&$&&O)&&this._areCoordsInSelection(O,M,$)}isCellInSelection(v,O){const M=this._model.finalSelectionStart,$=this._model.finalSelectionEnd;return!(!M||!$)&&this._areCoordsInSelection([v,O],M,$)}_areCoordsInSelection(v,O,M){return v[1]>O[1]&&v[1]<M[1]||O[1]===M[1]&&v[1]===O[1]&&v[0]>=O[0]&&v[0]<M[0]||O[1]<M[1]&&v[1]===M[1]&&v[0]<M[0]||O[1]<M[1]&&v[1]===O[1]&&v[0]>=O[0]}_selectWordAtCursor(v,O){var M,$;const L=($=(M=this._linkifier.currentLink)===null||M===void 0?void 0:M.link)===null||$===void 0?void 0:$.range;if(L)return this._model.selectionStart=[L.start.x-1,L.start.y-1],this._model.selectionStartLength=(0,o.getRangeLength)(L,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const q=this._getMouseBufferCoords(v);return!!q&&(this._selectWordAt(q,O),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(v,O){this._model.clearSelection(),v=Math.max(v,0),O=Math.min(O,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,v],this._model.selectionEnd=[this._bufferService.cols,O],this.refresh(),this._onSelectionChange.fire()}_handleTrim(v){this._model.handleTrim(v)&&this.refresh()}_getMouseBufferCoords(v){const O=this._mouseService.getCoords(v,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(O)return O[0]--,O[1]--,O[1]+=this._bufferService.buffer.ydisp,O}_getMouseEventScrollAmount(v){let O=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,v,this._screenElement)[1];const M=this._renderService.dimensions.css.canvas.height;return O>=0&&O<=M?0:(O>M&&(O-=M),O=Math.min(Math.max(O,-50),50),O/=50,O/Math.abs(O)+Math.round(14*O))}shouldForceSelection(v){return s.isMac?v.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:v.shiftKey}handleMouseDown(v){if(this._mouseDownTimeStamp=v.timeStamp,(v.button!==2||!this.hasSelection)&&v.button===0){if(!this._enabled){if(!this.shouldForceSelection(v))return;v.stopPropagation()}v.preventDefault(),this._dragScrollAmount=0,this._enabled&&v.shiftKey?this._handleIncrementalClick(v):v.detail===1?this._handleSingleClick(v):v.detail===2?this._handleDoubleClick(v):v.detail===3&&this._handleTripleClick(v),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(v){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(v))}_handleSingleClick(v){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(v)?3:0,this._model.selectionStart=this._getMouseBufferCoords(v),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const O=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);O&&O.length!==this._model.selectionStart[0]&&O.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(v){this._selectWordAtCursor(v,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(v){const O=this._getMouseBufferCoords(v);O&&(this._activeSelectionMode=2,this._selectLineAt(O[1]))}shouldColumnSelect(v){return v.altKey&&!(s.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(v){if(v.stopImmediatePropagation(),!this._model.selectionStart)return;const O=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(v),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(v),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const M=this._bufferService.buffer;if(this._model.selectionEnd[1]<M.lines.length){const $=M.lines.get(this._model.selectionEnd[1]);$&&$.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}O&&O[0]===this._model.selectionEnd[0]&&O[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const v=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(v.ydisp+this._bufferService.rows,v.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=v.ydisp),this.refresh()}}_handleMouseUp(v){const O=v.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&O<500&&v.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const M=this._mouseService.getCoords(v,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(M&&M[0]!==void 0&&M[1]!==void 0){const $=(0,y.moveToCellSequence)(M[0]-1,M[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent($,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const v=this._model.finalSelectionStart,O=this._model.finalSelectionEnd,M=!(!v||!O||v[0]===O[0]&&v[1]===O[1]);M?v&&O&&(this._oldSelectionStart&&this._oldSelectionEnd&&v[0]===this._oldSelectionStart[0]&&v[1]===this._oldSelectionStart[1]&&O[0]===this._oldSelectionEnd[0]&&O[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(v,O,M)):this._oldHasSelection&&this._fireOnSelectionChange(v,O,M)}_fireOnSelectionChange(v,O,M){this._oldSelectionStart=v,this._oldSelectionEnd=O,this._oldHasSelection=M,this._onSelectionChange.fire()}_handleBufferActivate(v){this.clearSelection(),this._trimListener.dispose(),this._trimListener=v.activeBuffer.lines.onTrim(O=>this._handleTrim(O))}_convertViewportColToCharacterIndex(v,O){let M=O;for(let $=0;O>=$;$++){const L=v.loadCell($,this._workCell).getChars().length;this._workCell.getWidth()===0?M--:L>1&&O!==$&&(M+=L-1)}return M}setSelection(v,O,M){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[v,O],this._model.selectionStartLength=M,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(v){this._isClickInSelection(v)||(this._selectWordAtCursor(v,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(v,O,M=!0,$=!0){if(v[0]>=this._bufferService.cols)return;const L=this._bufferService.buffer,q=L.lines.get(v[1]);if(!q)return;const Z=L.translateBufferLineToString(v[1],!1);let re=this._convertViewportColToCharacterIndex(q,v[0]),ie=re;const ne=v[0]-re;let x=0,F=0,P=0,U=0;if(Z.charAt(re)===" "){for(;re>0&&Z.charAt(re-1)===" ";)re--;for(;ie<Z.length&&Z.charAt(ie+1)===" ";)ie++}else{let K=v[0],Y=v[0];q.getWidth(K)===0&&(x++,K--),q.getWidth(Y)===2&&(F++,Y++);const z=q.getString(Y).length;for(z>1&&(U+=z-1,ie+=z-1);K>0&&re>0&&!this._isCharWordSeparator(q.loadCell(K-1,this._workCell));){q.loadCell(K-1,this._workCell);const g=this._workCell.getChars().length;this._workCell.getWidth()===0?(x++,K--):g>1&&(P+=g-1,re-=g-1),re--,K--}for(;Y<q.length&&ie+1<Z.length&&!this._isCharWordSeparator(q.loadCell(Y+1,this._workCell));){q.loadCell(Y+1,this._workCell);const g=this._workCell.getChars().length;this._workCell.getWidth()===2?(F++,Y++):g>1&&(U+=g-1,ie+=g-1),ie++,Y++}}ie++;let G=re+ne-x+P,H=Math.min(this._bufferService.cols,ie-re+x+F-P-U);if(O||Z.slice(re,ie).trim()!==""){if(M&&G===0&&q.getCodePoint(0)!==32){const K=L.lines.get(v[1]-1);if(K&&q.isWrapped&&K.getCodePoint(this._bufferService.cols-1)!==32){const Y=this._getWordAt([this._bufferService.cols-1,v[1]-1],!1,!0,!1);if(Y){const z=this._bufferService.cols-Y.start;G-=z,H+=z}}}if($&&G+H===this._bufferService.cols&&q.getCodePoint(this._bufferService.cols-1)!==32){const K=L.lines.get(v[1]+1);if(K!=null&&K.isWrapped&&K.getCodePoint(0)!==32){const Y=this._getWordAt([0,v[1]+1],!1,!1,!0);Y&&(H+=Y.length)}}return{start:G,length:H}}}_selectWordAt(v,O){const M=this._getWordAt(v,O);if(M){for(;M.start<0;)M.start+=this._bufferService.cols,v[1]--;this._model.selectionStart=[M.start,v[1]],this._model.selectionStartLength=M.length}}_selectToWordAt(v){const O=this._getWordAt(v,!0);if(O){let M=v[1];for(;O.start<0;)O.start+=this._bufferService.cols,M--;if(!this._model.areSelectionValuesReversed())for(;O.start+O.length>this._bufferService.cols;)O.length-=this._bufferService.cols,M++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?O.start:O.start+O.length,M]}}_isCharWordSeparator(v){return v.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(v.getChars())>=0}_selectLineAt(v){const O=this._bufferService.buffer.getWrappedRangeForLine(v),M={start:{x:0,y:O.first},end:{x:this._bufferService.cols-1,y:O.last}};this._model.selectionStart=[0,O.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,o.getRangeLength)(M,this._bufferService.cols)}};i.SelectionService=k=h([b(3,d.IBufferService),b(4,d.ICoreService),b(5,w.IMouseService),b(6,d.IOptionsService),b(7,w.IRenderService),b(8,w.ICoreBrowserService)],k)},4725:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IThemeService=i.ICharacterJoinerService=i.ISelectionService=i.IRenderService=i.IMouseService=i.ICoreBrowserService=i.ICharSizeService=void 0;const h=l(8343);i.ICharSizeService=(0,h.createDecorator)("CharSizeService"),i.ICoreBrowserService=(0,h.createDecorator)("CoreBrowserService"),i.IMouseService=(0,h.createDecorator)("MouseService"),i.IRenderService=(0,h.createDecorator)("RenderService"),i.ISelectionService=(0,h.createDecorator)("SelectionService"),i.ICharacterJoinerService=(0,h.createDecorator)("CharacterJoinerService"),i.IThemeService=(0,h.createDecorator)("ThemeService")},6731:function(m,i,l){var h=this&&this.__decorate||function(k,v,O,M){var $,L=arguments.length,q=L<3?v:M===null?M=Object.getOwnPropertyDescriptor(v,O):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(k,v,O,M);else for(var Z=k.length-1;Z>=0;Z--)($=k[Z])&&(q=(L<3?$(q):L>3?$(v,O,q):$(v,O))||q);return L>3&&q&&Object.defineProperty(v,O,q),q},b=this&&this.__param||function(k,v){return function(O,M){v(O,M,k)}};Object.defineProperty(i,"__esModule",{value:!0}),i.ThemeService=i.DEFAULT_ANSI_COLORS=void 0;const f=l(7239),y=l(8055),C=l(8460),w=l(844),S=l(2585),a=y.css.toColor("#ffffff"),s=y.css.toColor("#000000"),o=y.css.toColor("#ffffff"),c=y.css.toColor("#000000"),d={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};i.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[y.css.toColor("#2e3436"),y.css.toColor("#cc0000"),y.css.toColor("#4e9a06"),y.css.toColor("#c4a000"),y.css.toColor("#3465a4"),y.css.toColor("#75507b"),y.css.toColor("#06989a"),y.css.toColor("#d3d7cf"),y.css.toColor("#555753"),y.css.toColor("#ef2929"),y.css.toColor("#8ae234"),y.css.toColor("#fce94f"),y.css.toColor("#729fcf"),y.css.toColor("#ad7fa8"),y.css.toColor("#34e2e2"),y.css.toColor("#eeeeec")],v=[0,95,135,175,215,255];for(let O=0;O<216;O++){const M=v[O/36%6|0],$=v[O/6%6|0],L=v[O%6];k.push({css:y.channels.toCss(M,$,L),rgba:y.channels.toRgba(M,$,L)})}for(let O=0;O<24;O++){const M=8+10*O;k.push({css:y.channels.toCss(M,M,M),rgba:y.channels.toRgba(M,M,M)})}return k})());let _=i.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:a,background:s,cursor:o,cursorAccent:c,selectionForeground:void 0,selectionBackgroundTransparent:d,selectionBackgroundOpaque:y.color.blend(s,d),selectionInactiveBackgroundTransparent:d,selectionInactiveBackgroundOpaque:y.color.blend(s,d),ansi:i.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const v=this._colors;if(v.foreground=E(k.foreground,a),v.background=E(k.background,s),v.cursor=E(k.cursor,o),v.cursorAccent=E(k.cursorAccent,c),v.selectionBackgroundTransparent=E(k.selectionBackground,d),v.selectionBackgroundOpaque=y.color.blend(v.background,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundTransparent=E(k.selectionInactiveBackground,v.selectionBackgroundTransparent),v.selectionInactiveBackgroundOpaque=y.color.blend(v.background,v.selectionInactiveBackgroundTransparent),v.selectionForeground=k.selectionForeground?E(k.selectionForeground,y.NULL_COLOR):void 0,v.selectionForeground===y.NULL_COLOR&&(v.selectionForeground=void 0),y.color.isOpaque(v.selectionBackgroundTransparent)&&(v.selectionBackgroundTransparent=y.color.opacity(v.selectionBackgroundTransparent,.3)),y.color.isOpaque(v.selectionInactiveBackgroundTransparent)&&(v.selectionInactiveBackgroundTransparent=y.color.opacity(v.selectionInactiveBackgroundTransparent,.3)),v.ansi=i.DEFAULT_ANSI_COLORS.slice(),v.ansi[0]=E(k.black,i.DEFAULT_ANSI_COLORS[0]),v.ansi[1]=E(k.red,i.DEFAULT_ANSI_COLORS[1]),v.ansi[2]=E(k.green,i.DEFAULT_ANSI_COLORS[2]),v.ansi[3]=E(k.yellow,i.DEFAULT_ANSI_COLORS[3]),v.ansi[4]=E(k.blue,i.DEFAULT_ANSI_COLORS[4]),v.ansi[5]=E(k.magenta,i.DEFAULT_ANSI_COLORS[5]),v.ansi[6]=E(k.cyan,i.DEFAULT_ANSI_COLORS[6]),v.ansi[7]=E(k.white,i.DEFAULT_ANSI_COLORS[7]),v.ansi[8]=E(k.brightBlack,i.DEFAULT_ANSI_COLORS[8]),v.ansi[9]=E(k.brightRed,i.DEFAULT_ANSI_COLORS[9]),v.ansi[10]=E(k.brightGreen,i.DEFAULT_ANSI_COLORS[10]),v.ansi[11]=E(k.brightYellow,i.DEFAULT_ANSI_COLORS[11]),v.ansi[12]=E(k.brightBlue,i.DEFAULT_ANSI_COLORS[12]),v.ansi[13]=E(k.brightMagenta,i.DEFAULT_ANSI_COLORS[13]),v.ansi[14]=E(k.brightCyan,i.DEFAULT_ANSI_COLORS[14]),v.ansi[15]=E(k.brightWhite,i.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const O=Math.min(v.ansi.length-16,k.extendedAnsi.length);for(let M=0;M<O;M++)v.ansi[M+16]=E(k.extendedAnsi[M],i.DEFAULT_ANSI_COLORS[M+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let v=0;v<this._restoreColors.ansi.length;++v)this._colors.ansi[v]=this._restoreColors.ansi[v]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(k,v){if(k!==void 0)try{return y.css.toColor(k)}catch{}return v}i.ThemeService=_=h([b(0,S.IOptionsService)],_)},6349:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CircularList=void 0;const h=l(8460),b=l(844);class f extends b.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new h.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new h.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new h.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const w=new Array(C);for(let S=0;S<Math.min(C,this.length);S++)w[S]=this._array[this._getCyclicIndex(S)];this._array=w,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let w=this._length;w<C;w++)this._array[w]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,w){this._array[this._getCyclicIndex(C)]=w}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,w,...S){if(w){for(let a=C;a<this._length-w;a++)this._array[this._getCyclicIndex(a)]=this._array[this._getCyclicIndex(a+w)];this._length-=w,this.onDeleteEmitter.fire({index:C,amount:w})}for(let a=this._length-1;a>=C;a--)this._array[this._getCyclicIndex(a+S.length)]=this._array[this._getCyclicIndex(a)];for(let a=0;a<S.length;a++)this._array[this._getCyclicIndex(C+a)]=S[a];if(S.length&&this.onInsertEmitter.fire({index:C,amount:S.length}),this._length+S.length>this._maxLength){const a=this._length+S.length-this._maxLength;this._startIndex+=a,this._length=this._maxLength,this.onTrimEmitter.fire(a)}else this._length+=S.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,w,S){if(!(w<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+S<0)throw new Error("Cannot shift elements in list beyond index 0");if(S>0){for(let s=w-1;s>=0;s--)this.set(C+s+S,this.get(C+s));const a=C+w+S-this._length;if(a>0)for(this._length+=a;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let a=0;a<w;a++)this.set(C+a+S,this.get(C+a))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}i.CircularList=f},1439:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.clone=void 0,i.clone=function l(h,b=5){if(typeof h!="object")return h;const f=Array.isArray(h)?[]:{};for(const y in h)f[y]=b<=1?h[y]:h[y]&&l(h[y],b-1);return f}},8055:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.contrastRatio=i.toPaddedHex=i.rgba=i.rgb=i.css=i.color=i.channels=i.NULL_COLOR=void 0;const h=l(6114);let b=0,f=0,y=0,C=0;var w,S,a,s,o;function c(_){const E=_.toString(16);return E.length<2?"0"+E:E}function d(_,E){return _<E?(E+.05)/(_+.05):(_+.05)/(E+.05)}i.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(E,k,v,O){return O!==void 0?`#${c(E)}${c(k)}${c(v)}${c(O)}`:`#${c(E)}${c(k)}${c(v)}`},_.toRgba=function(E,k,v,O=255){return(E<<24|k<<16|v<<8|O)>>>0}}(w||(i.channels=w={})),function(_){function E(k,v){return C=Math.round(255*v),[b,f,y]=o.toChannels(k.rgba),{css:w.toCss(b,f,y,C),rgba:w.toRgba(b,f,y,C)}}_.blend=function(k,v){if(C=(255&v.rgba)/255,C===1)return{css:v.css,rgba:v.rgba};const O=v.rgba>>24&255,M=v.rgba>>16&255,$=v.rgba>>8&255,L=k.rgba>>24&255,q=k.rgba>>16&255,Z=k.rgba>>8&255;return b=L+Math.round((O-L)*C),f=q+Math.round((M-q)*C),y=Z+Math.round(($-Z)*C),{css:w.toCss(b,f,y),rgba:w.toRgba(b,f,y)}},_.isOpaque=function(k){return(255&k.rgba)==255},_.ensureContrastRatio=function(k,v,O){const M=o.ensureContrastRatio(k.rgba,v.rgba,O);if(M)return o.toColor(M>>24&255,M>>16&255,M>>8&255)},_.opaque=function(k){const v=(255|k.rgba)>>>0;return[b,f,y]=o.toChannels(v),{css:w.toCss(b,f,y),rgba:v}},_.opacity=E,_.multiplyOpacity=function(k,v){return C=255&k.rgba,E(k,C*v/255)},_.toColorRGB=function(k){return[k.rgba>>24&255,k.rgba>>16&255,k.rgba>>8&255]}}(S||(i.color=S={})),function(_){let E,k;if(!h.isNode){const v=document.createElement("canvas");v.width=1,v.height=1;const O=v.getContext("2d",{willReadFrequently:!0});O&&(E=O,E.globalCompositeOperation="copy",k=E.createLinearGradient(0,0,1,1))}_.toColor=function(v){if(v.match(/#[\da-f]{3,8}/i))switch(v.length){case 4:return b=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),y=parseInt(v.slice(3,4).repeat(2),16),o.toColor(b,f,y);case 5:return b=parseInt(v.slice(1,2).repeat(2),16),f=parseInt(v.slice(2,3).repeat(2),16),y=parseInt(v.slice(3,4).repeat(2),16),C=parseInt(v.slice(4,5).repeat(2),16),o.toColor(b,f,y,C);case 7:return{css:v,rgba:(parseInt(v.slice(1),16)<<8|255)>>>0};case 9:return{css:v,rgba:parseInt(v.slice(1),16)>>>0}}const O=v.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(O)return b=parseInt(O[1]),f=parseInt(O[2]),y=parseInt(O[3]),C=Math.round(255*(O[5]===void 0?1:parseFloat(O[5]))),o.toColor(b,f,y,C);if(!E||!k)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=k,E.fillStyle=v,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[b,f,y,C]=E.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(b,f,y,C),css:v}}}(a||(i.css=a={})),function(_){function E(k,v,O){const M=k/255,$=v/255,L=O/255;return .2126*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.7152*($<=.03928?$/12.92:Math.pow(($+.055)/1.055,2.4))+.0722*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))}_.relativeLuminance=function(k){return E(k>>16&255,k>>8&255,255&k)},_.relativeLuminance2=E}(s||(i.rgb=s={})),function(_){function E(v,O,M){const $=v>>24&255,L=v>>16&255,q=v>>8&255;let Z=O>>24&255,re=O>>16&255,ie=O>>8&255,ne=d(s.relativeLuminance2(Z,re,ie),s.relativeLuminance2($,L,q));for(;ne<M&&(Z>0||re>0||ie>0);)Z-=Math.max(0,Math.ceil(.1*Z)),re-=Math.max(0,Math.ceil(.1*re)),ie-=Math.max(0,Math.ceil(.1*ie)),ne=d(s.relativeLuminance2(Z,re,ie),s.relativeLuminance2($,L,q));return(Z<<24|re<<16|ie<<8|255)>>>0}function k(v,O,M){const $=v>>24&255,L=v>>16&255,q=v>>8&255;let Z=O>>24&255,re=O>>16&255,ie=O>>8&255,ne=d(s.relativeLuminance2(Z,re,ie),s.relativeLuminance2($,L,q));for(;ne<M&&(Z<255||re<255||ie<255);)Z=Math.min(255,Z+Math.ceil(.1*(255-Z))),re=Math.min(255,re+Math.ceil(.1*(255-re))),ie=Math.min(255,ie+Math.ceil(.1*(255-ie))),ne=d(s.relativeLuminance2(Z,re,ie),s.relativeLuminance2($,L,q));return(Z<<24|re<<16|ie<<8|255)>>>0}_.ensureContrastRatio=function(v,O,M){const $=s.relativeLuminance(v>>8),L=s.relativeLuminance(O>>8);if(d($,L)<M){if(L<$){const re=E(v,O,M),ie=d($,s.relativeLuminance(re>>8));if(ie<M){const ne=k(v,O,M);return ie>d($,s.relativeLuminance(ne>>8))?re:ne}return re}const q=k(v,O,M),Z=d($,s.relativeLuminance(q>>8));if(Z<M){const re=E(v,O,M);return Z>d($,s.relativeLuminance(re>>8))?q:re}return q}},_.reduceLuminance=E,_.increaseLuminance=k,_.toChannels=function(v){return[v>>24&255,v>>16&255,v>>8&255,255&v]},_.toColor=function(v,O,M,$){return{css:w.toCss(v,O,M,$),rgba:w.toRgba(v,O,M,$)}}}(o||(i.rgba=o={})),i.toPaddedHex=c,i.contrastRatio=d},8969:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CoreTerminal=void 0;const h=l(844),b=l(2585),f=l(4348),y=l(7866),C=l(744),w=l(7302),S=l(6975),a=l(8460),s=l(1753),o=l(1480),c=l(7994),d=l(9282),_=l(5435),E=l(5981),k=l(2660);let v=!1;class O extends h.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new a.EventEmitter),this._onScroll.event($=>{var L;(L=this._onScrollApi)===null||L===void 0||L.fire($.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options($){for(const L in $)this.optionsService.options[L]=$[L]}constructor($){super(),this._windowsWrappingHeuristics=this.register(new h.MutableDisposable),this._onBinary=this.register(new a.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new a.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new a.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new a.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new a.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new a.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new w.OptionsService($)),this._instantiationService.setService(b.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(b.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(y.LogService)),this._instantiationService.setService(b.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(S.CoreService)),this._instantiationService.setService(b.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(s.CoreMouseService)),this._instantiationService.setService(b.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(o.UnicodeService)),this._instantiationService.setService(b.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(c.CharsetService),this._instantiationService.setService(b.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(b.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new _.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,a.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,a.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,a.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,a.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(L=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(L=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new E.WriteBuffer((L,q)=>this._inputHandler.parse(L,q))),this.register((0,a.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write($,L){this._writeBuffer.write($,L)}writeSync($,L){this._logService.logLevel<=b.LogLevelEnum.WARN&&!v&&(this._logService.warn("writeSync is unreliable and will be removed soon."),v=!0),this._writeBuffer.writeSync($,L)}resize($,L){isNaN($)||isNaN(L)||($=Math.max($,C.MINIMUM_COLS),L=Math.max(L,C.MINIMUM_ROWS),this._bufferService.resize($,L))}scroll($,L=!1){this._bufferService.scroll($,L)}scrollLines($,L,q){this._bufferService.scrollLines($,L,q)}scrollPages($){this.scrollLines($*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine($){const L=$-this._bufferService.buffer.ydisp;L!==0&&this.scrollLines(L)}registerEscHandler($,L){return this._inputHandler.registerEscHandler($,L)}registerDcsHandler($,L){return this._inputHandler.registerDcsHandler($,L)}registerCsiHandler($,L){return this._inputHandler.registerCsiHandler($,L)}registerOscHandler($,L){return this._inputHandler.registerOscHandler($,L)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let $=!1;const L=this.optionsService.rawOptions.windowsPty;L&&L.buildNumber!==void 0&&L.buildNumber!==void 0?$=L.backend==="conpty"&&L.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&($=!0),$?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const $=[];$.push(this.onLineFeed(d.updateWindowsModeWrappedState.bind(null,this._bufferService))),$.push(this.registerCsiHandler({final:"H"},()=>((0,d.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,h.toDisposable)(()=>{for(const L of $)L.dispose()})}}}i.CoreTerminal=O},8460:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.forwardEvent=i.EventEmitter=void 0,i.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=l=>(this._listeners.push(l),{dispose:()=>{if(!this._disposed){for(let h=0;h<this._listeners.length;h++)if(this._listeners[h]===l)return void this._listeners.splice(h,1)}}})),this._event}fire(l,h){const b=[];for(let f=0;f<this._listeners.length;f++)b.push(this._listeners[f]);for(let f=0;f<b.length;f++)b[f].call(void 0,l,h)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},i.forwardEvent=function(l,h){return l(b=>h.fire(b))}},5435:function(m,i,l){var h=this&&this.__decorate||function(ne,x,F,P){var U,G=arguments.length,H=G<3?x:P===null?P=Object.getOwnPropertyDescriptor(x,F):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(ne,x,F,P);else for(var K=ne.length-1;K>=0;K--)(U=ne[K])&&(H=(G<3?U(H):G>3?U(x,F,H):U(x,F))||H);return G>3&&H&&Object.defineProperty(x,F,H),H},b=this&&this.__param||function(ne,x){return function(F,P){x(F,P,ne)}};Object.defineProperty(i,"__esModule",{value:!0}),i.InputHandler=i.WindowsOptionsReportType=void 0;const f=l(2584),y=l(7116),C=l(2015),w=l(844),S=l(482),a=l(8437),s=l(8460),o=l(643),c=l(511),d=l(3734),_=l(2585),E=l(6242),k=l(6351),v=l(5941),O={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function $(ne,x){if(ne>24)return x.setWinLines||!1;switch(ne){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}var L;(function(ne){ne[ne.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",ne[ne.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(L||(i.WindowsOptionsReportType=L={}));let q=0;class Z extends w.Disposable{getAttrData(){return this._curAttrData}constructor(x,F,P,U,G,H,K,Y,z=new C.EscapeSequenceParser){super(),this._bufferService=x,this._charsetService=F,this._coreService=P,this._logService=U,this._optionsService=G,this._oscLinkService=H,this._coreMouseService=K,this._unicodeService=Y,this._parser=z,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new S.StringToUtf32,this._utf8Decoder=new S.Utf8ToUtf32,this._workCell=new c.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new s.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new s.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new s.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new s.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new s.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new s.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new s.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new s.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new s.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new s.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new s.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new s.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new re(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(g=>this._activeBuffer=g.activeBuffer)),this._parser.setCsiHandlerFallback((g,A)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(g),params:A.toArray()})}),this._parser.setEscHandlerFallback(g=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(g)})}),this._parser.setExecuteHandlerFallback(g=>{this._logService.debug("Unknown EXECUTE code: ",{code:g})}),this._parser.setOscHandlerFallback((g,A,I)=>{this._logService.debug("Unknown OSC code: ",{identifier:g,action:A,data:I})}),this._parser.setDcsHandlerFallback((g,A,I)=>{A==="HOOK"&&(I=I.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(g),action:A,payload:I})}),this._parser.setPrintHandler((g,A,I)=>this.print(g,A,I)),this._parser.registerCsiHandler({final:"@"},g=>this.insertChars(g)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},g=>this.scrollLeft(g)),this._parser.registerCsiHandler({final:"A"},g=>this.cursorUp(g)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},g=>this.scrollRight(g)),this._parser.registerCsiHandler({final:"B"},g=>this.cursorDown(g)),this._parser.registerCsiHandler({final:"C"},g=>this.cursorForward(g)),this._parser.registerCsiHandler({final:"D"},g=>this.cursorBackward(g)),this._parser.registerCsiHandler({final:"E"},g=>this.cursorNextLine(g)),this._parser.registerCsiHandler({final:"F"},g=>this.cursorPrecedingLine(g)),this._parser.registerCsiHandler({final:"G"},g=>this.cursorCharAbsolute(g)),this._parser.registerCsiHandler({final:"H"},g=>this.cursorPosition(g)),this._parser.registerCsiHandler({final:"I"},g=>this.cursorForwardTab(g)),this._parser.registerCsiHandler({final:"J"},g=>this.eraseInDisplay(g,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},g=>this.eraseInDisplay(g,!0)),this._parser.registerCsiHandler({final:"K"},g=>this.eraseInLine(g,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},g=>this.eraseInLine(g,!0)),this._parser.registerCsiHandler({final:"L"},g=>this.insertLines(g)),this._parser.registerCsiHandler({final:"M"},g=>this.deleteLines(g)),this._parser.registerCsiHandler({final:"P"},g=>this.deleteChars(g)),this._parser.registerCsiHandler({final:"S"},g=>this.scrollUp(g)),this._parser.registerCsiHandler({final:"T"},g=>this.scrollDown(g)),this._parser.registerCsiHandler({final:"X"},g=>this.eraseChars(g)),this._parser.registerCsiHandler({final:"Z"},g=>this.cursorBackwardTab(g)),this._parser.registerCsiHandler({final:"`"},g=>this.charPosAbsolute(g)),this._parser.registerCsiHandler({final:"a"},g=>this.hPositionRelative(g)),this._parser.registerCsiHandler({final:"b"},g=>this.repeatPrecedingCharacter(g)),this._parser.registerCsiHandler({final:"c"},g=>this.sendDeviceAttributesPrimary(g)),this._parser.registerCsiHandler({prefix:">",final:"c"},g=>this.sendDeviceAttributesSecondary(g)),this._parser.registerCsiHandler({final:"d"},g=>this.linePosAbsolute(g)),this._parser.registerCsiHandler({final:"e"},g=>this.vPositionRelative(g)),this._parser.registerCsiHandler({final:"f"},g=>this.hVPosition(g)),this._parser.registerCsiHandler({final:"g"},g=>this.tabClear(g)),this._parser.registerCsiHandler({final:"h"},g=>this.setMode(g)),this._parser.registerCsiHandler({prefix:"?",final:"h"},g=>this.setModePrivate(g)),this._parser.registerCsiHandler({final:"l"},g=>this.resetMode(g)),this._parser.registerCsiHandler({prefix:"?",final:"l"},g=>this.resetModePrivate(g)),this._parser.registerCsiHandler({final:"m"},g=>this.charAttributes(g)),this._parser.registerCsiHandler({final:"n"},g=>this.deviceStatus(g)),this._parser.registerCsiHandler({prefix:"?",final:"n"},g=>this.deviceStatusPrivate(g)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},g=>this.softReset(g)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},g=>this.setCursorStyle(g)),this._parser.registerCsiHandler({final:"r"},g=>this.setScrollRegion(g)),this._parser.registerCsiHandler({final:"s"},g=>this.saveCursor(g)),this._parser.registerCsiHandler({final:"t"},g=>this.windowOptions(g)),this._parser.registerCsiHandler({final:"u"},g=>this.restoreCursor(g)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},g=>this.insertColumns(g)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},g=>this.deleteColumns(g)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},g=>this.selectProtected(g)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},g=>this.requestMode(g,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},g=>this.requestMode(g,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(g=>(this.setTitle(g),this.setIconName(g),!0))),this._parser.registerOscHandler(1,new E.OscHandler(g=>this.setIconName(g))),this._parser.registerOscHandler(2,new E.OscHandler(g=>this.setTitle(g))),this._parser.registerOscHandler(4,new E.OscHandler(g=>this.setOrReportIndexedColor(g))),this._parser.registerOscHandler(8,new E.OscHandler(g=>this.setHyperlink(g))),this._parser.registerOscHandler(10,new E.OscHandler(g=>this.setOrReportFgColor(g))),this._parser.registerOscHandler(11,new E.OscHandler(g=>this.setOrReportBgColor(g))),this._parser.registerOscHandler(12,new E.OscHandler(g=>this.setOrReportCursorColor(g))),this._parser.registerOscHandler(104,new E.OscHandler(g=>this.restoreIndexedColor(g))),this._parser.registerOscHandler(110,new E.OscHandler(g=>this.restoreFgColor(g))),this._parser.registerOscHandler(111,new E.OscHandler(g=>this.restoreBgColor(g))),this._parser.registerOscHandler(112,new E.OscHandler(g=>this.restoreCursorColor(g))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const g in y.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:g},()=>this.selectCharset("("+g)),this._parser.registerEscHandler({intermediates:")",final:g},()=>this.selectCharset(")"+g)),this._parser.registerEscHandler({intermediates:"*",final:g},()=>this.selectCharset("*"+g)),this._parser.registerEscHandler({intermediates:"+",final:g},()=>this.selectCharset("+"+g)),this._parser.registerEscHandler({intermediates:"-",final:g},()=>this.selectCharset("-"+g)),this._parser.registerEscHandler({intermediates:".",final:g},()=>this.selectCharset("."+g)),this._parser.registerEscHandler({intermediates:"/",final:g},()=>this.selectCharset("/"+g));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(g=>(this._logService.error("Parsing error: ",g),g)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new k.DcsHandler((g,A)=>this.requestStatusString(g,A)))}_preserveStack(x,F,P,U){this._parseStack.paused=!0,this._parseStack.cursorStartX=x,this._parseStack.cursorStartY=F,this._parseStack.decodedLength=P,this._parseStack.position=U}_logSlowResolvingAsync(x){this._logService.logLevel<=_.LogLevelEnum.WARN&&Promise.race([x,new Promise((F,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(F=>{if(F!=="#SLOW_TIMEOUT")throw F;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(x,F){let P,U=this._activeBuffer.x,G=this._activeBuffer.y,H=0;const K=this._parseStack.paused;if(K){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,F))return this._logSlowResolvingAsync(P),P;U=this._parseStack.cursorStartX,G=this._parseStack.cursorStartY,this._parseStack.paused=!1,x.length>M&&(H=this._parseStack.position+M)}if(this._logService.logLevel<=_.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof x=="string"?` "${x}"`:` "${Array.prototype.map.call(x,Y=>String.fromCharCode(Y)).join("")}"`),typeof x=="string"?x.split("").map(Y=>Y.charCodeAt(0)):x),this._parseBuffer.length<x.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(x.length,M))),K||this._dirtyRowTracker.clearRange(),x.length>M)for(let Y=H;Y<x.length;Y+=M){const z=Y+M<x.length?Y+M:x.length,g=typeof x=="string"?this._stringDecoder.decode(x.substring(Y,z),this._parseBuffer):this._utf8Decoder.decode(x.subarray(Y,z),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,g))return this._preserveStack(U,G,g,Y),this._logSlowResolvingAsync(P),P}else if(!K){const Y=typeof x=="string"?this._stringDecoder.decode(x,this._parseBuffer):this._utf8Decoder.decode(x,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,Y))return this._preserveStack(U,G,Y,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===U&&this._activeBuffer.y===G||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(x,F,P){let U,G;const H=this._charsetService.charset,K=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,z=this._coreService.decPrivateModes.wraparound,g=this._coreService.modes.insertMode,A=this._curAttrData;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-F>0&&I.getWidth(this._activeBuffer.x-1)===2&&I.setCellFromCodePoint(this._activeBuffer.x-1,0,1,A.fg,A.bg,A.extended);for(let j=F;j<P;++j){if(U=x[j],G=this._unicodeService.wcwidth(U),U<127&&H){const D=H[String.fromCharCode(U)];D&&(U=D.charCodeAt(0))}if(K&&this._onA11yChar.fire((0,S.stringFromCodePoint)(U)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),G||!this._activeBuffer.x){if(this._activeBuffer.x+G-1>=Y){if(z){for(;this._activeBuffer.x<Y;)I.setCellFromCodePoint(this._activeBuffer.x++,0,1,A.fg,A.bg,A.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Y-1,G===2)continue}if(g&&(I.insertCells(this._activeBuffer.x,G,this._activeBuffer.getNullCell(A),A),I.getWidth(Y-1)===2&&I.setCellFromCodePoint(Y-1,o.NULL_CELL_CODE,o.NULL_CELL_WIDTH,A.fg,A.bg,A.extended)),I.setCellFromCodePoint(this._activeBuffer.x++,U,G,A.fg,A.bg,A.extended),G>0)for(;--G;)I.setCellFromCodePoint(this._activeBuffer.x++,0,0,A.fg,A.bg,A.extended)}else I.getWidth(this._activeBuffer.x-1)?I.addCodepointToCell(this._activeBuffer.x-1,U):I.addCodepointToCell(this._activeBuffer.x-2,U)}P-F>0&&(I.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Y&&P-F>0&&I.getWidth(this._activeBuffer.x)===0&&!I.hasContent(this._activeBuffer.x)&&I.setCellFromCodePoint(this._activeBuffer.x,0,1,A.fg,A.bg,A.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(x,F){return x.final!=="t"||x.prefix||x.intermediates?this._parser.registerCsiHandler(x,F):this._parser.registerCsiHandler(x,P=>!$(P.params[0],this._optionsService.rawOptions.windowOptions)||F(P))}registerDcsHandler(x,F){return this._parser.registerDcsHandler(x,new k.DcsHandler(F))}registerEscHandler(x,F){return this._parser.registerEscHandler(x,F)}registerOscHandler(x,F){return this._parser.registerOscHandler(x,new E.OscHandler(F))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var x;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||x===void 0)&&x.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);F.hasWidth(this._activeBuffer.x)&&!F.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const x=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-x),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(x=this._bufferService.cols-1){this._activeBuffer.x=Math.min(x,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(x,F){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=x,this._activeBuffer.y=this._activeBuffer.scrollTop+F):(this._activeBuffer.x=x,this._activeBuffer.y=F),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(x,F){this._restrictCursor(),this._setCursor(this._activeBuffer.x+x,this._activeBuffer.y+F)}cursorUp(x){const F=this._activeBuffer.y-this._activeBuffer.scrollTop;return F>=0?this._moveCursor(0,-Math.min(F,x.params[0]||1)):this._moveCursor(0,-(x.params[0]||1)),!0}cursorDown(x){const F=this._activeBuffer.scrollBottom-this._activeBuffer.y;return F>=0?this._moveCursor(0,Math.min(F,x.params[0]||1)):this._moveCursor(0,x.params[0]||1),!0}cursorForward(x){return this._moveCursor(x.params[0]||1,0),!0}cursorBackward(x){return this._moveCursor(-(x.params[0]||1),0),!0}cursorNextLine(x){return this.cursorDown(x),this._activeBuffer.x=0,!0}cursorPrecedingLine(x){return this.cursorUp(x),this._activeBuffer.x=0,!0}cursorCharAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(x){return this._setCursor(x.length>=2?(x.params[1]||1)-1:0,(x.params[0]||1)-1),!0}charPosAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(x){return this._moveCursor(x.params[0]||1,0),!0}linePosAbsolute(x){return this._setCursor(this._activeBuffer.x,(x.params[0]||1)-1),!0}vPositionRelative(x){return this._moveCursor(0,x.params[0]||1),!0}hVPosition(x){return this.cursorPosition(x),!0}tabClear(x){const F=x.params[0];return F===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:F===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=x.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=x.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(x){const F=x.params[0];return F===1&&(this._curAttrData.bg|=536870912),F!==2&&F!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(x,F,P,U=!1,G=!1){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.replaceCells(F,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),G),U&&(H.isWrapped=!1)}_resetBufferLine(x,F=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),F),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+x),P.isWrapped=!1)}eraseInDisplay(x,F=!1){let P;switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);P<this._bufferService.rows;P++)this._resetBufferLine(P,F);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,F),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,F);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,F);this._dirtyRowTracker.markDirty(0);break;case 3:const U=this._activeBuffer.lines.length-this._bufferService.rows;U>0&&(this._activeBuffer.lines.trimStart(U),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-U,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-U,0),this._onScroll.fire(0))}return!0}eraseInLine(x,F=!1){switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,F);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,F)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(x){this._restrictCursor();let F=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,U=this._bufferService.rows-1-this._activeBuffer.scrollBottom,G=this._bufferService.rows-1+this._activeBuffer.ybase-U+1;for(;F--;)this._activeBuffer.lines.splice(G-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(x){this._restrictCursor();let F=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let U;for(U=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-U;F--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(U,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(x){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.insertCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(x){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.deleteCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(x){let F=x.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(x){let F=x.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(a.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=x.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);U.deleteCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=x.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);U.insertCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=x.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);U.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=x.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);U.deleteCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(x){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(x.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(x){if(!this._parser.precedingCodepoint)return!0;const F=x.params[0]||1,P=new Uint32Array(F);for(let U=0;U<F;++U)P[U]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0}sendDeviceAttributesPrimary(x){return x.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(x){return x.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(x.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(x){return(this._optionsService.rawOptions.termName+"").indexOf(x)===0}setMode(x){for(let F=0;F<x.length;F++)switch(x.params[F]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(x){for(let F=0;F<x.length;F++)switch(x.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(x){for(let F=0;F<x.length;F++)switch(x.params[F]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(x){for(let F=0;F<x.length;F++)switch(x.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),x.params[F]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(x,F){const P=this._coreService.decPrivateModes,{activeProtocol:U,activeEncoding:G}=this._coreMouseService,H=this._coreService,{buffers:K,cols:Y}=this._bufferService,{active:z,alt:g}=K,A=this._optionsService.rawOptions,I=V=>V?1:2,j=x.params[0];return D=j,B=F?j===2?4:j===4?I(H.modes.insertMode):j===12?3:j===20?I(A.convertEol):0:j===1?I(P.applicationCursorKeys):j===3?A.windowOptions.setWinLines?Y===80?2:Y===132?1:0:0:j===6?I(P.origin):j===7?I(P.wraparound):j===8?3:j===9?I(U==="X10"):j===12?I(A.cursorBlink):j===25?I(!H.isCursorHidden):j===45?I(P.reverseWraparound):j===66?I(P.applicationKeypad):j===67?4:j===1e3?I(U==="VT200"):j===1002?I(U==="DRAG"):j===1003?I(U==="ANY"):j===1004?I(P.sendFocus):j===1005?4:j===1006?I(G==="SGR"):j===1015?4:j===1016?I(G==="SGR_PIXELS"):j===1048?1:j===47||j===1047||j===1049?I(z===g):j===2004?I(P.bracketedPasteMode):0,H.triggerDataEvent(`${f.C0.ESC}[${F?"":"?"}${D};${B}$y`),!0;var D,B}_updateAttrColor(x,F,P,U,G){return F===2?(x|=50331648,x&=-16777216,x|=d.AttributeData.fromColorRGB([P,U,G])):F===5&&(x&=-50331904,x|=33554432|255&P),x}_extractColor(x,F,P){const U=[0,0,-1,0,0,0];let G=0,H=0;do{if(U[H+G]=x.params[F+H],x.hasSubParams(F+H)){const K=x.getSubParams(F+H);let Y=0;do U[1]===5&&(G=1),U[H+Y+1+G]=K[Y];while(++Y<K.length&&Y+H+1+G<U.length);break}if(U[1]===5&&H+G>=2||U[1]===2&&H+G>=5)break;U[1]&&(G=1)}while(++H+F<x.length&&H+G<U.length);for(let K=2;K<U.length;++K)U[K]===-1&&(U[K]=0);switch(U[0]){case 38:P.fg=this._updateAttrColor(P.fg,U[1],U[3],U[4],U[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,U[1],U[3],U[4],U[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,U[1],U[3],U[4],U[5])}return H}_processUnderline(x,F){F.extended=F.extended.clone(),(!~x||x>5)&&(x=1),F.extended.underlineStyle=x,F.fg|=268435456,x===0&&(F.fg&=-268435457),F.updateExtended()}_processSGR0(x){x.fg=a.DEFAULT_ATTR_DATA.fg,x.bg=a.DEFAULT_ATTR_DATA.bg,x.extended=x.extended.clone(),x.extended.underlineStyle=0,x.extended.underlineColor&=-67108864,x.updateExtended()}charAttributes(x){if(x.length===1&&x.params[0]===0)return this._processSGR0(this._curAttrData),!0;const F=x.length;let P;const U=this._curAttrData;for(let G=0;G<F;G++)P=x.params[G],P>=30&&P<=37?(U.fg&=-50331904,U.fg|=16777216|P-30):P>=40&&P<=47?(U.bg&=-50331904,U.bg|=16777216|P-40):P>=90&&P<=97?(U.fg&=-50331904,U.fg|=16777224|P-90):P>=100&&P<=107?(U.bg&=-50331904,U.bg|=16777224|P-100):P===0?this._processSGR0(U):P===1?U.fg|=134217728:P===3?U.bg|=67108864:P===4?(U.fg|=268435456,this._processUnderline(x.hasSubParams(G)?x.getSubParams(G)[0]:1,U)):P===5?U.fg|=536870912:P===7?U.fg|=67108864:P===8?U.fg|=1073741824:P===9?U.fg|=2147483648:P===2?U.bg|=134217728:P===21?this._processUnderline(2,U):P===22?(U.fg&=-134217729,U.bg&=-134217729):P===23?U.bg&=-67108865:P===24?(U.fg&=-268435457,this._processUnderline(0,U)):P===25?U.fg&=-536870913:P===27?U.fg&=-67108865:P===28?U.fg&=-1073741825:P===29?U.fg&=2147483647:P===39?(U.fg&=-67108864,U.fg|=16777215&a.DEFAULT_ATTR_DATA.fg):P===49?(U.bg&=-67108864,U.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?G+=this._extractColor(x,G,U):P===53?U.bg|=1073741824:P===55?U.bg&=-1073741825:P===59?(U.extended=U.extended.clone(),U.extended.underlineColor=-1,U.updateExtended()):P===100?(U.fg&=-67108864,U.fg|=16777215&a.DEFAULT_ATTR_DATA.fg,U.bg&=-67108864,U.bg|=16777215&a.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(x){switch(x.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const F=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${F};${P}R`)}return!0}deviceStatusPrivate(x){if(x.params[0]===6){const F=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${F};${P}R`)}return!0}softReset(x){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(x){const F=x.params[0]||1;switch(F){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=F%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(x){const F=x.params[0]||1;let P;return(x.length<2||(P=x.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>F&&(this._activeBuffer.scrollTop=F-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(x){if(!$(x.params[0],this._optionsService.rawOptions.windowOptions))return!0;const F=x.length>1?x.params[1]:0;switch(x.params[0]){case 14:F!==2&&this._onRequestWindowsOptionsReport.fire(L.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(L.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:F!==0&&F!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),F!==0&&F!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:F!==0&&F!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),F!==0&&F!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(x){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(x){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(x){return this._windowTitle=x,this._onTitleChange.fire(x),!0}setIconName(x){return this._iconName=x,!0}setOrReportIndexedColor(x){const F=[],P=x.split(";");for(;P.length>1;){const U=P.shift(),G=P.shift();if(/^\d+$/.exec(U)){const H=parseInt(U);if(ie(H))if(G==="?")F.push({type:0,index:H});else{const K=(0,v.parseColor)(G);K&&F.push({type:1,index:H,color:K})}}}return F.length&&this._onColor.fire(F),!0}setHyperlink(x){const F=x.split(";");return!(F.length<2)&&(F[1]?this._createHyperlink(F[0],F[1]):!F[0]&&this._finishHyperlink())}_createHyperlink(x,F){this._getCurrentLinkId()&&this._finishHyperlink();const P=x.split(":");let U;const G=P.findIndex(H=>H.startsWith("id="));return G!==-1&&(U=P[G].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:U,uri:F}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(x,F){const P=x.split(";");for(let U=0;U<P.length&&!(F>=this._specialColors.length);++U,++F)if(P[U]==="?")this._onColor.fire([{type:0,index:this._specialColors[F]}]);else{const G=(0,v.parseColor)(P[U]);G&&this._onColor.fire([{type:1,index:this._specialColors[F],color:G}])}return!0}setOrReportFgColor(x){return this._setOrReportSpecialColor(x,0)}setOrReportBgColor(x){return this._setOrReportSpecialColor(x,1)}setOrReportCursorColor(x){return this._setOrReportSpecialColor(x,2)}restoreIndexedColor(x){if(!x)return this._onColor.fire([{type:2}]),!0;const F=[],P=x.split(";");for(let U=0;U<P.length;++U)if(/^\d+$/.exec(P[U])){const G=parseInt(P[U]);ie(G)&&F.push({type:2,index:G})}return F.length&&this._onColor.fire(F),!0}restoreFgColor(x){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(x){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(x){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),!0}selectCharset(x){return x.length!==2?(this.selectDefaultCharset(),!0):(x[0]==="/"||this._charsetService.setgCharset(O[x[0]],y.CHARSETS[x[1]]||y.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const x=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,x,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=a.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=a.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(x){return this._charsetService.setgLevel(x),!0}screenAlignmentPattern(){const x=new c.CellData;x.content=4194373,x.fg=this._curAttrData.fg,x.bg=this._curAttrData.bg,this._setCursor(0,0);for(let F=0;F<this._bufferService.rows;++F){const P=this._activeBuffer.ybase+this._activeBuffer.y+F,U=this._activeBuffer.lines.get(P);U&&(U.fill(x),U.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(x,F){const P=this._bufferService.buffer,U=this._optionsService.rawOptions;return(G=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${G}${f.C0.ESC}\\`),!0))(x==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:x==='"p'?'P1$r61;1"p':x==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:x==="m"?"P1$r0m":x===" q"?`P1$r${{block:2,underline:4,bar:6}[U.cursorStyle]-(U.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(x,F){this._dirtyRowTracker.markRangeDirty(x,F)}}i.InputHandler=Z;let re=class{constructor(ne){this._bufferService=ne,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(ne){ne<this.start?this.start=ne:ne>this.end&&(this.end=ne)}markRangeDirty(ne,x){ne>x&&(q=ne,ne=x,x=q),ne<this.start&&(this.start=ne),x>this.end&&(this.end=x)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function ie(ne){return 0<=ne&&ne<256}re=h([b(0,_.IBufferService)],re)},844:(m,i)=>{function l(h){for(const b of h)b.dispose();h.length=0}Object.defineProperty(i,"__esModule",{value:!0}),i.getDisposeArrayDisposable=i.disposeArray=i.toDisposable=i.MutableDisposable=i.Disposable=void 0,i.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const h of this._disposables)h.dispose();this._disposables.length=0}register(h){return this._disposables.push(h),h}unregister(h){const b=this._disposables.indexOf(h);b!==-1&&this._disposables.splice(b,1)}},i.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(h){var b;this._isDisposed||h===this._value||((b=this._value)===null||b===void 0||b.dispose(),this._value=h)}clear(){this.value=void 0}dispose(){var h;this._isDisposed=!0,(h=this._value)===null||h===void 0||h.dispose(),this._value=void 0}},i.toDisposable=function(h){return{dispose:h}},i.disposeArray=l,i.getDisposeArrayDisposable=function(h){return{dispose:()=>l(h)}}},1505:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.FourKeyMap=i.TwoKeyMap=void 0;class l{constructor(){this._data={}}set(b,f,y){this._data[b]||(this._data[b]={}),this._data[b][f]=y}get(b,f){return this._data[b]?this._data[b][f]:void 0}clear(){this._data={}}}i.TwoKeyMap=l,i.FourKeyMap=class{constructor(){this._data=new l}set(h,b,f,y,C){this._data.get(h,b)||this._data.set(h,b,new l),this._data.get(h,b).set(f,y,C)}get(h,b,f,y){var C;return(C=this._data.get(h,b))===null||C===void 0?void 0:C.get(f,y)}clear(){this._data.clear()}}},6114:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.isChromeOS=i.isLinux=i.isWindows=i.isIphone=i.isIpad=i.isMac=i.getSafariVersion=i.isSafari=i.isLegacyEdge=i.isFirefox=i.isNode=void 0,i.isNode=typeof navigator>"u";const l=i.isNode?"node":navigator.userAgent,h=i.isNode?"node":navigator.platform;i.isFirefox=l.includes("Firefox"),i.isLegacyEdge=l.includes("Edge"),i.isSafari=/^((?!chrome|android).)*safari/i.test(l),i.getSafariVersion=function(){if(!i.isSafari)return 0;const b=l.match(/Version\/(\d+)/);return b===null||b.length<2?0:parseInt(b[1])},i.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(h),i.isIpad=h==="iPad",i.isIphone=h==="iPhone",i.isWindows=["Windows","Win16","Win32","WinCE"].includes(h),i.isLinux=h.indexOf("Linux")>=0,i.isChromeOS=/\bCrOS\b/.test(l)},6106:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SortedList=void 0;let l=0;i.SortedList=class{constructor(h){this._getKey=h,this._array=[]}clear(){this._array.length=0}insert(h){this._array.length!==0?(l=this._search(this._getKey(h)),this._array.splice(l,0,h)):this._array.push(h)}delete(h){if(this._array.length===0)return!1;const b=this._getKey(h);if(b===void 0||(l=this._search(b),l===-1)||this._getKey(this._array[l])!==b)return!1;do if(this._array[l]===h)return this._array.splice(l,1),!0;while(++l<this._array.length&&this._getKey(this._array[l])===b);return!1}*getKeyIterator(h){if(this._array.length!==0&&(l=this._search(h),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===h))do yield this._array[l];while(++l<this._array.length&&this._getKey(this._array[l])===h)}forEachByKey(h,b){if(this._array.length!==0&&(l=this._search(h),!(l<0||l>=this._array.length)&&this._getKey(this._array[l])===h))do b(this._array[l]);while(++l<this._array.length&&this._getKey(this._array[l])===h)}values(){return[...this._array].values()}_search(h){let b=0,f=this._array.length-1;for(;f>=b;){let y=b+f>>1;const C=this._getKey(this._array[y]);if(C>h)f=y-1;else{if(!(C<h)){for(;y>0&&this._getKey(this._array[y-1])===h;)y--;return y}b=y+1}}return b}}},7226:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DebouncedIdleTask=i.IdleTaskQueue=i.PriorityTaskQueue=void 0;const h=l(6114);class b{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let w=0,S=0,a=C.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),S=Math.max(w,S),s=C.timeRemaining(),1.5*S>s)return a-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(a-w))}ms`),void this._start();a=s}this.clear()}}class f extends b{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const w=Date.now()+C;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}i.PriorityTaskQueue=f,i.IdleTaskQueue=!h.isNode&&"requestIdleCallback"in window?class extends b{_requestCallback(y){return requestIdleCallback(y)}_cancelCallback(y){cancelIdleCallback(y)}}:f,i.DebouncedIdleTask=class{constructor(){this._queue=new i.IdleTaskQueue}set(y){this._queue.clear(),this._queue.enqueue(y)}flush(){this._queue.flush()}}},9282:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.updateWindowsModeWrappedState=void 0;const h=l(643);i.updateWindowsModeWrappedState=function(b){const f=b.buffer.lines.get(b.buffer.ybase+b.buffer.y-1),y=f==null?void 0:f.get(b.cols-1),C=b.buffer.lines.get(b.buffer.ybase+b.buffer.y);C&&y&&(C.isWrapped=y[h.CHAR_DATA_CODE_INDEX]!==h.NULL_CELL_CODE&&y[h.CHAR_DATA_CODE_INDEX]!==h.WHITESPACE_CELL_CODE)}},3734:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ExtendedAttrs=i.AttributeData=void 0;class l{constructor(){this.fg=0,this.bg=0,this.extended=new h}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new l;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}i.AttributeData=l;class h{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}constructor(f=0,y=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=y}clone(){return new h(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}i.ExtendedAttrs=h},9092:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Buffer=i.MAX_BUFFER_SIZE=void 0;const h=l(6349),b=l(7226),f=l(3734),y=l(8437),C=l(4634),w=l(511),S=l(643),a=l(4863),s=l(7116);i.MAX_BUFFER_SIZE=4294967295,i.Buffer=class{constructor(o,c,d){this._hasScrollback=o,this._optionsService=c,this._bufferService=d,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=y.DEFAULT_ATTR_DATA.clone(),this.savedCharset=s.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,S.NULL_CELL_CHAR,S.NULL_CELL_WIDTH,S.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,S.WHITESPACE_CELL_CHAR,S.WHITESPACE_CELL_WIDTH,S.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new b.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(o){return o?(this._nullCell.fg=o.fg,this._nullCell.bg=o.bg,this._nullCell.extended=o.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(o){return o?(this._whitespaceCell.fg=o.fg,this._whitespaceCell.bg=o.bg,this._whitespaceCell.extended=o.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(o,c){return new y.BufferLine(this._bufferService.cols,this.getNullCell(o),c)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const o=this.ybase+this.y-this.ydisp;return o>=0&&o<this._rows}_getCorrectBufferLength(o){if(!this._hasScrollback)return o;const c=o+this._optionsService.rawOptions.scrollback;return c>i.MAX_BUFFER_SIZE?i.MAX_BUFFER_SIZE:c}fillViewportRows(o){if(this.lines.length===0){o===void 0&&(o=y.DEFAULT_ATTR_DATA);let c=this._rows;for(;c--;)this.lines.push(this.getBlankLine(o))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new h.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(o,c){const d=this.getNullCell(y.DEFAULT_ATTR_DATA);let _=0;const E=this._getCorrectBufferLength(c);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<o)for(let v=0;v<this.lines.length;v++)_+=+this.lines.get(v).resize(o,d);let k=0;if(this._rows<c)for(let v=this._rows;v<c;v++)this.lines.length<c+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new y.BufferLine(o,d)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new y.BufferLine(o,d)));else for(let v=this._rows;v>c;v--)this.lines.length>c+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){const v=this.lines.length-E;v>0&&(this.lines.trimStart(v),this.ybase=Math.max(this.ybase-v,0),this.ydisp=Math.max(this.ydisp-v,0),this.savedY=Math.max(this.savedY-v,0)),this.lines.maxLength=E}this.x=Math.min(this.x,o-1),this.y=Math.min(this.y,c-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,o-1),this.scrollTop=0}if(this.scrollBottom=c-1,this._isReflowEnabled&&(this._reflow(o,c),this._cols>o))for(let k=0;k<this.lines.length;k++)_+=+this.lines.get(k).resize(o,d);this._cols=o,this._rows=c,this._memoryCleanupQueue.clear(),_>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let o=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,o=!1);let c=0;for(;this._memoryCleanupPosition<this.lines.length;)if(c+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),c>100)return!0;return o}get _isReflowEnabled(){const o=this._optionsService.rawOptions.windowsPty;return o&&o.buildNumber?this._hasScrollback&&o.backend==="conpty"&&o.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(o,c){this._cols!==o&&(o>this._cols?this._reflowLarger(o,c):this._reflowSmaller(o,c))}_reflowLarger(o,c){const d=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,o,this.ybase+this.y,this.getNullCell(y.DEFAULT_ATTR_DATA));if(d.length>0){const _=(0,C.reflowLargerCreateNewLayout)(this.lines,d);(0,C.reflowLargerApplyNewLayout)(this.lines,_.layout),this._reflowLargerAdjustViewport(o,c,_.countRemoved)}}_reflowLargerAdjustViewport(o,c,d){const _=this.getNullCell(y.DEFAULT_ATTR_DATA);let E=d;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<c&&this.lines.push(new y.BufferLine(o,_))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-d,0)}_reflowSmaller(o,c){const d=this.getNullCell(y.DEFAULT_ATTR_DATA),_=[];let E=0;for(let k=this.lines.length-1;k>=0;k--){let v=this.lines.get(k);if(!v||!v.isWrapped&&v.getTrimmedLength()<=o)continue;const O=[v];for(;v.isWrapped&&k>0;)v=this.lines.get(--k),O.unshift(v);const M=this.ybase+this.y;if(M>=k&&M<k+O.length)continue;const $=O[O.length-1].getTrimmedLength(),L=(0,C.reflowSmallerGetNewLineLengths)(O,this._cols,o),q=L.length-O.length;let Z;Z=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+q):Math.max(0,this.lines.length-this.lines.maxLength+q);const re=[];for(let U=0;U<q;U++){const G=this.getBlankLine(y.DEFAULT_ATTR_DATA,!0);re.push(G)}re.length>0&&(_.push({start:k+O.length+E,newLines:re}),E+=re.length),O.push(...re);let ie=L.length-1,ne=L[ie];ne===0&&(ie--,ne=L[ie]);let x=O.length-q-1,F=$;for(;x>=0;){const U=Math.min(F,ne);if(O[ie]===void 0)break;if(O[ie].copyCellsFrom(O[x],F-U,ne-U,U,!0),ne-=U,ne===0&&(ie--,ne=L[ie]),F-=U,F===0){x--;const G=Math.max(x,0);F=(0,C.getWrappedLineTrimmedLength)(O,G,this._cols)}}for(let U=0;U<O.length;U++)L[U]<o&&O[U].setCell(L[U],d);let P=q-Z;for(;P-- >0;)this.ybase===0?this.y<c-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-c&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+q,this.ybase+c-1)}if(_.length>0){const k=[],v=[];for(let ie=0;ie<this.lines.length;ie++)v.push(this.lines.get(ie));const O=this.lines.length;let M=O-1,$=0,L=_[$];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let q=0;for(let ie=Math.min(this.lines.maxLength-1,O+E-1);ie>=0;ie--)if(L&&L.start>M+q){for(let ne=L.newLines.length-1;ne>=0;ne--)this.lines.set(ie--,L.newLines[ne]);ie++,k.push({index:M+1,amount:L.newLines.length}),q+=L.newLines.length,L=_[++$]}else this.lines.set(ie,v[M--]);let Z=0;for(let ie=k.length-1;ie>=0;ie--)k[ie].index+=Z,this.lines.onInsertEmitter.fire(k[ie]),Z+=k[ie].amount;const re=Math.max(0,O+E-this.lines.maxLength);re>0&&this.lines.onTrimEmitter.fire(re)}}translateBufferLineToString(o,c,d=0,_){const E=this.lines.get(o);return E?E.translateToString(c,d,_):""}getWrappedRangeForLine(o){let c=o,d=o;for(;c>0&&this.lines.get(c).isWrapped;)c--;for(;d+1<this.lines.length&&this.lines.get(d+1).isWrapped;)d++;return{first:c,last:d}}setupTabStops(o){for(o!=null?this.tabs[o]||(o=this.prevStop(o)):(this.tabs={},o=0);o<this._cols;o+=this._optionsService.rawOptions.tabStopWidth)this.tabs[o]=!0}prevStop(o){for(o==null&&(o=this.x);!this.tabs[--o]&&o>0;);return o>=this._cols?this._cols-1:o<0?0:o}nextStop(o){for(o==null&&(o=this.x);!this.tabs[++o]&&o<this._cols;);return o>=this._cols?this._cols-1:o<0?0:o}clearMarkers(o){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].line===o&&(this.markers[c].dispose(),this.markers.splice(c--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].dispose(),this.markers.splice(o--,1);this._isClearing=!1}addMarker(o){const c=new a.Marker(o);return this.markers.push(c),c.register(this.lines.onTrim(d=>{c.line-=d,c.line<0&&c.dispose()})),c.register(this.lines.onInsert(d=>{c.line>=d.index&&(c.line+=d.amount)})),c.register(this.lines.onDelete(d=>{c.line>=d.index&&c.line<d.index+d.amount&&c.dispose(),c.line>d.index&&(c.line-=d.amount)})),c.register(c.onDispose(()=>this._removeMarker(c))),c}_removeMarker(o){this._isClearing||this.markers.splice(this.markers.indexOf(o),1)}}},8437:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLine=i.DEFAULT_ATTR_DATA=void 0;const h=l(3734),b=l(511),f=l(643),y=l(482);i.DEFAULT_ATTR_DATA=Object.freeze(new h.AttributeData);let C=0;class w{constructor(a,s,o=!1){this.isWrapped=o,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*a);const c=s||b.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let d=0;d<a;++d)this.setCell(d,c);this.length=a}get(a){const s=this._data[3*a+0],o=2097151&s;return[this._data[3*a+1],2097152&s?this._combined[a]:o?(0,y.stringFromCodePoint)(o):"",s>>22,2097152&s?this._combined[a].charCodeAt(this._combined[a].length-1):o]}set(a,s){this._data[3*a+1]=s[f.CHAR_DATA_ATTR_INDEX],s[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[a]=s[1],this._data[3*a+0]=2097152|a|s[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*a+0]=s[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|s[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(a){return this._data[3*a+0]>>22}hasWidth(a){return 12582912&this._data[3*a+0]}getFg(a){return this._data[3*a+1]}getBg(a){return this._data[3*a+2]}hasContent(a){return 4194303&this._data[3*a+0]}getCodePoint(a){const s=this._data[3*a+0];return 2097152&s?this._combined[a].charCodeAt(this._combined[a].length-1):2097151&s}isCombined(a){return 2097152&this._data[3*a+0]}getString(a){const s=this._data[3*a+0];return 2097152&s?this._combined[a]:2097151&s?(0,y.stringFromCodePoint)(2097151&s):""}isProtected(a){return 536870912&this._data[3*a+2]}loadCell(a,s){return C=3*a,s.content=this._data[C+0],s.fg=this._data[C+1],s.bg=this._data[C+2],2097152&s.content&&(s.combinedData=this._combined[a]),268435456&s.bg&&(s.extended=this._extendedAttrs[a]),s}setCell(a,s){2097152&s.content&&(this._combined[a]=s.combinedData),268435456&s.bg&&(this._extendedAttrs[a]=s.extended),this._data[3*a+0]=s.content,this._data[3*a+1]=s.fg,this._data[3*a+2]=s.bg}setCellFromCodePoint(a,s,o,c,d,_){268435456&d&&(this._extendedAttrs[a]=_),this._data[3*a+0]=s|o<<22,this._data[3*a+1]=c,this._data[3*a+2]=d}addCodepointToCell(a,s){let o=this._data[3*a+0];2097152&o?this._combined[a]+=(0,y.stringFromCodePoint)(s):(2097151&o?(this._combined[a]=(0,y.stringFromCodePoint)(2097151&o)+(0,y.stringFromCodePoint)(s),o&=-2097152,o|=2097152):o=s|4194304,this._data[3*a+0]=o)}insertCells(a,s,o,c){if((a%=this.length)&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new h.ExtendedAttrs),s<this.length-a){const d=new b.CellData;for(let _=this.length-a-s-1;_>=0;--_)this.setCell(a+s+_,this.loadCell(a+_,d));for(let _=0;_<s;++_)this.setCell(a+_,o)}else for(let d=a;d<this.length;++d)this.setCell(d,o);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new h.ExtendedAttrs)}deleteCells(a,s,o,c){if(a%=this.length,s<this.length-a){const d=new b.CellData;for(let _=0;_<this.length-a-s;++_)this.setCell(a+_,this.loadCell(a+s+_,d));for(let _=this.length-s;_<this.length;++_)this.setCell(_,o)}else for(let d=a;d<this.length;++d)this.setCell(d,o);a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new h.ExtendedAttrs),this.getWidth(a)!==0||this.hasContent(a)||this.setCellFromCodePoint(a,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new h.ExtendedAttrs)}replaceCells(a,s,o,c,d=!1){if(d)for(a&&this.getWidth(a-1)===2&&!this.isProtected(a-1)&&this.setCellFromCodePoint(a-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new h.ExtendedAttrs),s<this.length&&this.getWidth(s-1)===2&&!this.isProtected(s)&&this.setCellFromCodePoint(s,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new h.ExtendedAttrs);a<s&&a<this.length;)this.isProtected(a)||this.setCell(a,o),a++;else for(a&&this.getWidth(a-1)===2&&this.setCellFromCodePoint(a-1,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new h.ExtendedAttrs),s<this.length&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s,0,1,(c==null?void 0:c.fg)||0,(c==null?void 0:c.bg)||0,(c==null?void 0:c.extended)||new h.ExtendedAttrs);a<s&&a<this.length;)this.setCell(a++,o)}resize(a,s){if(a===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const o=3*a;if(a>this.length){if(this._data.buffer.byteLength>=4*o)this._data=new Uint32Array(this._data.buffer,0,o);else{const c=new Uint32Array(o);c.set(this._data),this._data=c}for(let c=this.length;c<a;++c)this.setCell(c,s)}else{this._data=this._data.subarray(0,o);const c=Object.keys(this._combined);for(let _=0;_<c.length;_++){const E=parseInt(c[_],10);E>=a&&delete this._combined[E]}const d=Object.keys(this._extendedAttrs);for(let _=0;_<d.length;_++){const E=parseInt(d[_],10);E>=a&&delete this._extendedAttrs[E]}}return this.length=a,4*o*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const a=new Uint32Array(this._data.length);return a.set(this._data),this._data=a,1}return 0}fill(a,s=!1){if(s)for(let o=0;o<this.length;++o)this.isProtected(o)||this.setCell(o,a);else{this._combined={},this._extendedAttrs={};for(let o=0;o<this.length;++o)this.setCell(o,a)}}copyFrom(a){this.length!==a.length?this._data=new Uint32Array(a._data):this._data.set(a._data),this.length=a.length,this._combined={};for(const s in a._combined)this._combined[s]=a._combined[s];this._extendedAttrs={};for(const s in a._extendedAttrs)this._extendedAttrs[s]=a._extendedAttrs[s];this.isWrapped=a.isWrapped}clone(){const a=new w(0);a._data=new Uint32Array(this._data),a.length=this.length;for(const s in this._combined)a._combined[s]=this._combined[s];for(const s in this._extendedAttrs)a._extendedAttrs[s]=this._extendedAttrs[s];return a.isWrapped=this.isWrapped,a}getTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0])return a+(this._data[3*a+0]>>22);return 0}getNoBgTrimmedLength(){for(let a=this.length-1;a>=0;--a)if(4194303&this._data[3*a+0]||50331648&this._data[3*a+2])return a+(this._data[3*a+0]>>22);return 0}copyCellsFrom(a,s,o,c,d){const _=a._data;if(d)for(let k=c-1;k>=0;k--){for(let v=0;v<3;v++)this._data[3*(o+k)+v]=_[3*(s+k)+v];268435456&_[3*(s+k)+2]&&(this._extendedAttrs[o+k]=a._extendedAttrs[s+k])}else for(let k=0;k<c;k++){for(let v=0;v<3;v++)this._data[3*(o+k)+v]=_[3*(s+k)+v];268435456&_[3*(s+k)+2]&&(this._extendedAttrs[o+k]=a._extendedAttrs[s+k])}const E=Object.keys(a._combined);for(let k=0;k<E.length;k++){const v=parseInt(E[k],10);v>=s&&(this._combined[v-s+o]=a._combined[v])}}translateToString(a=!1,s=0,o=this.length){a&&(o=Math.min(o,this.getTrimmedLength()));let c="";for(;s<o;){const d=this._data[3*s+0],_=2097151&d;c+=2097152&d?this._combined[s]:_?(0,y.stringFromCodePoint)(_):f.WHITESPACE_CELL_CHAR,s+=d>>22||1}return c}}i.BufferLine=w},4841:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getRangeLength=void 0,i.getRangeLength=function(l,h){if(l.start.y>l.end.y)throw new Error(`Buffer range end (${l.end.x}, ${l.end.y}) cannot be before start (${l.start.x}, ${l.start.y})`);return h*(l.end.y-l.start.y)+(l.end.x-l.start.x+1)}},4634:(m,i)=>{function l(h,b,f){if(b===h.length-1)return h[b].getTrimmedLength();const y=!h[b].hasContent(f-1)&&h[b].getWidth(f-1)===1,C=h[b+1].getWidth(0)===2;return y&&C?f-1:f}Object.defineProperty(i,"__esModule",{value:!0}),i.getWrappedLineTrimmedLength=i.reflowSmallerGetNewLineLengths=i.reflowLargerApplyNewLayout=i.reflowLargerCreateNewLayout=i.reflowLargerGetLinesToRemove=void 0,i.reflowLargerGetLinesToRemove=function(h,b,f,y,C){const w=[];for(let S=0;S<h.length-1;S++){let a=S,s=h.get(++a);if(!s.isWrapped)continue;const o=[h.get(S)];for(;a<h.length&&s.isWrapped;)o.push(s),s=h.get(++a);if(y>=S&&y<a){S+=o.length-1;continue}let c=0,d=l(o,c,b),_=1,E=0;for(;_<o.length;){const v=l(o,_,b),O=v-E,M=f-d,$=Math.min(O,M);o[c].copyCellsFrom(o[_],E,d,$,!1),d+=$,d===f&&(c++,d=0),E+=$,E===v&&(_++,E=0),d===0&&c!==0&&o[c-1].getWidth(f-1)===2&&(o[c].copyCellsFrom(o[c-1],f-1,d++,1,!1),o[c-1].setCell(f-1,C))}o[c].replaceCells(d,f,C);let k=0;for(let v=o.length-1;v>0&&(v>c||o[v].getTrimmedLength()===0);v--)k++;k>0&&(w.push(S+o.length-k),w.push(k)),S+=o.length-1}return w},i.reflowLargerCreateNewLayout=function(h,b){const f=[];let y=0,C=b[y],w=0;for(let S=0;S<h.length;S++)if(C===S){const a=b[++y];h.onDeleteEmitter.fire({index:S-w,amount:a}),S+=a-1,w+=a,C=b[++y]}else f.push(S);return{layout:f,countRemoved:w}},i.reflowLargerApplyNewLayout=function(h,b){const f=[];for(let y=0;y<b.length;y++)f.push(h.get(b[y]));for(let y=0;y<f.length;y++)h.set(y,f[y]);h.length=b.length},i.reflowSmallerGetNewLineLengths=function(h,b,f){const y=[],C=h.map((s,o)=>l(h,o,b)).reduce((s,o)=>s+o);let w=0,S=0,a=0;for(;a<C;){if(C-a<f){y.push(C-a);break}w+=f;const s=l(h,S,b);w>s&&(w-=s,S++);const o=h[S].getWidth(w-1)===2;o&&w--;const c=o?f-1:f;y.push(c),a+=c}return y},i.getWrappedLineTrimmedLength=l},5295:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferSet=void 0;const h=l(8460),b=l(844),f=l(9092);class y extends b.Disposable{constructor(w,S){super(),this._optionsService=w,this._bufferService=S,this._onBufferActivate=this.register(new h.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,S){this._normal.resize(w,S),this._alt.resize(w,S),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}i.BufferSet=y},511:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CellData=void 0;const h=l(482),b=l(643),f=l(3734);class y extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const S=new y;return S.setFromCharData(w),S}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,h.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[b.CHAR_DATA_ATTR_INDEX],this.bg=0;let S=!1;if(w[b.CHAR_DATA_CHAR_INDEX].length>2)S=!0;else if(w[b.CHAR_DATA_CHAR_INDEX].length===2){const a=w[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=a&&a<=56319){const s=w[b.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(a-55296)+s-56320+65536|w[b.CHAR_DATA_WIDTH_INDEX]<<22:S=!0}else S=!0}else this.content=w[b.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[b.CHAR_DATA_WIDTH_INDEX]<<22;S&&(this.combinedData=w[b.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[b.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}i.CellData=y},643:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WHITESPACE_CELL_CODE=i.WHITESPACE_CELL_WIDTH=i.WHITESPACE_CELL_CHAR=i.NULL_CELL_CODE=i.NULL_CELL_WIDTH=i.NULL_CELL_CHAR=i.CHAR_DATA_CODE_INDEX=i.CHAR_DATA_WIDTH_INDEX=i.CHAR_DATA_CHAR_INDEX=i.CHAR_DATA_ATTR_INDEX=i.DEFAULT_EXT=i.DEFAULT_ATTR=i.DEFAULT_COLOR=void 0,i.DEFAULT_COLOR=0,i.DEFAULT_ATTR=256|i.DEFAULT_COLOR<<9,i.DEFAULT_EXT=0,i.CHAR_DATA_ATTR_INDEX=0,i.CHAR_DATA_CHAR_INDEX=1,i.CHAR_DATA_WIDTH_INDEX=2,i.CHAR_DATA_CODE_INDEX=3,i.NULL_CELL_CHAR="",i.NULL_CELL_WIDTH=1,i.NULL_CELL_CODE=0,i.WHITESPACE_CELL_CHAR=" ",i.WHITESPACE_CELL_WIDTH=1,i.WHITESPACE_CELL_CODE=32},4863:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=void 0;const h=l(8460),b=l(844);class f{get id(){return this._id}constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new h.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,b.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}i.Marker=f,f._nextId=1},7116:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_CHARSET=i.CHARSETS=void 0,i.CHARSETS={},i.DEFAULT_CHARSET=i.CHARSETS.B,i.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},i.CHARSETS.A={"#":"£"},i.CHARSETS.B=void 0,i.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},i.CHARSETS.C=i.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},i.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},i.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},i.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},i.CHARSETS.E=i.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},i.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},i.CHARSETS.H=i.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},i.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(m,i)=>{var l,h,b;Object.defineProperty(i,"__esModule",{value:!0}),i.C1_ESCAPED=i.C1=i.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(l||(i.C0=l={})),function(f){f.PAD="",f.HOP="",f.BPH="",f.NBH="",f.IND="",f.NEL="",f.SSA="",f.ESA="",f.HTS="",f.HTJ="",f.VTS="",f.PLD="",f.PLU="",f.RI="",f.SS2="",f.SS3="",f.DCS="",f.PU1="",f.PU2="",f.STS="",f.CCH="",f.MW="",f.SPA="",f.EPA="",f.SOS="",f.SGCI="",f.SCI="",f.CSI="",f.ST="",f.OSC="",f.PM="",f.APC=""}(h||(i.C1=h={})),function(f){f.ST=`${l.ESC}\\`}(b||(i.C1_ESCAPED=b={}))},7399:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.evaluateKeyboardEvent=void 0;const h=l(2584),b={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};i.evaluateKeyboardEvent=function(f,y,C,w){const S={type:0,cancel:!1,key:void 0},a=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?S.key=y?h.C0.ESC+"OA":h.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?S.key=y?h.C0.ESC+"OD":h.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?S.key=y?h.C0.ESC+"OC":h.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(S.key=y?h.C0.ESC+"OB":h.C0.ESC+"[B");break;case 8:if(f.altKey){S.key=h.C0.ESC+h.C0.DEL;break}S.key=h.C0.DEL;break;case 9:if(f.shiftKey){S.key=h.C0.ESC+"[Z";break}S.key=h.C0.HT,S.cancel=!0;break;case 13:S.key=f.altKey?h.C0.ESC+h.C0.CR:h.C0.CR,S.cancel=!0;break;case 27:S.key=h.C0.ESC,f.altKey&&(S.key=h.C0.ESC+h.C0.ESC),S.cancel=!0;break;case 37:if(f.metaKey)break;a?(S.key=h.C0.ESC+"[1;"+(a+1)+"D",S.key===h.C0.ESC+"[1;3D"&&(S.key=h.C0.ESC+(C?"b":"[1;5D"))):S.key=y?h.C0.ESC+"OD":h.C0.ESC+"[D";break;case 39:if(f.metaKey)break;a?(S.key=h.C0.ESC+"[1;"+(a+1)+"C",S.key===h.C0.ESC+"[1;3C"&&(S.key=h.C0.ESC+(C?"f":"[1;5C"))):S.key=y?h.C0.ESC+"OC":h.C0.ESC+"[C";break;case 38:if(f.metaKey)break;a?(S.key=h.C0.ESC+"[1;"+(a+1)+"A",C||S.key!==h.C0.ESC+"[1;3A"||(S.key=h.C0.ESC+"[1;5A")):S.key=y?h.C0.ESC+"OA":h.C0.ESC+"[A";break;case 40:if(f.metaKey)break;a?(S.key=h.C0.ESC+"[1;"+(a+1)+"B",C||S.key!==h.C0.ESC+"[1;3B"||(S.key=h.C0.ESC+"[1;5B")):S.key=y?h.C0.ESC+"OB":h.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(S.key=h.C0.ESC+"[2~");break;case 46:S.key=a?h.C0.ESC+"[3;"+(a+1)+"~":h.C0.ESC+"[3~";break;case 36:S.key=a?h.C0.ESC+"[1;"+(a+1)+"H":y?h.C0.ESC+"OH":h.C0.ESC+"[H";break;case 35:S.key=a?h.C0.ESC+"[1;"+(a+1)+"F":y?h.C0.ESC+"OF":h.C0.ESC+"[F";break;case 33:f.shiftKey?S.type=2:f.ctrlKey?S.key=h.C0.ESC+"[5;"+(a+1)+"~":S.key=h.C0.ESC+"[5~";break;case 34:f.shiftKey?S.type=3:f.ctrlKey?S.key=h.C0.ESC+"[6;"+(a+1)+"~":S.key=h.C0.ESC+"[6~";break;case 112:S.key=a?h.C0.ESC+"[1;"+(a+1)+"P":h.C0.ESC+"OP";break;case 113:S.key=a?h.C0.ESC+"[1;"+(a+1)+"Q":h.C0.ESC+"OQ";break;case 114:S.key=a?h.C0.ESC+"[1;"+(a+1)+"R":h.C0.ESC+"OR";break;case 115:S.key=a?h.C0.ESC+"[1;"+(a+1)+"S":h.C0.ESC+"OS";break;case 116:S.key=a?h.C0.ESC+"[15;"+(a+1)+"~":h.C0.ESC+"[15~";break;case 117:S.key=a?h.C0.ESC+"[17;"+(a+1)+"~":h.C0.ESC+"[17~";break;case 118:S.key=a?h.C0.ESC+"[18;"+(a+1)+"~":h.C0.ESC+"[18~";break;case 119:S.key=a?h.C0.ESC+"[19;"+(a+1)+"~":h.C0.ESC+"[19~";break;case 120:S.key=a?h.C0.ESC+"[20;"+(a+1)+"~":h.C0.ESC+"[20~";break;case 121:S.key=a?h.C0.ESC+"[21;"+(a+1)+"~":h.C0.ESC+"[21~";break;case 122:S.key=a?h.C0.ESC+"[23;"+(a+1)+"~":h.C0.ESC+"[23~";break;case 123:S.key=a?h.C0.ESC+"[24;"+(a+1)+"~":h.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(C&&!w||!f.altKey||f.metaKey)!C||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?S.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(S.key=h.C0.US),f.key==="@"&&(S.key=h.C0.NUL)):f.keyCode===65&&(S.type=1);else{const s=b[f.keyCode],o=s==null?void 0:s[f.shiftKey?1:0];if(o)S.key=h.C0.ESC+o;else if(f.keyCode>=65&&f.keyCode<=90){const c=f.ctrlKey?f.keyCode-64:f.keyCode+32;let d=String.fromCharCode(c);f.shiftKey&&(d=d.toUpperCase()),S.key=h.C0.ESC+d}else if(f.keyCode===32)S.key=h.C0.ESC+(f.ctrlKey?h.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let c=f.code.slice(3,4);f.shiftKey||(c=c.toLowerCase()),S.key=h.C0.ESC+c,S.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?S.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?S.key=h.C0.NUL:f.keyCode>=51&&f.keyCode<=55?S.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?S.key=h.C0.DEL:f.keyCode===219?S.key=h.C0.ESC:f.keyCode===220?S.key=h.C0.FS:f.keyCode===221&&(S.key=h.C0.GS)}return S}},482:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Utf8ToUtf32=i.StringToUtf32=i.utf32ToString=i.stringFromCodePoint=void 0,i.stringFromCodePoint=function(l){return l>65535?(l-=65536,String.fromCharCode(55296+(l>>10))+String.fromCharCode(l%1024+56320)):String.fromCharCode(l)},i.utf32ToString=function(l,h=0,b=l.length){let f="";for(let y=h;y<b;++y){let C=l[y];C>65535?(C-=65536,f+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):f+=String.fromCharCode(C)}return f},i.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(l,h){const b=l.length;if(!b)return 0;let f=0,y=0;if(this._interim){const C=l.charCodeAt(y++);56320<=C&&C<=57343?h[f++]=1024*(this._interim-55296)+C-56320+65536:(h[f++]=this._interim,h[f++]=C),this._interim=0}for(let C=y;C<b;++C){const w=l.charCodeAt(C);if(55296<=w&&w<=56319){if(++C>=b)return this._interim=w,f;const S=l.charCodeAt(C);56320<=S&&S<=57343?h[f++]=1024*(w-55296)+S-56320+65536:(h[f++]=w,h[f++]=S)}else w!==65279&&(h[f++]=w)}return f}},i.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(l,h){const b=l.length;if(!b)return 0;let f,y,C,w,S=0,a=0,s=0;if(this.interim[0]){let d=!1,_=this.interim[0];_&=(224&_)==192?31:(240&_)==224?15:7;let E,k=0;for(;(E=63&this.interim[++k])&&k<4;)_<<=6,_|=E;const v=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,O=v-k;for(;s<O;){if(s>=b)return 0;if(E=l[s++],(192&E)!=128){s--,d=!0;break}this.interim[k++]=E,_<<=6,_|=63&E}d||(v===2?_<128?s--:h[S++]=_:v===3?_<2048||_>=55296&&_<=57343||_===65279||(h[S++]=_):_<65536||_>1114111||(h[S++]=_)),this.interim.fill(0)}const o=b-4;let c=s;for(;c<b;){for(;!(!(c<o)||128&(f=l[c])||128&(y=l[c+1])||128&(C=l[c+2])||128&(w=l[c+3]));)h[S++]=f,h[S++]=y,h[S++]=C,h[S++]=w,c+=4;if(f=l[c++],f<128)h[S++]=f;else if((224&f)==192){if(c>=b)return this.interim[0]=f,S;if(y=l[c++],(192&y)!=128){c--;continue}if(a=(31&f)<<6|63&y,a<128){c--;continue}h[S++]=a}else if((240&f)==224){if(c>=b)return this.interim[0]=f,S;if(y=l[c++],(192&y)!=128){c--;continue}if(c>=b)return this.interim[0]=f,this.interim[1]=y,S;if(C=l[c++],(192&C)!=128){c--;continue}if(a=(15&f)<<12|(63&y)<<6|63&C,a<2048||a>=55296&&a<=57343||a===65279)continue;h[S++]=a}else if((248&f)==240){if(c>=b)return this.interim[0]=f,S;if(y=l[c++],(192&y)!=128){c--;continue}if(c>=b)return this.interim[0]=f,this.interim[1]=y,S;if(C=l[c++],(192&C)!=128){c--;continue}if(c>=b)return this.interim[0]=f,this.interim[1]=y,this.interim[2]=C,S;if(w=l[c++],(192&w)!=128){c--;continue}if(a=(7&f)<<18|(63&y)<<12|(63&C)<<6|63&w,a<65536||a>1114111)continue;h[S++]=a}}return S}}},225:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeV6=void 0;const l=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],h=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let b;i.UnicodeV6=class{constructor(){if(this.version="6",!b){b=new Uint8Array(65536),b.fill(1),b[0]=0,b.fill(0,1,32),b.fill(0,127,160),b.fill(2,4352,4448),b[9001]=2,b[9002]=2,b.fill(2,11904,42192),b[12351]=1,b.fill(2,44032,55204),b.fill(2,63744,64256),b.fill(2,65040,65050),b.fill(2,65072,65136),b.fill(2,65280,65377),b.fill(2,65504,65511);for(let f=0;f<l.length;++f)b.fill(0,l[f][0],l[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?b[f]:function(y,C){let w,S=0,a=C.length-1;if(y<C[0][0]||y>C[a][1])return!1;for(;a>=S;)if(w=S+a>>1,y>C[w][1])S=w+1;else{if(!(y<C[w][0]))return!0;a=w-1}return!1}(f,h)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.WriteBuffer=void 0;const h=l(8460),b=l(844);class f extends b.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let S;for(this._isSyncWriting=!0;S=this._writeBuffer.shift();){this._action(S);const a=this._callbacks.shift();a&&a()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(w)}_innerWrite(C=0,w=!0){const S=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const a=this._writeBuffer[this._bufferOffset],s=this._action(a,w);if(s){const c=d=>Date.now()-S>=12?setTimeout(()=>this._innerWrite(0,d)):this._innerWrite(S,d);return void s.catch(d=>(queueMicrotask(()=>{throw d}),Promise.resolve(!1))).then(c)}const o=this._callbacks[this._bufferOffset];if(o&&o(),this._bufferOffset++,this._pendingData-=a.length,Date.now()-S>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}i.WriteBuffer=f},5941:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.toRgbString=i.parseColor=void 0;const l=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,h=/^[\da-f]+$/;function b(f,y){const C=f.toString(16),w=C.length<2?"0"+C:C;switch(y){case 4:return C[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}i.parseColor=function(f){if(!f)return;let y=f.toLowerCase();if(y.indexOf("rgb:")===0){y=y.slice(4);const C=l.exec(y);if(C){const w=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/w*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/w*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/w*255)]}}else if(y.indexOf("#")===0&&(y=y.slice(1),h.exec(y)&&[3,6,9,12].includes(y.length))){const C=y.length/3,w=[0,0,0];for(let S=0;S<3;++S){const a=parseInt(y.slice(C*S,C*S+C),16);w[S]=C===1?a<<4:C===2?a:C===3?a>>4:a>>8}return w}},i.toRgbString=function(f,y=16){const[C,w,S]=f;return`rgb:${b(C,y)}/${b(w,y)}/${b(S,y)}`}},5770:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PAYLOAD_LIMIT=void 0,i.PAYLOAD_LIMIT=1e7},6351:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DcsHandler=i.DcsParser=void 0;const h=l(482),b=l(8742),f=l(5770),y=[];i.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=y,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=y}registerHandler(w,S){this._handlers[w]===void 0&&(this._handlers[w]=[]);const a=this._handlers[w];return a.push(S),{dispose:()=>{const s=a.indexOf(S);s!==-1&&a.splice(s,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=y,this._ident=0}hook(w,S){if(this.reset(),this._ident=w,this._active=this._handlers[w]||y,this._active.length)for(let a=this._active.length-1;a>=0;a--)this._active[a].hook(S);else this._handlerFb(this._ident,"HOOK",S)}put(w,S,a){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(w,S,a);else this._handlerFb(this._ident,"PUT",(0,h.utf32ToString)(w,S,a))}unhook(w,S=!0){if(this._active.length){let a=!1,s=this._active.length-1,o=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,a=S,o=this._stack.fallThrough,this._stack.paused=!1),!o&&a===!1){for(;s>=0&&(a=this._active[s].unhook(w),a!==!0);s--)if(a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,a;s--}for(;s>=0;s--)if(a=this._active[s].unhook(!1),a instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,a}else this._handlerFb(this._ident,"UNHOOK",w);this._active=y,this._ident=0}};const C=new b.Params;C.addParam(0),i.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=C,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():C,this._data="",this._hitLimit=!1}put(w,S,a){this._hitLimit||(this._data+=(0,h.utf32ToString)(w,S,a),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let S=!1;if(this._hitLimit)S=!1;else if(w&&(S=this._handler(this._data,this._params),S instanceof Promise))return S.then(a=>(this._params=C,this._data="",this._hitLimit=!1,a));return this._params=C,this._data="",this._hitLimit=!1,S}}},2015:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.EscapeSequenceParser=i.VT500_TRANSITION_TABLE=i.TransitionTable=void 0;const h=l(844),b=l(8742),f=l(6242),y=l(6351);class C{constructor(s){this.table=new Uint8Array(s)}setDefault(s,o){this.table.fill(s<<4|o)}add(s,o,c,d){this.table[o<<8|s]=c<<4|d}addMany(s,o,c,d){for(let _=0;_<s.length;_++)this.table[o<<8|s[_]]=c<<4|d}}i.TransitionTable=C;const w=160;i.VT500_TRANSITION_TABLE=function(){const a=new C(4095),s=Array.apply(null,Array(256)).map((k,v)=>v),o=(k,v)=>s.slice(k,v),c=o(32,127),d=o(0,24);d.push(25),d.push.apply(d,o(28,32));const _=o(0,14);let E;for(E in a.setDefault(1,0),a.addMany(c,0,2,0),_)a.addMany([24,26,153,154],E,3,0),a.addMany(o(128,144),E,3,0),a.addMany(o(144,152),E,3,0),a.add(156,E,0,0),a.add(27,E,11,1),a.add(157,E,4,8),a.addMany([152,158,159],E,0,7),a.add(155,E,11,3),a.add(144,E,11,9);return a.addMany(d,0,3,0),a.addMany(d,1,3,1),a.add(127,1,0,1),a.addMany(d,8,0,8),a.addMany(d,3,3,3),a.add(127,3,0,3),a.addMany(d,4,3,4),a.add(127,4,0,4),a.addMany(d,6,3,6),a.addMany(d,5,3,5),a.add(127,5,0,5),a.addMany(d,2,3,2),a.add(127,2,0,2),a.add(93,1,4,8),a.addMany(c,8,5,8),a.add(127,8,5,8),a.addMany([156,27,24,26,7],8,6,0),a.addMany(o(28,32),8,0,8),a.addMany([88,94,95],1,0,7),a.addMany(c,7,0,7),a.addMany(d,7,0,7),a.add(156,7,0,0),a.add(127,7,0,7),a.add(91,1,11,3),a.addMany(o(64,127),3,7,0),a.addMany(o(48,60),3,8,4),a.addMany([60,61,62,63],3,9,4),a.addMany(o(48,60),4,8,4),a.addMany(o(64,127),4,7,0),a.addMany([60,61,62,63],4,0,6),a.addMany(o(32,64),6,0,6),a.add(127,6,0,6),a.addMany(o(64,127),6,0,0),a.addMany(o(32,48),3,9,5),a.addMany(o(32,48),5,9,5),a.addMany(o(48,64),5,0,6),a.addMany(o(64,127),5,7,0),a.addMany(o(32,48),4,9,5),a.addMany(o(32,48),1,9,2),a.addMany(o(32,48),2,9,2),a.addMany(o(48,127),2,10,0),a.addMany(o(48,80),1,10,0),a.addMany(o(81,88),1,10,0),a.addMany([89,90,92],1,10,0),a.addMany(o(96,127),1,10,0),a.add(80,1,11,9),a.addMany(d,9,0,9),a.add(127,9,0,9),a.addMany(o(28,32),9,0,9),a.addMany(o(32,48),9,9,12),a.addMany(o(48,60),9,8,10),a.addMany([60,61,62,63],9,9,10),a.addMany(d,11,0,11),a.addMany(o(32,128),11,0,11),a.addMany(o(28,32),11,0,11),a.addMany(d,10,0,10),a.add(127,10,0,10),a.addMany(o(28,32),10,0,10),a.addMany(o(48,60),10,8,10),a.addMany([60,61,62,63],10,0,11),a.addMany(o(32,48),10,9,12),a.addMany(d,12,0,12),a.add(127,12,0,12),a.addMany(o(28,32),12,0,12),a.addMany(o(32,48),12,9,12),a.addMany(o(48,64),12,0,11),a.addMany(o(64,127),12,12,13),a.addMany(o(64,127),10,12,13),a.addMany(o(64,127),9,12,13),a.addMany(d,13,13,13),a.addMany(c,13,13,13),a.add(127,13,0,13),a.addMany([27,156,24,26],13,14,0),a.add(w,0,2,0),a.add(w,8,5,8),a.add(w,6,0,6),a.add(w,11,0,11),a.add(w,13,13,13),a}();class S extends h.Disposable{constructor(s=i.VT500_TRANSITION_TABLE){super(),this._transitions=s,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new b.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(o,c,d)=>{},this._executeHandlerFb=o=>{},this._csiHandlerFb=(o,c)=>{},this._escHandlerFb=o=>{},this._errorHandlerFb=o=>o,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,h.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new y.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(s,o=[64,126]){let c=0;if(s.prefix){if(s.prefix.length>1)throw new Error("only one byte as prefix supported");if(c=s.prefix.charCodeAt(0),c&&60>c||c>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(s.intermediates){if(s.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let _=0;_<s.intermediates.length;++_){const E=s.intermediates.charCodeAt(_);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");c<<=8,c|=E}}if(s.final.length!==1)throw new Error("final must be a single byte");const d=s.final.charCodeAt(0);if(o[0]>d||d>o[1])throw new Error(`final must be in range ${o[0]} .. ${o[1]}`);return c<<=8,c|=d,c}identToString(s){const o=[];for(;s;)o.push(String.fromCharCode(255&s)),s>>=8;return o.reverse().join("")}setPrintHandler(s){this._printHandler=s}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(s,o){const c=this._identifier(s,[48,126]);this._escHandlers[c]===void 0&&(this._escHandlers[c]=[]);const d=this._escHandlers[c];return d.push(o),{dispose:()=>{const _=d.indexOf(o);_!==-1&&d.splice(_,1)}}}clearEscHandler(s){this._escHandlers[this._identifier(s,[48,126])]&&delete this._escHandlers[this._identifier(s,[48,126])]}setEscHandlerFallback(s){this._escHandlerFb=s}setExecuteHandler(s,o){this._executeHandlers[s.charCodeAt(0)]=o}clearExecuteHandler(s){this._executeHandlers[s.charCodeAt(0)]&&delete this._executeHandlers[s.charCodeAt(0)]}setExecuteHandlerFallback(s){this._executeHandlerFb=s}registerCsiHandler(s,o){const c=this._identifier(s);this._csiHandlers[c]===void 0&&(this._csiHandlers[c]=[]);const d=this._csiHandlers[c];return d.push(o),{dispose:()=>{const _=d.indexOf(o);_!==-1&&d.splice(_,1)}}}clearCsiHandler(s){this._csiHandlers[this._identifier(s)]&&delete this._csiHandlers[this._identifier(s)]}setCsiHandlerFallback(s){this._csiHandlerFb=s}registerDcsHandler(s,o){return this._dcsParser.registerHandler(this._identifier(s),o)}clearDcsHandler(s){this._dcsParser.clearHandler(this._identifier(s))}setDcsHandlerFallback(s){this._dcsParser.setHandlerFallback(s)}registerOscHandler(s,o){return this._oscParser.registerHandler(s,o)}clearOscHandler(s){this._oscParser.clearHandler(s)}setOscHandlerFallback(s){this._oscParser.setHandlerFallback(s)}setErrorHandler(s){this._errorHandler=s}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(s,o,c,d,_){this._parseStack.state=s,this._parseStack.handlers=o,this._parseStack.handlerPos=c,this._parseStack.transition=d,this._parseStack.chunkPos=_}parse(s,o,c){let d,_=0,E=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(c===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const v=this._parseStack.handlers;let O=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(c===!1&&O>-1){for(;O>=0&&(d=v[O](this._params),d!==!0);O--)if(d instanceof Promise)return this._parseStack.handlerPos=O,d}this._parseStack.handlers=[];break;case 4:if(c===!1&&O>-1){for(;O>=0&&(d=v[O](),d!==!0);O--)if(d instanceof Promise)return this._parseStack.handlerPos=O,d}this._parseStack.handlers=[];break;case 6:if(_=s[this._parseStack.chunkPos],d=this._dcsParser.unhook(_!==24&&_!==26,c),d)return d;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(_=s[this._parseStack.chunkPos],d=this._oscParser.end(_!==24&&_!==26,c),d)return d;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let v=k;v<o;++v){switch(_=s[v],E=this._transitions.table[this.currentState<<8|(_<160?_:w)],E>>4){case 2:for(let q=v+1;;++q){if(q>=o||(_=s[q])<32||_>126&&_<w){this._printHandler(s,v,q),v=q-1;break}if(++q>=o||(_=s[q])<32||_>126&&_<w){this._printHandler(s,v,q),v=q-1;break}if(++q>=o||(_=s[q])<32||_>126&&_<w){this._printHandler(s,v,q),v=q-1;break}if(++q>=o||(_=s[q])<32||_>126&&_<w){this._printHandler(s,v,q),v=q-1;break}}break;case 3:this._executeHandlers[_]?this._executeHandlers[_]():this._executeHandlerFb(_),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:v,code:_,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const O=this._csiHandlers[this._collect<<8|_];let M=O?O.length-1:-1;for(;M>=0&&(d=O[M](this._params),d!==!0);M--)if(d instanceof Promise)return this._preserveStack(3,O,M,E,v),d;M<0&&this._csiHandlerFb(this._collect<<8|_,this._params),this.precedingCodepoint=0;break;case 8:do switch(_){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(_-48)}while(++v<o&&(_=s[v])>47&&_<60);v--;break;case 9:this._collect<<=8,this._collect|=_;break;case 10:const $=this._escHandlers[this._collect<<8|_];let L=$?$.length-1:-1;for(;L>=0&&(d=$[L](),d!==!0);L--)if(d instanceof Promise)return this._preserveStack(4,$,L,E,v),d;L<0&&this._escHandlerFb(this._collect<<8|_),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|_,this._params);break;case 13:for(let q=v+1;;++q)if(q>=o||(_=s[q])===24||_===26||_===27||_>127&&_<w){this._dcsParser.put(s,v,q),v=q-1;break}break;case 14:if(d=this._dcsParser.unhook(_!==24&&_!==26),d)return this._preserveStack(6,[],0,E,v),d;_===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let q=v+1;;q++)if(q>=o||(_=s[q])<32||_>127&&_<w){this._oscParser.put(s,v,q),v=q-1;break}break;case 6:if(d=this._oscParser.end(_!==24&&_!==26),d)return this._preserveStack(5,[],0,E,v),d;_===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}}}i.EscapeSequenceParser=S},6242:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OscHandler=i.OscParser=void 0;const h=l(5770),b=l(482),f=[];i.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(y,C){this._handlers[y]===void 0&&(this._handlers[y]=[]);const w=this._handlers[y];return w.push(C),{dispose:()=>{const S=w.indexOf(C);S!==-1&&w.splice(S,1)}}}clearHandler(y){this._handlers[y]&&delete this._handlers[y]}setHandlerFallback(y){this._handlerFb=y}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let y=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;y>=0;--y)this._active[y].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].start();else this._handlerFb(this._id,"START")}_put(y,C,w){if(this._active.length)for(let S=this._active.length-1;S>=0;S--)this._active[S].put(y,C,w);else this._handlerFb(this._id,"PUT",(0,b.utf32ToString)(y,C,w))}start(){this.reset(),this._state=1}put(y,C,w){if(this._state!==3){if(this._state===1)for(;C<w;){const S=y[C++];if(S===59){this._state=2,this._start();break}if(S<48||57<S)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+S-48}this._state===2&&w-C>0&&this._put(y,C,w)}}end(y,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,S=this._active.length-1,a=!1;if(this._stack.paused&&(S=this._stack.loopPosition-1,w=C,a=this._stack.fallThrough,this._stack.paused=!1),!a&&w===!1){for(;S>=0&&(w=this._active[S].end(y),w!==!0);S--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!1,w;S--}for(;S>=0;S--)if(w=this._active[S].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=S,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",y);this._active=f,this._id=-1,this._state=0}}},i.OscHandler=class{constructor(y){this._handler=y,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(y,C,w){this._hitLimit||(this._data+=(0,b.utf32ToString)(y,C,w),this._data.length>h.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(y){let C=!1;if(this._hitLimit)C=!1;else if(y&&(C=this._handler(this._data),C instanceof Promise))return C.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,C}}},8742:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.Params=void 0;const l=2147483647;class h{static fromArray(f){const y=new h;if(!f.length)return y;for(let C=Array.isArray(f[0])?1:0;C<f.length;++C){const w=f[C];if(Array.isArray(w))for(let S=0;S<w.length;++S)y.addSubParam(w[S]);else y.addParam(w)}return y}constructor(f=32,y=32){if(this.maxLength=f,this.maxSubParamsLength=y,y>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(y),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new h(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let y=0;y<this.length;++y){f.push(this.params[y]);const C=this._subParamsIdx[y]>>8,w=255&this._subParamsIdx[y];w-C>0&&f.push(Array.prototype.slice.call(this._subParams,C,w))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>l?l:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>l?l:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const y=this._subParamsIdx[f]>>8,C=255&this._subParamsIdx[f];return C-y>0?this._subParams.subarray(y,C):null}getSubParamsAll(){const f={};for(let y=0;y<this.length;++y){const C=this._subParamsIdx[y]>>8,w=255&this._subParamsIdx[y];w-C>0&&(f[y]=this._subParams.slice(C,w))}return f}addDigit(f){let y;if(this._rejectDigits||!(y=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,w=C[y-1];C[y-1]=~w?Math.min(10*w+f,l):f}}i.Params=h},5741:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.AddonManager=void 0,i.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let l=this._addons.length-1;l>=0;l--)this._addons[l].instance.dispose()}loadAddon(l,h){const b={instance:h,dispose:h.dispose,isDisposed:!1};this._addons.push(b),h.dispose=()=>this._wrappedAddonDispose(b),h.activate(l)}_wrappedAddonDispose(l){if(l.isDisposed)return;let h=-1;for(let b=0;b<this._addons.length;b++)if(this._addons[b]===l){h=b;break}if(h===-1)throw new Error("Could not dispose an addon that has not been loaded");l.isDisposed=!0,l.dispose.apply(l.instance),this._addons.splice(h,1)}}},8771:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferApiView=void 0;const h=l(3785),b=l(511);i.BufferApiView=class{constructor(f,y){this._buffer=f,this.type=y}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const y=this._buffer.lines.get(f);if(y)return new h.BufferLineApiView(y)}getNullCell(){return new b.CellData}}},3785:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferLineApiView=void 0;const h=l(511);i.BufferLineApiView=class{constructor(b){this._line=b}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(b,f){if(!(b<0||b>=this._line.length))return f?(this._line.loadCell(b,f),f):this._line.loadCell(b,new h.CellData)}translateToString(b,f,y){return this._line.translateToString(b,f,y)}}},8285:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BufferNamespaceApi=void 0;const h=l(8771),b=l(8460),f=l(844);class y extends f.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new b.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new h.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new h.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}i.BufferNamespaceApi=y},7975:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ParserApi=void 0,i.ParserApi=class{constructor(l){this._core=l}registerCsiHandler(l,h){return this._core.registerCsiHandler(l,b=>h(b.toArray()))}addCsiHandler(l,h){return this.registerCsiHandler(l,h)}registerDcsHandler(l,h){return this._core.registerDcsHandler(l,(b,f)=>h(b,f.toArray()))}addDcsHandler(l,h){return this.registerDcsHandler(l,h)}registerEscHandler(l,h){return this._core.registerEscHandler(l,h)}addEscHandler(l,h){return this.registerEscHandler(l,h)}registerOscHandler(l,h){return this._core.registerOscHandler(l,h)}addOscHandler(l,h){return this.registerOscHandler(l,h)}}},7090:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeApi=void 0,i.UnicodeApi=class{constructor(l){this._core=l}register(l){this._core.unicodeService.register(l)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(l){this._core.unicodeService.activeVersion=l}}},744:function(m,i,l){var h=this&&this.__decorate||function(a,s,o,c){var d,_=arguments.length,E=_<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,s,o,c);else for(var k=a.length-1;k>=0;k--)(d=a[k])&&(E=(_<3?d(E):_>3?d(s,o,E):d(s,o))||E);return _>3&&E&&Object.defineProperty(s,o,E),E},b=this&&this.__param||function(a,s){return function(o,c){s(o,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.BufferService=i.MINIMUM_ROWS=i.MINIMUM_COLS=void 0;const f=l(8460),y=l(844),C=l(5295),w=l(2585);i.MINIMUM_COLS=2,i.MINIMUM_ROWS=1;let S=i.BufferService=class extends y.Disposable{get buffer(){return this.buffers.active}constructor(a){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(a.rawOptions.cols||0,i.MINIMUM_COLS),this.rows=Math.max(a.rawOptions.rows||0,i.MINIMUM_ROWS),this.buffers=this.register(new C.BufferSet(a,this))}resize(a,s){this.cols=a,this.rows=s,this.buffers.resize(a,s),this._onResize.fire({cols:a,rows:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(a,s=!1){const o=this.buffer;let c;c=this._cachedBlankLine,c&&c.length===this.cols&&c.getFg(0)===a.fg&&c.getBg(0)===a.bg||(c=o.getBlankLine(a,s),this._cachedBlankLine=c),c.isWrapped=s;const d=o.ybase+o.scrollTop,_=o.ybase+o.scrollBottom;if(o.scrollTop===0){const E=o.lines.isFull;_===o.lines.length-1?E?o.lines.recycle().copyFrom(c):o.lines.push(c.clone()):o.lines.splice(_+1,0,c.clone()),E?this.isUserScrolling&&(o.ydisp=Math.max(o.ydisp-1,0)):(o.ybase++,this.isUserScrolling||o.ydisp++)}else{const E=_-d+1;o.lines.shiftElements(d+1,E-1,-1),o.lines.set(_,c.clone())}this.isUserScrolling||(o.ydisp=o.ybase),this._onScroll.fire(o.ydisp)}scrollLines(a,s,o){const c=this.buffer;if(a<0){if(c.ydisp===0)return;this.isUserScrolling=!0}else a+c.ydisp>=c.ybase&&(this.isUserScrolling=!1);const d=c.ydisp;c.ydisp=Math.max(Math.min(c.ydisp+a,c.ybase),0),d!==c.ydisp&&(s||this._onScroll.fire(c.ydisp))}};i.BufferService=S=h([b(0,w.IOptionsService)],S)},7994:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.CharsetService=void 0,i.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(l){this.glevel=l,this.charset=this._charsets[l]}setgCharset(l,h){this._charsets[l]=h,this.glevel===l&&(this.charset=h)}}},1753:function(m,i,l){var h=this&&this.__decorate||function(c,d,_,E){var k,v=arguments.length,O=v<3?d:E===null?E=Object.getOwnPropertyDescriptor(d,_):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(c,d,_,E);else for(var M=c.length-1;M>=0;M--)(k=c[M])&&(O=(v<3?k(O):v>3?k(d,_,O):k(d,_))||O);return v>3&&O&&Object.defineProperty(d,_,O),O},b=this&&this.__param||function(c,d){return function(_,E){d(_,E,c)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreMouseService=void 0;const f=l(2585),y=l(8460),C=l(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:c=>c.button!==4&&c.action===1&&(c.ctrl=!1,c.alt=!1,c.shift=!1,!0)},VT200:{events:19,restrict:c=>c.action!==32},DRAG:{events:23,restrict:c=>c.action!==32||c.button!==3},ANY:{events:31,restrict:c=>!0}};function S(c,d){let _=(c.ctrl?16:0)|(c.shift?4:0)|(c.alt?8:0);return c.button===4?(_|=64,_|=c.action):(_|=3&c.button,4&c.button&&(_|=64),8&c.button&&(_|=128),c.action===32?_|=32:c.action!==0||d||(_|=3)),_}const a=String.fromCharCode,s={DEFAULT:c=>{const d=[S(c,!1)+32,c.col+32,c.row+32];return d[0]>255||d[1]>255||d[2]>255?"":`\x1B[M${a(d[0])}${a(d[1])}${a(d[2])}`},SGR:c=>{const d=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${S(c,!0)};${c.col};${c.row}${d}`},SGR_PIXELS:c=>{const d=c.action===0&&c.button!==4?"m":"M";return`\x1B[<${S(c,!0)};${c.x};${c.y}${d}`}};let o=i.CoreMouseService=class extends C.Disposable{constructor(c,d){super(),this._bufferService=c,this._coreService=d,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new y.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const _ of Object.keys(w))this.addProtocol(_,w[_]);for(const _ of Object.keys(s))this.addEncoding(_,s[_]);this.reset()}addProtocol(c,d){this._protocols[c]=d}addEncoding(c,d){this._encodings[c]=d}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(c){if(!this._protocols[c])throw new Error(`unknown protocol "${c}"`);this._activeProtocol=c,this._onProtocolChange.fire(this._protocols[c].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(c){if(!this._encodings[c])throw new Error(`unknown encoding "${c}"`);this._activeEncoding=c}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(c){if(c.col<0||c.col>=this._bufferService.cols||c.row<0||c.row>=this._bufferService.rows||c.button===4&&c.action===32||c.button===3&&c.action!==32||c.button!==4&&(c.action===2||c.action===3)||(c.col++,c.row++,c.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,c,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(c))return!1;const d=this._encodings[this._activeEncoding](c);return d&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(d):this._coreService.triggerDataEvent(d,!0)),this._lastEvent=c,!0}explainEvents(c){return{down:!!(1&c),up:!!(2&c),drag:!!(4&c),move:!!(8&c),wheel:!!(16&c)}}_equalEvents(c,d,_){if(_){if(c.x!==d.x||c.y!==d.y)return!1}else if(c.col!==d.col||c.row!==d.row)return!1;return c.button===d.button&&c.action===d.action&&c.ctrl===d.ctrl&&c.alt===d.alt&&c.shift===d.shift}};i.CoreMouseService=o=h([b(0,f.IBufferService),b(1,f.ICoreService)],o)},6975:function(m,i,l){var h=this&&this.__decorate||function(o,c,d,_){var E,k=arguments.length,v=k<3?c:_===null?_=Object.getOwnPropertyDescriptor(c,d):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")v=Reflect.decorate(o,c,d,_);else for(var O=o.length-1;O>=0;O--)(E=o[O])&&(v=(k<3?E(v):k>3?E(c,d,v):E(c,d))||v);return k>3&&v&&Object.defineProperty(c,d,v),v},b=this&&this.__param||function(o,c){return function(d,_){c(d,_,o)}};Object.defineProperty(i,"__esModule",{value:!0}),i.CoreService=void 0;const f=l(1439),y=l(8460),C=l(844),w=l(2585),S=Object.freeze({insertMode:!1}),a=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let s=i.CoreService=class extends C.Disposable{constructor(o,c,d){super(),this._bufferService=o,this._logService=c,this._optionsService=d,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new y.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new y.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new y.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new y.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(S),this.decPrivateModes=(0,f.clone)(a)}reset(){this.modes=(0,f.clone)(S),this.decPrivateModes=(0,f.clone)(a)}triggerDataEvent(o,c=!1){if(this._optionsService.rawOptions.disableStdin)return;const d=this._bufferService.buffer;c&&this._optionsService.rawOptions.scrollOnUserInput&&d.ybase!==d.ydisp&&this._onRequestScrollToBottom.fire(),c&&this._onUserInput.fire(),this._logService.debug(`sending data "${o}"`,()=>o.split("").map(_=>_.charCodeAt(0))),this._onData.fire(o)}triggerBinaryEvent(o){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${o}"`,()=>o.split("").map(c=>c.charCodeAt(0))),this._onBinary.fire(o))}};i.CoreService=s=h([b(0,w.IBufferService),b(1,w.ILogService),b(2,w.IOptionsService)],s)},9074:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.DecorationService=void 0;const h=l(8055),b=l(8460),f=l(844),y=l(6106);let C=0,w=0;class S extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new y.SortedList(o=>o==null?void 0:o.marker.line),this._onDecorationRegistered=this.register(new b.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new b.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>this.reset()))}registerDecoration(o){if(o.marker.isDisposed)return;const c=new a(o);if(c){const d=c.marker.onDispose(()=>c.dispose());c.onDispose(()=>{c&&(this._decorations.delete(c)&&this._onDecorationRemoved.fire(c),d.dispose())}),this._decorations.insert(c),this._onDecorationRegistered.fire(c)}return c}reset(){for(const o of this._decorations.values())o.dispose();this._decorations.clear()}*getDecorationsAtCell(o,c,d){var _,E,k;let v=0,O=0;for(const M of this._decorations.getKeyIterator(c))v=(_=M.options.x)!==null&&_!==void 0?_:0,O=v+((E=M.options.width)!==null&&E!==void 0?E:1),o>=v&&o<O&&(!d||((k=M.options.layer)!==null&&k!==void 0?k:"bottom")===d)&&(yield M)}forEachDecorationAtCell(o,c,d,_){this._decorations.forEachByKey(c,E=>{var k,v,O;C=(k=E.options.x)!==null&&k!==void 0?k:0,w=C+((v=E.options.width)!==null&&v!==void 0?v:1),o>=C&&o<w&&(!d||((O=E.options.layer)!==null&&O!==void 0?O:"bottom")===d)&&_(E)})}}i.DecorationService=S;class a extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=h.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=h.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(o){super(),this.options=o,this.onRenderEmitter=this.register(new b.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new b.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=o.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.InstantiationService=i.ServiceCollection=void 0;const h=l(2585),b=l(8343);class f{constructor(...C){this._entries=new Map;for(const[w,S]of C)this.set(w,S)}set(C,w){const S=this._entries.get(C);return this._entries.set(C,w),S}forEach(C){for(const[w,S]of this._entries.entries())C(w,S)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}i.ServiceCollection=f,i.InstantiationService=class{constructor(){this._services=new f,this._services.set(h.IInstantiationService,this)}setService(y,C){this._services.set(y,C)}getService(y){return this._services.get(y)}createInstance(y,...C){const w=(0,b.getServiceDependencies)(y).sort((s,o)=>s.index-o.index),S=[];for(const s of w){const o=this._services.get(s.id);if(!o)throw new Error(`[createInstance] ${y.name} depends on UNKNOWN service ${s.id}.`);S.push(o)}const a=w.length>0?w[0].index:C.length;if(C.length!==a)throw new Error(`[createInstance] First service dependency of ${y.name} at position ${a+1} conflicts with ${C.length} static arguments`);return new y(...C,...S)}}},7866:function(m,i,l){var h=this&&this.__decorate||function(a,s,o,c){var d,_=arguments.length,E=_<3?s:c===null?c=Object.getOwnPropertyDescriptor(s,o):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(a,s,o,c);else for(var k=a.length-1;k>=0;k--)(d=a[k])&&(E=(_<3?d(E):_>3?d(s,o,E):d(s,o))||E);return _>3&&E&&Object.defineProperty(s,o,E),E},b=this&&this.__param||function(a,s){return function(o,c){s(o,c,a)}};Object.defineProperty(i,"__esModule",{value:!0}),i.traceCall=i.setTraceLogger=i.LogService=void 0;const f=l(844),y=l(2585),C={trace:y.LogLevelEnum.TRACE,debug:y.LogLevelEnum.DEBUG,info:y.LogLevelEnum.INFO,warn:y.LogLevelEnum.WARN,error:y.LogLevelEnum.ERROR,off:y.LogLevelEnum.OFF};let w,S=i.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(a){super(),this._optionsService=a,this._logLevel=y.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(a){for(let s=0;s<a.length;s++)typeof a[s]=="function"&&(a[s]=a[s]())}_log(a,s,o){this._evalLazyOptionalParams(o),a.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+s,...o)}trace(a,...s){var o,c;this._logLevel<=y.LogLevelEnum.TRACE&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.trace.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,a,s)}debug(a,...s){var o,c;this._logLevel<=y.LogLevelEnum.DEBUG&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.debug.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.log,a,s)}info(a,...s){var o,c;this._logLevel<=y.LogLevelEnum.INFO&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.info.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.info,a,s)}warn(a,...s){var o,c;this._logLevel<=y.LogLevelEnum.WARN&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.warn.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.warn,a,s)}error(a,...s){var o,c;this._logLevel<=y.LogLevelEnum.ERROR&&this._log((c=(o=this._optionsService.options.logger)===null||o===void 0?void 0:o.error.bind(this._optionsService.options.logger))!==null&&c!==void 0?c:console.error,a,s)}};i.LogService=S=h([b(0,y.IOptionsService)],S),i.setTraceLogger=function(a){w=a},i.traceCall=function(a,s,o){if(typeof o.value!="function")throw new Error("not supported");const c=o.value;o.value=function(...d){if(w.logLevel!==y.LogLevelEnum.TRACE)return c.apply(this,d);w.trace(`GlyphRenderer#${c.name}(${d.map(E=>JSON.stringify(E)).join(", ")})`);const _=c.apply(this,d);return w.trace(`GlyphRenderer#${c.name} return`,_),_}}},7302:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.OptionsService=i.DEFAULT_OPTIONS=void 0;const h=l(8460),b=l(844),f=l(6114);i.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const y=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends b.Disposable{constructor(S){super(),this._onOptionChange=this.register(new h.EventEmitter),this.onOptionChange=this._onOptionChange.event;const a=Object.assign({},i.DEFAULT_OPTIONS);for(const s in S)if(s in a)try{const o=S[s];a[s]=this._sanitizeAndValidateOption(s,o)}catch(o){console.error(o)}this.rawOptions=a,this.options=Object.assign({},a),this._setupOptions()}onSpecificOptionChange(S,a){return this.onOptionChange(s=>{s===S&&a(this.rawOptions[S])})}onMultipleOptionChange(S,a){return this.onOptionChange(s=>{S.indexOf(s)!==-1&&a()})}_setupOptions(){const S=s=>{if(!(s in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);return this.rawOptions[s]},a=(s,o)=>{if(!(s in i.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);o=this._sanitizeAndValidateOption(s,o),this.rawOptions[s]!==o&&(this.rawOptions[s]=o,this._onOptionChange.fire(s))};for(const s in this.rawOptions){const o={get:S.bind(this,s),set:a.bind(this,s)};Object.defineProperty(this.options,s,o)}}_sanitizeAndValidateOption(S,a){switch(S){case"cursorStyle":if(a||(a=i.DEFAULT_OPTIONS[S]),!function(s){return s==="block"||s==="underline"||s==="bar"}(a))throw new Error(`"${a}" is not a valid value for ${S}`);break;case"wordSeparator":a||(a=i.DEFAULT_OPTIONS[S]);break;case"fontWeight":case"fontWeightBold":if(typeof a=="number"&&1<=a&&a<=1e3)break;a=y.includes(a)?a:i.DEFAULT_OPTIONS[S];break;case"cursorWidth":a=Math.floor(a);case"lineHeight":case"tabStopWidth":if(a<1)throw new Error(`${S} cannot be less than 1, value: ${a}`);break;case"minimumContrastRatio":a=Math.max(1,Math.min(21,Math.round(10*a)/10));break;case"scrollback":if((a=Math.min(a,4294967295))<0)throw new Error(`${S} cannot be less than 0, value: ${a}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(a<=0)throw new Error(`${S} cannot be less than or equal to 0, value: ${a}`);break;case"rows":case"cols":if(!a&&a!==0)throw new Error(`${S} must be numeric, value: ${a}`);break;case"windowsPty":a=a??{}}return a}}i.OptionsService=C},2660:function(m,i,l){var h=this&&this.__decorate||function(C,w,S,a){var s,o=arguments.length,c=o<3?w:a===null?a=Object.getOwnPropertyDescriptor(w,S):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")c=Reflect.decorate(C,w,S,a);else for(var d=C.length-1;d>=0;d--)(s=C[d])&&(c=(o<3?s(c):o>3?s(w,S,c):s(w,S))||c);return o>3&&c&&Object.defineProperty(w,S,c),c},b=this&&this.__param||function(C,w){return function(S,a){w(S,a,C)}};Object.defineProperty(i,"__esModule",{value:!0}),i.OscLinkService=void 0;const f=l(2585);let y=i.OscLinkService=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const w=this._bufferService.buffer;if(C.id===void 0){const d=w.addMarker(w.ybase+w.y),_={data:C,id:this._nextId++,lines:[d]};return d.onDispose(()=>this._removeMarkerFromLink(_,d)),this._dataByLinkId.set(_.id,_),_.id}const S=C,a=this._getEntryIdKey(S),s=this._entriesWithId.get(a);if(s)return this.addLineToLink(s.id,w.ybase+w.y),s.id;const o=w.addMarker(w.ybase+w.y),c={id:this._nextId++,key:this._getEntryIdKey(S),data:S,lines:[o]};return o.onDispose(()=>this._removeMarkerFromLink(c,o)),this._entriesWithId.set(c.key,c),this._dataByLinkId.set(c.id,c),c.id}addLineToLink(C,w){const S=this._dataByLinkId.get(C);if(S&&S.lines.every(a=>a.line!==w)){const a=this._bufferService.buffer.addMarker(w);S.lines.push(a),a.onDispose(()=>this._removeMarkerFromLink(S,a))}}getLinkData(C){var w;return(w=this._dataByLinkId.get(C))===null||w===void 0?void 0:w.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,w){const S=C.lines.indexOf(w);S!==-1&&(C.lines.splice(S,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};i.OscLinkService=y=h([b(0,f.IBufferService)],y)},8343:(m,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createDecorator=i.getServiceDependencies=i.serviceRegistry=void 0;const l="di$target",h="di$dependencies";i.serviceRegistry=new Map,i.getServiceDependencies=function(b){return b[h]||[]},i.createDecorator=function(b){if(i.serviceRegistry.has(b))return i.serviceRegistry.get(b);const f=function(y,C,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(S,a,s){a[l]===a?a[h].push({id:S,index:s}):(a[h]=[{id:S,index:s}],a[l]=a)})(f,y,w)};return f.toString=()=>b,i.serviceRegistry.set(b,f),f}},2585:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.IDecorationService=i.IUnicodeService=i.IOscLinkService=i.IOptionsService=i.ILogService=i.LogLevelEnum=i.IInstantiationService=i.ICharsetService=i.ICoreService=i.ICoreMouseService=i.IBufferService=void 0;const h=l(8343);var b;i.IBufferService=(0,h.createDecorator)("BufferService"),i.ICoreMouseService=(0,h.createDecorator)("CoreMouseService"),i.ICoreService=(0,h.createDecorator)("CoreService"),i.ICharsetService=(0,h.createDecorator)("CharsetService"),i.IInstantiationService=(0,h.createDecorator)("InstantiationService"),function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"}(b||(i.LogLevelEnum=b={})),i.ILogService=(0,h.createDecorator)("LogService"),i.IOptionsService=(0,h.createDecorator)("OptionsService"),i.IOscLinkService=(0,h.createDecorator)("OscLinkService"),i.IUnicodeService=(0,h.createDecorator)("UnicodeService"),i.IDecorationService=(0,h.createDecorator)("DecorationService")},1480:(m,i,l)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.UnicodeService=void 0;const h=l(8460),b=l(225);i.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new h.EventEmitter,this.onChange=this._onChange.event;const f=new b.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let y=0;const C=f.length;for(let w=0;w<C;++w){let S=f.charCodeAt(w);if(55296<=S&&S<=56319){if(++w>=C)return y+this.wcwidth(S);const a=f.charCodeAt(w);56320<=a&&a<=57343?S=1024*(S-55296)+a-56320+65536:y+=this.wcwidth(a)}y+=this.wcwidth(S)}return y}}}},n={};function u(m){var i=n[m];if(i!==void 0)return i.exports;var l=n[m]={exports:{}};return t[m].call(l.exports,l,l.exports,u),l.exports}var p={};return(()=>{var m=p;Object.defineProperty(m,"__esModule",{value:!0}),m.Terminal=void 0;const i=u(9042),l=u(3236),h=u(844),b=u(5741),f=u(8285),y=u(7975),C=u(7090),w=["cols","rows"];class S extends h.Disposable{constructor(s){super(),this._core=this.register(new l.Terminal(s)),this._addonManager=this.register(new b.AddonManager),this._publicOptions=Object.assign({},this._core.options);const o=d=>this._core.options[d],c=(d,_)=>{this._checkReadonlyOptions(d),this._core.options[d]=_};for(const d in this._core.options){const _={get:o.bind(this,d),set:c.bind(this,d)};Object.defineProperty(this._publicOptions,d,_)}}_checkReadonlyOptions(s){if(w.includes(s))throw new Error(`Option "${s}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new y.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new C.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const s=this._core.coreService.decPrivateModes;let o="none";switch(this._core.coreMouseService.activeProtocol){case"X10":o="x10";break;case"VT200":o="vt200";break;case"DRAG":o="drag";break;case"ANY":o="any"}return{applicationCursorKeysMode:s.applicationCursorKeys,applicationKeypadMode:s.applicationKeypad,bracketedPasteMode:s.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:o,originMode:s.origin,reverseWraparoundMode:s.reverseWraparound,sendFocusMode:s.sendFocus,wraparoundMode:s.wraparound}}get options(){return this._publicOptions}set options(s){for(const o in s)this._publicOptions[o]=s[o]}blur(){this._core.blur()}focus(){this._core.focus()}resize(s,o){this._verifyIntegers(s,o),this._core.resize(s,o)}open(s){this._core.open(s)}attachCustomKeyEventHandler(s){this._core.attachCustomKeyEventHandler(s)}registerLinkProvider(s){return this._core.registerLinkProvider(s)}registerCharacterJoiner(s){return this._checkProposedApi(),this._core.registerCharacterJoiner(s)}deregisterCharacterJoiner(s){this._checkProposedApi(),this._core.deregisterCharacterJoiner(s)}registerMarker(s=0){return this._verifyIntegers(s),this._core.registerMarker(s)}registerDecoration(s){var o,c,d;return this._checkProposedApi(),this._verifyPositiveIntegers((o=s.x)!==null&&o!==void 0?o:0,(c=s.width)!==null&&c!==void 0?c:0,(d=s.height)!==null&&d!==void 0?d:0),this._core.registerDecoration(s)}hasSelection(){return this._core.hasSelection()}select(s,o,c){this._verifyIntegers(s,o,c),this._core.select(s,o,c)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(s,o){this._verifyIntegers(s,o),this._core.selectLines(s,o)}dispose(){super.dispose()}scrollLines(s){this._verifyIntegers(s),this._core.scrollLines(s)}scrollPages(s){this._verifyIntegers(s),this._core.scrollPages(s)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(s){this._verifyIntegers(s),this._core.scrollToLine(s)}clear(){this._core.clear()}write(s,o){this._core.write(s,o)}writeln(s,o){this._core.write(s),this._core.write(`\r
`,o)}paste(s){this._core.paste(s)}refresh(s,o){this._verifyIntegers(s,o),this._core.refresh(s,o)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(s){this._addonManager.loadAddon(this,s)}static get strings(){return i}_verifyIntegers(...s){for(const o of s)if(o===1/0||isNaN(o)||o%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...s){for(const o of s)if(o&&(o===1/0||isNaN(o)||o%1!=0||o<0))throw new Error("This API only accepts positive integers")}}m.Terminal=S})(),p})())})(vo);var Dl=vo.exports,bo={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,()=>(()=>{var t={};return(()=>{var n=t;Object.defineProperty(n,"__esModule",{value:!0}),n.FitAddon=void 0,n.FitAddon=class{activate(u){this._terminal=u}dispose(){}fit(){const u=this.proposeDimensions();if(!u||!this._terminal||isNaN(u.cols)||isNaN(u.rows))return;const p=this._terminal._core;this._terminal.rows===u.rows&&this._terminal.cols===u.cols||(p._renderService.clear(),this._terminal.resize(u.cols,u.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const u=this._terminal._core,p=u._renderService.dimensions;if(p.css.cell.width===0||p.css.cell.height===0)return;const m=this._terminal.options.scrollback===0?0:u.viewport.scrollBarWidth,i=window.getComputedStyle(this._terminal.element.parentElement),l=parseInt(i.getPropertyValue("height")),h=Math.max(0,parseInt(i.getPropertyValue("width"))),b=window.getComputedStyle(this._terminal.element),f=l-(parseInt(b.getPropertyValue("padding-top"))+parseInt(b.getPropertyValue("padding-bottom"))),y=h-(parseInt(b.getPropertyValue("padding-right"))+parseInt(b.getPropertyValue("padding-left")))-m;return{cols:Math.max(2,Math.floor(y/p.css.cell.width)),rows:Math.max(1,Math.floor(f/p.css.cell.height))}}}})(),t})())})(bo);var Vn=bo.exports;function Bl(r){let e,t;return{c(){e=we("img"),xa(e.src,t="https://media.discordapp.net/attachments/243005537342586880/1209607571162406922/49f226612149af8cfe8a7a07218ed8b9-3925355693.jpg?ex=65e789d6&is=65d514d6&hm=4ec018c1e438554573dd1202104b42a1777db19fe773680423a3bc88fbc66f54&=&format=webp&width=750&height=663")||_e(e,"src",t),_e(e,"alt","YOU DIDNT SAY THE MAGIC WORD!"),_e(e,"class","svelte-q6tgof")},m(n,u){xe(n,e,u)},p:$e,d(n){n&&Ie(e)}}}function Il(r){let e,t,n;return t=new yr({props:{height:"100%",_class:"cmd-container",inset:!1,$$slots:{default:[Bl]},$$scope:{ctx:r}}}),{c(){e=we("div"),De(t.$$.fragment),_e(e,"class","magicword svelte-q6tgof")},m(u,p){xe(u,e,p),ke(t,e,null),n=!0},p(u,p){const m={};p&4&&(m.$$scope={dirty:p,ctx:u}),t.$set(m)},i(u){n||(Te(t.$$.fragment,u),n=!0)},o(u){Oe(t.$$.fragment,u),n=!1},d(u){u&&Ie(e),Le(t)}}}function Pl(r){let e,t;return e=new at({props:{name:r[1],index:r[0],$$slots:{default:[Il]},$$scope:{ctx:r}}}),{c(){De(e.$$.fragment)},m(n,u){ke(e,n,u),t=!0},p(n,[u]){const p={};u&2&&(p.name=n[1]),u&1&&(p.index=n[0]),u&4&&(p.$$scope={dirty:u,ctx:n}),e.$set(p)},i(n){t||(Te(e.$$.fragment,n),t=!0)},o(n){Oe(e.$$.fragment,n),t=!1},d(n){Le(e,n)}}}function xl(r,e,t){let{index:n}=e,{name:u}=e;return r.$$set=p=>{"index"in p&&t(0,n=p.index),"name"in p&&t(1,u=p.name)},[n,u]}class Ml extends tt{constructor(e){super(),et(this,e,xl,Pl,Qe,{index:0,name:1})}}var hn={exports:{}},jt={},yt={};Object.defineProperty(yt,"__esModule",{value:!0});yt.constants=void 0;yt.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_SYMLINK:2097152,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4};Object.defineProperty(jt,"__esModule",{value:!0});jt.Stats=void 0;const Fl=yt,{S_IFMT:Nl,S_IFDIR:jl,S_IFREG:Ul,S_IFBLK:Hl,S_IFCHR:$l,S_IFLNK:Wl,S_IFIFO:ql,S_IFSOCK:zl}=Fl.constants;class Gr{static build(e,t=!1){const n=new Gr,{uid:u,gid:p,atime:m,mtime:i,ctime:l}=e,h=t?f=>BigInt(f):f=>f;n.uid=h(u),n.gid=h(p),n.rdev=h(0),n.blksize=h(4096),n.ino=h(e.ino),n.size=h(e.getSize()),n.blocks=h(1),n.atime=m,n.mtime=i,n.ctime=l,n.birthtime=l,n.atimeMs=h(m.getTime()),n.mtimeMs=h(i.getTime());const b=h(l.getTime());if(n.ctimeMs=b,n.birthtimeMs=b,t){n.atimeNs=BigInt(m.getTime())*BigInt(1e6),n.mtimeNs=BigInt(i.getTime())*BigInt(1e6);const f=BigInt(l.getTime())*BigInt(1e6);n.ctimeNs=f,n.birthtimeNs=f}return n.dev=h(0),n.mode=h(e.mode),n.nlink=h(e.nlink),n}_checkModeProperty(e){return(Number(this.mode)&Nl)===e}isDirectory(){return this._checkModeProperty(jl)}isFile(){return this._checkModeProperty(Ul)}isBlockDevice(){return this._checkModeProperty(Hl)}isCharacterDevice(){return this._checkModeProperty($l)}isSymbolicLink(){return this._checkModeProperty(Wl)}isFIFO(){return this._checkModeProperty(ql)}isSocket(){return this._checkModeProperty(zl)}}jt.Stats=Gr;jt.default=Gr;var ar={},br={},nr={},lr={};(function(r){Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},t={};t.byteLength=b,t.toByteArray=y,t.fromByteArray=S;for(var n=[],u=[],p=typeof Uint8Array<"u"?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,l=m.length;i<l;++i)n[i]=m[i],u[m.charCodeAt(i)]=i;u[45]=62,u[95]=63;function h(o){var c=o.length;if(c%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var d=o.indexOf("=");d===-1&&(d=c);var _=d===c?0:4-d%4;return[d,_]}function b(o){var c=h(o),d=c[0],_=c[1];return(d+_)*3/4-_}function f(o,c,d){return(c+d)*3/4-d}function y(o){var c,d=h(o),_=d[0],E=d[1],k=new p(f(o,_,E)),v=0,O=E>0?_-4:_,M;for(M=0;M<O;M+=4)c=u[o.charCodeAt(M)]<<18|u[o.charCodeAt(M+1)]<<12|u[o.charCodeAt(M+2)]<<6|u[o.charCodeAt(M+3)],k[v++]=c>>16&255,k[v++]=c>>8&255,k[v++]=c&255;return E===2&&(c=u[o.charCodeAt(M)]<<2|u[o.charCodeAt(M+1)]>>4,k[v++]=c&255),E===1&&(c=u[o.charCodeAt(M)]<<10|u[o.charCodeAt(M+1)]<<4|u[o.charCodeAt(M+2)]>>2,k[v++]=c>>8&255,k[v++]=c&255),k}function C(o){return n[o>>18&63]+n[o>>12&63]+n[o>>6&63]+n[o&63]}function w(o,c,d){for(var _,E=[],k=c;k<d;k+=3)_=(o[k]<<16&16711680)+(o[k+1]<<8&65280)+(o[k+2]&255),E.push(C(_));return E.join("")}function S(o){for(var c,d=o.length,_=d%3,E=[],k=16383,v=0,O=d-_;v<O;v+=k)E.push(w(o,v,v+k>O?O:v+k));return _===1?(c=o[d-1],E.push(n[c>>2]+n[c<<4&63]+"==")):_===2&&(c=(o[d-2]<<8)+o[d-1],E.push(n[c>>10]+n[c>>4&63]+n[c<<2&63]+"=")),E.join("")}var a={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */a.read=function(o,c,d,_,E){var k,v,O=E*8-_-1,M=(1<<O)-1,$=M>>1,L=-7,q=d?E-1:0,Z=d?-1:1,re=o[c+q];for(q+=Z,k=re&(1<<-L)-1,re>>=-L,L+=O;L>0;k=k*256+o[c+q],q+=Z,L-=8);for(v=k&(1<<-L)-1,k>>=-L,L+=_;L>0;v=v*256+o[c+q],q+=Z,L-=8);if(k===0)k=1-$;else{if(k===M)return v?NaN:(re?-1:1)*(1/0);v=v+Math.pow(2,_),k=k-$}return(re?-1:1)*v*Math.pow(2,k-_)},a.write=function(o,c,d,_,E,k){var v,O,M,$=k*8-E-1,L=(1<<$)-1,q=L>>1,Z=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=_?0:k-1,ie=_?1:-1,ne=c<0||c===0&&1/c<0?1:0;for(c=Math.abs(c),isNaN(c)||c===1/0?(O=isNaN(c)?1:0,v=L):(v=Math.floor(Math.log(c)/Math.LN2),c*(M=Math.pow(2,-v))<1&&(v--,M*=2),v+q>=1?c+=Z/M:c+=Z*Math.pow(2,1-q),c*M>=2&&(v++,M/=2),v+q>=L?(O=0,v=L):v+q>=1?(O=(c*M-1)*Math.pow(2,E),v=v+q):(O=c*Math.pow(2,q-1)*Math.pow(2,E),v=0));E>=8;o[d+re]=O&255,re+=ie,O/=256,E-=8);for(v=v<<E|O,$+=E;$>0;o[d+re]=v&255,re+=ie,v/=256,$-=8);o[d+re-ie]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(o){const c=t,d=a,_=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;o.Buffer=L,o.SlowBuffer=H,o.INSPECT_MAX_BYTES=50;const E=2147483647;o.kMaxLength=E;const{Uint8Array:k,ArrayBuffer:v,SharedArrayBuffer:O}=globalThis;L.TYPED_ARRAY_SUPPORT=M(),!L.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function M(){try{const N=new k(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,k.prototype),Object.setPrototypeOf(N,R),N.foo()===42}catch{return!1}}Object.defineProperty(L.prototype,"parent",{enumerable:!0,get:function(){if(L.isBuffer(this))return this.buffer}}),Object.defineProperty(L.prototype,"offset",{enumerable:!0,get:function(){if(L.isBuffer(this))return this.byteOffset}});function $(N){if(N>E)throw new RangeError('The value "'+N+'" is invalid for option "size"');const R=new k(N);return Object.setPrototypeOf(R,L.prototype),R}function L(N,R,T){if(typeof N=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ie(N)}return q(N,R,T)}L.poolSize=8192;function q(N,R,T){if(typeof N=="string")return ne(N,R);if(v.isView(N))return F(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(_t(N,v)||N&&_t(N.buffer,v)||typeof O<"u"&&(_t(N,O)||N&&_t(N.buffer,O)))return P(N,R,T);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=N.valueOf&&N.valueOf();if(W!=null&&W!==N)return L.from(W,R,T);const J=U(N);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return L.from(N[Symbol.toPrimitive]("string"),R,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}L.from=function(N,R,T){return q(N,R,T)},Object.setPrototypeOf(L.prototype,k.prototype),Object.setPrototypeOf(L,k);function Z(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function re(N,R,T){return Z(N),N<=0?$(N):R!==void 0?typeof T=="string"?$(N).fill(R,T):$(N).fill(R):$(N)}L.alloc=function(N,R,T){return re(N,R,T)};function ie(N){return Z(N),$(N<0?0:G(N)|0)}L.allocUnsafe=function(N){return ie(N)},L.allocUnsafeSlow=function(N){return ie(N)};function ne(N,R){if((typeof R!="string"||R==="")&&(R="utf8"),!L.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const T=K(N,R)|0;let W=$(T);const J=W.write(N,R);return J!==T&&(W=W.slice(0,J)),W}function x(N){const R=N.length<0?0:G(N.length)|0,T=$(R);for(let W=0;W<R;W+=1)T[W]=N[W]&255;return T}function F(N){if(_t(N,k)){const R=new k(N);return P(R.buffer,R.byteOffset,R.byteLength)}return x(N)}function P(N,R,T){if(R<0||N.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<R+(T||0))throw new RangeError('"length" is outside of buffer bounds');let W;return R===void 0&&T===void 0?W=new k(N):T===void 0?W=new k(N,R):W=new k(N,R,T),Object.setPrototypeOf(W,L.prototype),W}function U(N){if(L.isBuffer(N)){const R=G(N.length)|0,T=$(R);return T.length===0||N.copy(T,0,0,R),T}if(N.length!==void 0)return typeof N.length!="number"||hi(N.length)?$(0):x(N);if(N.type==="Buffer"&&Array.isArray(N.data))return x(N.data)}function G(N){if(N>=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+E.toString(16)+" bytes");return N|0}function H(N){return+N!=N&&(N=0),L.alloc(+N)}L.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==L.prototype},L.compare=function(R,T){if(_t(R,k)&&(R=L.from(R,R.offset,R.byteLength)),_t(T,k)&&(T=L.from(T,T.offset,T.byteLength)),!L.isBuffer(R)||!L.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===T)return 0;let W=R.length,J=T.length;for(let se=0,ae=Math.min(W,J);se<ae;++se)if(R[se]!==T[se]){W=R[se],J=T[se];break}return W<J?-1:J<W?1:0},L.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},L.concat=function(R,T){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return L.alloc(0);let W;if(T===void 0)for(T=0,W=0;W<R.length;++W)T+=R[W].length;const J=L.allocUnsafe(T);let se=0;for(W=0;W<R.length;++W){let ae=R[W];if(_t(ae,k))se+ae.length>J.length?(L.isBuffer(ae)||(ae=L.from(ae)),ae.copy(J,se)):k.prototype.set.call(J,ae,se);else if(L.isBuffer(ae))ae.copy(J,se);else throw new TypeError('"list" argument must be an Array of Buffers');se+=ae.length}return J};function K(N,R){if(L.isBuffer(N))return N.length;if(v.isView(N)||_t(N,v))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const T=N.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&T===0)return 0;let J=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return nt(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T*2;case"hex":return T>>>1;case"base64":return jn(N).length;default:if(J)return W?-1:nt(N).length;R=(""+R).toLowerCase(),J=!0}}L.byteLength=K;function Y(N,R,T){let W=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0,R>>>=0,T<=R))return"";for(N||(N="utf8");;)switch(N){case"hex":return Me(this,R,T);case"utf8":case"utf-8":return le(this,R,T);case"ascii":return pe(this,R,T);case"latin1":case"binary":return oe(this,R,T);case"base64":return ee(this,R,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ue(this,R,T);default:if(W)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),W=!0}}L.prototype._isBuffer=!0;function z(N,R,T){const W=N[R];N[R]=N[T],N[T]=W}L.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<R;T+=2)z(this,T,T+1);return this},L.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<R;T+=4)z(this,T,T+3),z(this,T+1,T+2);return this},L.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<R;T+=8)z(this,T,T+7),z(this,T+1,T+6),z(this,T+2,T+5),z(this,T+3,T+4);return this},L.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?le(this,0,R):Y.apply(this,arguments)},L.prototype.toLocaleString=L.prototype.toString,L.prototype.equals=function(R){if(!L.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:L.compare(this,R)===0},L.prototype.inspect=function(){let R="";const T=o.INSPECT_MAX_BYTES;return R=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(R+=" ... "),"<Buffer "+R+">"},_&&(L.prototype[_]=L.prototype.inspect),L.prototype.compare=function(R,T,W,J,se){if(_t(R,k)&&(R=L.from(R,R.offset,R.byteLength)),!L.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(T===void 0&&(T=0),W===void 0&&(W=R?R.length:0),J===void 0&&(J=0),se===void 0&&(se=this.length),T<0||W>R.length||J<0||se>this.length)throw new RangeError("out of range index");if(J>=se&&T>=W)return 0;if(J>=se)return-1;if(T>=W)return 1;if(T>>>=0,W>>>=0,J>>>=0,se>>>=0,this===R)return 0;let ae=se-J,Re=W-T;const ze=Math.min(ae,Re),He=this.slice(J,se),Ve=R.slice(T,W);for(let Ne=0;Ne<ze;++Ne)if(He[Ne]!==Ve[Ne]){ae=He[Ne],Re=Ve[Ne];break}return ae<Re?-1:Re<ae?1:0};function g(N,R,T,W,J){if(N.length===0)return-1;if(typeof T=="string"?(W=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,hi(T)&&(T=J?0:N.length-1),T<0&&(T=N.length+T),T>=N.length){if(J)return-1;T=N.length-1}else if(T<0)if(J)T=0;else return-1;if(typeof R=="string"&&(R=L.from(R,W)),L.isBuffer(R))return R.length===0?-1:A(N,R,T,W,J);if(typeof R=="number")return R=R&255,typeof k.prototype.indexOf=="function"?J?k.prototype.indexOf.call(N,R,T):k.prototype.lastIndexOf.call(N,R,T):A(N,[R],T,W,J);throw new TypeError("val must be string, number or Buffer")}function A(N,R,T,W,J){let se=1,ae=N.length,Re=R.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(N.length<2||R.length<2)return-1;se=2,ae/=2,Re/=2,T/=2}function ze(Ve,Ne){return se===1?Ve[Ne]:Ve.readUInt16BE(Ne*se)}let He;if(J){let Ve=-1;for(He=T;He<ae;He++)if(ze(N,He)===ze(R,Ve===-1?0:He-Ve)){if(Ve===-1&&(Ve=He),He-Ve+1===Re)return Ve*se}else Ve!==-1&&(He-=He-Ve),Ve=-1}else for(T+Re>ae&&(T=ae-Re),He=T;He>=0;He--){let Ve=!0;for(let Ne=0;Ne<Re;Ne++)if(ze(N,He+Ne)!==ze(R,Ne)){Ve=!1;break}if(Ve)return He}return-1}L.prototype.includes=function(R,T,W){return this.indexOf(R,T,W)!==-1},L.prototype.indexOf=function(R,T,W){return g(this,R,T,W,!0)},L.prototype.lastIndexOf=function(R,T,W){return g(this,R,T,W,!1)};function I(N,R,T,W){T=Number(T)||0;const J=N.length-T;W?(W=Number(W),W>J&&(W=J)):W=J;const se=R.length;W>se/2&&(W=se/2);let ae;for(ae=0;ae<W;++ae){const Re=parseInt(R.substr(ae*2,2),16);if(hi(Re))return ae;N[T+ae]=Re}return ae}function j(N,R,T,W){return Ar(nt(R,N.length-T),N,T,W)}function D(N,R,T,W){return Ar(It(R),N,T,W)}function B(N,R,T,W){return Ar(jn(R),N,T,W)}function V(N,R,T,W){return Ar(ka(R,N.length-T),N,T,W)}L.prototype.write=function(R,T,W,J){if(T===void 0)J="utf8",W=this.length,T=0;else if(W===void 0&&typeof T=="string")J=T,W=this.length,T=0;else if(isFinite(T))T=T>>>0,isFinite(W)?(W=W>>>0,J===void 0&&(J="utf8")):(J=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const se=this.length-T;if((W===void 0||W>se)&&(W=se),R.length>0&&(W<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let ae=!1;for(;;)switch(J){case"hex":return I(this,R,T,W);case"utf8":case"utf-8":return j(this,R,T,W);case"ascii":case"latin1":case"binary":return D(this,R,T,W);case"base64":return B(this,R,T,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,R,T,W);default:if(ae)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),ae=!0}},L.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(N,R,T){return R===0&&T===N.length?c.fromByteArray(N):c.fromByteArray(N.slice(R,T))}function le(N,R,T){T=Math.min(N.length,T);const W=[];let J=R;for(;J<T;){const se=N[J];let ae=null,Re=se>239?4:se>223?3:se>191?2:1;if(J+Re<=T){let ze,He,Ve,Ne;switch(Re){case 1:se<128&&(ae=se);break;case 2:ze=N[J+1],(ze&192)===128&&(Ne=(se&31)<<6|ze&63,Ne>127&&(ae=Ne));break;case 3:ze=N[J+1],He=N[J+2],(ze&192)===128&&(He&192)===128&&(Ne=(se&15)<<12|(ze&63)<<6|He&63,Ne>2047&&(Ne<55296||Ne>57343)&&(ae=Ne));break;case 4:ze=N[J+1],He=N[J+2],Ve=N[J+3],(ze&192)===128&&(He&192)===128&&(Ve&192)===128&&(Ne=(se&15)<<18|(ze&63)<<12|(He&63)<<6|Ve&63,Ne>65535&&Ne<1114112&&(ae=Ne))}}ae===null?(ae=65533,Re=1):ae>65535&&(ae-=65536,W.push(ae>>>10&1023|55296),ae=56320|ae&1023),W.push(ae),J+=Re}return ce(W)}const ue=4096;function ce(N){const R=N.length;if(R<=ue)return String.fromCharCode.apply(String,N);let T="",W=0;for(;W<R;)T+=String.fromCharCode.apply(String,N.slice(W,W+=ue));return T}function pe(N,R,T){let W="";T=Math.min(N.length,T);for(let J=R;J<T;++J)W+=String.fromCharCode(N[J]&127);return W}function oe(N,R,T){let W="";T=Math.min(N.length,T);for(let J=R;J<T;++J)W+=String.fromCharCode(N[J]);return W}function Me(N,R,T){const W=N.length;(!R||R<0)&&(R=0),(!T||T<0||T>W)&&(T=W);let J="";for(let se=R;se<T;++se)J+=La[N[se]];return J}function Ue(N,R,T){const W=N.slice(R,T);let J="";for(let se=0;se<W.length-1;se+=2)J+=String.fromCharCode(W[se]+W[se+1]*256);return J}L.prototype.slice=function(R,T){const W=this.length;R=~~R,T=T===void 0?W:~~T,R<0?(R+=W,R<0&&(R=0)):R>W&&(R=W),T<0?(T+=W,T<0&&(T=0)):T>W&&(T=W),T<R&&(T=R);const J=this.subarray(R,T);return Object.setPrototypeOf(J,L.prototype),J};function Ce(N,R,T){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+R>T)throw new RangeError("Trying to access beyond buffer length")}L.prototype.readUintLE=L.prototype.readUIntLE=function(R,T,W){R=R>>>0,T=T>>>0,W||Ce(R,T,this.length);let J=this[R],se=1,ae=0;for(;++ae<T&&(se*=256);)J+=this[R+ae]*se;return J},L.prototype.readUintBE=L.prototype.readUIntBE=function(R,T,W){R=R>>>0,T=T>>>0,W||Ce(R,T,this.length);let J=this[R+--T],se=1;for(;T>0&&(se*=256);)J+=this[R+--T]*se;return J},L.prototype.readUint8=L.prototype.readUInt8=function(R,T){return R=R>>>0,T||Ce(R,1,this.length),this[R]},L.prototype.readUint16LE=L.prototype.readUInt16LE=function(R,T){return R=R>>>0,T||Ce(R,2,this.length),this[R]|this[R+1]<<8},L.prototype.readUint16BE=L.prototype.readUInt16BE=function(R,T){return R=R>>>0,T||Ce(R,2,this.length),this[R]<<8|this[R+1]},L.prototype.readUint32LE=L.prototype.readUInt32LE=function(R,T){return R=R>>>0,T||Ce(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},L.prototype.readUint32BE=L.prototype.readUInt32BE=function(R,T){return R=R>>>0,T||Ce(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},L.prototype.readBigUInt64LE=Et(function(R){R=R>>>0,qe(R,"offset");const T=this[R],W=this[R+7];(T===void 0||W===void 0)&&ut(R,this.length-8);const J=T+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,se=this[++R]+this[++R]*2**8+this[++R]*2**16+W*2**24;return BigInt(J)+(BigInt(se)<<BigInt(32))}),L.prototype.readBigUInt64BE=Et(function(R){R=R>>>0,qe(R,"offset");const T=this[R],W=this[R+7];(T===void 0||W===void 0)&&ut(R,this.length-8);const J=T*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],se=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+W;return(BigInt(J)<<BigInt(32))+BigInt(se)}),L.prototype.readIntLE=function(R,T,W){R=R>>>0,T=T>>>0,W||Ce(R,T,this.length);let J=this[R],se=1,ae=0;for(;++ae<T&&(se*=256);)J+=this[R+ae]*se;return se*=128,J>=se&&(J-=Math.pow(2,8*T)),J},L.prototype.readIntBE=function(R,T,W){R=R>>>0,T=T>>>0,W||Ce(R,T,this.length);let J=T,se=1,ae=this[R+--J];for(;J>0&&(se*=256);)ae+=this[R+--J]*se;return se*=128,ae>=se&&(ae-=Math.pow(2,8*T)),ae},L.prototype.readInt8=function(R,T){return R=R>>>0,T||Ce(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},L.prototype.readInt16LE=function(R,T){R=R>>>0,T||Ce(R,2,this.length);const W=this[R]|this[R+1]<<8;return W&32768?W|4294901760:W},L.prototype.readInt16BE=function(R,T){R=R>>>0,T||Ce(R,2,this.length);const W=this[R+1]|this[R]<<8;return W&32768?W|4294901760:W},L.prototype.readInt32LE=function(R,T){return R=R>>>0,T||Ce(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},L.prototype.readInt32BE=function(R,T){return R=R>>>0,T||Ce(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},L.prototype.readBigInt64LE=Et(function(R){R=R>>>0,qe(R,"offset");const T=this[R],W=this[R+7];(T===void 0||W===void 0)&&ut(R,this.length-8);const J=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(W<<24);return(BigInt(J)<<BigInt(32))+BigInt(T+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),L.prototype.readBigInt64BE=Et(function(R){R=R>>>0,qe(R,"offset");const T=this[R],W=this[R+7];(T===void 0||W===void 0)&&ut(R,this.length-8);const J=(T<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(J)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+W)}),L.prototype.readFloatLE=function(R,T){return R=R>>>0,T||Ce(R,4,this.length),d.read(this,R,!0,23,4)},L.prototype.readFloatBE=function(R,T){return R=R>>>0,T||Ce(R,4,this.length),d.read(this,R,!1,23,4)},L.prototype.readDoubleLE=function(R,T){return R=R>>>0,T||Ce(R,8,this.length),d.read(this,R,!0,52,8)},L.prototype.readDoubleBE=function(R,T){return R=R>>>0,T||Ce(R,8,this.length),d.read(this,R,!1,52,8)};function Se(N,R,T,W,J,se){if(!L.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>J||R<se)throw new RangeError('"value" argument is out of bounds');if(T+W>N.length)throw new RangeError("Index out of range")}L.prototype.writeUintLE=L.prototype.writeUIntLE=function(R,T,W,J){if(R=+R,T=T>>>0,W=W>>>0,!J){const Re=Math.pow(2,8*W)-1;Se(this,R,T,W,Re,0)}let se=1,ae=0;for(this[T]=R&255;++ae<W&&(se*=256);)this[T+ae]=R/se&255;return T+W},L.prototype.writeUintBE=L.prototype.writeUIntBE=function(R,T,W,J){if(R=+R,T=T>>>0,W=W>>>0,!J){const Re=Math.pow(2,8*W)-1;Se(this,R,T,W,Re,0)}let se=W-1,ae=1;for(this[T+se]=R&255;--se>=0&&(ae*=256);)this[T+se]=R/ae&255;return T+W},L.prototype.writeUint8=L.prototype.writeUInt8=function(R,T,W){return R=+R,T=T>>>0,W||Se(this,R,T,1,255,0),this[T]=R&255,T+1},L.prototype.writeUint16LE=L.prototype.writeUInt16LE=function(R,T,W){return R=+R,T=T>>>0,W||Se(this,R,T,2,65535,0),this[T]=R&255,this[T+1]=R>>>8,T+2},L.prototype.writeUint16BE=L.prototype.writeUInt16BE=function(R,T,W){return R=+R,T=T>>>0,W||Se(this,R,T,2,65535,0),this[T]=R>>>8,this[T+1]=R&255,T+2},L.prototype.writeUint32LE=L.prototype.writeUInt32LE=function(R,T,W){return R=+R,T=T>>>0,W||Se(this,R,T,4,4294967295,0),this[T+3]=R>>>24,this[T+2]=R>>>16,this[T+1]=R>>>8,this[T]=R&255,T+4},L.prototype.writeUint32BE=L.prototype.writeUInt32BE=function(R,T,W){return R=+R,T=T>>>0,W||Se(this,R,T,4,4294967295,0),this[T]=R>>>24,this[T+1]=R>>>16,this[T+2]=R>>>8,this[T+3]=R&255,T+4};function X(N,R,T,W,J){We(R,W,J,N,T,7);let se=Number(R&BigInt(4294967295));N[T++]=se,se=se>>8,N[T++]=se,se=se>>8,N[T++]=se,se=se>>8,N[T++]=se;let ae=Number(R>>BigInt(32)&BigInt(4294967295));return N[T++]=ae,ae=ae>>8,N[T++]=ae,ae=ae>>8,N[T++]=ae,ae=ae>>8,N[T++]=ae,T}function Q(N,R,T,W,J){We(R,W,J,N,T,7);let se=Number(R&BigInt(4294967295));N[T+7]=se,se=se>>8,N[T+6]=se,se=se>>8,N[T+5]=se,se=se>>8,N[T+4]=se;let ae=Number(R>>BigInt(32)&BigInt(4294967295));return N[T+3]=ae,ae=ae>>8,N[T+2]=ae,ae=ae>>8,N[T+1]=ae,ae=ae>>8,N[T]=ae,T+8}L.prototype.writeBigUInt64LE=Et(function(R,T=0){return X(this,R,T,BigInt(0),BigInt("0xffffffffffffffff"))}),L.prototype.writeBigUInt64BE=Et(function(R,T=0){return Q(this,R,T,BigInt(0),BigInt("0xffffffffffffffff"))}),L.prototype.writeIntLE=function(R,T,W,J){if(R=+R,T=T>>>0,!J){const ze=Math.pow(2,8*W-1);Se(this,R,T,W,ze-1,-ze)}let se=0,ae=1,Re=0;for(this[T]=R&255;++se<W&&(ae*=256);)R<0&&Re===0&&this[T+se-1]!==0&&(Re=1),this[T+se]=(R/ae>>0)-Re&255;return T+W},L.prototype.writeIntBE=function(R,T,W,J){if(R=+R,T=T>>>0,!J){const ze=Math.pow(2,8*W-1);Se(this,R,T,W,ze-1,-ze)}let se=W-1,ae=1,Re=0;for(this[T+se]=R&255;--se>=0&&(ae*=256);)R<0&&Re===0&&this[T+se+1]!==0&&(Re=1),this[T+se]=(R/ae>>0)-Re&255;return T+W},L.prototype.writeInt8=function(R,T,W){return R=+R,T=T>>>0,W||Se(this,R,T,1,127,-128),R<0&&(R=255+R+1),this[T]=R&255,T+1},L.prototype.writeInt16LE=function(R,T,W){return R=+R,T=T>>>0,W||Se(this,R,T,2,32767,-32768),this[T]=R&255,this[T+1]=R>>>8,T+2},L.prototype.writeInt16BE=function(R,T,W){return R=+R,T=T>>>0,W||Se(this,R,T,2,32767,-32768),this[T]=R>>>8,this[T+1]=R&255,T+2},L.prototype.writeInt32LE=function(R,T,W){return R=+R,T=T>>>0,W||Se(this,R,T,4,2147483647,-2147483648),this[T]=R&255,this[T+1]=R>>>8,this[T+2]=R>>>16,this[T+3]=R>>>24,T+4},L.prototype.writeInt32BE=function(R,T,W){return R=+R,T=T>>>0,W||Se(this,R,T,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[T]=R>>>24,this[T+1]=R>>>16,this[T+2]=R>>>8,this[T+3]=R&255,T+4},L.prototype.writeBigInt64LE=Et(function(R,T=0){return X(this,R,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),L.prototype.writeBigInt64BE=Et(function(R,T=0){return Q(this,R,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function he(N,R,T,W,J,se){if(T+W>N.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function de(N,R,T,W,J){return R=+R,T=T>>>0,J||he(N,R,T,4),d.write(N,R,T,W,23,4),T+4}L.prototype.writeFloatLE=function(R,T,W){return de(this,R,T,!0,W)},L.prototype.writeFloatBE=function(R,T,W){return de(this,R,T,!1,W)};function fe(N,R,T,W,J){return R=+R,T=T>>>0,J||he(N,R,T,8),d.write(N,R,T,W,52,8),T+8}L.prototype.writeDoubleLE=function(R,T,W){return fe(this,R,T,!0,W)},L.prototype.writeDoubleBE=function(R,T,W){return fe(this,R,T,!1,W)},L.prototype.copy=function(R,T,W,J){if(!L.isBuffer(R))throw new TypeError("argument should be a Buffer");if(W||(W=0),!J&&J!==0&&(J=this.length),T>=R.length&&(T=R.length),T||(T=0),J>0&&J<W&&(J=W),J===W||R.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),R.length-T<J-W&&(J=R.length-T+W);const se=J-W;return this===R&&typeof k.prototype.copyWithin=="function"?this.copyWithin(T,W,J):k.prototype.set.call(R,this.subarray(W,J),T),se},L.prototype.fill=function(R,T,W,J){if(typeof R=="string"){if(typeof T=="string"?(J=T,T=0,W=this.length):typeof W=="string"&&(J=W,W=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!L.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(R.length===1){const ae=R.charCodeAt(0);(J==="utf8"&&ae<128||J==="latin1")&&(R=ae)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(T<0||this.length<T||this.length<W)throw new RangeError("Out of range index");if(W<=T)return this;T=T>>>0,W=W===void 0?this.length:W>>>0,R||(R=0);let se;if(typeof R=="number")for(se=T;se<W;++se)this[se]=R;else{const ae=L.isBuffer(R)?R:L.from(R,J),Re=ae.length;if(Re===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(se=0;se<W-T;++se)this[se+T]=ae[se%Re]}return this};const ye={};function me(N,R,T){ye[N]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}me("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),me("ERR_INVALID_ARG_TYPE",function(N,R){return`The "${N}" argument must be of type number. Received type ${typeof R}`},TypeError),me("ERR_OUT_OF_RANGE",function(N,R,T){let W=`The value of "${N}" is out of range.`,J=T;return Number.isInteger(T)&&Math.abs(T)>2**32?J=Ee(String(T)):typeof T=="bigint"&&(J=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(J=Ee(J)),J+="n"),W+=` It must be ${R}. Received ${J}`,W},RangeError);function Ee(N){let R="",T=N.length;const W=N[0]==="-"?1:0;for(;T>=W+4;T-=3)R=`_${N.slice(T-3,T)}${R}`;return`${N.slice(0,T)}${R}`}function ge(N,R,T){qe(R,"offset"),(N[R]===void 0||N[R+T]===void 0)&&ut(R,N.length-(T+1))}function We(N,R,T,W,J,se){if(N>T||N<R){const ae=typeof R=="bigint"?"n":"";let Re;throw se>3?R===0||R===BigInt(0)?Re=`>= 0${ae} and < 2${ae} ** ${(se+1)*8}${ae}`:Re=`>= -(2${ae} ** ${(se+1)*8-1}${ae}) and < 2 ** ${(se+1)*8-1}${ae}`:Re=`>= ${R}${ae} and <= ${T}${ae}`,new ye.ERR_OUT_OF_RANGE("value",Re,N)}ge(W,J,se)}function qe(N,R){if(typeof N!="number")throw new ye.ERR_INVALID_ARG_TYPE(R,"number",N)}function ut(N,R,T){throw Math.floor(N)!==N?(qe(N,T),new ye.ERR_OUT_OF_RANGE(T||"offset","an integer",N)):R<0?new ye.ERR_BUFFER_OUT_OF_BOUNDS:new ye.ERR_OUT_OF_RANGE(T||"offset",`>= ${T?1:0} and <= ${R}`,N)}const wt=/[^+/0-9A-Za-z-_]/g;function Bt(N){if(N=N.split("=")[0],N=N.trim().replace(wt,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function nt(N,R){R=R||1/0;let T;const W=N.length;let J=null;const se=[];for(let ae=0;ae<W;++ae){if(T=N.charCodeAt(ae),T>55295&&T<57344){if(!J){if(T>56319){(R-=3)>-1&&se.push(239,191,189);continue}else if(ae+1===W){(R-=3)>-1&&se.push(239,191,189);continue}J=T;continue}if(T<56320){(R-=3)>-1&&se.push(239,191,189),J=T;continue}T=(J-55296<<10|T-56320)+65536}else J&&(R-=3)>-1&&se.push(239,191,189);if(J=null,T<128){if((R-=1)<0)break;se.push(T)}else if(T<2048){if((R-=2)<0)break;se.push(T>>6|192,T&63|128)}else if(T<65536){if((R-=3)<0)break;se.push(T>>12|224,T>>6&63|128,T&63|128)}else if(T<1114112){if((R-=4)<0)break;se.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw new Error("Invalid code point")}return se}function It(N){const R=[];for(let T=0;T<N.length;++T)R.push(N.charCodeAt(T)&255);return R}function ka(N,R){let T,W,J;const se=[];for(let ae=0;ae<N.length&&!((R-=2)<0);++ae)T=N.charCodeAt(ae),W=T>>8,J=T%256,se.push(J),se.push(W);return se}function jn(N){return c.toByteArray(Bt(N))}function Ar(N,R,T,W){let J;for(J=0;J<W&&!(J+T>=R.length||J>=N.length);++J)R[J+T]=N[J];return J}function _t(N,R){return N instanceof R||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===R.name}function hi(N){return N!==N}const La=function(){const N="0123456789abcdef",R=new Array(256);for(let T=0;T<16;++T){const W=T*16;for(let J=0;J<16;++J)R[W+J]=N[T]+N[J]}return R}();function Et(N){return typeof BigInt>"u"?Da:N}function Da(){throw new Error("BigInt not supported")}})(e);const s=e.Buffer;r.Blob=e.Blob,r.BlobOptions=e.BlobOptions,r.Buffer=e.Buffer,r.File=e.File,r.FileOptions=e.FileOptions,r.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,r.SlowBuffer=e.SlowBuffer,r.TranscodeEncoding=e.TranscodeEncoding,r.atob=e.atob,r.btoa=e.btoa,r.constants=e.constants,r.default=s,r.isAscii=e.isAscii,r.isUtf8=e.isUtf8,r.kMaxLength=e.kMaxLength,r.kStringMaxLength=e.kStringMaxLength,r.resolveObjectURL=e.resolveObjectURL,r.transcode=e.transcode})(lr);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.bufferFrom=r.bufferAllocUnsafe=r.Buffer=void 0;const e=lr;Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return e.Buffer}});function t(p,...m){return new e.Buffer(p,...m)}const n=e.Buffer.allocUnsafe||t;r.bufferAllocUnsafe=n;const u=e.Buffer.from||t;r.bufferFrom=u})(nr);var Rn={},pi={},Kn;function So(){return Kn||(Kn=1,function(r){Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function e(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}var t={exports:{}},n=t.exports={},u,p;function m(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?u=setTimeout:u=m}catch{u=m}try{typeof clearTimeout=="function"?p=clearTimeout:p=i}catch{p=i}})();function l(d){if(u===setTimeout)return setTimeout(d,0);if((u===m||!u)&&setTimeout)return u=setTimeout,setTimeout(d,0);try{return u(d,0)}catch{try{return u.call(null,d,0)}catch{return u.call(this,d,0)}}}function h(d){if(p===clearTimeout)return clearTimeout(d);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(d);try{return p(d)}catch{try{return p.call(null,d)}catch{return p.call(this,d)}}}var b=[],f=!1,y,C=-1;function w(){!f||!y||(f=!1,y.length?b=y.concat(b):C=-1,b.length&&S())}function S(){if(!f){var d=l(w);f=!0;for(var _=b.length;_;){for(y=b,b=[];++C<_;)y&&y[C].run();C=-1,_=b.length}y=null,f=!1,h(d)}}n.nextTick=function(d){var _=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)_[E-1]=arguments[E];b.push(new a(d,_)),b.length===1&&!f&&l(S)};function a(d,_){this.fun=d,this.array=_}a.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={};function s(){}n.on=s,n.addListener=s,n.once=s,n.off=s,n.removeListener=s,n.removeAllListeners=s,n.emit=s,n.prependListener=s,n.prependOnceListener=s,n.listeners=function(d){return[]},n.binding=function(d){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(d){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};var o=t.exports;const c=e(o);r.default=c,r.process=c}(pi)),pi}var Vl=So();const ve=mo(Vl);var gi={exports:{}},mi={},mt={},wo={},An=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var u=42;e[t]=u;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var p=Object.getOwnPropertySymbols(e);if(p.length!==1||p[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var m=Object.getOwnPropertyDescriptor(e,t);if(m.value!==u||m.enumerable!==!0)return!1}return!0},Kl=An,Tn=function(){return Kl()&&!!Symbol.toStringTag},Gl=Error,Yl=EvalError,Xl=RangeError,Jl=ReferenceError,Eo=SyntaxError,Yr=TypeError,Zl=URIError,Gn=typeof Symbol<"u"&&Symbol,Ql=An,ec=function(){return typeof Gn!="function"||typeof Symbol!="function"||typeof Gn("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Ql()},vi={__proto__:null,foo:{}},tc=Object,rc=function(){return{__proto__:vi}.foo===vi.foo&&!(vi instanceof tc)},ic="Function.prototype.bind called on incompatible ",nc=Object.prototype.toString,sc=Math.max,oc="[object Function]",Yn=function(e,t){for(var n=[],u=0;u<e.length;u+=1)n[u]=e[u];for(var p=0;p<t.length;p+=1)n[p+e.length]=t[p];return n},ac=function(e,t){for(var n=[],u=t||0,p=0;u<e.length;u+=1,p+=1)n[p]=e[u];return n},lc=function(r,e){for(var t="",n=0;n<r.length;n+=1)t+=r[n],n+1<r.length&&(t+=e);return t},cc=function(e){var t=this;if(typeof t!="function"||nc.apply(t)!==oc)throw new TypeError(ic+t);for(var n=ac(arguments,1),u,p=function(){if(this instanceof u){var b=t.apply(this,Yn(n,arguments));return Object(b)===b?b:this}return t.apply(e,Yn(n,arguments))},m=sc(0,t.length-n.length),i=[],l=0;l<m;l++)i[l]="$"+l;if(u=Function("binder","return function ("+lc(i,",")+"){ return binder.apply(this,arguments); }")(p),t.prototype){var h=function(){};h.prototype=t.prototype,u.prototype=new h,h.prototype=null}return u},hc=cc,On=Function.prototype.bind||hc,uc=Function.prototype.call,fc=Object.prototype.hasOwnProperty,dc=On,_c=dc.call(uc,fc),Ae,pc=Gl,gc=Yl,mc=Xl,vc=Jl,sr=Eo,Qt=Yr,yc=Zl,Co=Function,yi=function(r){try{return Co('"use strict"; return ('+r+").constructor;")()}catch{}},xt=Object.getOwnPropertyDescriptor;if(xt)try{xt({},"")}catch{xt=null}var bi=function(){throw new Qt},bc=xt?function(){try{return arguments.callee,bi}catch{try{return xt(arguments,"callee").get}catch{return bi}}}():bi,$t=ec(),Sc=rc(),Ye=Object.getPrototypeOf||(Sc?function(r){return r.__proto__}:null),Xt={},wc=typeof Uint8Array>"u"||!Ye?Ae:Ye(Uint8Array),Mt={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ae:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ae:ArrayBuffer,"%ArrayIteratorPrototype%":$t&&Ye?Ye([][Symbol.iterator]()):Ae,"%AsyncFromSyncIteratorPrototype%":Ae,"%AsyncFunction%":Xt,"%AsyncGenerator%":Xt,"%AsyncGeneratorFunction%":Xt,"%AsyncIteratorPrototype%":Xt,"%Atomics%":typeof Atomics>"u"?Ae:Atomics,"%BigInt%":typeof BigInt>"u"?Ae:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ae:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ae:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ae:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":pc,"%eval%":eval,"%EvalError%":gc,"%Float32Array%":typeof Float32Array>"u"?Ae:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ae:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ae:FinalizationRegistry,"%Function%":Co,"%GeneratorFunction%":Xt,"%Int8Array%":typeof Int8Array>"u"?Ae:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ae:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ae:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":$t&&Ye?Ye(Ye([][Symbol.iterator]())):Ae,"%JSON%":typeof JSON=="object"?JSON:Ae,"%Map%":typeof Map>"u"?Ae:Map,"%MapIteratorPrototype%":typeof Map>"u"||!$t||!Ye?Ae:Ye(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ae:Promise,"%Proxy%":typeof Proxy>"u"?Ae:Proxy,"%RangeError%":mc,"%ReferenceError%":vc,"%Reflect%":typeof Reflect>"u"?Ae:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ae:Set,"%SetIteratorPrototype%":typeof Set>"u"||!$t||!Ye?Ae:Ye(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ae:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":$t&&Ye?Ye(""[Symbol.iterator]()):Ae,"%Symbol%":$t?Symbol:Ae,"%SyntaxError%":sr,"%ThrowTypeError%":bc,"%TypedArray%":wc,"%TypeError%":Qt,"%Uint8Array%":typeof Uint8Array>"u"?Ae:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ae:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ae:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ae:Uint32Array,"%URIError%":yc,"%WeakMap%":typeof WeakMap>"u"?Ae:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ae:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ae:WeakSet};if(Ye)try{null.error}catch(r){var Ec=Ye(Ye(r));Mt["%Error.prototype%"]=Ec}var Cc=function r(e){var t;if(e==="%AsyncFunction%")t=yi("async function () {}");else if(e==="%GeneratorFunction%")t=yi("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=yi("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var u=r("%AsyncGenerator%");u&&Ye&&(t=Ye(u.prototype))}return Mt[e]=t,t},Xn={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Sr=On,$r=_c,Rc=Sr.call(Function.call,Array.prototype.concat),Ac=Sr.call(Function.apply,Array.prototype.splice),Jn=Sr.call(Function.call,String.prototype.replace),Wr=Sr.call(Function.call,String.prototype.slice),Tc=Sr.call(Function.call,RegExp.prototype.exec),Oc=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,kc=/\\(\\)?/g,Lc=function(e){var t=Wr(e,0,1),n=Wr(e,-1);if(t==="%"&&n!=="%")throw new sr("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new sr("invalid intrinsic syntax, expected opening `%`");var u=[];return Jn(e,Oc,function(p,m,i,l){u[u.length]=i?Jn(l,kc,"$1"):m||p}),u},Dc=function(e,t){var n=e,u;if($r(Xn,n)&&(u=Xn[n],n="%"+u[0]+"%"),$r(Mt,n)){var p=Mt[n];if(p===Xt&&(p=Cc(n)),typeof p>"u"&&!t)throw new Qt("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:u,name:n,value:p}}throw new sr("intrinsic "+e+" does not exist!")},wr=function(e,t){if(typeof e!="string"||e.length===0)throw new Qt("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Qt('"allowMissing" argument must be a boolean');if(Tc(/^%?[^%]*%?$/,e)===null)throw new sr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=Lc(e),u=n.length>0?n[0]:"",p=Dc("%"+u+"%",t),m=p.name,i=p.value,l=!1,h=p.alias;h&&(u=h[0],Ac(n,Rc([0,1],h)));for(var b=1,f=!0;b<n.length;b+=1){var y=n[b],C=Wr(y,0,1),w=Wr(y,-1);if((C==='"'||C==="'"||C==="`"||w==='"'||w==="'"||w==="`")&&C!==w)throw new sr("property names with quotes must have matching quotes");if((y==="constructor"||!f)&&(l=!0),u+="."+y,m="%"+u+"%",$r(Mt,m))i=Mt[m];else if(i!=null){if(!(y in i)){if(!t)throw new Qt("base intrinsic for "+e+" exists, but the property is not available.");return}if(xt&&b+1>=n.length){var S=xt(i,y);f=!!S,f&&"get"in S&&!("originalValue"in S.get)?i=S.get:i=i[y]}else f=$r(i,y),i=i[y];f&&!l&&(Mt[m]=i)}}return i},Ro={exports:{}},Si,Zn;function kn(){if(Zn)return Si;Zn=1;var r=wr,e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Si=e,Si}var Bc=wr,Mr=Bc("%Object.getOwnPropertyDescriptor%",!0);if(Mr)try{Mr([],"length")}catch{Mr=null}var Ln=Mr,Qn=kn(),Ic=Eo,Wt=Yr,es=Ln,Ao=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new Wt("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Wt("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Wt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Wt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Wt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Wt("`loose`, if provided, must be a boolean");var u=arguments.length>3?arguments[3]:null,p=arguments.length>4?arguments[4]:null,m=arguments.length>5?arguments[5]:null,i=arguments.length>6?arguments[6]:!1,l=!!es&&es(e,t);if(Qn)Qn(e,t,{configurable:m===null&&l?l.configurable:!m,enumerable:u===null&&l?l.enumerable:!u,value:n,writable:p===null&&l?l.writable:!p});else if(i||!u&&!p&&!m)e[t]=n;else throw new Ic("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},un=kn(),To=function(){return!!un};To.hasArrayLengthDefineBug=function(){if(!un)return null;try{return un([],"length",{value:1}).length!==1}catch{return!0}};var Oo=To,Pc=wr,ts=Ao,xc=Oo(),rs=Ln,is=Yr,Mc=Pc("%Math.floor%"),Fc=function(e,t){if(typeof e!="function")throw new is("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||Mc(t)!==t)throw new is("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],u=!0,p=!0;if("length"in e&&rs){var m=rs(e,"length");m&&!m.configurable&&(u=!1),m&&!m.writable&&(p=!1)}return(u||p||!n)&&(xc?ts(e,"length",t,!0,!0):ts(e,"length",t)),e};(function(r){var e=On,t=wr,n=Fc,u=Yr,p=t("%Function.prototype.apply%"),m=t("%Function.prototype.call%"),i=t("%Reflect.apply%",!0)||e.call(m,p),l=kn(),h=t("%Math.max%");r.exports=function(y){if(typeof y!="function")throw new u("a function is required");var C=i(e,m,arguments);return n(C,1+h(0,y.length-(arguments.length-1)),!0)};var b=function(){return i(e,p,arguments)};l?l(r.exports,"apply",{value:b}):r.exports.apply=b})(Ro);var Xr=Ro.exports,ko=wr,Lo=Xr,Nc=Lo(ko("String.prototype.indexOf")),Jr=function(e,t){var n=ko(e,!!t);return typeof n=="function"&&Nc(e,".prototype.")>-1?Lo(n):n},jc=Tn(),Uc=Jr,fn=Uc("Object.prototype.toString"),Zr=function(e){return jc&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:fn(e)==="[object Arguments]"},Do=function(e){return Zr(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&fn(e)!=="[object Array]"&&fn(e.callee)==="[object Function]"},Hc=function(){return Zr(arguments)}();Zr.isLegacyArguments=Do;var $c=Hc?Zr:Do,Wc=Object.prototype.toString,qc=Function.prototype.toString,zc=/^\s*(?:function)?\*/,Bo=Tn(),wi=Object.getPrototypeOf,Vc=function(){if(!Bo)return!1;try{return Function("return function*() {}")()}catch{}},Ei,Kc=function(e){if(typeof e!="function")return!1;if(zc.test(qc.call(e)))return!0;if(!Bo){var t=Wc.call(e);return t==="[object GeneratorFunction]"}if(!wi)return!1;if(typeof Ei>"u"){var n=Vc();Ei=n?wi(n):!1}return wi(e)===Ei},Io=Function.prototype.toString,Jt=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,dn,Fr;if(typeof Jt=="function"&&typeof Object.defineProperty=="function")try{dn=Object.defineProperty({},"length",{get:function(){throw Fr}}),Fr={},Jt(function(){throw 42},null,dn)}catch(r){r!==Fr&&(Jt=null)}else Jt=null;var Gc=/^\s*class\b/,_n=function(e){try{var t=Io.call(e);return Gc.test(t)}catch{return!1}},Ci=function(e){try{return _n(e)?!1:(Io.call(e),!0)}catch{return!1}},Nr=Object.prototype.toString,Yc="[object Object]",Xc="[object Function]",Jc="[object GeneratorFunction]",Zc="[object HTMLAllCollection]",Qc="[object HTML document.all class]",eh="[object HTMLCollection]",th=typeof Symbol=="function"&&!!Symbol.toStringTag,rh=!(0 in[,]),pn=function(){return!1};if(typeof document=="object"){var ih=document.all;Nr.call(ih)===Nr.call(document.all)&&(pn=function(e){if((rh||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=Nr.call(e);return(t===Zc||t===Qc||t===eh||t===Yc)&&e("")==null}catch{}return!1})}var nh=Jt?function(e){if(pn(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{Jt(e,null,dn)}catch(t){if(t!==Fr)return!1}return!_n(e)&&Ci(e)}:function(e){if(pn(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(th)return Ci(e);if(_n(e))return!1;var t=Nr.call(e);return t!==Xc&&t!==Jc&&!/^\[object HTML/.test(t)?!1:Ci(e)},sh=nh,oh=Object.prototype.toString,Po=Object.prototype.hasOwnProperty,ah=function(e,t,n){for(var u=0,p=e.length;u<p;u++)Po.call(e,u)&&(n==null?t(e[u],u,e):t.call(n,e[u],u,e))},lh=function(e,t,n){for(var u=0,p=e.length;u<p;u++)n==null?t(e.charAt(u),u,e):t.call(n,e.charAt(u),u,e)},ch=function(e,t,n){for(var u in e)Po.call(e,u)&&(n==null?t(e[u],u,e):t.call(n,e[u],u,e))},hh=function(e,t,n){if(!sh(t))throw new TypeError("iterator must be a function");var u;arguments.length>=3&&(u=n),oh.call(e)==="[object Array]"?ah(e,t,u):typeof e=="string"?lh(e,t,u):ch(e,t,u)},uh=hh,fh=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],Ri=fh,dh=typeof globalThis>"u"?Ze:globalThis,_h=function(){for(var e=[],t=0;t<Ri.length;t++)typeof dh[Ri[t]]=="function"&&(e[e.length]=Ri[t]);return e},qr=uh,ph=_h,ns=Xr,Dn=Jr,jr=Ln,gh=Dn("Object.prototype.toString"),xo=Tn(),ss=typeof globalThis>"u"?Ze:globalThis,gn=ph(),Bn=Dn("String.prototype.slice"),Ai=Object.getPrototypeOf,mh=Dn("Array.prototype.indexOf",!0)||function(e,t){for(var n=0;n<e.length;n+=1)if(e[n]===t)return n;return-1},zr={__proto__:null};xo&&jr&&Ai?qr(gn,function(r){var e=new ss[r];if(Symbol.toStringTag in e){var t=Ai(e),n=jr(t,Symbol.toStringTag);if(!n){var u=Ai(t);n=jr(u,Symbol.toStringTag)}zr["$"+r]=ns(n.get)}}):qr(gn,function(r){var e=new ss[r],t=e.slice||e.set;t&&(zr["$"+r]=ns(t))});var vh=function(e){var t=!1;return qr(zr,function(n,u){if(!t)try{"$"+n(e)===u&&(t=Bn(u,1))}catch{}}),t},yh=function(e){var t=!1;return qr(zr,function(n,u){if(!t)try{n(e),t=Bn(u,1)}catch{}}),t},Mo=function(e){if(!e||typeof e!="object")return!1;if(!xo){var t=Bn(gh(e),8,-1);return mh(gn,t)>-1?t:t!=="Object"?!1:yh(e)}return jr?vh(e):null},bh=Mo,Sh=function(e){return!!bh(e)};(function(r){var e=$c,t=Kc,n=Mo,u=Sh;function p(oe){return oe.call.bind(oe)}var m=typeof BigInt<"u",i=typeof Symbol<"u",l=p(Object.prototype.toString),h=p(Number.prototype.valueOf),b=p(String.prototype.valueOf),f=p(Boolean.prototype.valueOf);if(m)var y=p(BigInt.prototype.valueOf);if(i)var C=p(Symbol.prototype.valueOf);function w(oe,Me){if(typeof oe!="object")return!1;try{return Me(oe),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=u;function S(oe){return typeof Promise<"u"&&oe instanceof Promise||oe!==null&&typeof oe=="object"&&typeof oe.then=="function"&&typeof oe.catch=="function"}r.isPromise=S;function a(oe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(oe):u(oe)||H(oe)}r.isArrayBufferView=a;function s(oe){return n(oe)==="Uint8Array"}r.isUint8Array=s;function o(oe){return n(oe)==="Uint8ClampedArray"}r.isUint8ClampedArray=o;function c(oe){return n(oe)==="Uint16Array"}r.isUint16Array=c;function d(oe){return n(oe)==="Uint32Array"}r.isUint32Array=d;function _(oe){return n(oe)==="Int8Array"}r.isInt8Array=_;function E(oe){return n(oe)==="Int16Array"}r.isInt16Array=E;function k(oe){return n(oe)==="Int32Array"}r.isInt32Array=k;function v(oe){return n(oe)==="Float32Array"}r.isFloat32Array=v;function O(oe){return n(oe)==="Float64Array"}r.isFloat64Array=O;function M(oe){return n(oe)==="BigInt64Array"}r.isBigInt64Array=M;function $(oe){return n(oe)==="BigUint64Array"}r.isBigUint64Array=$;function L(oe){return l(oe)==="[object Map]"}L.working=typeof Map<"u"&&L(new Map);function q(oe){return typeof Map>"u"?!1:L.working?L(oe):oe instanceof Map}r.isMap=q;function Z(oe){return l(oe)==="[object Set]"}Z.working=typeof Set<"u"&&Z(new Set);function re(oe){return typeof Set>"u"?!1:Z.working?Z(oe):oe instanceof Set}r.isSet=re;function ie(oe){return l(oe)==="[object WeakMap]"}ie.working=typeof WeakMap<"u"&&ie(new WeakMap);function ne(oe){return typeof WeakMap>"u"?!1:ie.working?ie(oe):oe instanceof WeakMap}r.isWeakMap=ne;function x(oe){return l(oe)==="[object WeakSet]"}x.working=typeof WeakSet<"u"&&x(new WeakSet);function F(oe){return x(oe)}r.isWeakSet=F;function P(oe){return l(oe)==="[object ArrayBuffer]"}P.working=typeof ArrayBuffer<"u"&&P(new ArrayBuffer);function U(oe){return typeof ArrayBuffer>"u"?!1:P.working?P(oe):oe instanceof ArrayBuffer}r.isArrayBuffer=U;function G(oe){return l(oe)==="[object DataView]"}G.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&G(new DataView(new ArrayBuffer(1),0,1));function H(oe){return typeof DataView>"u"?!1:G.working?G(oe):oe instanceof DataView}r.isDataView=H;var K=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Y(oe){return l(oe)==="[object SharedArrayBuffer]"}function z(oe){return typeof K>"u"?!1:(typeof Y.working>"u"&&(Y.working=Y(new K)),Y.working?Y(oe):oe instanceof K)}r.isSharedArrayBuffer=z;function g(oe){return l(oe)==="[object AsyncFunction]"}r.isAsyncFunction=g;function A(oe){return l(oe)==="[object Map Iterator]"}r.isMapIterator=A;function I(oe){return l(oe)==="[object Set Iterator]"}r.isSetIterator=I;function j(oe){return l(oe)==="[object Generator]"}r.isGeneratorObject=j;function D(oe){return l(oe)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=D;function B(oe){return w(oe,h)}r.isNumberObject=B;function V(oe){return w(oe,b)}r.isStringObject=V;function ee(oe){return w(oe,f)}r.isBooleanObject=ee;function le(oe){return m&&w(oe,y)}r.isBigIntObject=le;function ue(oe){return i&&w(oe,C)}r.isSymbolObject=ue;function ce(oe){return B(oe)||V(oe)||ee(oe)||le(oe)||ue(oe)}r.isBoxedPrimitive=ce;function pe(oe){return typeof Uint8Array<"u"&&(U(oe)||z(oe))}r.isAnyArrayBuffer=pe,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(oe){Object.defineProperty(r,oe,{enumerable:!1,value:function(){throw new Error(oe+" is not supported in userland")}})})})(wo);var wh=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},mn={exports:{}};typeof Object.create=="function"?mn.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:mn.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}};var Ut=mn.exports;(function(r){var e={},t=Object.getOwnPropertyDescriptors||function(K){for(var Y=Object.keys(K),z={},g=0;g<Y.length;g++)z[Y[g]]=Object.getOwnPropertyDescriptor(K,Y[g]);return z},n=/%[sdj%]/g;r.format=function(H){if(!E(H)){for(var K=[],Y=0;Y<arguments.length;Y++)K.push(i(arguments[Y]));return K.join(" ")}for(var Y=1,z=arguments,g=z.length,A=String(H).replace(n,function(j){if(j==="%%")return"%";if(Y>=g)return j;switch(j){case"%s":return String(z[Y++]);case"%d":return Number(z[Y++]);case"%j":try{return JSON.stringify(z[Y++])}catch{return"[Circular]"}default:return j}}),I=z[Y];Y<g;I=z[++Y])c(I)||!M(I)?A+=" "+I:A+=" "+i(I);return A},r.deprecate=function(H,K){if(typeof ve<"u"&&ve.noDeprecation===!0)return H;if(typeof ve>"u")return function(){return r.deprecate(H,K).apply(this,arguments)};var Y=!1;function z(){if(!Y){if(ve.throwDeprecation)throw new Error(K);ve.traceDeprecation?console.trace(K):console.error(K),Y=!0}return H.apply(this,arguments)}return z};var u={},p=/^$/;if(e.NODE_DEBUG){var m=e.NODE_DEBUG;m=m.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),p=new RegExp("^"+m+"$","i")}r.debuglog=function(H){if(H=H.toUpperCase(),!u[H])if(p.test(H)){var K=ve.pid;u[H]=function(){var Y=r.format.apply(r,arguments);console.error("%s %d: %s",H,K,Y)}}else u[H]=function(){};return u[H]};function i(H,K){var Y={seen:[],stylize:h};return arguments.length>=3&&(Y.depth=arguments[2]),arguments.length>=4&&(Y.colors=arguments[3]),o(K)?Y.showHidden=K:K&&r._extend(Y,K),v(Y.showHidden)&&(Y.showHidden=!1),v(Y.depth)&&(Y.depth=2),v(Y.colors)&&(Y.colors=!1),v(Y.customInspect)&&(Y.customInspect=!0),Y.colors&&(Y.stylize=l),f(Y,H,Y.depth)}r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function l(H,K){var Y=i.styles[K];return Y?"\x1B["+i.colors[Y][0]+"m"+H+"\x1B["+i.colors[Y][1]+"m":H}function h(H,K){return H}function b(H){var K={};return H.forEach(function(Y,z){K[Y]=!0}),K}function f(H,K,Y){if(H.customInspect&&K&&q(K.inspect)&&K.inspect!==r.inspect&&!(K.constructor&&K.constructor.prototype===K)){var z=K.inspect(Y,H);return E(z)||(z=f(H,z,Y)),z}var g=y(H,K);if(g)return g;var A=Object.keys(K),I=b(A);if(H.showHidden&&(A=Object.getOwnPropertyNames(K)),L(K)&&(A.indexOf("message")>=0||A.indexOf("description")>=0))return C(K);if(A.length===0){if(q(K)){var j=K.name?": "+K.name:"";return H.stylize("[Function"+j+"]","special")}if(O(K))return H.stylize(RegExp.prototype.toString.call(K),"regexp");if($(K))return H.stylize(Date.prototype.toString.call(K),"date");if(L(K))return C(K)}var D="",B=!1,V=["{","}"];if(s(K)&&(B=!0,V=["[","]"]),q(K)){var ee=K.name?": "+K.name:"";D=" [Function"+ee+"]"}if(O(K)&&(D=" "+RegExp.prototype.toString.call(K)),$(K)&&(D=" "+Date.prototype.toUTCString.call(K)),L(K)&&(D=" "+C(K)),A.length===0&&(!B||K.length==0))return V[0]+D+V[1];if(Y<0)return O(K)?H.stylize(RegExp.prototype.toString.call(K),"regexp"):H.stylize("[Object]","special");H.seen.push(K);var le;return B?le=w(H,K,Y,I,A):le=A.map(function(ue){return S(H,K,Y,I,ue,B)}),H.seen.pop(),a(le,D,V)}function y(H,K){if(v(K))return H.stylize("undefined","undefined");if(E(K)){var Y="'"+JSON.stringify(K).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return H.stylize(Y,"string")}if(_(K))return H.stylize(""+K,"number");if(o(K))return H.stylize(""+K,"boolean");if(c(K))return H.stylize("null","null")}function C(H){return"["+Error.prototype.toString.call(H)+"]"}function w(H,K,Y,z,g){for(var A=[],I=0,j=K.length;I<j;++I)F(K,String(I))?A.push(S(H,K,Y,z,String(I),!0)):A.push("");return g.forEach(function(D){D.match(/^\d+$/)||A.push(S(H,K,Y,z,D,!0))}),A}function S(H,K,Y,z,g,A){var I,j,D;if(D=Object.getOwnPropertyDescriptor(K,g)||{value:K[g]},D.get?D.set?j=H.stylize("[Getter/Setter]","special"):j=H.stylize("[Getter]","special"):D.set&&(j=H.stylize("[Setter]","special")),F(z,g)||(I="["+g+"]"),j||(H.seen.indexOf(D.value)<0?(c(Y)?j=f(H,D.value,null):j=f(H,D.value,Y-1),j.indexOf(`
`)>-1&&(A?j=j.split(`
`).map(function(B){return"  "+B}).join(`
`).slice(2):j=`
`+j.split(`
`).map(function(B){return"   "+B}).join(`
`))):j=H.stylize("[Circular]","special")),v(I)){if(A&&g.match(/^\d+$/))return j;I=JSON.stringify(""+g),I.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(I=I.slice(1,-1),I=H.stylize(I,"name")):(I=I.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),I=H.stylize(I,"string"))}return I+": "+j}function a(H,K,Y){var z=H.reduce(function(g,A){return A.indexOf(`
`)>=0,g+A.replace(/\u001b\[\d\d?m/g,"").length+1},0);return z>60?Y[0]+(K===""?"":K+`
 `)+" "+H.join(`,
  `)+" "+Y[1]:Y[0]+K+" "+H.join(", ")+" "+Y[1]}r.types=wo;function s(H){return Array.isArray(H)}r.isArray=s;function o(H){return typeof H=="boolean"}r.isBoolean=o;function c(H){return H===null}r.isNull=c;function d(H){return H==null}r.isNullOrUndefined=d;function _(H){return typeof H=="number"}r.isNumber=_;function E(H){return typeof H=="string"}r.isString=E;function k(H){return typeof H=="symbol"}r.isSymbol=k;function v(H){return H===void 0}r.isUndefined=v;function O(H){return M(H)&&re(H)==="[object RegExp]"}r.isRegExp=O,r.types.isRegExp=O;function M(H){return typeof H=="object"&&H!==null}r.isObject=M;function $(H){return M(H)&&re(H)==="[object Date]"}r.isDate=$,r.types.isDate=$;function L(H){return M(H)&&(re(H)==="[object Error]"||H instanceof Error)}r.isError=L,r.types.isNativeError=L;function q(H){return typeof H=="function"}r.isFunction=q;function Z(H){return H===null||typeof H=="boolean"||typeof H=="number"||typeof H=="string"||typeof H=="symbol"||typeof H>"u"}r.isPrimitive=Z,r.isBuffer=wh;function re(H){return Object.prototype.toString.call(H)}function ie(H){return H<10?"0"+H.toString(10):H.toString(10)}var ne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(){var H=new Date,K=[ie(H.getHours()),ie(H.getMinutes()),ie(H.getSeconds())].join(":");return[H.getDate(),ne[H.getMonth()],K].join(" ")}r.log=function(){console.log("%s - %s",x(),r.format.apply(r,arguments))},r.inherits=Ut,r._extend=function(H,K){if(!K||!M(K))return H;for(var Y=Object.keys(K),z=Y.length;z--;)H[Y[z]]=K[Y[z]];return H};function F(H,K){return Object.prototype.hasOwnProperty.call(H,K)}var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(K){if(typeof K!="function")throw new TypeError('The "original" argument must be of type Function');if(P&&K[P]){var Y=K[P];if(typeof Y!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Y,P,{value:Y,enumerable:!1,writable:!1,configurable:!0}),Y}function Y(){for(var z,g,A=new Promise(function(D,B){z=D,g=B}),I=[],j=0;j<arguments.length;j++)I.push(arguments[j]);I.push(function(D,B){D?g(D):z(B)});try{K.apply(this,I)}catch(D){g(D)}return A}return Object.setPrototypeOf(Y,Object.getPrototypeOf(K)),P&&Object.defineProperty(Y,P,{value:Y,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Y,t(K))},r.promisify.custom=P;function U(H,K){if(!H){var Y=new Error("Promise was rejected with a falsy value");Y.reason=H,H=Y}return K(H)}function G(H){if(typeof H!="function")throw new TypeError('The "original" argument must be of type Function');function K(){for(var Y=[],z=0;z<arguments.length;z++)Y.push(arguments[z]);var g=Y.pop();if(typeof g!="function")throw new TypeError("The last argument must be of type Function");var A=this,I=function(){return g.apply(A,arguments)};H.apply(this,Y).then(function(j){ve.nextTick(I.bind(null,null,j))},function(j){ve.nextTick(U.bind(null,j,I))})}return Object.setPrototypeOf(K,Object.getPrototypeOf(H)),Object.defineProperties(K,t(H)),K}r.callbackify=G})(mt);var os;function Fo(){if(os)return mi;os=1;function r(_){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},r(_)}function e(_,E){for(var k=0;k<E.length;k++){var v=E[k];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(_,n(v.key),v)}}function t(_,E,k){return E&&e(_.prototype,E),k&&e(_,k),Object.defineProperty(_,"prototype",{writable:!1}),_}function n(_){var E=u(_,"string");return r(E)==="symbol"?E:String(E)}function u(_,E){if(r(_)!=="object"||_===null)return _;var k=_[Symbol.toPrimitive];if(k!==void 0){var v=k.call(_,E||"default");if(r(v)!=="object")return v;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(_)}function p(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function m(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,writable:!0,configurable:!0}}),Object.defineProperty(_,"prototype",{writable:!1}),E&&i(_,E)}function i(_,E){return i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,O){return v.__proto__=O,v},i(_,E)}function l(_){var E=f();return function(){var v=y(_),O;if(E){var M=y(this).constructor;O=Reflect.construct(v,arguments,M)}else O=v.apply(this,arguments);return h(this,O)}}function h(_,E){if(E&&(r(E)==="object"||typeof E=="function"))return E;if(E!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return b(_)}function b(_){if(_===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function y(_){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},y(_)}var C={},w,S;function a(_,E,k){k||(k=Error);function v(M,$,L){return typeof E=="string"?E:E(M,$,L)}var O=function(M){m(L,M);var $=l(L);function L(q,Z,re){var ie;return p(this,L),ie=$.call(this,v(q,Z,re)),ie.code=_,ie}return t(L)}(k);C[_]=O}function s(_,E){if(Array.isArray(_)){var k=_.length;return _=_.map(function(v){return String(v)}),k>2?"one of ".concat(E," ").concat(_.slice(0,k-1).join(", "),", or ")+_[k-1]:k===2?"one of ".concat(E," ").concat(_[0]," or ").concat(_[1]):"of ".concat(E," ").concat(_[0])}else return"of ".concat(E," ").concat(String(_))}function o(_,E,k){return _.substr(!k||k<0?0:+k,E.length)===E}function c(_,E,k){return(k===void 0||k>_.length)&&(k=_.length),_.substring(k-E.length,k)===E}function d(_,E,k){return typeof k!="number"&&(k=0),k+E.length>_.length?!1:_.indexOf(E,k)!==-1}return a("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),a("ERR_INVALID_ARG_TYPE",function(_,E,k){w===void 0&&(w=vn()),w(typeof _=="string","'name' must be a string");var v;typeof E=="string"&&o(E,"not ")?(v="must not be",E=E.replace(/^not /,"")):v="must be";var O;if(c(_," argument"))O="The ".concat(_," ").concat(v," ").concat(s(E,"type"));else{var M=d(_,".")?"property":"argument";O='The "'.concat(_,'" ').concat(M," ").concat(v," ").concat(s(E,"type"))}return O+=". Received type ".concat(r(k)),O},TypeError),a("ERR_INVALID_ARG_VALUE",function(_,E){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";S===void 0&&(S=mt);var v=S.inspect(E);return v.length>128&&(v="".concat(v.slice(0,128),"...")),"The argument '".concat(_,"' ").concat(k,". Received ").concat(v)},TypeError),a("ERR_INVALID_RETURN_VALUE",function(_,E,k){var v;return k&&k.constructor&&k.constructor.name?v="instance of ".concat(k.constructor.name):v="type ".concat(r(k)),"Expected ".concat(_,' to be returned from the "').concat(E,'"')+" function but got ".concat(v,".")},TypeError),a("ERR_MISSING_ARGS",function(){for(var _=arguments.length,E=new Array(_),k=0;k<_;k++)E[k]=arguments[k];w===void 0&&(w=vn()),w(E.length>0,"At least one arg needs to be specified");var v="The ",O=E.length;switch(E=E.map(function(M){return'"'.concat(M,'"')}),O){case 1:v+="".concat(E[0]," argument");break;case 2:v+="".concat(E[0]," and ").concat(E[1]," arguments");break;default:v+=E.slice(0,O-1).join(", "),v+=", and ".concat(E[O-1]," arguments");break}return"".concat(v," must be specified")},TypeError),mi.codes=C,mi}var Ti,as;function Eh(){if(as)return Ti;as=1;function r(F,P){var U=Object.keys(F);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(F);P&&(G=G.filter(function(H){return Object.getOwnPropertyDescriptor(F,H).enumerable})),U.push.apply(U,G)}return U}function e(F){for(var P=1;P<arguments.length;P++){var U=arguments[P]!=null?arguments[P]:{};P%2?r(Object(U),!0).forEach(function(G){t(F,G,U[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(U)):r(Object(U)).forEach(function(G){Object.defineProperty(F,G,Object.getOwnPropertyDescriptor(U,G))})}return F}function t(F,P,U){return P=m(P),P in F?Object.defineProperty(F,P,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[P]=U,F}function n(F,P){if(!(F instanceof P))throw new TypeError("Cannot call a class as a function")}function u(F,P){for(var U=0;U<P.length;U++){var G=P[U];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(F,m(G.key),G)}}function p(F,P,U){return P&&u(F.prototype,P),U&&u(F,U),Object.defineProperty(F,"prototype",{writable:!1}),F}function m(F){var P=i(F,"string");return o(P)==="symbol"?P:String(P)}function i(F,P){if(o(F)!=="object"||F===null)return F;var U=F[Symbol.toPrimitive];if(U!==void 0){var G=U.call(F,P||"default");if(o(G)!=="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(F)}function l(F,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(P&&P.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),Object.defineProperty(F,"prototype",{writable:!1}),P&&a(F,P)}function h(F){var P=w();return function(){var G=s(F),H;if(P){var K=s(this).constructor;H=Reflect.construct(G,arguments,K)}else H=G.apply(this,arguments);return b(this,H)}}function b(F,P){if(P&&(o(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(F)}function f(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function y(F){var P=typeof Map=="function"?new Map:void 0;return y=function(G){if(G===null||!S(G))return G;if(typeof G!="function")throw new TypeError("Super expression must either be null or a function");if(typeof P<"u"){if(P.has(G))return P.get(G);P.set(G,H)}function H(){return C(G,arguments,s(this).constructor)}return H.prototype=Object.create(G.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),a(H,G)},y(F)}function C(F,P,U){return w()?C=Reflect.construct.bind():C=function(H,K,Y){var z=[null];z.push.apply(z,K);var g=Function.bind.apply(H,z),A=new g;return Y&&a(A,Y.prototype),A},C.apply(null,arguments)}function w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function S(F){return Function.toString.call(F).indexOf("[native code]")!==-1}function a(F,P){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,H){return G.__proto__=H,G},a(F,P)}function s(F){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},s(F)}function o(F){"@babel/helpers - typeof";return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},o(F)}var c=mt,d=c.inspect,_=Fo(),E=_.codes.ERR_INVALID_ARG_TYPE;function k(F,P,U){return(U===void 0||U>F.length)&&(U=F.length),F.substring(U-P.length,U)===P}function v(F,P){if(P=Math.floor(P),F.length==0||P==0)return"";var U=F.length*P;for(P=Math.floor(Math.log(P)/Math.log(2));P;)F+=F,P--;return F+=F.substring(0,U-F.length),F}var O="",M="",$="",L="",q={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},Z=10;function re(F){var P=Object.keys(F),U=Object.create(Object.getPrototypeOf(F));return P.forEach(function(G){U[G]=F[G]}),Object.defineProperty(U,"message",{value:F.message}),U}function ie(F){return d(F,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function ne(F,P,U){var G="",H="",K=0,Y="",z=!1,g=ie(F),A=g.split(`
`),I=ie(P).split(`
`),j=0,D="";if(U==="strictEqual"&&o(F)==="object"&&o(P)==="object"&&F!==null&&P!==null&&(U="strictEqualObject"),A.length===1&&I.length===1&&A[0]!==I[0]){var B=A[0].length+I[0].length;if(B<=Z){if((o(F)!=="object"||F===null)&&(o(P)!=="object"||P===null)&&(F!==0||P!==0))return"".concat(q[U],`

`)+"".concat(A[0]," !== ").concat(I[0],`
`)}else if(U!=="strictEqualObject"){var V=ve.stderr&&ve.stderr.isTTY?ve.stderr.columns:80;if(B<V){for(;A[0][j]===I[0][j];)j++;j>2&&(D=`
  `.concat(v(" ",j),"^"),j=0)}}}for(var ee=A[A.length-1],le=I[I.length-1];ee===le&&(j++<2?Y=`
  `.concat(ee).concat(Y):G=ee,A.pop(),I.pop(),!(A.length===0||I.length===0));)ee=A[A.length-1],le=I[I.length-1];var ue=Math.max(A.length,I.length);if(ue===0){var ce=g.split(`
`);if(ce.length>30)for(ce[26]="".concat(O,"...").concat(L);ce.length>27;)ce.pop();return"".concat(q.notIdentical,`

`).concat(ce.join(`
`),`
`)}j>3&&(Y=`
`.concat(O,"...").concat(L).concat(Y),z=!0),G!==""&&(Y=`
  `.concat(G).concat(Y),G="");var pe=0,oe=q[U]+`
`.concat(M,"+ actual").concat(L," ").concat($,"- expected").concat(L),Me=" ".concat(O,"...").concat(L," Lines skipped");for(j=0;j<ue;j++){var Ue=j-K;if(A.length<j+1)Ue>1&&j>2&&(Ue>4?(H+=`
`.concat(O,"...").concat(L),z=!0):Ue>3&&(H+=`
  `.concat(I[j-2]),pe++),H+=`
  `.concat(I[j-1]),pe++),K=j,G+=`
`.concat($,"-").concat(L," ").concat(I[j]),pe++;else if(I.length<j+1)Ue>1&&j>2&&(Ue>4?(H+=`
`.concat(O,"...").concat(L),z=!0):Ue>3&&(H+=`
  `.concat(A[j-2]),pe++),H+=`
  `.concat(A[j-1]),pe++),K=j,H+=`
`.concat(M,"+").concat(L," ").concat(A[j]),pe++;else{var Ce=I[j],Se=A[j],X=Se!==Ce&&(!k(Se,",")||Se.slice(0,-1)!==Ce);X&&k(Ce,",")&&Ce.slice(0,-1)===Se&&(X=!1,Se+=","),X?(Ue>1&&j>2&&(Ue>4?(H+=`
`.concat(O,"...").concat(L),z=!0):Ue>3&&(H+=`
  `.concat(A[j-2]),pe++),H+=`
  `.concat(A[j-1]),pe++),K=j,H+=`
`.concat(M,"+").concat(L," ").concat(Se),G+=`
`.concat($,"-").concat(L," ").concat(Ce),pe+=2):(H+=G,G="",(Ue===1||j===0)&&(H+=`
  `.concat(Se),pe++))}if(pe>20&&j<ue-2)return"".concat(oe).concat(Me,`
`).concat(H,`
`).concat(O,"...").concat(L).concat(G,`
`)+"".concat(O,"...").concat(L)}return"".concat(oe).concat(z?Me:"",`
`).concat(H).concat(G).concat(Y).concat(D)}var x=function(F,P){l(G,F);var U=h(G);function G(H){var K;if(n(this,G),o(H)!=="object"||H===null)throw new E("options","Object",H);var Y=H.message,z=H.operator,g=H.stackStartFn,A=H.actual,I=H.expected,j=Error.stackTraceLimit;if(Error.stackTraceLimit=0,Y!=null)K=U.call(this,String(Y));else if(ve.stderr&&ve.stderr.isTTY&&(ve.stderr&&ve.stderr.getColorDepth&&ve.stderr.getColorDepth()!==1?(O="\x1B[34m",M="\x1B[32m",L="\x1B[39m",$="\x1B[31m"):(O="",M="",L="",$="")),o(A)==="object"&&A!==null&&o(I)==="object"&&I!==null&&"stack"in A&&A instanceof Error&&"stack"in I&&I instanceof Error&&(A=re(A),I=re(I)),z==="deepStrictEqual"||z==="strictEqual")K=U.call(this,ne(A,I,z));else if(z==="notDeepStrictEqual"||z==="notStrictEqual"){var D=q[z],B=ie(A).split(`
`);if(z==="notStrictEqual"&&o(A)==="object"&&A!==null&&(D=q.notStrictEqualObject),B.length>30)for(B[26]="".concat(O,"...").concat(L);B.length>27;)B.pop();B.length===1?K=U.call(this,"".concat(D," ").concat(B[0])):K=U.call(this,"".concat(D,`

`).concat(B.join(`
`),`
`))}else{var V=ie(A),ee="",le=q[z];z==="notDeepEqual"||z==="notEqual"?(V="".concat(q[z],`

`).concat(V),V.length>1024&&(V="".concat(V.slice(0,1021),"..."))):(ee="".concat(ie(I)),V.length>512&&(V="".concat(V.slice(0,509),"...")),ee.length>512&&(ee="".concat(ee.slice(0,509),"...")),z==="deepEqual"||z==="equal"?V="".concat(le,`

`).concat(V,`

should equal

`):ee=" ".concat(z," ").concat(ee)),K=U.call(this,"".concat(V).concat(ee))}return Error.stackTraceLimit=j,K.generatedMessage=!Y,Object.defineProperty(f(K),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),K.code="ERR_ASSERTION",K.actual=A,K.expected=I,K.operator=z,Error.captureStackTrace&&Error.captureStackTrace(f(K),g),K.stack,K.name="AssertionError",b(K)}return p(G,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:P,value:function(K,Y){return d(this,e(e({},Y),{},{customInspect:!1,depth:0}))}}]),G}(y(Error),d.custom);return Ti=x,Ti}var ls=Object.prototype.toString,No=function(e){var t=ls.call(e),n=t==="[object Arguments]";return n||(n=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&ls.call(e.callee)==="[object Function]"),n},Oi,cs;function Ch(){if(cs)return Oi;cs=1;var r;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,n=No,u=Object.prototype.propertyIsEnumerable,p=!u.call({toString:null},"toString"),m=u.call(function(){},"prototype"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],l=function(y){var C=y.constructor;return C&&C.prototype===y},h={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},b=function(){if(typeof window>"u")return!1;for(var y in window)try{if(!h["$"+y]&&e.call(window,y)&&window[y]!==null&&typeof window[y]=="object")try{l(window[y])}catch{return!0}}catch{return!0}return!1}(),f=function(y){if(typeof window>"u"||!b)return l(y);try{return l(y)}catch{return!1}};r=function(C){var w=C!==null&&typeof C=="object",S=t.call(C)==="[object Function]",a=n(C),s=w&&t.call(C)==="[object String]",o=[];if(!w&&!S&&!a)throw new TypeError("Object.keys called on a non-object");var c=m&&S;if(s&&C.length>0&&!e.call(C,0))for(var d=0;d<C.length;++d)o.push(String(d));if(a&&C.length>0)for(var _=0;_<C.length;++_)o.push(String(_));else for(var E in C)!(c&&E==="prototype")&&e.call(C,E)&&o.push(String(E));if(p)for(var k=f(C),v=0;v<i.length;++v)!(k&&i[v]==="constructor")&&e.call(C,i[v])&&o.push(i[v]);return o}}return Oi=r,Oi}var Rh=Array.prototype.slice,Ah=No,hs=Object.keys,Ur=hs?function(e){return hs(e)}:Ch(),us=Object.keys;Ur.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(n){return Ah(n)?us(Rh.call(n)):us(n)})}else Object.keys=Ur;return Object.keys||Ur};var jo=Ur,Th=jo,Uo=An(),Ho=Jr,fs=Object,Oh=Ho("Array.prototype.push"),ds=Ho("Object.prototype.propertyIsEnumerable"),kh=Uo?Object.getOwnPropertySymbols:null,Lh=function(e,t){if(e==null)throw new TypeError("target must be an object");var n=fs(e);if(arguments.length===1)return n;for(var u=1;u<arguments.length;++u){var p=fs(arguments[u]),m=Th(p),i=Uo&&(Object.getOwnPropertySymbols||kh);if(i)for(var l=i(p),h=0;h<l.length;++h){var b=l[h];ds(p,b)&&Oh(m,b)}for(var f=0;f<m.length;++f){var y=m[f];if(ds(p,y)){var C=p[y];n[y]=C}}}return n},ki=Lh,Dh=function(){if(!Object.assign)return!1;for(var r="abcdefghijklmnopqrst",e=r.split(""),t={},n=0;n<e.length;++n)t[e[n]]=e[n];var u=Object.assign({},t),p="";for(var m in u)p+=m;return r!==p},Bh=function(){if(!Object.assign||!Object.preventExtensions)return!1;var r=Object.preventExtensions({1:2});try{Object.assign(r,"xy")}catch{return r[1]==="y"}return!1},Ih=function(){return!Object.assign||Dh()||Bh()?ki:Object.assign},_s=function(r){return r!==r},$o=function(e,t){return e===0&&t===0?1/e===1/t:!!(e===t||_s(e)&&_s(t))},Ph=$o,In=function(){return typeof Object.is=="function"?Object.is:Ph},Li,ps;function Qr(){if(ps)return Li;ps=1;var r=jo,e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",t=Object.prototype.toString,n=Array.prototype.concat,u=Ao,p=function(h){return typeof h=="function"&&t.call(h)==="[object Function]"},m=Oo(),i=function(h,b,f,y){if(b in h){if(y===!0){if(h[b]===f)return}else if(!p(y)||!y())return}m?u(h,b,f,!0):u(h,b,f)},l=function(h,b){var f=arguments.length>2?arguments[2]:{},y=r(b);e&&(y=n.call(y,Object.getOwnPropertySymbols(b)));for(var C=0;C<y.length;C+=1)i(h,y[C],b[y[C]],f[y[C]])};return l.supportsDescriptors=!!m,Li=l,Li}var Di,gs;function xh(){if(gs)return Di;gs=1;var r=In,e=Qr();return Di=function(){var n=r();return e(Object,{is:n},{is:function(){return Object.is!==n}}),n},Di}var Bi,ms;function Mh(){if(ms)return Bi;ms=1;var r=Qr(),e=Xr,t=$o,n=In,u=xh(),p=e(n(),Object);return r(p,{getPolyfill:n,implementation:t,shim:u}),Bi=p,Bi}var Ii,vs;function Wo(){return vs||(vs=1,Ii=function(e){return e!==e}),Ii}var Pi,ys;function qo(){if(ys)return Pi;ys=1;var r=Wo();return Pi=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r},Pi}var xi,bs;function Fh(){if(bs)return xi;bs=1;var r=Qr(),e=qo();return xi=function(){var n=e();return r(Number,{isNaN:n},{isNaN:function(){return Number.isNaN!==n}}),n},xi}var Mi,Ss;function Nh(){if(Ss)return Mi;Ss=1;var r=Xr,e=Qr(),t=Wo(),n=qo(),u=Fh(),p=r(n(),Number);return e(p,{getPolyfill:n,implementation:t,shim:u}),Mi=p,Mi}var Fi,ws;function jh(){if(ws)return Fi;ws=1;function r(X,Q){return p(X)||u(X,Q)||t(X,Q)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t(X,Q){if(X){if(typeof X=="string")return n(X,Q);var he=Object.prototype.toString.call(X).slice(8,-1);if(he==="Object"&&X.constructor&&(he=X.constructor.name),he==="Map"||he==="Set")return Array.from(X);if(he==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(he))return n(X,Q)}}function n(X,Q){(Q==null||Q>X.length)&&(Q=X.length);for(var he=0,de=new Array(Q);he<Q;he++)de[he]=X[he];return de}function u(X,Q){var he=X==null?null:typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(he!=null){var de,fe,ye,me,Ee=[],ge=!0,We=!1;try{if(ye=(he=he.call(X)).next,Q===0){if(Object(he)!==he)return;ge=!1}else for(;!(ge=(de=ye.call(he)).done)&&(Ee.push(de.value),Ee.length!==Q);ge=!0);}catch(qe){We=!0,fe=qe}finally{try{if(!ge&&he.return!=null&&(me=he.return(),Object(me)!==me))return}finally{if(We)throw fe}}return Ee}}function p(X){if(Array.isArray(X))return X}function m(X){"@babel/helpers - typeof";return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},m(X)}var i=/a/g.flags!==void 0,l=function(Q){var he=[];return Q.forEach(function(de){return he.push(de)}),he},h=function(Q){var he=[];return Q.forEach(function(de,fe){return he.push([fe,de])}),he},b=Object.is?Object.is:Mh(),f=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},y=Number.isNaN?Number.isNaN:Nh();function C(X){return X.call.bind(X)}var w=C(Object.prototype.hasOwnProperty),S=C(Object.prototype.propertyIsEnumerable),a=C(Object.prototype.toString),s=mt.types,o=s.isAnyArrayBuffer,c=s.isArrayBufferView,d=s.isDate,_=s.isMap,E=s.isRegExp,k=s.isSet,v=s.isNativeError,O=s.isBoxedPrimitive,M=s.isNumberObject,$=s.isStringObject,L=s.isBooleanObject,q=s.isBigIntObject,Z=s.isSymbolObject,re=s.isFloat32Array,ie=s.isFloat64Array;function ne(X){if(X.length===0||X.length>10)return!0;for(var Q=0;Q<X.length;Q++){var he=X.charCodeAt(Q);if(he<48||he>57)return!0}return X.length===10&&X>=Math.pow(2,32)}function x(X){return Object.keys(X).filter(ne).concat(f(X).filter(Object.prototype.propertyIsEnumerable.bind(X)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function F(X,Q){if(X===Q)return 0;for(var he=X.length,de=Q.length,fe=0,ye=Math.min(he,de);fe<ye;++fe)if(X[fe]!==Q[fe]){he=X[fe],de=Q[fe];break}return he<de?-1:de<he?1:0}var P=!0,U=!1,G=0,H=1,K=2,Y=3;function z(X,Q){return i?X.source===Q.source&&X.flags===Q.flags:RegExp.prototype.toString.call(X)===RegExp.prototype.toString.call(Q)}function g(X,Q){if(X.byteLength!==Q.byteLength)return!1;for(var he=0;he<X.byteLength;he++)if(X[he]!==Q[he])return!1;return!0}function A(X,Q){return X.byteLength!==Q.byteLength?!1:F(new Uint8Array(X.buffer,X.byteOffset,X.byteLength),new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength))===0}function I(X,Q){return X.byteLength===Q.byteLength&&F(new Uint8Array(X),new Uint8Array(Q))===0}function j(X,Q){return M(X)?M(Q)&&b(Number.prototype.valueOf.call(X),Number.prototype.valueOf.call(Q)):$(X)?$(Q)&&String.prototype.valueOf.call(X)===String.prototype.valueOf.call(Q):L(X)?L(Q)&&Boolean.prototype.valueOf.call(X)===Boolean.prototype.valueOf.call(Q):q(X)?q(Q)&&BigInt.prototype.valueOf.call(X)===BigInt.prototype.valueOf.call(Q):Z(Q)&&Symbol.prototype.valueOf.call(X)===Symbol.prototype.valueOf.call(Q)}function D(X,Q,he,de){if(X===Q)return X!==0?!0:he?b(X,Q):!0;if(he){if(m(X)!=="object")return typeof X=="number"&&y(X)&&y(Q);if(m(Q)!=="object"||X===null||Q===null||Object.getPrototypeOf(X)!==Object.getPrototypeOf(Q))return!1}else{if(X===null||m(X)!=="object")return Q===null||m(Q)!=="object"?X==Q:!1;if(Q===null||m(Q)!=="object")return!1}var fe=a(X),ye=a(Q);if(fe!==ye)return!1;if(Array.isArray(X)){if(X.length!==Q.length)return!1;var me=x(X),Ee=x(Q);return me.length!==Ee.length?!1:V(X,Q,he,de,H,me)}if(fe==="[object Object]"&&(!_(X)&&_(Q)||!k(X)&&k(Q)))return!1;if(d(X)){if(!d(Q)||Date.prototype.getTime.call(X)!==Date.prototype.getTime.call(Q))return!1}else if(E(X)){if(!E(Q)||!z(X,Q))return!1}else if(v(X)||X instanceof Error){if(X.message!==Q.message||X.name!==Q.name)return!1}else if(c(X)){if(!he&&(re(X)||ie(X))){if(!g(X,Q))return!1}else if(!A(X,Q))return!1;var ge=x(X),We=x(Q);return ge.length!==We.length?!1:V(X,Q,he,de,G,ge)}else{if(k(X))return!k(Q)||X.size!==Q.size?!1:V(X,Q,he,de,K);if(_(X))return!_(Q)||X.size!==Q.size?!1:V(X,Q,he,de,Y);if(o(X)){if(!I(X,Q))return!1}else if(O(X)&&!j(X,Q))return!1}return V(X,Q,he,de,G)}function B(X,Q){return Q.filter(function(he){return S(X,he)})}function V(X,Q,he,de,fe,ye){if(arguments.length===5){ye=Object.keys(X);var me=Object.keys(Q);if(ye.length!==me.length)return!1}for(var Ee=0;Ee<ye.length;Ee++)if(!w(Q,ye[Ee]))return!1;if(he&&arguments.length===5){var ge=f(X);if(ge.length!==0){var We=0;for(Ee=0;Ee<ge.length;Ee++){var qe=ge[Ee];if(S(X,qe)){if(!S(Q,qe))return!1;ye.push(qe),We++}else if(S(Q,qe))return!1}var ut=f(Q);if(ge.length!==ut.length&&B(Q,ut).length!==We)return!1}else{var wt=f(Q);if(wt.length!==0&&B(Q,wt).length!==0)return!1}}if(ye.length===0&&(fe===G||fe===H&&X.length===0||X.size===0))return!0;if(de===void 0)de={val1:new Map,val2:new Map,position:0};else{var Bt=de.val1.get(X);if(Bt!==void 0){var nt=de.val2.get(Q);if(nt!==void 0)return Bt===nt}de.position++}de.val1.set(X,de.position),de.val2.set(Q,de.position);var It=Ue(X,Q,he,ye,de,fe);return de.val1.delete(X),de.val2.delete(Q),It}function ee(X,Q,he,de){for(var fe=l(X),ye=0;ye<fe.length;ye++){var me=fe[ye];if(D(Q,me,he,de))return X.delete(me),!0}return!1}function le(X){switch(m(X)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":X=+X;case"number":if(y(X))return!1}return!0}function ue(X,Q,he){var de=le(he);return de??(Q.has(de)&&!X.has(de))}function ce(X,Q,he,de,fe){var ye=le(he);if(ye!=null)return ye;var me=Q.get(ye);return me===void 0&&!Q.has(ye)||!D(de,me,!1,fe)?!1:!X.has(ye)&&D(de,me,!1,fe)}function pe(X,Q,he,de){for(var fe=null,ye=l(X),me=0;me<ye.length;me++){var Ee=ye[me];if(m(Ee)==="object"&&Ee!==null)fe===null&&(fe=new Set),fe.add(Ee);else if(!Q.has(Ee)){if(he||!ue(X,Q,Ee))return!1;fe===null&&(fe=new Set),fe.add(Ee)}}if(fe!==null){for(var ge=l(Q),We=0;We<ge.length;We++){var qe=ge[We];if(m(qe)==="object"&&qe!==null){if(!ee(fe,qe,he,de))return!1}else if(!he&&!X.has(qe)&&!ee(fe,qe,he,de))return!1}return fe.size===0}return!0}function oe(X,Q,he,de,fe,ye){for(var me=l(X),Ee=0;Ee<me.length;Ee++){var ge=me[Ee];if(D(he,ge,fe,ye)&&D(de,Q.get(ge),fe,ye))return X.delete(ge),!0}return!1}function Me(X,Q,he,de){for(var fe=null,ye=h(X),me=0;me<ye.length;me++){var Ee=r(ye[me],2),ge=Ee[0],We=Ee[1];if(m(ge)==="object"&&ge!==null)fe===null&&(fe=new Set),fe.add(ge);else{var qe=Q.get(ge);if(qe===void 0&&!Q.has(ge)||!D(We,qe,he,de)){if(he||!ce(X,Q,ge,We,de))return!1;fe===null&&(fe=new Set),fe.add(ge)}}}if(fe!==null){for(var ut=h(Q),wt=0;wt<ut.length;wt++){var Bt=r(ut[wt],2),nt=Bt[0],It=Bt[1];if(m(nt)==="object"&&nt!==null){if(!oe(fe,X,nt,It,he,de))return!1}else if(!he&&(!X.has(nt)||!D(X.get(nt),It,!1,de))&&!oe(fe,X,nt,It,!1,de))return!1}return fe.size===0}return!0}function Ue(X,Q,he,de,fe,ye){var me=0;if(ye===K){if(!pe(X,Q,he,fe))return!1}else if(ye===Y){if(!Me(X,Q,he,fe))return!1}else if(ye===H)for(;me<X.length;me++)if(w(X,me)){if(!w(Q,me)||!D(X[me],Q[me],he,fe))return!1}else{if(w(Q,me))return!1;for(var Ee=Object.keys(X);me<Ee.length;me++){var ge=Ee[me];if(!w(Q,ge)||!D(X[ge],Q[ge],he,fe))return!1}return Ee.length===Object.keys(Q).length}for(me=0;me<de.length;me++){var We=de[me];if(!D(X[We],Q[We],he,fe))return!1}return!0}function Ce(X,Q){return D(X,Q,U)}function Se(X,Q){return D(X,Q,P)}return Fi={isDeepEqual:Ce,isDeepStrictEqual:Se},Fi}var Es;function vn(){if(Es)return gi.exports;Es=1;function r(g){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},r(g)}function e(g,A){for(var I=0;I<A.length;I++){var j=A[I];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,n(j.key),j)}}function t(g,A,I){return A&&e(g.prototype,A),I&&e(g,I),Object.defineProperty(g,"prototype",{writable:!1}),g}function n(g){var A=u(g,"string");return r(A)==="symbol"?A:String(A)}function u(g,A){if(r(g)!=="object"||g===null)return g;var I=g[Symbol.toPrimitive];if(I!==void 0){var j=I.call(g,A||"default");if(r(j)!=="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(g)}function p(g,A){if(!(g instanceof A))throw new TypeError("Cannot call a class as a function")}var m=Fo(),i=m.codes,l=i.ERR_AMBIGUOUS_ARGUMENT,h=i.ERR_INVALID_ARG_TYPE,b=i.ERR_INVALID_ARG_VALUE,f=i.ERR_INVALID_RETURN_VALUE,y=i.ERR_MISSING_ARGS,C=Eh(),w=mt,S=w.inspect,a=mt.types,s=a.isPromise,o=a.isRegExp,c=Ih(),d=In(),_=Jr("RegExp.prototype.test"),E,k;function v(){var g=jh();E=g.isDeepEqual,k=g.isDeepStrictEqual}var O=!1,M=gi.exports=re,$={};function L(g){throw g.message instanceof Error?g.message:new C(g)}function q(g,A,I,j,D){var B=arguments.length,V;if(B===0)V="Failed";else if(B===1)I=g,g=void 0;else{if(O===!1){O=!0;var ee=ve.emitWarning?ve.emitWarning:console.warn.bind(console);ee("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}B===2&&(j="!=")}if(I instanceof Error)throw I;var le={actual:g,expected:A,operator:j===void 0?"fail":j,stackStartFn:D||q};I!==void 0&&(le.message=I);var ue=new C(le);throw V&&(ue.message=V,ue.generatedMessage=!0),ue}M.fail=q,M.AssertionError=C;function Z(g,A,I,j){if(!I){var D=!1;if(A===0)D=!0,j="No value argument passed to `assert.ok()`";else if(j instanceof Error)throw j;var B=new C({actual:I,expected:!0,message:j,operator:"==",stackStartFn:g});throw B.generatedMessage=D,B}}function re(){for(var g=arguments.length,A=new Array(g),I=0;I<g;I++)A[I]=arguments[I];Z.apply(void 0,[re,A.length].concat(A))}M.ok=re,M.equal=function g(A,I,j){if(arguments.length<2)throw new y("actual","expected");A!=I&&L({actual:A,expected:I,message:j,operator:"==",stackStartFn:g})},M.notEqual=function g(A,I,j){if(arguments.length<2)throw new y("actual","expected");A==I&&L({actual:A,expected:I,message:j,operator:"!=",stackStartFn:g})},M.deepEqual=function g(A,I,j){if(arguments.length<2)throw new y("actual","expected");E===void 0&&v(),E(A,I)||L({actual:A,expected:I,message:j,operator:"deepEqual",stackStartFn:g})},M.notDeepEqual=function g(A,I,j){if(arguments.length<2)throw new y("actual","expected");E===void 0&&v(),E(A,I)&&L({actual:A,expected:I,message:j,operator:"notDeepEqual",stackStartFn:g})},M.deepStrictEqual=function g(A,I,j){if(arguments.length<2)throw new y("actual","expected");E===void 0&&v(),k(A,I)||L({actual:A,expected:I,message:j,operator:"deepStrictEqual",stackStartFn:g})},M.notDeepStrictEqual=ie;function ie(g,A,I){if(arguments.length<2)throw new y("actual","expected");E===void 0&&v(),k(g,A)&&L({actual:g,expected:A,message:I,operator:"notDeepStrictEqual",stackStartFn:ie})}M.strictEqual=function g(A,I,j){if(arguments.length<2)throw new y("actual","expected");d(A,I)||L({actual:A,expected:I,message:j,operator:"strictEqual",stackStartFn:g})},M.notStrictEqual=function g(A,I,j){if(arguments.length<2)throw new y("actual","expected");d(A,I)&&L({actual:A,expected:I,message:j,operator:"notStrictEqual",stackStartFn:g})};var ne=t(function g(A,I,j){var D=this;p(this,g),I.forEach(function(B){B in A&&(j!==void 0&&typeof j[B]=="string"&&o(A[B])&&_(A[B],j[B])?D[B]=j[B]:D[B]=A[B])})});function x(g,A,I,j,D,B){if(!(I in g)||!k(g[I],A[I])){if(!j){var V=new ne(g,D),ee=new ne(A,D,g),le=new C({actual:V,expected:ee,operator:"deepStrictEqual",stackStartFn:B});throw le.actual=g,le.expected=A,le.operator=B.name,le}L({actual:g,expected:A,message:j,operator:B.name,stackStartFn:B})}}function F(g,A,I,j){if(typeof A!="function"){if(o(A))return _(A,g);if(arguments.length===2)throw new h("expected",["Function","RegExp"],A);if(r(g)!=="object"||g===null){var D=new C({actual:g,expected:A,message:I,operator:"deepStrictEqual",stackStartFn:j});throw D.operator=j.name,D}var B=Object.keys(A);if(A instanceof Error)B.push("name","message");else if(B.length===0)throw new b("error",A,"may not be an empty object");return E===void 0&&v(),B.forEach(function(V){typeof g[V]=="string"&&o(A[V])&&_(A[V],g[V])||x(g,A,V,I,B,j)}),!0}return A.prototype!==void 0&&g instanceof A?!0:Error.isPrototypeOf(A)?!1:A.call({},g)===!0}function P(g){if(typeof g!="function")throw new h("fn","Function",g);try{g()}catch(A){return A}return $}function U(g){return s(g)||g!==null&&r(g)==="object"&&typeof g.then=="function"&&typeof g.catch=="function"}function G(g){return Promise.resolve().then(function(){var A;if(typeof g=="function"){if(A=g(),!U(A))throw new f("instance of Promise","promiseFn",A)}else if(U(g))A=g;else throw new h("promiseFn",["Function","Promise"],g);return Promise.resolve().then(function(){return A}).then(function(){return $}).catch(function(I){return I})})}function H(g,A,I,j){if(typeof I=="string"){if(arguments.length===4)throw new h("error",["Object","Error","Function","RegExp"],I);if(r(A)==="object"&&A!==null){if(A.message===I)throw new l("error/message",'The error message "'.concat(A.message,'" is identical to the message.'))}else if(A===I)throw new l("error/message",'The error "'.concat(A,'" is identical to the message.'));j=I,I=void 0}else if(I!=null&&r(I)!=="object"&&typeof I!="function")throw new h("error",["Object","Error","Function","RegExp"],I);if(A===$){var D="";I&&I.name&&(D+=" (".concat(I.name,")")),D+=j?": ".concat(j):".";var B=g.name==="rejects"?"rejection":"exception";L({actual:void 0,expected:I,operator:g.name,message:"Missing expected ".concat(B).concat(D),stackStartFn:g})}if(I&&!F(A,I,j,g))throw A}function K(g,A,I,j){if(A!==$){if(typeof I=="string"&&(j=I,I=void 0),!I||F(A,I)){var D=j?": ".concat(j):".",B=g.name==="doesNotReject"?"rejection":"exception";L({actual:A,expected:I,operator:g.name,message:"Got unwanted ".concat(B).concat(D,`
`)+'Actual message: "'.concat(A&&A.message,'"'),stackStartFn:g})}throw A}}M.throws=function g(A){for(var I=arguments.length,j=new Array(I>1?I-1:0),D=1;D<I;D++)j[D-1]=arguments[D];H.apply(void 0,[g,P(A)].concat(j))},M.rejects=function g(A){for(var I=arguments.length,j=new Array(I>1?I-1:0),D=1;D<I;D++)j[D-1]=arguments[D];return G(A).then(function(B){return H.apply(void 0,[g,B].concat(j))})},M.doesNotThrow=function g(A){for(var I=arguments.length,j=new Array(I>1?I-1:0),D=1;D<I;D++)j[D-1]=arguments[D];K.apply(void 0,[g,P(A)].concat(j))},M.doesNotReject=function g(A){for(var I=arguments.length,j=new Array(I>1?I-1:0),D=1;D<I;D++)j[D-1]=arguments[D];return G(A).then(function(B){return K.apply(void 0,[g,B].concat(j))})},M.ifError=function g(A){if(A!=null){var I="ifError got unwanted exception: ";r(A)==="object"&&typeof A.message=="string"?A.message.length===0&&A.constructor?I+=A.constructor.name:I+=A.message:I+=S(A);var j=new C({actual:A,expected:null,operator:"ifError",message:I,stackStartFn:g}),D=A.stack;if(typeof D=="string"){var B=D.split(`
`);B.shift();for(var V=j.stack.split(`
`),ee=0;ee<B.length;ee++){var le=V.indexOf(B[ee]);if(le!==-1){V=V.slice(0,le);break}}j.stack="".concat(V.join(`
`),`
`).concat(B.join(`
`))}throw j}};function Y(g,A,I,j,D){if(!o(A))throw new h("regexp","RegExp",A);var B=D==="match";if(typeof g!="string"||_(A,g)!==B){if(I instanceof Error)throw I;var V=!I;I=I||(typeof g!="string"?'The "string" argument must be of type string. Received type '+"".concat(r(g)," (").concat(S(g),")"):(B?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(S(A),`. Input:

`).concat(S(g),`
`));var ee=new C({actual:g,expected:A,message:I,operator:D,stackStartFn:j});throw ee.generatedMessage=V,ee}}M.match=function g(A,I,j){Y(A,I,j,g,"match")},M.doesNotMatch=function g(A,I,j){Y(A,I,j,g,"doesNotMatch")};function z(){for(var g=arguments.length,A=new Array(g),I=0;I<g;I++)A[I]=arguments[I];Z.apply(void 0,[z,A.length].concat(A))}return M.strict=c(z,M,{equal:M.strictEqual,deepEqual:M.deepStrictEqual,notEqual:M.notStrictEqual,notDeepEqual:M.notDeepStrictEqual}),M.strict.strict=M.strict,gi.exports}(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.E=r.AssertionError=r.message=r.RangeError=r.TypeError=r.Error=void 0;const e=vn(),t=mt,n=typeof Symbol>"u"?"_kCode":Symbol("code"),u={};function p(w){return class extends w{constructor(a,...s){super(l(a,s)),this.code=a,this[n]=a,this.name=`${super.name} [${this[n]}]`}}}const m=typeof globalThis<"u"?globalThis:Ze;class i extends m.Error{constructor(S){if(typeof S!="object"||S===null)throw new r.TypeError("ERR_INVALID_ARG_TYPE","options","object");S.message?super(S.message):super(`${t.inspect(S.actual).slice(0,128)} ${S.operator} ${t.inspect(S.expected).slice(0,128)}`),this.generatedMessage=!S.message,this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.actual=S.actual,this.expected=S.expected,this.operator=S.operator,r.Error.captureStackTrace(this,S.stackStartFunction)}}r.AssertionError=i;function l(w,S){e.strictEqual(typeof w,"string");const a=u[w];e(a,`An invalid error message key was used: ${w}.`);let s;if(typeof a=="function")s=a;else{if(s=t.format,S===void 0||S.length===0)return a;S.unshift(a)}return String(s.apply(null,S))}r.message=l;function h(w,S){u[w]=typeof S=="function"?S:String(S)}r.E=h,r.Error=p(m.Error),r.TypeError=p(m.TypeError),r.RangeError=p(m.RangeError),h("ERR_ARG_NOT_ITERABLE","%s must be iterable"),h("ERR_ASSERTION","%s"),h("ERR_BUFFER_OUT_OF_BOUNDS",C),h("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),h("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),h("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),h("ERR_DNS_SET_SERVERS_FAILED",(w,S)=>`c-ares failed to set servers: "${w}" [${S}]`),h("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),h("ERR_ENCODING_NOT_SUPPORTED",w=>`The "${w}" encoding is not supported`),h("ERR_ENCODING_INVALID_ENCODED_DATA",w=>`The encoded data was not valid for encoding ${w}`),h("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),h("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),h("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),h("ERR_INDEX_OUT_OF_RANGE","Index out of range"),h("ERR_INVALID_ARG_TYPE",b),h("ERR_INVALID_ARRAY_LENGTH",(w,S,a)=>(e.strictEqual(typeof a,"number"),`The array "${w}" (length ${a}) must be of length ${S}.`)),h("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),h("ERR_INVALID_CALLBACK","Callback must be a function"),h("ERR_INVALID_CHAR","Invalid character in %s"),h("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),h("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),h("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),h("ERR_INVALID_FILE_URL_PATH","File URL path %s"),h("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),h("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),h("ERR_INVALID_OPT_VALUE",(w,S)=>`The value "${String(S)}" is invalid for option "${w}"`),h("ERR_INVALID_OPT_VALUE_ENCODING",w=>`The value "${String(w)}" is invalid for option "encoding"`),h("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),h("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),h("ERR_INVALID_THIS",'Value of "this" must be of type %s'),h("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),h("ERR_INVALID_URL","Invalid URL: %s"),h("ERR_INVALID_URL_SCHEME",w=>`The URL must be ${y(w,"scheme")}`),h("ERR_IPC_CHANNEL_CLOSED","Channel closed"),h("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),h("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),h("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),h("ERR_MISSING_ARGS",f),h("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),h("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),h("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),h("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),h("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),h("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),h("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),h("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),h("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),h("ERR_SOCKET_CANNOT_SEND","Unable to send data"),h("ERR_SOCKET_CLOSED","Socket is closed"),h("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),h("ERR_STDERR_CLOSE","process.stderr cannot be closed"),h("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),h("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),h("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),h("ERR_TLS_DH_PARAM_SIZE",w=>`DH parameter size ${w} is less than 2048`),h("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),h("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),h("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),h("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),h("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),h("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),h("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),h("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),h("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),h("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),h("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function b(w,S,a){e(w,"name is required");let s;S.includes("not ")?(s="must not be",S=S.split("not ")[1]):s="must be";let o;if(Array.isArray(w))o=`The ${w.map(d=>`"${d}"`).join(", ")} arguments ${s} ${y(S,"type")}`;else if(w.includes(" argument"))o=`The ${w} ${s} ${y(S,"type")}`;else{const c=w.includes(".")?"property":"argument";o=`The "${w}" ${c} ${s} ${y(S,"type")}`}return arguments.length>=3&&(o+=`. Received type ${a!==null?typeof a:"null"}`),o}function f(...w){e(w.length>0,"At least one arg needs to be specified");let S="The ";const a=w.length;switch(w=w.map(s=>`"${s}"`),a){case 1:S+=`${w[0]} argument`;break;case 2:S+=`${w[0]} and ${w[1]} arguments`;break;default:S+=w.slice(0,a-1).join(", "),S+=`, and ${w[a-1]} arguments`;break}return`${S} must be specified`}function y(w,S){if(e(w,"expected is required"),e(typeof S=="string","thing is required"),Array.isArray(w)){const a=w.length;return e(a>0,"At least one expected value needs to be specified"),w=w.map(s=>String(s)),a>2?`one of ${S} ${w.slice(0,a-1).join(", ")}, or `+w[a-1]:a===2?`one of ${S} ${w[0]} or ${w[1]}`:`of ${S} ${w[0]}`}else return`of ${S} ${String(w)}`}function C(w,S){return S?"Attempt to write outside buffer bounds":`"${w}" is outside of buffer bounds`}})(Rn);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.strToEncoding=r.assertEncoding=r.ENCODING_UTF8=void 0;const e=nr,t=Rn;r.ENCODING_UTF8="utf8";function n(p){if(p&&!e.Buffer.isEncoding(p))throw new t.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",p)}r.assertEncoding=n;function u(p,m){return!m||m===r.ENCODING_UTF8?p:m==="buffer"?new e.Buffer(p):new e.Buffer(p).toString(m)}r.strToEncoding=u})(br);Object.defineProperty(ar,"__esModule",{value:!0});ar.Dirent=void 0;const Uh=yt,Hh=br,{S_IFMT:$h,S_IFDIR:Wh,S_IFREG:qh,S_IFBLK:zh,S_IFCHR:Vh,S_IFLNK:Kh,S_IFIFO:Gh,S_IFSOCK:Yh}=Uh.constants;class ei{constructor(){this.name="",this.path="",this.mode=0}static build(e,t){const n=new ei,{mode:u}=e.getNode();return n.name=(0,Hh.strToEncoding)(e.getName(),t),n.mode=u,n.path=e.getPath(),n}_checkModeProperty(e){return(this.mode&$h)===e}isDirectory(){return this._checkModeProperty(Wh)}isFile(){return this._checkModeProperty(qh)}isBlockDevice(){return this._checkModeProperty(zh)}isCharacterDevice(){return this._checkModeProperty(Vh)}isSymbolicLink(){return this._checkModeProperty(Kh)}isFIFO(){return this._checkModeProperty(Gh)}isSocket(){return this._checkModeProperty(Yh)}}ar.Dirent=ei;ar.default=ei;var Xe={};function pt(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function Cs(r,e){for(var t="",n=0,u=-1,p=0,m,i=0;i<=r.length;++i){if(i<r.length)m=r.charCodeAt(i);else{if(m===47)break;m=47}if(m===47){if(!(u===i-1||p===1))if(u!==i-1&&p===2){if(t.length<2||n!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var l=t.lastIndexOf("/");if(l!==t.length-1){l===-1?(t="",n=0):(t=t.slice(0,l),n=t.length-1-t.lastIndexOf("/")),u=i,p=0;continue}}else if(t.length===2||t.length===1){t="",n=0,u=i,p=0;continue}}e&&(t.length>0?t+="/..":t="..",n=2)}else t.length>0?t+="/"+r.slice(u+1,i):t=r.slice(u+1,i),n=i-u-1;u=i,p=0}else m===46&&p!==-1?++p:p=-1}return t}function Xh(r,e){var t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+n:t+r+n:n}var er={resolve:function(){for(var e="",t=!1,n,u=arguments.length-1;u>=-1&&!t;u--){var p;u>=0?p=arguments[u]:(n===void 0&&(n=ve.cwd()),p=n),pt(p),p.length!==0&&(e=p+"/"+e,t=p.charCodeAt(0)===47)}return e=Cs(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(pt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=Cs(e,!t),e.length===0&&!t&&(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return pt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];pt(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":er.normalize(e)},relative:function(e,t){if(pt(e),pt(t),e===t||(e=er.resolve(e),t=er.resolve(t),e===t))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var u=e.length,p=u-n,m=1;m<t.length&&t.charCodeAt(m)===47;++m);for(var i=t.length,l=i-m,h=p<l?p:l,b=-1,f=0;f<=h;++f){if(f===h){if(l>h){if(t.charCodeAt(m+f)===47)return t.slice(m+f+1);if(f===0)return t.slice(m+f)}else p>h&&(e.charCodeAt(n+f)===47?b=f:f===0&&(b=0));break}var y=e.charCodeAt(n+f),C=t.charCodeAt(m+f);if(y!==C)break;y===47&&(b=f)}var w="";for(f=n+b+1;f<=u;++f)(f===u||e.charCodeAt(f)===47)&&(w.length===0?w+="..":w+="/..");return w.length>0?w+t.slice(m+b):(m+=b,t.charCodeAt(m)===47&&++m,t.slice(m))},_makeLong:function(e){return e},dirname:function(e){if(pt(e),e.length===0)return".";for(var t=e.charCodeAt(0),n=t===47,u=-1,p=!0,m=e.length-1;m>=1;--m)if(t=e.charCodeAt(m),t===47){if(!p){u=m;break}}else p=!1;return u===-1?n?"/":".":n&&u===1?"//":e.slice(0,u)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');pt(e);var n=0,u=-1,p=!0,m;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var i=t.length-1,l=-1;for(m=e.length-1;m>=0;--m){var h=e.charCodeAt(m);if(h===47){if(!p){n=m+1;break}}else l===-1&&(p=!1,l=m+1),i>=0&&(h===t.charCodeAt(i)?--i===-1&&(u=m):(i=-1,u=l))}return n===u?u=l:u===-1&&(u=e.length),e.slice(n,u)}else{for(m=e.length-1;m>=0;--m)if(e.charCodeAt(m)===47){if(!p){n=m+1;break}}else u===-1&&(p=!1,u=m+1);return u===-1?"":e.slice(n,u)}},extname:function(e){pt(e);for(var t=-1,n=0,u=-1,p=!0,m=0,i=e.length-1;i>=0;--i){var l=e.charCodeAt(i);if(l===47){if(!p){n=i+1;break}continue}u===-1&&(p=!1,u=i+1),l===46?t===-1?t=i:m!==1&&(m=1):t!==-1&&(m=-1)}return t===-1||u===-1||m===0||m===1&&t===u-1&&t===n+1?"":e.slice(t,u)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return Xh("/",e)},parse:function(e){pt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var n=e.charCodeAt(0),u=n===47,p;u?(t.root="/",p=1):p=0;for(var m=-1,i=0,l=-1,h=!0,b=e.length-1,f=0;b>=p;--b){if(n=e.charCodeAt(b),n===47){if(!h){i=b+1;break}continue}l===-1&&(h=!1,l=b+1),n===46?m===-1?m=b:f!==1&&(f=1):m!==-1&&(f=-1)}return m===-1||l===-1||f===0||f===1&&m===l-1&&m===i+1?l!==-1&&(i===0&&u?t.base=t.name=e.slice(1,l):t.base=t.name=e.slice(i,l)):(i===0&&u?(t.name=e.slice(1,m),t.base=e.slice(1,l)):(t.name=e.slice(i,m),t.base=e.slice(i,l)),t.ext=e.slice(m,l)),i>0?t.dir=e.slice(0,i-1):u&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};er.posix=er;var Jh=er,zo={},cr={};Object.defineProperty(cr,"__esModule",{value:!0});cr.createProcess=void 0;const Zh=()=>{if(typeof ve<"u")return ve;try{return So()}catch{return}};function Vo(){const r=Zh()||{};return r.cwd||(r.cwd=()=>"/"),r.emitWarning||(r.emitWarning=(e,t)=>{console.warn(`${t}${t?": ":""}${e}`)}),r.env||(r.env={}),r}cr.createProcess=Vo;cr.default=Vo();var Pn={exports:{}},tr=typeof Reflect=="object"?Reflect:null,Rs=tr&&typeof tr.apply=="function"?tr.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Hr;tr&&typeof tr.ownKeys=="function"?Hr=tr.ownKeys:Object.getOwnPropertySymbols?Hr=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Hr=function(e){return Object.getOwnPropertyNames(e)};function Qh(r){console&&console.warn&&console.warn(r)}var Ko=Number.isNaN||function(e){return e!==e};function Fe(){Fe.init.call(this)}Pn.exports=Fe;Pn.exports.once=iu;Fe.EventEmitter=Fe;Fe.prototype._events=void 0;Fe.prototype._eventsCount=0;Fe.prototype._maxListeners=void 0;var As=10;function ti(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Fe,"defaultMaxListeners",{enumerable:!0,get:function(){return As},set:function(r){if(typeof r!="number"||r<0||Ko(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");As=r}});Fe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Fe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Ko(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Go(r){return r._maxListeners===void 0?Fe.defaultMaxListeners:r._maxListeners}Fe.prototype.getMaxListeners=function(){return Go(this)};Fe.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var u=e==="error",p=this._events;if(p!==void 0)u=u&&p.error===void 0;else if(!u)return!1;if(u){var m;if(t.length>0&&(m=t[0]),m instanceof Error)throw m;var i=new Error("Unhandled error."+(m?" ("+m.message+")":""));throw i.context=m,i}var l=p[e];if(l===void 0)return!1;if(typeof l=="function")Rs(l,this,t);else for(var h=l.length,b=Qo(l,h),n=0;n<h;++n)Rs(b[n],this,t);return!0};function Yo(r,e,t,n){var u,p,m;if(ti(t),p=r._events,p===void 0?(p=r._events=Object.create(null),r._eventsCount=0):(p.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),p=r._events),m=p[e]),m===void 0)m=p[e]=t,++r._eventsCount;else if(typeof m=="function"?m=p[e]=n?[t,m]:[m,t]:n?m.unshift(t):m.push(t),u=Go(r),u>0&&m.length>u&&!m.warned){m.warned=!0;var i=new Error("Possible EventEmitter memory leak detected. "+m.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");i.name="MaxListenersExceededWarning",i.emitter=r,i.type=e,i.count=m.length,Qh(i)}return r}Fe.prototype.addListener=function(e,t){return Yo(this,e,t,!1)};Fe.prototype.on=Fe.prototype.addListener;Fe.prototype.prependListener=function(e,t){return Yo(this,e,t,!0)};function eu(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Xo(r,e,t){var n={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},u=eu.bind(n);return u.listener=t,n.wrapFn=u,u}Fe.prototype.once=function(e,t){return ti(t),this.on(e,Xo(this,e,t)),this};Fe.prototype.prependOnceListener=function(e,t){return ti(t),this.prependListener(e,Xo(this,e,t)),this};Fe.prototype.removeListener=function(e,t){var n,u,p,m,i;if(ti(t),u=this._events,u===void 0)return this;if(n=u[e],n===void 0)return this;if(n===t||n.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete u[e],u.removeListener&&this.emit("removeListener",e,n.listener||t));else if(typeof n!="function"){for(p=-1,m=n.length-1;m>=0;m--)if(n[m]===t||n[m].listener===t){i=n[m].listener,p=m;break}if(p<0)return this;p===0?n.shift():tu(n,p),n.length===1&&(u[e]=n[0]),u.removeListener!==void 0&&this.emit("removeListener",e,i||t)}return this};Fe.prototype.off=Fe.prototype.removeListener;Fe.prototype.removeAllListeners=function(e){var t,n,u;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var p=Object.keys(n),m;for(u=0;u<p.length;++u)m=p[u],m!=="removeListener"&&this.removeAllListeners(m);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=n[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(u=t.length-1;u>=0;u--)this.removeListener(e,t[u]);return this};function Jo(r,e,t){var n=r._events;if(n===void 0)return[];var u=n[e];return u===void 0?[]:typeof u=="function"?t?[u.listener||u]:[u]:t?ru(u):Qo(u,u.length)}Fe.prototype.listeners=function(e){return Jo(this,e,!0)};Fe.prototype.rawListeners=function(e){return Jo(this,e,!1)};Fe.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):Zo.call(r,e)};Fe.prototype.listenerCount=Zo;function Zo(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Fe.prototype.eventNames=function(){return this._eventsCount>0?Hr(this._events):[]};function Qo(r,e){for(var t=new Array(e),n=0;n<e;++n)t[n]=r[n];return t}function tu(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function ru(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function iu(r,e){return new Promise(function(t,n){function u(m){r.removeListener(e,p),n(m)}function p(){typeof r.removeListener=="function"&&r.removeListener("error",u),t([].slice.call(arguments))}ea(r,e,p,{once:!0}),e!=="error"&&nu(r,u,{once:!0})})}function nu(r,e,t){typeof r.on=="function"&&ea(r,"error",e,t)}function ea(r,e,t,n){if(typeof r.on=="function")n.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function u(p){n.once&&r.removeEventListener(e,u),t(p)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var Er=Pn.exports;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.File=r.Link=r.Node=r.SEP=void 0;const e=cr,t=nr,n=yt,u=Er,p=jt,{S_IFMT:m,S_IFDIR:i,S_IFREG:l,S_IFLNK:h,O_APPEND:b}=n.constants,f=()=>{var a,s;return(s=(a=e.default.getuid)===null||a===void 0?void 0:a.call(e.default))!==null&&s!==void 0?s:0},y=()=>{var a,s;return(s=(a=e.default.getgid)===null||a===void 0?void 0:a.call(e.default))!==null&&s!==void 0?s:0};r.SEP="/";class C extends u.EventEmitter{constructor(s,o=438){super(),this._uid=f(),this._gid=y(),this._atime=new Date,this._mtime=new Date,this._ctime=new Date,this._perm=438,this.mode=l,this._nlink=1,this._perm=o,this.mode|=o,this.ino=s}set ctime(s){this._ctime=s}get ctime(){return this._ctime}set uid(s){this._uid=s,this.ctime=new Date}get uid(){return this._uid}set gid(s){this._gid=s,this.ctime=new Date}get gid(){return this._gid}set atime(s){this._atime=s,this.ctime=new Date}get atime(){return this._atime}set mtime(s){this._mtime=s,this.ctime=new Date}get mtime(){return this._mtime}set perm(s){this._perm=s,this.ctime=new Date}get perm(){return this._perm}set nlink(s){this._nlink=s,this.ctime=new Date}get nlink(){return this._nlink}getString(s="utf8"){return this.atime=new Date,this.getBuffer().toString(s)}setString(s){this.buf=(0,t.bufferFrom)(s,"utf8"),this.touch()}getBuffer(){return this.atime=new Date,this.buf||this.setBuffer((0,t.bufferAllocUnsafe)(0)),(0,t.bufferFrom)(this.buf)}setBuffer(s){this.buf=(0,t.bufferFrom)(s),this.touch()}getSize(){return this.buf?this.buf.length:0}setModeProperty(s){this.mode=this.mode&~m|s}setIsFile(){this.setModeProperty(l)}setIsDirectory(){this.setModeProperty(i)}setIsSymlink(){this.setModeProperty(h)}isFile(){return(this.mode&m)===l}isDirectory(){return(this.mode&m)===i}isSymlink(){return(this.mode&m)===h}makeSymlink(s){this.symlink=s,this.setIsSymlink()}write(s,o=0,c=s.length,d=0){if(this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),d+c>this.buf.length){const _=(0,t.bufferAllocUnsafe)(d+c);this.buf.copy(_,0,0,this.buf.length),this.buf=_}return s.copy(this.buf,d,o,o+c),this.touch(),c}read(s,o=0,c=s.byteLength,d=0){this.atime=new Date,this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0));let _=c;_>s.byteLength&&(_=s.byteLength),_+d>this.buf.length&&(_=this.buf.length-d);const E=s instanceof t.Buffer?s:t.Buffer.from(s.buffer);return this.buf.copy(E,o,d,d+_),_}truncate(s=0){if(!s)this.buf=(0,t.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),s<=this.buf.length)this.buf=this.buf.slice(0,s);else{const o=(0,t.bufferAllocUnsafe)(s);this.buf.copy(o),o.fill(0,this.buf.length),this.buf=o}this.touch()}chmod(s){this.perm=s,this.mode=this.mode&-512|s,this.touch()}chown(s,o){this.uid=s,this.gid=o,this.touch()}touch(){this.mtime=new Date,this.emit("change",this)}canRead(s=f(),o=y()){return!!(this.perm&4||o===this.gid&&this.perm&32||s===this.uid&&this.perm&256)}canWrite(s=f(),o=y()){return!!(this.perm&2||o===this.gid&&this.perm&16||s===this.uid&&this.perm&128)}del(){this.emit("delete",this)}toJSON(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}}}r.Node=C;class w extends u.EventEmitter{get steps(){return this._steps}set steps(s){this._steps=s;for(const[o,c]of this.children.entries())o==="."||o===".."||c==null||c.syncSteps()}constructor(s,o,c){super(),this.children=new Map,this._steps=[],this.ino=0,this.length=0,this.vol=s,this.parent=o,this.name=c,this.syncSteps()}setNode(s){this.node=s,this.ino=s.ino}getNode(){return this.node}createChild(s,o=this.vol.createNode()){const c=new w(this.vol,this,s);return c.setNode(o),o.isDirectory()&&(c.children.set(".",c),c.getNode().nlink++),this.setChild(s,c),c}setChild(s,o=new w(this.vol,this,s)){return this.children.set(s,o),o.parent=this,this.length++,o.getNode().isDirectory()&&(o.children.set("..",this),this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",o,this),o}deleteChild(s){s.getNode().isDirectory()&&(s.children.delete(".."),this.getNode().nlink--),this.children.delete(s.getName()),this.length--,this.getNode().mtime=new Date,this.emit("child:delete",s,this)}getChild(s){return this.getNode().mtime=new Date,this.children.get(s)}getPath(){return this.steps.join(r.SEP)}getName(){return this.steps[this.steps.length-1]}walk(s,o=s.length,c=0){if(c>=s.length)return this;if(c>=o)return this;const d=s[c],_=this.getChild(d);return _?_.walk(s,o,c+1):null}toJSON(){return{steps:this.steps,ino:this.ino,children:Array.from(this.children.keys())}}syncSteps(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]}}r.Link=w;class S{constructor(s,o,c,d){this.link=s,this.node=o,this.flags=c,this.fd=d,this.position=0,this.flags&b&&(this.position=this.getSize())}getString(s="utf8"){return this.node.getString()}setString(s){this.node.setString(s)}getBuffer(){return this.node.getBuffer()}setBuffer(s){this.node.setBuffer(s)}getSize(){return this.node.getSize()}truncate(s){this.node.truncate(s)}seekTo(s){this.position=s}stats(){return p.default.build(this.node)}write(s,o=0,c=s.length,d){typeof d!="number"&&(d=this.position);const _=this.node.write(s,o,c,d);return this.position=d+_,_}read(s,o=0,c=s.byteLength,d){typeof d!="number"&&(d=this.position);const _=this.node.read(s,o,c,d);return this.position=d+_,_}chmod(s){this.node.chmod(s)}chown(s,o){this.node.chown(s,o)}}r.File=S})(zo);var xn={};Object.defineProperty(xn,"__esModule",{value:!0});let yn;typeof setImmediate=="function"?yn=setImmediate.bind(typeof globalThis<"u"?globalThis:Ze):yn=setTimeout.bind(typeof globalThis<"u"?globalThis:Ze);xn.default=yn;var ri={};Object.defineProperty(ri,"__esModule",{value:!0});ri.default=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(()=>r()).catch(()=>{});var Mn={};Object.defineProperty(Mn,"__esModule",{value:!0});function su(r,e,t){const n=setTimeout.apply(typeof globalThis<"u"?globalThis:Ze,arguments);return n&&typeof n=="object"&&typeof n.unref=="function"&&n.unref(),n}Mn.default=su;var Ni,Ts;function ta(){return Ts||(Ts=1,Ni=Er.EventEmitter),Ni}var ji,Os;function ou(){if(Os)return ji;Os=1;function r(w,S){var a=Object.keys(w);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(w);S&&(s=s.filter(function(o){return Object.getOwnPropertyDescriptor(w,o).enumerable})),a.push.apply(a,s)}return a}function e(w){for(var S=1;S<arguments.length;S++){var a=arguments[S]!=null?arguments[S]:{};S%2?r(Object(a),!0).forEach(function(s){t(w,s,a[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(s){Object.defineProperty(w,s,Object.getOwnPropertyDescriptor(a,s))})}return w}function t(w,S,a){return S=m(S),S in w?Object.defineProperty(w,S,{value:a,enumerable:!0,configurable:!0,writable:!0}):w[S]=a,w}function n(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function u(w,S){for(var a=0;a<S.length;a++){var s=S[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(w,m(s.key),s)}}function p(w,S,a){return S&&u(w.prototype,S),a&&u(w,a),Object.defineProperty(w,"prototype",{writable:!1}),w}function m(w){var S=i(w,"string");return typeof S=="symbol"?S:String(S)}function i(w,S){if(typeof w!="object"||w===null)return w;var a=w[Symbol.toPrimitive];if(a!==void 0){var s=a.call(w,S||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(S==="string"?String:Number)(w)}var l=lr,h=l.Buffer,b=mt,f=b.inspect,y=f&&f.custom||"inspect";function C(w,S,a){h.prototype.copy.call(w,S,a)}return ji=function(){function w(){n(this,w),this.head=null,this.tail=null,this.length=0}return p(w,[{key:"push",value:function(a){var s={data:a,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(a){var s={data:a,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(this.length!==0){var a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(a){if(this.length===0)return"";for(var s=this.head,o=""+s.data;s=s.next;)o+=a+s.data;return o}},{key:"concat",value:function(a){if(this.length===0)return h.alloc(0);for(var s=h.allocUnsafe(a>>>0),o=this.head,c=0;o;)C(o.data,s,c),c+=o.data.length,o=o.next;return s}},{key:"consume",value:function(a,s){var o;return a<this.head.data.length?(o=this.head.data.slice(0,a),this.head.data=this.head.data.slice(a)):a===this.head.data.length?o=this.shift():o=s?this._getString(a):this._getBuffer(a),o}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(a){var s=this.head,o=1,c=s.data;for(a-=c.length;s=s.next;){var d=s.data,_=a>d.length?d.length:a;if(_===d.length?c+=d:c+=d.slice(0,a),a-=_,a===0){_===d.length?(++o,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=d.slice(_));break}++o}return this.length-=o,c}},{key:"_getBuffer",value:function(a){var s=h.allocUnsafe(a),o=this.head,c=1;for(o.data.copy(s),a-=o.data.length;o=o.next;){var d=o.data,_=a>d.length?d.length:a;if(d.copy(s,s.length-a,0,_),a-=_,a===0){_===d.length?(++c,o.next?this.head=o.next:this.head=this.tail=null):(this.head=o,o.data=d.slice(_));break}++c}return this.length-=c,s}},{key:y,value:function(a,s){return f(this,e(e({},s),{},{depth:0,customInspect:!1}))}}]),w}(),ji}var Ui,ks;function ra(){if(ks)return Ui;ks=1;function r(m,i){var l=this,h=this._readableState&&this._readableState.destroyed,b=this._writableState&&this._writableState.destroyed;return h||b?(i?i(m):m&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,ve.nextTick(u,this,m)):ve.nextTick(u,this,m)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(m||null,function(f){!i&&f?l._writableState?l._writableState.errorEmitted?ve.nextTick(t,l):(l._writableState.errorEmitted=!0,ve.nextTick(e,l,f)):ve.nextTick(e,l,f):i?(ve.nextTick(t,l),i(f)):ve.nextTick(t,l)}),this)}function e(m,i){u(m,i),t(m)}function t(m){m._writableState&&!m._writableState.emitClose||m._readableState&&!m._readableState.emitClose||m.emit("close")}function n(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function u(m,i){m.emit("error",i)}function p(m,i){var l=m._readableState,h=m._writableState;l&&l.autoDestroy||h&&h.autoDestroy?m.destroy(i):m.emit("error",i)}return Ui={destroy:r,undestroy:n,errorOrDestroy:p},Ui}var Hi={},Ls;function hr(){if(Ls)return Hi;Ls=1;function r(i,l){i.prototype=Object.create(l.prototype),i.prototype.constructor=i,i.__proto__=l}var e={};function t(i,l,h){h||(h=Error);function b(y,C,w){return typeof l=="string"?l:l(y,C,w)}var f=function(y){r(C,y);function C(w,S,a){return y.call(this,b(w,S,a))||this}return C}(h);f.prototype.name=h.name,f.prototype.code=i,e[i]=f}function n(i,l){if(Array.isArray(i)){var h=i.length;return i=i.map(function(b){return String(b)}),h>2?"one of ".concat(l," ").concat(i.slice(0,h-1).join(", "),", or ")+i[h-1]:h===2?"one of ".concat(l," ").concat(i[0]," or ").concat(i[1]):"of ".concat(l," ").concat(i[0])}else return"of ".concat(l," ").concat(String(i))}function u(i,l,h){return i.substr(!h||h<0?0:+h,l.length)===l}function p(i,l,h){return(h===void 0||h>i.length)&&(h=i.length),i.substring(h-l.length,h)===l}function m(i,l,h){return typeof h!="number"&&(h=0),h+l.length>i.length?!1:i.indexOf(l,h)!==-1}return t("ERR_INVALID_OPT_VALUE",function(i,l){return'The value "'+l+'" is invalid for option "'+i+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(i,l,h){var b;typeof l=="string"&&u(l,"not ")?(b="must not be",l=l.replace(/^not /,"")):b="must be";var f;if(p(i," argument"))f="The ".concat(i," ").concat(b," ").concat(n(l,"type"));else{var y=m(i,".")?"property":"argument";f='The "'.concat(i,'" ').concat(y," ").concat(b," ").concat(n(l,"type"))}return f+=". Received type ".concat(typeof h),f},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(i){return"The "+i+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(i){return"Cannot call "+i+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(i){return"Unknown encoding: "+i},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Hi.codes=e,Hi}var $i,Ds;function ia(){if(Ds)return $i;Ds=1;var r=hr().codes.ERR_INVALID_OPT_VALUE;function e(n,u,p){return n.highWaterMark!=null?n.highWaterMark:u?n[p]:null}function t(n,u,p,m){var i=e(u,m,p);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var l=m?p:"highWaterMark";throw new r(l,i)}return Math.floor(i)}return n.objectMode?16:16*1024}return $i={getHighWaterMark:t},$i}var Wi,Bs;function au(){if(Bs)return Wi;Bs=1,Wi=r;function r(t,n){if(e("noDeprecation"))return t;var u=!1;function p(){if(!u){if(e("throwDeprecation"))throw new Error(n);e("traceDeprecation")?console.trace(n):console.warn(n),u=!0}return t.apply(this,arguments)}return p}function e(t){try{if(!Ze.localStorage)return!1}catch{return!1}var n=Ze.localStorage[t];return n==null?!1:String(n).toLowerCase()==="true"}return Wi}var qi,Is;function na(){if(Is)return qi;Is=1,qi=v;function r(z){var g=this;this.next=null,this.entry=null,this.finish=function(){Y(g,z)}}var e;v.WritableState=E;var t={deprecate:au()},n=ta(),u=lr.Buffer,p=(typeof Ze<"u"?Ze:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function m(z){return u.from(z)}function i(z){return u.isBuffer(z)||z instanceof p}var l=ra(),h=ia(),b=h.getHighWaterMark,f=hr().codes,y=f.ERR_INVALID_ARG_TYPE,C=f.ERR_METHOD_NOT_IMPLEMENTED,w=f.ERR_MULTIPLE_CALLBACK,S=f.ERR_STREAM_CANNOT_PIPE,a=f.ERR_STREAM_DESTROYED,s=f.ERR_STREAM_NULL_VALUES,o=f.ERR_STREAM_WRITE_AFTER_END,c=f.ERR_UNKNOWN_ENCODING,d=l.errorOrDestroy;Ut(v,n);function _(){}function E(z,g,A){e=e||or(),z=z||{},typeof A!="boolean"&&(A=g instanceof e),this.objectMode=!!z.objectMode,A&&(this.objectMode=this.objectMode||!!z.writableObjectMode),this.highWaterMark=b(this,z,"writableHighWaterMark",A),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var I=z.decodeStrings===!1;this.decodeStrings=!I,this.defaultEncoding=z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){ie(g,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}E.prototype.getBuffer=function(){for(var g=this.bufferedRequest,A=[];g;)A.push(g),g=g.next;return A},function(){try{Object.defineProperty(E.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var k;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(g){return k.call(this,g)?!0:this!==v?!1:g&&g._writableState instanceof E}})):k=function(g){return g instanceof this};function v(z){e=e||or();var g=this instanceof e;if(!g&&!k.call(v,this))return new v(z);this._writableState=new E(z,this,g),this.writable=!0,z&&(typeof z.write=="function"&&(this._write=z.write),typeof z.writev=="function"&&(this._writev=z.writev),typeof z.destroy=="function"&&(this._destroy=z.destroy),typeof z.final=="function"&&(this._final=z.final)),n.call(this)}v.prototype.pipe=function(){d(this,new S)};function O(z,g){var A=new o;d(z,A),ve.nextTick(g,A)}function M(z,g,A,I){var j;return A===null?j=new s:typeof A!="string"&&!g.objectMode&&(j=new y("chunk",["string","Buffer"],A)),j?(d(z,j),ve.nextTick(I,j),!1):!0}v.prototype.write=function(z,g,A){var I=this._writableState,j=!1,D=!I.objectMode&&i(z);return D&&!u.isBuffer(z)&&(z=m(z)),typeof g=="function"&&(A=g,g=null),D?g="buffer":g||(g=I.defaultEncoding),typeof A!="function"&&(A=_),I.ending?O(this,A):(D||M(this,I,z,A))&&(I.pendingcb++,j=L(this,I,D,z,g,A)),j},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var z=this._writableState;z.corked&&(z.corked--,!z.writing&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&F(this,z))},v.prototype.setDefaultEncoding=function(g){if(typeof g=="string"&&(g=g.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((g+"").toLowerCase())>-1))throw new c(g);return this._writableState.defaultEncoding=g,this},Object.defineProperty(v.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $(z,g,A){return!z.objectMode&&z.decodeStrings!==!1&&typeof g=="string"&&(g=u.from(g,A)),g}Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function L(z,g,A,I,j,D){if(!A){var B=$(g,I,j);I!==B&&(A=!0,j="buffer",I=B)}var V=g.objectMode?1:I.length;g.length+=V;var ee=g.length<g.highWaterMark;if(ee||(g.needDrain=!0),g.writing||g.corked){var le=g.lastBufferedRequest;g.lastBufferedRequest={chunk:I,encoding:j,isBuf:A,callback:D,next:null},le?le.next=g.lastBufferedRequest:g.bufferedRequest=g.lastBufferedRequest,g.bufferedRequestCount+=1}else q(z,g,!1,V,I,j,D);return ee}function q(z,g,A,I,j,D,B){g.writelen=I,g.writecb=B,g.writing=!0,g.sync=!0,g.destroyed?g.onwrite(new a("write")):A?z._writev(j,g.onwrite):z._write(j,D,g.onwrite),g.sync=!1}function Z(z,g,A,I,j){--g.pendingcb,A?(ve.nextTick(j,I),ve.nextTick(H,z,g),z._writableState.errorEmitted=!0,d(z,I)):(j(I),z._writableState.errorEmitted=!0,d(z,I),H(z,g))}function re(z){z.writing=!1,z.writecb=null,z.length-=z.writelen,z.writelen=0}function ie(z,g){var A=z._writableState,I=A.sync,j=A.writecb;if(typeof j!="function")throw new w;if(re(A),g)Z(z,A,I,g,j);else{var D=P(A)||z.destroyed;!D&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&F(z,A),I?ve.nextTick(ne,z,A,D,j):ne(z,A,D,j)}}function ne(z,g,A,I){A||x(z,g),g.pendingcb--,I(),H(z,g)}function x(z,g){g.length===0&&g.needDrain&&(g.needDrain=!1,z.emit("drain"))}function F(z,g){g.bufferProcessing=!0;var A=g.bufferedRequest;if(z._writev&&A&&A.next){var I=g.bufferedRequestCount,j=new Array(I),D=g.corkedRequestsFree;D.entry=A;for(var B=0,V=!0;A;)j[B]=A,A.isBuf||(V=!1),A=A.next,B+=1;j.allBuffers=V,q(z,g,!0,g.length,j,"",D.finish),g.pendingcb++,g.lastBufferedRequest=null,D.next?(g.corkedRequestsFree=D.next,D.next=null):g.corkedRequestsFree=new r(g),g.bufferedRequestCount=0}else{for(;A;){var ee=A.chunk,le=A.encoding,ue=A.callback,ce=g.objectMode?1:ee.length;if(q(z,g,!1,ce,ee,le,ue),A=A.next,g.bufferedRequestCount--,g.writing)break}A===null&&(g.lastBufferedRequest=null)}g.bufferedRequest=A,g.bufferProcessing=!1}v.prototype._write=function(z,g,A){A(new C("_write()"))},v.prototype._writev=null,v.prototype.end=function(z,g,A){var I=this._writableState;return typeof z=="function"?(A=z,z=null,g=null):typeof g=="function"&&(A=g,g=null),z!=null&&this.write(z,g),I.corked&&(I.corked=1,this.uncork()),I.ending||K(this,I,A),this},Object.defineProperty(v.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function P(z){return z.ending&&z.length===0&&z.bufferedRequest===null&&!z.finished&&!z.writing}function U(z,g){z._final(function(A){g.pendingcb--,A&&d(z,A),g.prefinished=!0,z.emit("prefinish"),H(z,g)})}function G(z,g){!g.prefinished&&!g.finalCalled&&(typeof z._final=="function"&&!g.destroyed?(g.pendingcb++,g.finalCalled=!0,ve.nextTick(U,z,g)):(g.prefinished=!0,z.emit("prefinish")))}function H(z,g){var A=P(g);if(A&&(G(z,g),g.pendingcb===0&&(g.finished=!0,z.emit("finish"),g.autoDestroy))){var I=z._readableState;(!I||I.autoDestroy&&I.endEmitted)&&z.destroy()}return A}function K(z,g,A){g.ending=!0,H(z,g),A&&(g.finished?ve.nextTick(A):z.once("finish",A)),g.ended=!0,z.writable=!1}function Y(z,g,A){var I=z.entry;for(z.entry=null;I;){var j=I.callback;g.pendingcb--,j(A),I=I.next}g.corkedRequestsFree.next=z}return Object.defineProperty(v.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(g){this._writableState&&(this._writableState.destroyed=g)}}),v.prototype.destroy=l.destroy,v.prototype._undestroy=l.undestroy,v.prototype._destroy=function(z,g){g(z)},qi}var zi,Ps;function or(){if(Ps)return zi;Ps=1;var r=Object.keys||function(h){var b=[];for(var f in h)b.push(f);return b};zi=m;var e=sa(),t=na();Ut(m,e);for(var n=r(t.prototype),u=0;u<n.length;u++){var p=n[u];m.prototype[p]||(m.prototype[p]=t.prototype[p])}function m(h){if(!(this instanceof m))return new m(h);e.call(this,h),t.call(this,h),this.allowHalfOpen=!0,h&&(h.readable===!1&&(this.readable=!1),h.writable===!1&&(this.writable=!1),h.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",i)))}Object.defineProperty(m.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(m.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(m.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function i(){this._writableState.ended||ve.nextTick(l,this)}function l(h){h.end()}return Object.defineProperty(m.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(b){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=b,this._writableState.destroyed=b)}}),zi}var Vi={},Lr={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var xs;function lu(){return xs||(xs=1,function(r,e){var t=lr,n=t.Buffer;function u(m,i){for(var l in m)i[l]=m[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?r.exports=t:(u(t,e),e.Buffer=p);function p(m,i,l){return n(m,i,l)}p.prototype=Object.create(n.prototype),u(n,p),p.from=function(m,i,l){if(typeof m=="number")throw new TypeError("Argument must not be a number");return n(m,i,l)},p.alloc=function(m,i,l){if(typeof m!="number")throw new TypeError("Argument must be a number");var h=n(m);return i!==void 0?typeof l=="string"?h.fill(i,l):h.fill(i):h.fill(0),h},p.allocUnsafe=function(m){if(typeof m!="number")throw new TypeError("Argument must be a number");return n(m)},p.allocUnsafeSlow=function(m){if(typeof m!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(m)}}(Lr,Lr.exports)),Lr.exports}var Ms;function Fs(){if(Ms)return Vi;Ms=1;var r=lu().Buffer,e=r.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(s){if(!s)return"utf8";for(var o;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(o)return;s=(""+s).toLowerCase(),o=!0}}function n(s){var o=t(s);if(typeof o!="string"&&(r.isEncoding===e||!e(s)))throw new Error("Unknown encoding: "+s);return o||s}Vi.StringDecoder=u;function u(s){this.encoding=n(s);var o;switch(this.encoding){case"utf16le":this.text=f,this.end=y,o=4;break;case"utf8":this.fillLast=l,o=4;break;case"base64":this.text=C,this.end=w,o=3;break;default:this.write=S,this.end=a;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(o)}u.prototype.write=function(s){if(s.length===0)return"";var o,c;if(this.lastNeed){if(o=this.fillLast(s),o===void 0)return"";c=this.lastNeed,this.lastNeed=0}else c=0;return c<s.length?o?o+this.text(s,c):this.text(s,c):o||""},u.prototype.end=b,u.prototype.text=h,u.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function p(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function m(s,o,c){var d=o.length-1;if(d<c)return 0;var _=p(o[d]);return _>=0?(_>0&&(s.lastNeed=_-1),_):--d<c||_===-2?0:(_=p(o[d]),_>=0?(_>0&&(s.lastNeed=_-2),_):--d<c||_===-2?0:(_=p(o[d]),_>=0?(_>0&&(_===2?_=0:s.lastNeed=_-3),_):0))}function i(s,o,c){if((o[0]&192)!==128)return s.lastNeed=0,"�";if(s.lastNeed>1&&o.length>1){if((o[1]&192)!==128)return s.lastNeed=1,"�";if(s.lastNeed>2&&o.length>2&&(o[2]&192)!==128)return s.lastNeed=2,"�"}}function l(s){var o=this.lastTotal-this.lastNeed,c=i(this,s);if(c!==void 0)return c;if(this.lastNeed<=s.length)return s.copy(this.lastChar,o,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,o,0,s.length),this.lastNeed-=s.length}function h(s,o){var c=m(this,s,o);if(!this.lastNeed)return s.toString("utf8",o);this.lastTotal=c;var d=s.length-(c-this.lastNeed);return s.copy(this.lastChar,0,d),s.toString("utf8",o,d)}function b(s){var o=s&&s.length?this.write(s):"";return this.lastNeed?o+"�":o}function f(s,o){if((s.length-o)%2===0){var c=s.toString("utf16le",o);if(c){var d=c.charCodeAt(c.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],c.slice(0,-1)}return c}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",o,s.length-1)}function y(s){var o=s&&s.length?this.write(s):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return o+this.lastChar.toString("utf16le",0,c)}return o}function C(s,o){var c=(s.length-o)%3;return c===0?s.toString("base64",o):(this.lastNeed=3-c,this.lastTotal=3,c===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",o,s.length-c))}function w(s){var o=s&&s.length?this.write(s):"";return this.lastNeed?o+this.lastChar.toString("base64",0,3-this.lastNeed):o}function S(s){return s.toString(this.encoding)}function a(s){return s&&s.length?this.write(s):""}return Vi}var Ki,Ns;function Fn(){if(Ns)return Ki;Ns=1;var r=hr().codes.ERR_STREAM_PREMATURE_CLOSE;function e(p){var m=!1;return function(){if(!m){m=!0;for(var i=arguments.length,l=new Array(i),h=0;h<i;h++)l[h]=arguments[h];p.apply(this,l)}}}function t(){}function n(p){return p.setHeader&&typeof p.abort=="function"}function u(p,m,i){if(typeof m=="function")return u(p,null,m);m||(m={}),i=e(i||t);var l=m.readable||m.readable!==!1&&p.readable,h=m.writable||m.writable!==!1&&p.writable,b=function(){p.writable||y()},f=p._writableState&&p._writableState.finished,y=function(){h=!1,f=!0,l||i.call(p)},C=p._readableState&&p._readableState.endEmitted,w=function(){l=!1,C=!0,h||i.call(p)},S=function(c){i.call(p,c)},a=function(){var c;if(l&&!C)return(!p._readableState||!p._readableState.ended)&&(c=new r),i.call(p,c);if(h&&!f)return(!p._writableState||!p._writableState.ended)&&(c=new r),i.call(p,c)},s=function(){p.req.on("finish",y)};return n(p)?(p.on("complete",y),p.on("abort",a),p.req?s():p.on("request",s)):h&&!p._writableState&&(p.on("end",b),p.on("close",b)),p.on("end",w),p.on("finish",y),m.error!==!1&&p.on("error",S),p.on("close",a),function(){p.removeListener("complete",y),p.removeListener("abort",a),p.removeListener("request",s),p.req&&p.req.removeListener("finish",y),p.removeListener("end",b),p.removeListener("close",b),p.removeListener("finish",y),p.removeListener("end",w),p.removeListener("error",S),p.removeListener("close",a)}}return Ki=u,Ki}var Gi,js;function cu(){if(js)return Gi;js=1;var r;function e(c,d,_){return d=t(d),d in c?Object.defineProperty(c,d,{value:_,enumerable:!0,configurable:!0,writable:!0}):c[d]=_,c}function t(c){var d=n(c,"string");return typeof d=="symbol"?d:String(d)}function n(c,d){if(typeof c!="object"||c===null)return c;var _=c[Symbol.toPrimitive];if(_!==void 0){var E=_.call(c,d||"default");if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(d==="string"?String:Number)(c)}var u=Fn(),p=Symbol("lastResolve"),m=Symbol("lastReject"),i=Symbol("error"),l=Symbol("ended"),h=Symbol("lastPromise"),b=Symbol("handlePromise"),f=Symbol("stream");function y(c,d){return{value:c,done:d}}function C(c){var d=c[p];if(d!==null){var _=c[f].read();_!==null&&(c[h]=null,c[p]=null,c[m]=null,d(y(_,!1)))}}function w(c){ve.nextTick(C,c)}function S(c,d){return function(_,E){c.then(function(){if(d[l]){_(y(void 0,!0));return}d[b](_,E)},E)}}var a=Object.getPrototypeOf(function(){}),s=Object.setPrototypeOf((r={get stream(){return this[f]},next:function(){var d=this,_=this[i];if(_!==null)return Promise.reject(_);if(this[l])return Promise.resolve(y(void 0,!0));if(this[f].destroyed)return new Promise(function(O,M){ve.nextTick(function(){d[i]?M(d[i]):O(y(void 0,!0))})});var E=this[h],k;if(E)k=new Promise(S(E,this));else{var v=this[f].read();if(v!==null)return Promise.resolve(y(v,!1));k=new Promise(this[b])}return this[h]=k,k}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var d=this;return new Promise(function(_,E){d[f].destroy(null,function(k){if(k){E(k);return}_(y(void 0,!0))})})}),r),a),o=function(d){var _,E=Object.create(s,(_={},e(_,f,{value:d,writable:!0}),e(_,p,{value:null,writable:!0}),e(_,m,{value:null,writable:!0}),e(_,i,{value:null,writable:!0}),e(_,l,{value:d._readableState.endEmitted,writable:!0}),e(_,b,{value:function(v,O){var M=E[f].read();M?(E[h]=null,E[p]=null,E[m]=null,v(y(M,!1))):(E[p]=v,E[m]=O)},writable:!0}),_));return E[h]=null,u(d,function(k){if(k&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"){var v=E[m];v!==null&&(E[h]=null,E[p]=null,E[m]=null,v(k)),E[i]=k;return}var O=E[p];O!==null&&(E[h]=null,E[p]=null,E[m]=null,O(y(void 0,!0))),E[l]=!0}),d.on("readable",w.bind(null,E)),E};return Gi=o,Gi}var Yi,Us;function hu(){return Us||(Us=1,Yi=function(){throw new Error("Readable.from is not available in the browser")}),Yi}var Xi,Hs;function sa(){if(Hs)return Xi;Hs=1,Xi=O;var r;O.ReadableState=v,Er.EventEmitter;var e=function(B,V){return B.listeners(V).length},t=ta(),n=lr.Buffer,u=(typeof Ze<"u"?Ze:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function p(D){return n.from(D)}function m(D){return n.isBuffer(D)||D instanceof u}var i=mt,l;i&&i.debuglog?l=i.debuglog("stream"):l=function(){};var h=ou(),b=ra(),f=ia(),y=f.getHighWaterMark,C=hr().codes,w=C.ERR_INVALID_ARG_TYPE,S=C.ERR_STREAM_PUSH_AFTER_EOF,a=C.ERR_METHOD_NOT_IMPLEMENTED,s=C.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,o,c,d;Ut(O,t);var _=b.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(D,B,V){if(typeof D.prependListener=="function")return D.prependListener(B,V);!D._events||!D._events[B]?D.on(B,V):Array.isArray(D._events[B])?D._events[B].unshift(V):D._events[B]=[V,D._events[B]]}function v(D,B,V){r=r||or(),D=D||{},typeof V!="boolean"&&(V=B instanceof r),this.objectMode=!!D.objectMode,V&&(this.objectMode=this.objectMode||!!D.readableObjectMode),this.highWaterMark=y(this,D,"readableHighWaterMark",V),this.buffer=new h,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=D.emitClose!==!1,this.autoDestroy=!!D.autoDestroy,this.destroyed=!1,this.defaultEncoding=D.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,D.encoding&&(o||(o=Fs().StringDecoder),this.decoder=new o(D.encoding),this.encoding=D.encoding)}function O(D){if(r=r||or(),!(this instanceof O))return new O(D);var B=this instanceof r;this._readableState=new v(D,this,B),this.readable=!0,D&&(typeof D.read=="function"&&(this._read=D.read),typeof D.destroy=="function"&&(this._destroy=D.destroy)),t.call(this)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(B){this._readableState&&(this._readableState.destroyed=B)}}),O.prototype.destroy=b.destroy,O.prototype._undestroy=b.undestroy,O.prototype._destroy=function(D,B){B(D)},O.prototype.push=function(D,B){var V=this._readableState,ee;return V.objectMode?ee=!0:typeof D=="string"&&(B=B||V.defaultEncoding,B!==V.encoding&&(D=n.from(D,B),B=""),ee=!0),M(this,D,B,!1,ee)},O.prototype.unshift=function(D){return M(this,D,null,!0,!1)};function M(D,B,V,ee,le){l("readableAddChunk",B);var ue=D._readableState;if(B===null)ue.reading=!1,ie(D,ue);else{var ce;if(le||(ce=L(ue,B)),ce)_(D,ce);else if(ue.objectMode||B&&B.length>0)if(typeof B!="string"&&!ue.objectMode&&Object.getPrototypeOf(B)!==n.prototype&&(B=p(B)),ee)ue.endEmitted?_(D,new s):$(D,ue,B,!0);else if(ue.ended)_(D,new S);else{if(ue.destroyed)return!1;ue.reading=!1,ue.decoder&&!V?(B=ue.decoder.write(B),ue.objectMode||B.length!==0?$(D,ue,B,!1):F(D,ue)):$(D,ue,B,!1)}else ee||(ue.reading=!1,F(D,ue))}return!ue.ended&&(ue.length<ue.highWaterMark||ue.length===0)}function $(D,B,V,ee){B.flowing&&B.length===0&&!B.sync?(B.awaitDrain=0,D.emit("data",V)):(B.length+=B.objectMode?1:V.length,ee?B.buffer.unshift(V):B.buffer.push(V),B.needReadable&&ne(D)),F(D,B)}function L(D,B){var V;return!m(B)&&typeof B!="string"&&B!==void 0&&!D.objectMode&&(V=new w("chunk",["string","Buffer","Uint8Array"],B)),V}O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function(D){o||(o=Fs().StringDecoder);var B=new o(D);this._readableState.decoder=B,this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,ee="";V!==null;)ee+=B.write(V.data),V=V.next;return this._readableState.buffer.clear(),ee!==""&&this._readableState.buffer.push(ee),this._readableState.length=ee.length,this};var q=1073741824;function Z(D){return D>=q?D=q:(D--,D|=D>>>1,D|=D>>>2,D|=D>>>4,D|=D>>>8,D|=D>>>16,D++),D}function re(D,B){return D<=0||B.length===0&&B.ended?0:B.objectMode?1:D!==D?B.flowing&&B.length?B.buffer.head.data.length:B.length:(D>B.highWaterMark&&(B.highWaterMark=Z(D)),D<=B.length?D:B.ended?B.length:(B.needReadable=!0,0))}O.prototype.read=function(D){l("read",D),D=parseInt(D,10);var B=this._readableState,V=D;if(D!==0&&(B.emittedReadable=!1),D===0&&B.needReadable&&((B.highWaterMark!==0?B.length>=B.highWaterMark:B.length>0)||B.ended))return l("read: emitReadable",B.length,B.ended),B.length===0&&B.ended?A(this):ne(this),null;if(D=re(D,B),D===0&&B.ended)return B.length===0&&A(this),null;var ee=B.needReadable;l("need readable",ee),(B.length===0||B.length-D<B.highWaterMark)&&(ee=!0,l("length less than watermark",ee)),B.ended||B.reading?(ee=!1,l("reading or ended",ee)):ee&&(l("do read"),B.reading=!0,B.sync=!0,B.length===0&&(B.needReadable=!0),this._read(B.highWaterMark),B.sync=!1,B.reading||(D=re(V,B)));var le;return D>0?le=g(D,B):le=null,le===null?(B.needReadable=B.length<=B.highWaterMark,D=0):(B.length-=D,B.awaitDrain=0),B.length===0&&(B.ended||(B.needReadable=!0),V!==D&&B.ended&&A(this)),le!==null&&this.emit("data",le),le};function ie(D,B){if(l("onEofChunk"),!B.ended){if(B.decoder){var V=B.decoder.end();V&&V.length&&(B.buffer.push(V),B.length+=B.objectMode?1:V.length)}B.ended=!0,B.sync?ne(D):(B.needReadable=!1,B.emittedReadable||(B.emittedReadable=!0,x(D)))}}function ne(D){var B=D._readableState;l("emitReadable",B.needReadable,B.emittedReadable),B.needReadable=!1,B.emittedReadable||(l("emitReadable",B.flowing),B.emittedReadable=!0,ve.nextTick(x,D))}function x(D){var B=D._readableState;l("emitReadable_",B.destroyed,B.length,B.ended),!B.destroyed&&(B.length||B.ended)&&(D.emit("readable"),B.emittedReadable=!1),B.needReadable=!B.flowing&&!B.ended&&B.length<=B.highWaterMark,z(D)}function F(D,B){B.readingMore||(B.readingMore=!0,ve.nextTick(P,D,B))}function P(D,B){for(;!B.reading&&!B.ended&&(B.length<B.highWaterMark||B.flowing&&B.length===0);){var V=B.length;if(l("maybeReadMore read 0"),D.read(0),V===B.length)break}B.readingMore=!1}O.prototype._read=function(D){_(this,new a("_read()"))},O.prototype.pipe=function(D,B){var V=this,ee=this._readableState;switch(ee.pipesCount){case 0:ee.pipes=D;break;case 1:ee.pipes=[ee.pipes,D];break;default:ee.pipes.push(D);break}ee.pipesCount+=1,l("pipe count=%d opts=%j",ee.pipesCount,B);var le=(!B||B.end!==!1)&&D!==ve.stdout&&D!==ve.stderr,ue=le?pe:he;ee.endEmitted?ve.nextTick(ue):V.once("end",ue),D.on("unpipe",ce);function ce(de,fe){l("onunpipe"),de===V&&fe&&fe.hasUnpiped===!1&&(fe.hasUnpiped=!0,Ue())}function pe(){l("onend"),D.end()}var oe=U(V);D.on("drain",oe);var Me=!1;function Ue(){l("cleanup"),D.removeListener("close",X),D.removeListener("finish",Q),D.removeListener("drain",oe),D.removeListener("error",Se),D.removeListener("unpipe",ce),V.removeListener("end",pe),V.removeListener("end",he),V.removeListener("data",Ce),Me=!0,ee.awaitDrain&&(!D._writableState||D._writableState.needDrain)&&oe()}V.on("data",Ce);function Ce(de){l("ondata");var fe=D.write(de);l("dest.write",fe),fe===!1&&((ee.pipesCount===1&&ee.pipes===D||ee.pipesCount>1&&j(ee.pipes,D)!==-1)&&!Me&&(l("false write response, pause",ee.awaitDrain),ee.awaitDrain++),V.pause())}function Se(de){l("onerror",de),he(),D.removeListener("error",Se),e(D,"error")===0&&_(D,de)}k(D,"error",Se);function X(){D.removeListener("finish",Q),he()}D.once("close",X);function Q(){l("onfinish"),D.removeListener("close",X),he()}D.once("finish",Q);function he(){l("unpipe"),V.unpipe(D)}return D.emit("pipe",V),ee.flowing||(l("pipe resume"),V.resume()),D};function U(D){return function(){var V=D._readableState;l("pipeOnDrain",V.awaitDrain),V.awaitDrain&&V.awaitDrain--,V.awaitDrain===0&&e(D,"data")&&(V.flowing=!0,z(D))}}O.prototype.unpipe=function(D){var B=this._readableState,V={hasUnpiped:!1};if(B.pipesCount===0)return this;if(B.pipesCount===1)return D&&D!==B.pipes?this:(D||(D=B.pipes),B.pipes=null,B.pipesCount=0,B.flowing=!1,D&&D.emit("unpipe",this,V),this);if(!D){var ee=B.pipes,le=B.pipesCount;B.pipes=null,B.pipesCount=0,B.flowing=!1;for(var ue=0;ue<le;ue++)ee[ue].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=j(B.pipes,D);return ce===-1?this:(B.pipes.splice(ce,1),B.pipesCount-=1,B.pipesCount===1&&(B.pipes=B.pipes[0]),D.emit("unpipe",this,V),this)},O.prototype.on=function(D,B){var V=t.prototype.on.call(this,D,B),ee=this._readableState;return D==="data"?(ee.readableListening=this.listenerCount("readable")>0,ee.flowing!==!1&&this.resume()):D==="readable"&&!ee.endEmitted&&!ee.readableListening&&(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,l("on readable",ee.length,ee.reading),ee.length?ne(this):ee.reading||ve.nextTick(H,this)),V},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(D,B){var V=t.prototype.removeListener.call(this,D,B);return D==="readable"&&ve.nextTick(G,this),V},O.prototype.removeAllListeners=function(D){var B=t.prototype.removeAllListeners.apply(this,arguments);return(D==="readable"||D===void 0)&&ve.nextTick(G,this),B};function G(D){var B=D._readableState;B.readableListening=D.listenerCount("readable")>0,B.resumeScheduled&&!B.paused?B.flowing=!0:D.listenerCount("data")>0&&D.resume()}function H(D){l("readable nexttick read 0"),D.read(0)}O.prototype.resume=function(){var D=this._readableState;return D.flowing||(l("resume"),D.flowing=!D.readableListening,K(this,D)),D.paused=!1,this};function K(D,B){B.resumeScheduled||(B.resumeScheduled=!0,ve.nextTick(Y,D,B))}function Y(D,B){l("resume",B.reading),B.reading||D.read(0),B.resumeScheduled=!1,D.emit("resume"),z(D),B.flowing&&!B.reading&&D.read(0)}O.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function z(D){var B=D._readableState;for(l("flow",B.flowing);B.flowing&&D.read()!==null;);}O.prototype.wrap=function(D){var B=this,V=this._readableState,ee=!1;D.on("end",function(){if(l("wrapped end"),V.decoder&&!V.ended){var ce=V.decoder.end();ce&&ce.length&&B.push(ce)}B.push(null)}),D.on("data",function(ce){if(l("wrapped data"),V.decoder&&(ce=V.decoder.write(ce)),!(V.objectMode&&ce==null)&&!(!V.objectMode&&(!ce||!ce.length))){var pe=B.push(ce);pe||(ee=!0,D.pause())}});for(var le in D)this[le]===void 0&&typeof D[le]=="function"&&(this[le]=function(pe){return function(){return D[pe].apply(D,arguments)}}(le));for(var ue=0;ue<E.length;ue++)D.on(E[ue],this.emit.bind(this,E[ue]));return this._read=function(ce){l("wrapped _read",ce),ee&&(ee=!1,D.resume())},this},typeof Symbol=="function"&&(O.prototype[Symbol.asyncIterator]=function(){return c===void 0&&(c=cu()),c(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(B){this._readableState&&(this._readableState.flowing=B)}}),O._fromList=g,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function g(D,B){if(B.length===0)return null;var V;return B.objectMode?V=B.buffer.shift():!D||D>=B.length?(B.decoder?V=B.buffer.join(""):B.buffer.length===1?V=B.buffer.first():V=B.buffer.concat(B.length),B.buffer.clear()):V=B.buffer.consume(D,B.decoder),V}function A(D){var B=D._readableState;l("endReadable",B.endEmitted),B.endEmitted||(B.ended=!0,ve.nextTick(I,B,D))}function I(D,B){if(l("endReadableNT",D.endEmitted,D.length),!D.endEmitted&&D.length===0&&(D.endEmitted=!0,B.readable=!1,B.emit("end"),D.autoDestroy)){var V=B._writableState;(!V||V.autoDestroy&&V.finished)&&B.destroy()}}typeof Symbol=="function"&&(O.from=function(D,B){return d===void 0&&(d=hu()),d(O,D,B)});function j(D,B){for(var V=0,ee=D.length;V<ee;V++)if(D[V]===B)return V;return-1}return Xi}var Ji,$s;function oa(){if($s)return Ji;$s=1,Ji=i;var r=hr().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,n=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,u=r.ERR_TRANSFORM_WITH_LENGTH_0,p=or();Ut(i,p);function m(b,f){var y=this._transformState;y.transforming=!1;var C=y.writecb;if(C===null)return this.emit("error",new t);y.writechunk=null,y.writecb=null,f!=null&&this.push(f),C(b);var w=this._readableState;w.reading=!1,(w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}function i(b){if(!(this instanceof i))return new i(b);p.call(this,b),this._transformState={afterTransform:m.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&(typeof b.transform=="function"&&(this._transform=b.transform),typeof b.flush=="function"&&(this._flush=b.flush)),this.on("prefinish",l)}function l(){var b=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,y){h(b,f,y)}):h(this,null,null)}i.prototype.push=function(b,f){return this._transformState.needTransform=!1,p.prototype.push.call(this,b,f)},i.prototype._transform=function(b,f,y){y(new e("_transform()"))},i.prototype._write=function(b,f,y){var C=this._transformState;if(C.writecb=y,C.writechunk=b,C.writeencoding=f,!C.transforming){var w=this._readableState;(C.needTransform||w.needReadable||w.length<w.highWaterMark)&&this._read(w.highWaterMark)}},i.prototype._read=function(b){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},i.prototype._destroy=function(b,f){p.prototype._destroy.call(this,b,function(y){f(y)})};function h(b,f,y){if(f)return b.emit("error",f);if(y!=null&&b.push(y),b._writableState.length)throw new u;if(b._transformState.transforming)throw new n;return b.push(null)}return Ji}var Zi,Ws;function uu(){if(Ws)return Zi;Ws=1,Zi=e;var r=oa();Ut(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,n,u){u(null,t)},Zi}var Qi,qs;function fu(){if(qs)return Qi;qs=1;var r;function e(y){var C=!1;return function(){C||(C=!0,y.apply(void 0,arguments))}}var t=hr().codes,n=t.ERR_MISSING_ARGS,u=t.ERR_STREAM_DESTROYED;function p(y){if(y)throw y}function m(y){return y.setHeader&&typeof y.abort=="function"}function i(y,C,w,S){S=e(S);var a=!1;y.on("close",function(){a=!0}),r===void 0&&(r=Fn()),r(y,{readable:C,writable:w},function(o){if(o)return S(o);a=!0,S()});var s=!1;return function(o){if(!a&&!s){if(s=!0,m(y))return y.abort();if(typeof y.destroy=="function")return y.destroy();S(o||new u("pipe"))}}}function l(y){y()}function h(y,C){return y.pipe(C)}function b(y){return!y.length||typeof y[y.length-1]!="function"?p:y.pop()}function f(){for(var y=arguments.length,C=new Array(y),w=0;w<y;w++)C[w]=arguments[w];var S=b(C);if(Array.isArray(C[0])&&(C=C[0]),C.length<2)throw new n("streams");var a,s=C.map(function(o,c){var d=c<C.length-1,_=c>0;return i(o,d,_,function(E){a||(a=E),E&&s.forEach(l),!d&&(s.forEach(l),S(a))})});return C.reduce(h)}return Qi=f,Qi}var du=ct,Nn=Er.EventEmitter,_u=Ut;_u(ct,Nn);ct.Readable=sa();ct.Writable=na();ct.Duplex=or();ct.Transform=oa();ct.PassThrough=uu();ct.finished=Fn();ct.pipeline=fu();ct.Stream=ct;function ct(){Nn.call(this)}ct.prototype.pipe=function(r,e){var t=this;function n(b){r.writable&&r.write(b)===!1&&t.pause&&t.pause()}t.on("data",n);function u(){t.readable&&t.resume&&t.resume()}r.on("drain",u),!r._isStdio&&(!e||e.end!==!1)&&(t.on("end",m),t.on("close",i));var p=!1;function m(){p||(p=!0,r.end())}function i(){p||(p=!0,typeof r.destroy=="function"&&r.destroy())}function l(b){if(h(),Nn.listenerCount(this,"error")===0)throw b}t.on("error",l),r.on("error",l);function h(){t.removeListener("data",n),r.removeListener("drain",u),t.removeListener("end",m),t.removeListener("close",i),t.removeListener("error",l),r.removeListener("error",l),t.removeListener("end",h),t.removeListener("close",h),r.removeListener("close",h)}return t.on("end",h),t.on("close",h),r.on("close",h),r.emit("pipe",t),r};var ii={},Cr={},Ot={};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.FLAGS=Ot.ERRSTR=void 0;const pu=yt;Ot.ERRSTR={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"};const{O_RDONLY:zs,O_WRONLY:Dr,O_RDWR:qt,O_CREAT:Ct,O_EXCL:Br,O_TRUNC:Ir,O_APPEND:Pr,O_SYNC:Vs}=pu.constants;var Ks;(function(r){r[r.r=zs]="r",r[r["r+"]=qt]="r+",r[r.rs=zs|Vs]="rs",r[r.sr=r.rs]="sr",r[r["rs+"]=qt|Vs]="rs+",r[r["sr+"]=r["rs+"]]="sr+",r[r.w=Dr|Ct|Ir]="w",r[r.wx=Dr|Ct|Ir|Br]="wx",r[r.xw=r.wx]="xw",r[r["w+"]=qt|Ct|Ir]="w+",r[r["wx+"]=qt|Ct|Ir|Br]="wx+",r[r["xw+"]=r["wx+"]]="xw+",r[r.a=Dr|Pr|Ct]="a",r[r.ax=Dr|Pr|Ct|Br]="ax",r[r.xa=r.ax]="xa",r[r["a+"]=qt|Pr|Ct]="a+",r[r["ax+"]=qt|Pr|Ct|Br]="ax+",r[r["xa+"]=r["ax+"]]="xa+"})(Ks||(Ot.FLAGS=Ks={}));var Vr={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Vr.exports;(function(r,e){(function(t){var n=e&&!e.nodeType&&e,u=r&&!r.nodeType&&r,p=typeof Ze=="object"&&Ze;(p.global===p||p.window===p||p.self===p)&&(t=p);var m,i=2147483647,l=36,h=1,b=26,f=38,y=700,C=72,w=128,S="-",a=/^xn--/,s=/[^\x20-\x7E]/,o=/[\x2E\u3002\uFF0E\uFF61]/g,c={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=l-h,_=Math.floor,E=String.fromCharCode,k;function v(P){throw new RangeError(c[P])}function O(P,U){for(var G=P.length,H=[];G--;)H[G]=U(P[G]);return H}function M(P,U){var G=P.split("@"),H="";G.length>1&&(H=G[0]+"@",P=G[1]),P=P.replace(o,".");var K=P.split("."),Y=O(K,U).join(".");return H+Y}function $(P){for(var U=[],G=0,H=P.length,K,Y;G<H;)K=P.charCodeAt(G++),K>=55296&&K<=56319&&G<H?(Y=P.charCodeAt(G++),(Y&64512)==56320?U.push(((K&1023)<<10)+(Y&1023)+65536):(U.push(K),G--)):U.push(K);return U}function L(P){return O(P,function(U){var G="";return U>65535&&(U-=65536,G+=E(U>>>10&1023|55296),U=56320|U&1023),G+=E(U),G}).join("")}function q(P){return P-48<10?P-22:P-65<26?P-65:P-97<26?P-97:l}function Z(P,U){return P+22+75*(P<26)-((U!=0)<<5)}function re(P,U,G){var H=0;for(P=G?_(P/y):P>>1,P+=_(P/U);P>d*b>>1;H+=l)P=_(P/d);return _(H+(d+1)*P/(P+f))}function ie(P){var U=[],G=P.length,H,K=0,Y=w,z=C,g,A,I,j,D,B,V,ee,le;for(g=P.lastIndexOf(S),g<0&&(g=0),A=0;A<g;++A)P.charCodeAt(A)>=128&&v("not-basic"),U.push(P.charCodeAt(A));for(I=g>0?g+1:0;I<G;){for(j=K,D=1,B=l;I>=G&&v("invalid-input"),V=q(P.charCodeAt(I++)),(V>=l||V>_((i-K)/D))&&v("overflow"),K+=V*D,ee=B<=z?h:B>=z+b?b:B-z,!(V<ee);B+=l)le=l-ee,D>_(i/le)&&v("overflow"),D*=le;H=U.length+1,z=re(K-j,H,j==0),_(K/H)>i-Y&&v("overflow"),Y+=_(K/H),K%=H,U.splice(K++,0,Y)}return L(U)}function ne(P){var U,G,H,K,Y,z,g,A,I,j,D,B=[],V,ee,le,ue;for(P=$(P),V=P.length,U=w,G=0,Y=C,z=0;z<V;++z)D=P[z],D<128&&B.push(E(D));for(H=K=B.length,K&&B.push(S);H<V;){for(g=i,z=0;z<V;++z)D=P[z],D>=U&&D<g&&(g=D);for(ee=H+1,g-U>_((i-G)/ee)&&v("overflow"),G+=(g-U)*ee,U=g,z=0;z<V;++z)if(D=P[z],D<U&&++G>i&&v("overflow"),D==U){for(A=G,I=l;j=I<=Y?h:I>=Y+b?b:I-Y,!(A<j);I+=l)ue=A-j,le=l-j,B.push(E(Z(j+ue%le,0))),A=_(ue/le);B.push(E(Z(A,0))),Y=re(G,ee,H==K),G=0,++H}++G,++U}return B.join("")}function x(P){return M(P,function(U){return a.test(U)?ie(U.slice(4).toLowerCase()):U})}function F(P){return M(P,function(U){return s.test(U)?"xn--"+ne(U):U})}if(m={version:"1.4.1",ucs2:{decode:$,encode:L},decode:ie,encode:ne,toASCII:F,toUnicode:x},n&&u)if(r.exports==n)u.exports=m;else for(k in m)m.hasOwnProperty(k)&&(n[k]=m[k]);else t.punycode=m})(Ze)})(Vr,Vr.exports);var gu=Vr.exports;const mu=mo(gu);function vu(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var yu=function(r,e,t,n){e=e||"&",t=t||"=";var u={};if(typeof r!="string"||r.length===0)return u;var p=/\+/g;r=r.split(e);var m=1e3;n&&typeof n.maxKeys=="number"&&(m=n.maxKeys);var i=r.length;m>0&&i>m&&(i=m);for(var l=0;l<i;++l){var h=r[l].replace(p,"%20"),b=h.indexOf(t),f,y,C,w;b>=0?(f=h.substr(0,b),y=h.substr(b+1)):(f=h,y=""),C=decodeURIComponent(f),w=decodeURIComponent(y),vu(u,C)?bu(u[C])?u[C].push(w):u[C]=[u[C],w]:u[C]=w}return u},bu=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},ur=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},Su=function(r,e,t,n){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?Gs(Eu(r),function(u){var p=encodeURIComponent(ur(u))+t;return wu(r[u])?Gs(r[u],function(m){return p+encodeURIComponent(ur(m))}).join(e):p+encodeURIComponent(ur(r[u]))}).join(e):n?encodeURIComponent(ur(n))+t+encodeURIComponent(ur(r)):""},wu=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function Gs(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var Eu=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e},aa,la,Cu=la=yu,Ru=aa=Su;function Au(r){return encodeURIComponent(r)}function Tu(r){return decodeURIComponent(r)}var Ou={decode:Cu,encode:Ru,parse:la,stringify:aa,escape:Au,unescape:Tu},ku={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},Lu=mu,gt=ku,Du=Rr,Bu=qu,ca=zu,Iu=Wu,Pu=lt;function lt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var xu=/^([a-z0-9.+-]+:)/i,Mu=/:[0-9]*$/,Fu=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Nu=["<",">",'"',"`"," ","\r",`
`,"	"],ju=["{","}","|","\\","^","`"].concat(Nu),bn=["'"].concat(ju),Ys=["%","/","?",";","#"].concat(bn),Xs=["/","?","#"],Uu=255,Js=/^[+a-z0-9A-Z_-]{0,63}$/,Hu=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,$u={javascript:!0,"javascript:":!0},Sn={javascript:!0,"javascript:":!0},rr={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},wn=Ou;function Rr(r,e,t){if(r&&gt.isObject(r)&&r instanceof lt)return r;var n=new lt;return n.parse(r,e,t),n}lt.prototype.parse=function(r,e,t){if(!gt.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var n=r.indexOf("?"),u=n!==-1&&n<r.indexOf("#")?"?":"#",p=r.split(u),m=/\\/g;p[0]=p[0].replace(m,"/"),r=p.join(u);var i=r;if(i=i.trim(),!t&&r.split("#").length===1){var l=Fu.exec(i);if(l)return this.path=i,this.href=i,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=wn.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var h=xu.exec(i);if(h){h=h[0];var b=h.toLowerCase();this.protocol=b,i=i.substr(h.length)}if(t||h||i.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=i.substr(0,2)==="//";f&&!(h&&Sn[h])&&(i=i.substr(2),this.slashes=!0)}if(!Sn[h]&&(f||h&&!rr[h])){for(var y=-1,C=0;C<Xs.length;C++){var w=i.indexOf(Xs[C]);w!==-1&&(y===-1||w<y)&&(y=w)}var S,a;y===-1?a=i.lastIndexOf("@"):a=i.lastIndexOf("@",y),a!==-1&&(S=i.slice(0,a),i=i.slice(a+1),this.auth=decodeURIComponent(S)),y=-1;for(var C=0;C<Ys.length;C++){var w=i.indexOf(Ys[C]);w!==-1&&(y===-1||w<y)&&(y=w)}y===-1&&(y=i.length),this.host=i.slice(0,y),i=i.slice(y),this.parseHost(),this.hostname=this.hostname||"";var s=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!s)for(var o=this.hostname.split(/\./),C=0,c=o.length;C<c;C++){var d=o[C];if(d&&!d.match(Js)){for(var _="",E=0,k=d.length;E<k;E++)d.charCodeAt(E)>127?_+="x":_+=d[E];if(!_.match(Js)){var v=o.slice(0,C),O=o.slice(C+1),M=d.match(Hu);M&&(v.push(M[1]),O.unshift(M[2])),O.length&&(i="/"+O.join(".")+i),this.hostname=v.join(".");break}}}this.hostname.length>Uu?this.hostname="":this.hostname=this.hostname.toLowerCase(),s||(this.hostname=Lu.toASCII(this.hostname));var $=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+$,this.href+=this.host,s&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),i[0]!=="/"&&(i="/"+i))}if(!$u[b])for(var C=0,c=bn.length;C<c;C++){var q=bn[C];if(i.indexOf(q)!==-1){var Z=encodeURIComponent(q);Z===q&&(Z=escape(q)),i=i.split(q).join(Z)}}var re=i.indexOf("#");re!==-1&&(this.hash=i.substr(re),i=i.slice(0,re));var ie=i.indexOf("?");if(ie!==-1?(this.search=i.substr(ie),this.query=i.substr(ie+1),e&&(this.query=wn.parse(this.query)),i=i.slice(0,ie)):e&&(this.search="",this.query={}),i&&(this.pathname=i),rr[b]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var $=this.pathname||"",ne=this.search||"";this.path=$+ne}return this.href=this.format(),this};function Wu(r){return gt.isString(r)&&(r=Rr(r)),r instanceof lt?r.format():lt.prototype.format.call(r)}lt.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",n=this.hash||"",u=!1,p="";this.host?u=r+this.host:this.hostname&&(u=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(u+=":"+this.port)),this.query&&gt.isObject(this.query)&&Object.keys(this.query).length&&(p=wn.stringify(this.query));var m=this.search||p&&"?"+p||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||rr[e])&&u!==!1?(u="//"+(u||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):u||(u=""),n&&n.charAt(0)!=="#"&&(n="#"+n),m&&m.charAt(0)!=="?"&&(m="?"+m),t=t.replace(/[?#]/g,function(i){return encodeURIComponent(i)}),m=m.replace("#","%23"),e+u+t+m+n};function qu(r,e){return Rr(r,!1,!0).resolve(e)}lt.prototype.resolve=function(r){return this.resolveObject(Rr(r,!1,!0)).format()};function zu(r,e){return r?Rr(r,!1,!0).resolveObject(e):e}lt.prototype.resolveObject=function(r){if(gt.isString(r)){var e=new lt;e.parse(r,!1,!0),r=e}for(var t=new lt,n=Object.keys(this),u=0;u<n.length;u++){var p=n[u];t[p]=this[p]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var m=Object.keys(r),i=0;i<m.length;i++){var l=m[i];l!=="protocol"&&(t[l]=r[l])}return rr[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!rr[r.protocol]){for(var h=Object.keys(r),b=0;b<h.length;b++){var f=h[b];t[f]=r[f]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!Sn[r.protocol]){for(var c=(r.pathname||"").split("/");c.length&&!(r.host=c.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),c[0]!==""&&c.unshift(""),c.length<2&&c.unshift(""),t.pathname=c.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var y=t.pathname||"",C=t.search||"";t.path=y+C}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var w=t.pathname&&t.pathname.charAt(0)==="/",S=r.host||r.pathname&&r.pathname.charAt(0)==="/",a=S||w||t.host&&r.pathname,s=a,o=t.pathname&&t.pathname.split("/")||[],c=r.pathname&&r.pathname.split("/")||[],d=t.protocol&&!rr[t.protocol];if(d&&(t.hostname="",t.port=null,t.host&&(o[0]===""?o[0]=t.host:o.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(c[0]===""?c[0]=r.host:c.unshift(r.host)),r.host=null),a=a&&(c[0]===""||o[0]==="")),S)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,o=c;else if(c.length)o||(o=[]),o.pop(),o=o.concat(c),t.search=r.search,t.query=r.query;else if(!gt.isNullOrUndefined(r.search)){if(d){t.hostname=t.host=o.shift();var _=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;_&&(t.auth=_.shift(),t.host=t.hostname=_.shift())}return t.search=r.search,t.query=r.query,(!gt.isNull(t.pathname)||!gt.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!o.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var E=o.slice(-1)[0],k=(t.host||r.host||o.length>1)&&(E==="."||E==="..")||E==="",v=0,O=o.length;O>=0;O--)E=o[O],E==="."?o.splice(O,1):E===".."?(o.splice(O,1),v++):v&&(o.splice(O,1),v--);if(!a&&!s)for(;v--;v)o.unshift("..");a&&o[0]!==""&&(!o[0]||o[0].charAt(0)!=="/")&&o.unshift(""),k&&o.join("/").substr(-1)!=="/"&&o.push("");var M=o[0]===""||o[0]&&o[0].charAt(0)==="/";if(d){t.hostname=t.host=M?"":o.length?o.shift():"";var _=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;_&&(t.auth=_.shift(),t.host=t.hostname=_.shift())}return a=a||t.host&&o.length,a&&!M&&o.unshift(""),o.length?t.pathname=o.join("/"):(t.pathname=null,t.path=null),(!gt.isNull(t.pathname)||!gt.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};lt.prototype.parseHost=function(){var r=this.host,e=Mu.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};function Vu(r,e){for(var t=0,n=r.length-1;n>=0;n--){var u=r[n];u==="."?r.splice(n,1):u===".."?(r.splice(n,1),t++):t&&(r.splice(n,1),t--)}if(e)for(;t--;t)r.unshift("..");return r}function Ku(){for(var r="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var n=t>=0?arguments[t]:"/";if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)continue;r=n+"/"+r,e=n.charAt(0)==="/"}return r=Vu(Gu(r.split("/"),function(u){return!!u}),!e).join("/"),(e?"/":"")+r||"."}function Gu(r,e){if(r.filter)return r.filter(e);for(var t=[],n=0;n<r.length;n++)e(r[n],n,r)&&t.push(r[n]);return t}var ha=function(r){function e(){var n=this||self;return delete r.prototype.__magic__,n}if(typeof globalThis=="object")return globalThis;if(this)return e();r.defineProperty(r.prototype,"__magic__",{configurable:!0,get:e});var t=__magic__;return t}(Object),Yu=Iu,ua=Du,fa=Bu,da=Pu,kt=ha.URL,_a=ha.URLSearchParams,Xu=/%/g,Ju=/\\/g,Zu=/\n/g,Qu=/\r/g,ef=/\t/g,tf=47;function rf(r){var e=r??null;return!!(e!==null&&(e!=null&&e.href)&&(e!=null&&e.origin))}function nf(r){if(r.hostname!=="")throw new TypeError('File URL host must be "localhost" or empty on browser');for(var e=r.pathname,t=0;t<e.length;t++)if(e[t]==="%"){var n=e.codePointAt(t+2)|32;if(e[t+1]==="2"&&n===102)throw new TypeError("File URL path must not include encoded / characters")}return decodeURIComponent(e)}function sf(r){return r.includes("%")&&(r=r.replace(Xu,"%25")),r.includes("\\")&&(r=r.replace(Ju,"%5C")),r.includes(`
`)&&(r=r.replace(Zu,"%0A")),r.includes("\r")&&(r=r.replace(Qu,"%0D")),r.includes("	")&&(r=r.replace(ef,"%09")),r}var pa=function(e){if(typeof e>"u")throw new TypeError('The "domain" argument must be specified');return new kt("http://"+e).hostname},ga=function(e){if(typeof e>"u")throw new TypeError('The "domain" argument must be specified');return new kt("http://"+e).hostname},ma=function(e){var t=new kt("file://"),n=Ku(e),u=e.charCodeAt(e.length-1);return u===tf&&n[n.length-1]!=="/"&&(n+="/"),t.pathname=sf(n),t},va=function(e){if(!rf(e)&&typeof e!="string")throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+" ("+e+")");var t=new kt(e);if(t.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return nf(t)},ya=function(e,t){var n,u,p;if(t===void 0&&(t={}),!(e instanceof kt))return Yu(e);if(typeof t!="object"||t===null)throw new TypeError('The "options" argument must be of type object.');var m=(n=t.auth)!=null?n:!0,i=(u=t.fragment)!=null?u:!0,l=(p=t.search)!=null?p:!0,h=new kt(e.toString());return m||(h.username="",h.password=""),i||(h.hash=""),l||(h.search=""),h.toString()},of={format:ya,parse:ua,resolve:fa,resolveObject:ca,Url:da,URL:kt,URLSearchParams:_a,domainToASCII:pa,domainToUnicode:ga,pathToFileURL:ma,fileURLToPath:va};const af=Object.freeze(Object.defineProperty({__proto__:null,URL:kt,URLSearchParams:_a,Url:da,default:of,domainToASCII:pa,domainToUnicode:ga,fileURLToPath:va,format:ya,parse:ua,pathToFileURL:ma,resolve:fa,resolveObject:ca},Symbol.toStringTag,{value:"Module"})),lf=Ll(af);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.unixify=r.bufferToEncoding=r.getWriteSyncArgs=r.getWriteArgs=r.bufToUint8=r.dataToBuffer=r.validateFd=r.isFd=r.flagsToNumber=r.genRndStr6=r.createError=r.pathToFilename=r.nullCheck=r.modeToNumber=r.validateCallback=r.promisify=r.isWin=void 0;const e=Ot,t=Rn,n=nr,u=br,p=nr,m=ri;r.isWin=ve.platform==="win32";function i(g,A,I=j=>j){return(...j)=>new Promise((D,B)=>{g[A].bind(g)(...j,(V,ee)=>V?B(V):D(I(ee)))})}r.promisify=i;function l(g){if(typeof g!="function")throw TypeError(e.ERRSTR.CB);return g}r.validateCallback=l;function h(g,A){if(typeof g=="number")return g;if(typeof g=="string")return parseInt(g,8);if(A)return b(A)}function b(g,A){const I=h(g,A);if(typeof I!="number"||isNaN(I))throw new TypeError(e.ERRSTR.MODE_INT);return I}r.modeToNumber=b;function f(g,A){if((""+g).indexOf("\0")!==-1){const I=new Error("Path must be a string without null bytes");if(I.code="ENOENT",typeof A!="function")throw I;return(0,m.default)(()=>{A(I)}),!1}return!0}r.nullCheck=f;function y(g){if(g.hostname!=="")throw new t.TypeError("ERR_INVALID_FILE_URL_HOST",ve.platform);const A=g.pathname;for(let I=0;I<A.length;I++)if(A[I]==="%"){const j=A.codePointAt(I+2)|32;if(A[I+1]==="2"&&j===102)throw new t.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(A)}function C(g){if(typeof g!="string"&&!n.Buffer.isBuffer(g)){try{if(!(g instanceof lf.URL))throw new TypeError(e.ERRSTR.PATH_STR)}catch{throw new TypeError(e.ERRSTR.PATH_STR)}g=y(g)}const A=String(g);return f(A),A}r.pathToFilename=C;const w="ENOENT",S="EBADF",a="EINVAL",s="EPERM",o="EPROTO",c="EEXIST",d="ENOTDIR",_="EMFILE",E="EACCES",k="EISDIR",v="ENOTEMPTY",O="ENOSYS",M="ERR_FS_EISDIR",$="ERR_OUT_OF_RANGE";function L(g,A="",I="",j=""){let D="";switch(I&&(D=` '${I}'`),j&&(D+=` -> '${j}'`),g){case w:return`ENOENT: no such file or directory, ${A}${D}`;case S:return`EBADF: bad file descriptor, ${A}${D}`;case a:return`EINVAL: invalid argument, ${A}${D}`;case s:return`EPERM: operation not permitted, ${A}${D}`;case o:return`EPROTO: protocol error, ${A}${D}`;case c:return`EEXIST: file already exists, ${A}${D}`;case d:return`ENOTDIR: not a directory, ${A}${D}`;case k:return`EISDIR: illegal operation on a directory, ${A}${D}`;case E:return`EACCES: permission denied, ${A}${D}`;case v:return`ENOTEMPTY: directory not empty, ${A}${D}`;case _:return`EMFILE: too many open files, ${A}${D}`;case O:return`ENOSYS: function not implemented, ${A}${D}`;case M:return`[ERR_FS_EISDIR]: Path is a directory: ${A} returned EISDIR (is a directory) ${I}`;case $:return`[ERR_OUT_OF_RANGE]: value out of range, ${A}${D}`;default:return`${g}: error occurred, ${A}${D}`}}function q(g,A="",I="",j="",D=Error){const B=new D(L(g,A,I,j));return B.code=g,I&&(B.path=I),B}r.createError=q;function Z(){const g=(Math.random()+1).toString(36).substring(2,8);return g.length===6?g:Z()}r.genRndStr6=Z;function re(g){if(typeof g=="number")return g;if(typeof g=="string"){const A=e.FLAGS[g];if(typeof A<"u")return A}throw new t.TypeError("ERR_INVALID_OPT_VALUE","flags",g)}r.flagsToNumber=re;function ie(g){return g>>>0===g}r.isFd=ie;function ne(g){if(!ie(g))throw TypeError(e.ERRSTR.FD)}r.validateFd=ne;function x(g,A=u.ENCODING_UTF8){return n.Buffer.isBuffer(g)?g:g instanceof Uint8Array?(0,p.bufferFrom)(g):(0,p.bufferFrom)(String(g),A)}r.dataToBuffer=x;const F=g=>new Uint8Array(g.buffer,g.byteOffset,g.byteLength);r.bufToUint8=F;const P=(g,A,I,j,D,B)=>{ne(g);let V=0,ee,le=null,ue,ce;const pe=typeof A,oe=typeof I,Me=typeof j,Ue=typeof D;pe!=="string"?oe==="function"?ce=I:Me==="function"?(V=I|0,ce=j):Ue==="function"?(V=I|0,ee=j,ce=D):(V=I|0,ee=j,le=D,ce=B):oe==="function"?ce=I:Me==="function"?(le=I,ce=j):Ue==="function"&&(le=I,ue=j,ce=D);const Ce=x(A,ue);pe!=="string"?typeof ee>"u"&&(ee=Ce.length):(V=0,ee=Ce.length);const Se=l(ce);return[g,pe==="string",Ce,V,ee,le,Se]};r.getWriteArgs=P;const U=(g,A,I,j,D)=>{ne(g);let B,V,ee,le;const ue=typeof A!="string";ue?(V=(I||0)|0,ee=j,le=D):(le=I,B=j);const ce=x(A,B);return ue?typeof ee>"u"&&(ee=ce.length):(V=0,ee=ce.length),[g,ce,V||0,ee,le]};r.getWriteSyncArgs=U;function G(g,A){return!A||A==="buffer"?g:g.toString(A)}r.bufferToEncoding=G;const H=(g,A)=>{let I=g[A];return A>0&&(I==="/"||r.isWin&&I==="\\")},K=g=>{let A=g.length-1;if(A<2)return g;for(;H(g,A);)A--;return g.substr(0,A+1)},Y=(g,A)=>{if(typeof g!="string")throw new TypeError("expected a string");return g=g.replace(/[\\\/]+/g,"/"),A!==!1&&(g=K(g)),g},z=(g,A=!0)=>r.isWin?(g=Y(g,A),g.replace(/^([a-zA-Z]+:|\.\/)/,"")):g;r.unixify=z})(Cr);Object.defineProperty(ii,"__esModule",{value:!0});ii.FileHandle=void 0;const rt=Cr;class cf{constructor(e,t){this.fs=e,this.fd=t}appendFile(e,t){return(0,rt.promisify)(this.fs,"appendFile")(this.fd,e,t)}chmod(e){return(0,rt.promisify)(this.fs,"fchmod")(this.fd,e)}chown(e,t){return(0,rt.promisify)(this.fs,"fchown")(this.fd,e,t)}close(){return(0,rt.promisify)(this.fs,"close")(this.fd)}datasync(){return(0,rt.promisify)(this.fs,"fdatasync")(this.fd)}read(e,t,n,u){return(0,rt.promisify)(this.fs,"read",p=>({bytesRead:p,buffer:e}))(this.fd,e,t,n,u)}readv(e,t){return(0,rt.promisify)(this.fs,"readv",n=>({bytesRead:n,buffers:e}))(this.fd,e,t)}readFile(e){return(0,rt.promisify)(this.fs,"readFile")(this.fd,e)}stat(e){return(0,rt.promisify)(this.fs,"fstat")(this.fd,e)}sync(){return(0,rt.promisify)(this.fs,"fsync")(this.fd)}truncate(e){return(0,rt.promisify)(this.fs,"ftruncate")(this.fd,e)}utimes(e,t){return(0,rt.promisify)(this.fs,"futimes")(this.fd,e,t)}write(e,t,n,u){return(0,rt.promisify)(this.fs,"write",p=>({bytesWritten:p,buffer:e}))(this.fd,e,t,n,u)}writev(e,t){return(0,rt.promisify)(this.fs,"writev",n=>({bytesWritten:n,buffers:e}))(this.fd,e,t)}writeFile(e,t){return(0,rt.promisify)(this.fs,"writeFile")(this.fd,e,t)}}ii.FileHandle=cf;var ni={};Object.defineProperty(ni,"__esModule",{value:!0});ni.FsPromises=void 0;const Pe=Cr,hf=yt;class uf{constructor(e,t){this.fs=e,this.FileHandle=t,this.constants=hf.constants,this.cp=(0,Pe.promisify)(this.fs,"cp"),this.opendir=(0,Pe.promisify)(this.fs,"opendir"),this.statfs=(0,Pe.promisify)(this.fs,"statfs"),this.lutimes=(0,Pe.promisify)(this.fs,"lutimes"),this.access=(0,Pe.promisify)(this.fs,"access"),this.chmod=(0,Pe.promisify)(this.fs,"chmod"),this.chown=(0,Pe.promisify)(this.fs,"chown"),this.copyFile=(0,Pe.promisify)(this.fs,"copyFile"),this.lchmod=(0,Pe.promisify)(this.fs,"lchmod"),this.lchown=(0,Pe.promisify)(this.fs,"lchown"),this.link=(0,Pe.promisify)(this.fs,"link"),this.lstat=(0,Pe.promisify)(this.fs,"lstat"),this.mkdir=(0,Pe.promisify)(this.fs,"mkdir"),this.mkdtemp=(0,Pe.promisify)(this.fs,"mkdtemp"),this.readdir=(0,Pe.promisify)(this.fs,"readdir"),this.readlink=(0,Pe.promisify)(this.fs,"readlink"),this.realpath=(0,Pe.promisify)(this.fs,"realpath"),this.rename=(0,Pe.promisify)(this.fs,"rename"),this.rmdir=(0,Pe.promisify)(this.fs,"rmdir"),this.rm=(0,Pe.promisify)(this.fs,"rm"),this.stat=(0,Pe.promisify)(this.fs,"stat"),this.symlink=(0,Pe.promisify)(this.fs,"symlink"),this.truncate=(0,Pe.promisify)(this.fs,"truncate"),this.unlink=(0,Pe.promisify)(this.fs,"unlink"),this.utimes=(0,Pe.promisify)(this.fs,"utimes"),this.readFile=(n,u)=>(0,Pe.promisify)(this.fs,"readFile")(n instanceof this.FileHandle?n.fd:n,u),this.appendFile=(n,u,p)=>(0,Pe.promisify)(this.fs,"appendFile")(n instanceof this.FileHandle?n.fd:n,u,p),this.open=(n,u="r",p)=>(0,Pe.promisify)(this.fs,"open",m=>new this.FileHandle(this.fs,m))(n,u,p),this.writeFile=(n,u,p)=>(0,Pe.promisify)(this.fs,"writeFile")(n instanceof this.FileHandle?n.fd:n,u,p),this.watch=()=>{throw new Error("Not implemented")}}}ni.FsPromises=uf;var ba={},si={};Object.defineProperty(si,"__esModule",{value:!0});si.printTree=void 0;const ff=(r="",e)=>{e=e.filter(Boolean);let t="";for(let n=0;n<e.length;n++){const u=n>=e.length-1,p=e[n];if(!p)continue;const m=p(r+`${u?" ":"│"}  `);t+=`
${r}${m?u?"└─":"├─":"│ "} ${m}`}return t};si.printTree=ff;var Je={};Object.defineProperty(Je,"__esModule",{value:!0});Je.newNotAllowedError=Je.newTypeMismatchError=Je.newNotFoundError=Je.assertCanWrite=Je.assertName=Je.basename=Je.ctx=void 0;const df=(r={})=>Object.assign({separator:"/",syncHandleAllowed:!1,mode:"read"},r);Je.ctx=df;const _f=(r,e)=>{r[r.length-1]===e&&(r=r.slice(0,-1));const t=r.lastIndexOf(e);return t===-1?r:r.slice(t+1)};Je.basename=_f;const pf=/^(\.{1,2})$|^(.*([\/\\]).*)$/,gf=(r,e,t)=>{if(!r||pf.test(r))throw new TypeError(`Failed to execute '${e}' on '${t}': Name is not allowed.`)};Je.assertName=gf;const mf=r=>{if(r!=="readwrite")throw new DOMException("The request is not allowed by the user agent or the platform in the current context.","NotAllowedError")};Je.assertCanWrite=mf;const vf=()=>new DOMException("A requested file or directory could not be found at the time an operation was processed.","NotFoundError");Je.newNotFoundError=vf;const yf=()=>new DOMException("The path supplied exists, but was not an entry of requested type.","TypeMismatchError");Je.newTypeMismatchError=yf;const bf=()=>new DOMException("Permission not granted.","NotAllowedError");Je.newNotAllowedError=bf;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.toTreeSync=void 0;const e=si,t=Je,n=(u,p={})=>{var m;const i=p.separator||"/";let l=p.dir||i;l[l.length-1]!==i&&(l+=i);const h=p.tab||"",b=(m=p.depth)!==null&&m!==void 0?m:10;let f=" (...)";if(b>0){const C=u.readdirSync(l,{withFileTypes:!0});f=(0,e.printTree)(h,C.map(w=>S=>w.isDirectory()?(0,r.toTreeSync)(u,{dir:l+w.name,depth:b-1,tab:S}):w.isSymbolicLink()?""+w.name+" → "+u.readlinkSync(l+w.name):""+w.name))}return(0,t.basename)(l,i)+i+f};r.toTreeSync=n})(ba);var Sa={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getWriteFileOptions=r.writeFileDefaults=r.getRealpathOptsAndCb=r.getRealpathOptions=r.getStatOptsAndCb=r.getStatOptions=r.getAppendFileOptsAndCb=r.getAppendFileOpts=r.getReaddirOptsAndCb=r.getReaddirOptions=r.getReadFileOptions=r.getRmOptsAndCb=r.getRmdirOptions=r.getDefaultOptsAndCb=r.getDefaultOpts=r.optsDefaults=r.optsAndCbGenerator=r.optsGenerator=r.getOptions=r.getMkdirOptions=void 0;const e=Ot,t=br,n=Cr,u={mode:511,recursive:!1},p=d=>typeof d=="number"?Object.assign({},u,{mode:d}):Object.assign({},u,d);r.getMkdirOptions=p;const m=d=>`Expected options to be either an object or a string, but got ${d} instead`;function i(d,_){let E;if(_){const k=typeof _;switch(k){case"string":E=Object.assign({},d,{encoding:_});break;case"object":E=Object.assign({},d,_);break;default:throw TypeError(m(k))}}else return d;return E.encoding!=="buffer"&&(0,t.assertEncoding)(E.encoding),E}r.getOptions=i;function l(d){return _=>i(d,_)}r.optsGenerator=l;function h(d){return(_,E)=>typeof _=="function"?[d(),_]:[d(_),(0,n.validateCallback)(E)]}r.optsAndCbGenerator=h,r.optsDefaults={encoding:"utf8"},r.getDefaultOpts=l(r.optsDefaults),r.getDefaultOptsAndCb=h(r.getDefaultOpts);const b={recursive:!1},f=d=>Object.assign({},b,d);r.getRmdirOptions=f;const y=l(r.optsDefaults);r.getRmOptsAndCb=h(y);const C={flag:"r"};r.getReadFileOptions=l(C);const w={encoding:"utf8",recursive:!1,withFileTypes:!1};r.getReaddirOptions=l(w),r.getReaddirOptsAndCb=h(r.getReaddirOptions);const S={encoding:"utf8",mode:438,flag:e.FLAGS[e.FLAGS.a]};r.getAppendFileOpts=l(S),r.getAppendFileOptsAndCb=h(r.getAppendFileOpts);const a={bigint:!1},s=(d={})=>Object.assign({},a,d);r.getStatOptions=s;const o=(d,_)=>typeof d=="function"?[(0,r.getStatOptions)(),d]:[(0,r.getStatOptions)(d),(0,n.validateCallback)(_)];r.getStatOptsAndCb=o;const c=r.optsDefaults;r.getRealpathOptions=l(c),r.getRealpathOptsAndCb=h(r.getRealpathOptions),r.writeFileDefaults={encoding:"utf8",mode:438,flag:e.FLAGS[e.FLAGS.w]},r.getWriteFileOptions=l(r.writeFileDefaults)})(Sa);Object.defineProperty(Xe,"__esModule",{value:!0});Xe.FSWatcher=Xe.StatWatcher=Xe.Volume=Xe.toUnixTimestamp=Xe.dataToStr=Xe.pathToSteps=Xe.filenameToSteps=void 0;const dr=Jh,en=zo,tn=jt,Sf=ar,Lt=nr,zt=xn,oi=ri,wa=cr,wf=Mn,ai=du,Ef=yt,Ea=Er,Ft=br,Cf=ii,Ca=mt,Rf=ni,Af=ba,_r=Ot,Be=Sa,te=Cr,Tf=dr.resolve,{O_RDONLY:Zs,O_WRONLY:Qs,O_RDWR:eo,O_CREAT:to,O_EXCL:Of,O_TRUNC:kf,O_APPEND:Lf,O_DIRECTORY:Df,O_SYMLINK:ro,F_OK:io,COPYFILE_EXCL:Bf,COPYFILE_FICLONE_FORCE:If}=Ef.constants,{sep:dt,relative:pr,join:Pf,dirname:xf}=dr.posix?dr.posix:dr,Mf=128,Ff="EPERM",Ge="ENOENT",rn="EBADF",Nf="EINVAL",Pt="EEXIST",Vt="ENOTDIR",jf="EMFILE",Uf="EACCES",no="EISDIR",Hf="ENOTEMPTY",$f="ENOSYS",Wf="ERR_FS_EISDIR",qf="ERR_OUT_OF_RANGE";let mr=(r,e=wa.default.cwd())=>Tf(e,r);if(te.isWin){const r=mr;mr=(e,t)=>(0,te.unixify)(r(e,t))}function Ke(r,e){const n=mr(r,e).substring(1);return n?n.split(dt):[]}Xe.filenameToSteps=Ke;function zf(r){return Ke((0,te.pathToFilename)(r))}Xe.pathToSteps=zf;function Vf(r,e=Ft.ENCODING_UTF8){return Lt.Buffer.isBuffer(r)?r.toString(e):r instanceof Uint8Array?(0,Lt.bufferFrom)(r).toString(e):String(r)}Xe.dataToStr=Vf;function St(r){if(typeof r=="string"&&+r==r)return+r;if(r instanceof Date)return r.getTime()/1e3;if(isFinite(r))return r<0?Date.now()/1e3:r;throw new Error("Cannot parse time: "+r)}Xe.toUnixTimestamp=St;function Kt(r){if(typeof r!="number")throw TypeError(_r.ERRSTR.UID)}function Gt(r){if(typeof r!="number")throw TypeError(_r.ERRSTR.GID)}function Kf(r){const e={};function t(n,u){for(const p in u){const m=u[p],i=Pf(n,p);typeof m=="string"||m instanceof Lt.Buffer?e[i]=m:typeof m=="object"&&m!==null&&Object.keys(m).length>0?t(i,m):e[i]=null}}return t("",r),e}const bt=()=>{throw new Error("Not implemented")};class ir{static fromJSON(e,t){const n=new ir;return n.fromJSON(e,t),n}static fromNestedJSON(e,t){const n=new ir;return n.fromNestedJSON(e,t),n}get promises(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi}constructor(e={}){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=new Rf.FsPromises(this,Cf.FileHandle),this.statWatchers={},this.cpSync=bt,this.lutimesSync=bt,this.statfsSync=bt,this.opendirSync=bt,this.cp=bt,this.lutimes=bt,this.statfs=bt,this.openAsBlob=bt,this.opendir=bt,this.props=Object.assign({Node:en.Node,Link:en.Link,File:en.File},e);const t=this.createLink();t.setNode(this.createNode(!0));const n=this;this.StatWatcher=class extends Ra{constructor(){super(n)}};const u=vt;this.ReadStream=class extends u{constructor(...m){super(n,...m)}};const p=ht;this.WriteStream=class extends p{constructor(...m){super(n,...m)}},this.FSWatcher=class extends Ta{constructor(){super(n)}},t.setChild(".",t),t.getNode().nlink++,t.setChild("..",t),t.getNode().nlink++,this.root=t}createLink(e,t,n=!1,u){if(!e)return new this.props.Link(this,null,"");if(!t)throw new Error("createLink: name cannot be empty");return e.createChild(t,this.createNode(n,u))}deleteLink(e){const t=e.parent;return t?(t.deleteChild(e),!0):!1}newInoNumber(){const e=this.releasedInos.pop();return e||(this.ino=(this.ino+1)%4294967295,this.ino)}newFdNumber(){const e=this.releasedFds.pop();return typeof e=="number"?e:ir.fd--}createNode(e=!1,t){const n=new this.props.Node(this.newInoNumber(),t);return e&&n.setIsDirectory(),this.inodes[n.ino]=n,n}deleteNode(e){e.del(),delete this.inodes[e.ino],this.releasedInos.push(e.ino)}getLink(e){return this.root.walk(e)}getLinkOrThrow(e,t){const n=Ke(e),u=this.getLink(n);if(!u)throw(0,te.createError)(Ge,t,e);return u}getResolvedLink(e){let t=typeof e=="string"?Ke(e):e,n=this.root,u=0;for(;u<t.length;){const p=t[u];if(n=n.getChild(p),!n)return null;const m=n.getNode();if(m.isSymlink()){t=m.symlink.concat(t.slice(u+1)),n=this.root,u=0;continue}u++}return n}getResolvedLinkOrThrow(e,t){const n=this.getResolvedLink(e);if(!n)throw(0,te.createError)(Ge,t,e);return n}resolveSymlinks(e){return this.getResolvedLink(e.steps.slice(1))}getLinkAsDirOrThrow(e,t){const n=this.getLinkOrThrow(e,t);if(!n.getNode().isDirectory())throw(0,te.createError)(Vt,t,e);return n}getLinkParent(e){return this.root.walk(e,e.length-1)}getLinkParentAsDirOrThrow(e,t){const n=e instanceof Array?e:Ke(e),u=this.getLinkParent(n);if(!u)throw(0,te.createError)(Ge,t,dt+n.join(dt));if(!u.getNode().isDirectory())throw(0,te.createError)(Vt,t,dt+n.join(dt));return u}getFileByFd(e){return this.fds[String(e)]}getFileByFdOrThrow(e,t){if(!(0,te.isFd)(e))throw TypeError(_r.ERRSTR.FD);const n=this.getFileByFd(e);if(!n)throw(0,te.createError)(rn,t);return n}wrapAsync(e,t,n){(0,te.validateCallback)(n),(0,zt.default)(()=>{let u;try{u=e.apply(this,t)}catch(p){n(p);return}n(null,u)})}_toJSON(e=this.root,t={},n,u){let p=!0,m=e.children;e.getNode().isFile()&&(m=new Map([[e.getName(),e.parent.getChild(e.getName())]]),e=e.parent);for(const l of m.keys()){if(l==="."||l==="..")continue;p=!1;const h=e.getChild(l);if(!h)throw new Error("_toJSON: unexpected undefined");const b=h.getNode();if(b.isFile()){let f=h.getPath();n&&(f=pr(n,f)),t[f]=u?b.getBuffer():b.getString()}else b.isDirectory()&&this._toJSON(h,t,n)}let i=e.getPath();return n&&(i=pr(n,i)),i&&p&&(t[i]=null),t}toJSON(e,t={},n=!1,u=!1){const p=[];if(e){Array.isArray(e)||(e=[e]);for(const m of e){const i=(0,te.pathToFilename)(m),l=this.getResolvedLink(i);l&&p.push(l)}}else p.push(this.root);if(!p.length)return t;for(const m of p)this._toJSON(m,t,n?m.getPath():"",u);return t}fromJSON(e,t=wa.default.cwd()){for(let n in e){const u=e[n];if(n=mr(n,t),typeof u=="string"||u instanceof Lt.Buffer){const p=xf(n);this.mkdirpBase(p,511),this.writeFileSync(n,u)}else this.mkdirpBase(n,511)}}fromNestedJSON(e,t){this.fromJSON(Kf(e),t)}toTree(e={separator:dt}){return(0,Af.toTreeSync)(this,e)}reset(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))}mountSync(e,t){this.fromJSON(t,e)}openLink(e,t,n=!0){if(this.openFiles>=this.maxFiles)throw(0,te.createError)(jf,"open",e.getPath());let u=e;if(n&&(u=this.resolveSymlinks(e)),!u)throw(0,te.createError)(Ge,"open",e.getPath());const p=u.getNode();if(p.isDirectory()){if((t&(Zs|eo|Qs))!==Zs)throw(0,te.createError)(no,"open",e.getPath())}else if(t&Df)throw(0,te.createError)(Vt,"open",e.getPath());if(!(t&Qs)&&!p.canRead())throw(0,te.createError)(Uf,"open",e.getPath());const m=new this.props.File(e,p,t,this.newFdNumber());return this.fds[m.fd]=m,this.openFiles++,t&kf&&m.truncate(),m}openFile(e,t,n,u=!0){const p=Ke(e);let m=u?this.getResolvedLink(p):this.getLink(p);if(m&&t&Of)throw(0,te.createError)(Pt,"open",e);if(!m&&t&to){const i=this.getResolvedLink(p.slice(0,p.length-1));if(!i)throw(0,te.createError)(Ge,"open",dt+p.join(dt));t&to&&typeof n=="number"&&(m=this.createLink(i,p[p.length-1],!1,n))}if(m)return this.openLink(m,t,u);throw(0,te.createError)(Ge,"open",e)}openBase(e,t,n,u=!0){const p=this.openFile(e,t,n,u);if(!p)throw(0,te.createError)(Ge,"open",e);return p.fd}openSync(e,t,n=438){const u=(0,te.modeToNumber)(n),p=(0,te.pathToFilename)(e),m=(0,te.flagsToNumber)(t);return this.openBase(p,m,u,!(m&ro))}open(e,t,n,u){let p=n,m=u;typeof n=="function"&&(p=438,m=n),p=p||438;const i=(0,te.modeToNumber)(p),l=(0,te.pathToFilename)(e),h=(0,te.flagsToNumber)(t);this.wrapAsync(this.openBase,[l,h,i,!(h&ro)],m)}closeFile(e){this.fds[e.fd]&&(this.openFiles--,delete this.fds[e.fd],this.releasedFds.push(e.fd))}closeSync(e){(0,te.validateFd)(e);const t=this.getFileByFdOrThrow(e,"close");this.closeFile(t)}close(e,t){(0,te.validateFd)(e),this.wrapAsync(this.closeSync,[e],t)}openFileOrGetById(e,t,n){if(typeof e=="number"){const u=this.fds[e];if(!u)throw(0,te.createError)(Ge);return u}else return this.openFile((0,te.pathToFilename)(e),t,n)}readBase(e,t,n,u,p){if(t.byteLength<u)throw(0,te.createError)(qf,"read",void 0,void 0,RangeError);const m=this.getFileByFdOrThrow(e);if(m.node.isSymlink())throw(0,te.createError)(Ff,"read",m.link.getPath());return m.read(t,Number(n),Number(u),p===-1||typeof p!="number"?void 0:p)}readSync(e,t,n,u,p){return(0,te.validateFd)(e),this.readBase(e,t,n,u,p)}read(e,t,n,u,p,m){if((0,te.validateCallback)(m),u===0)return(0,oi.default)(()=>{m&&m(null,0,t)});(0,zt.default)(()=>{try{const i=this.readBase(e,t,n,u,p);m(null,i,t)}catch(i){m(i)}})}readvBase(e,t,n){const u=this.getFileByFdOrThrow(e);let p=n??void 0;p===-1&&(p=void 0);let m=0;for(const i of t){const l=u.read(i,0,i.byteLength,p);if(p=void 0,m+=l,l<i.byteLength)break}return m}readv(e,t,n,u){let p=n,m=u;typeof n=="function"&&(p=null,m=n),(0,te.validateCallback)(m),(0,zt.default)(()=>{try{const i=this.readvBase(e,t,p);m(null,i,t)}catch(i){m(i)}})}readvSync(e,t,n){return(0,te.validateFd)(e),this.readvBase(e,t,n)}readFileBase(e,t,n){let u;const m=typeof e=="number"&&(0,te.isFd)(e);let i;if(m)i=e;else{const l=(0,te.pathToFilename)(e),h=Ke(l),b=this.getResolvedLink(h);if(b&&b.getNode().isDirectory())throw(0,te.createError)(no,"open",b.getPath());i=this.openSync(e,t)}try{u=(0,te.bufferToEncoding)(this.getFileByFdOrThrow(i).getBuffer(),n)}finally{m||this.closeSync(i)}return u}readFileSync(e,t){const n=(0,Be.getReadFileOptions)(t),u=(0,te.flagsToNumber)(n.flag);return this.readFileBase(e,u,n.encoding)}readFile(e,t,n){const[u,p]=(0,Be.optsAndCbGenerator)(Be.getReadFileOptions)(t,n),m=(0,te.flagsToNumber)(u.flag);this.wrapAsync(this.readFileBase,[e,m,u.encoding],p)}writeBase(e,t,n,u,p){const m=this.getFileByFdOrThrow(e,"write");if(m.node.isSymlink())throw(0,te.createError)(rn,"write",m.link.getPath());return m.write(t,n,u,p===-1||typeof p!="number"?void 0:p)}writeSync(e,t,n,u,p){const[,m,i,l,h]=(0,te.getWriteSyncArgs)(e,t,n,u,p);return this.writeBase(e,m,i,l,h)}write(e,t,n,u,p,m){const[,i,l,h,b,f,y]=(0,te.getWriteArgs)(e,t,n,u,p,m);(0,zt.default)(()=>{try{const C=this.writeBase(e,l,h,b,f);i?y(null,C,t):y(null,C,l)}catch(C){y(C)}})}writevBase(e,t,n){const u=this.getFileByFdOrThrow(e);let p=n??void 0;p===-1&&(p=void 0);let m=0;for(const i of t){const l=Lt.Buffer.from(i.buffer,i.byteOffset,i.byteLength),h=u.write(l,0,l.byteLength,p);if(p=void 0,m+=h,h<l.byteLength)break}return m}writev(e,t,n,u){let p=n,m=u;typeof n=="function"&&(p=null,m=n),(0,te.validateCallback)(m),(0,zt.default)(()=>{try{const i=this.writevBase(e,t,p);m(null,i,t)}catch(i){m(i)}})}writevSync(e,t,n){return(0,te.validateFd)(e),this.writevBase(e,t,n)}writeFileBase(e,t,n,u){const p=typeof e=="number";let m;p?m=e:m=this.openBase((0,te.pathToFilename)(e),n,u);let i=0,l=t.length,h=n&Lf?void 0:0;try{for(;l>0;){const b=this.writeSync(m,t,i,l,h);i+=b,l-=b,h!==void 0&&(h+=b)}}finally{p||this.closeSync(m)}}writeFileSync(e,t,n){const u=(0,Be.getWriteFileOptions)(n),p=(0,te.flagsToNumber)(u.flag),m=(0,te.modeToNumber)(u.mode),i=(0,te.dataToBuffer)(t,u.encoding);this.writeFileBase(e,i,p,m)}writeFile(e,t,n,u){let p=n,m=u;typeof n=="function"&&(p=Be.writeFileDefaults,m=n);const i=(0,te.validateCallback)(m),l=(0,Be.getWriteFileOptions)(p),h=(0,te.flagsToNumber)(l.flag),b=(0,te.modeToNumber)(l.mode),f=(0,te.dataToBuffer)(t,l.encoding);this.wrapAsync(this.writeFileBase,[e,f,h,b],i)}linkBase(e,t){const n=Ke(e),u=this.getLink(n);if(!u)throw(0,te.createError)(Ge,"link",e,t);const p=Ke(t),m=this.getLinkParent(p);if(!m)throw(0,te.createError)(Ge,"link",e,t);const i=p[p.length-1];if(m.getChild(i))throw(0,te.createError)(Pt,"link",e,t);const l=u.getNode();l.nlink++,m.createChild(i,l)}copyFileBase(e,t,n){const u=this.readFileSync(e);if(n&Bf&&this.existsSync(t))throw(0,te.createError)(Pt,"copyFile",e,t);if(n&If)throw(0,te.createError)($f,"copyFile",e,t);this.writeFileBase(t,u,_r.FLAGS.w,438)}copyFileSync(e,t,n){const u=(0,te.pathToFilename)(e),p=(0,te.pathToFilename)(t);return this.copyFileBase(u,p,(n||0)|0)}copyFile(e,t,n,u){const p=(0,te.pathToFilename)(e),m=(0,te.pathToFilename)(t);let i,l;typeof n=="function"?(i=0,l=n):(i=n,l=u),(0,te.validateCallback)(l),this.wrapAsync(this.copyFileBase,[p,m,i],l)}linkSync(e,t){const n=(0,te.pathToFilename)(e),u=(0,te.pathToFilename)(t);this.linkBase(n,u)}link(e,t,n){const u=(0,te.pathToFilename)(e),p=(0,te.pathToFilename)(t);this.wrapAsync(this.linkBase,[u,p],n)}unlinkBase(e){const t=Ke(e),n=this.getLink(t);if(!n)throw(0,te.createError)(Ge,"unlink",e);if(n.length)throw Error("Dir not empty...");this.deleteLink(n);const u=n.getNode();u.nlink--,u.nlink<=0&&this.deleteNode(u)}unlinkSync(e){const t=(0,te.pathToFilename)(e);this.unlinkBase(t)}unlink(e,t){const n=(0,te.pathToFilename)(e);this.wrapAsync(this.unlinkBase,[n],t)}symlinkBase(e,t){const n=Ke(t),u=this.getLinkParent(n);if(!u)throw(0,te.createError)(Ge,"symlink",e,t);const p=n[n.length-1];if(u.getChild(p))throw(0,te.createError)(Pt,"symlink",e,t);const m=u.createChild(p);return m.getNode().makeSymlink(Ke(e)),m}symlinkSync(e,t,n){const u=(0,te.pathToFilename)(e),p=(0,te.pathToFilename)(t);this.symlinkBase(u,p)}symlink(e,t,n,u){const p=(0,te.validateCallback)(typeof n=="function"?n:u),m=(0,te.pathToFilename)(e),i=(0,te.pathToFilename)(t);this.wrapAsync(this.symlinkBase,[m,i],p)}realpathBase(e,t){const n=Ke(e),u=this.getResolvedLink(n);if(!u)throw(0,te.createError)(Ge,"realpath",e);return(0,Ft.strToEncoding)(u.getPath()||"/",t)}realpathSync(e,t){return this.realpathBase((0,te.pathToFilename)(e),(0,Be.getRealpathOptions)(t).encoding)}realpath(e,t,n){const[u,p]=(0,Be.getRealpathOptsAndCb)(t,n),m=(0,te.pathToFilename)(e);this.wrapAsync(this.realpathBase,[m,u.encoding],p)}lstatBase(e,t=!1,n=!1){const u=this.getLink(Ke(e));if(u)return tn.default.build(u.getNode(),t);if(n)throw(0,te.createError)(Ge,"lstat",e)}lstatSync(e,t){const{throwIfNoEntry:n=!0,bigint:u=!1}=(0,Be.getStatOptions)(t);return this.lstatBase((0,te.pathToFilename)(e),u,n)}lstat(e,t,n){const[{throwIfNoEntry:u=!0,bigint:p=!1},m]=(0,Be.getStatOptsAndCb)(t,n);this.wrapAsync(this.lstatBase,[(0,te.pathToFilename)(e),p,u],m)}statBase(e,t=!1,n=!0){const u=this.getResolvedLink(Ke(e));if(u)return tn.default.build(u.getNode(),t);if(n)throw(0,te.createError)(Ge,"stat",e)}statSync(e,t){const{bigint:n=!0,throwIfNoEntry:u=!0}=(0,Be.getStatOptions)(t);return this.statBase((0,te.pathToFilename)(e),n,u)}stat(e,t,n){const[{bigint:u=!1,throwIfNoEntry:p=!0},m]=(0,Be.getStatOptsAndCb)(t,n);this.wrapAsync(this.statBase,[(0,te.pathToFilename)(e),u,p],m)}fstatBase(e,t=!1){const n=this.getFileByFd(e);if(!n)throw(0,te.createError)(rn,"fstat");return tn.default.build(n.node,t)}fstatSync(e,t){return this.fstatBase(e,(0,Be.getStatOptions)(t).bigint)}fstat(e,t,n){const[u,p]=(0,Be.getStatOptsAndCb)(t,n);this.wrapAsync(this.fstatBase,[e,u.bigint],p)}renameBase(e,t){const n=this.getLink(Ke(e));if(!n)throw(0,te.createError)(Ge,"rename",e,t);const u=Ke(t),p=this.getLinkParent(u);if(!p)throw(0,te.createError)(Ge,"rename",e,t);const m=n.parent;m&&m.deleteChild(n);const i=u[u.length-1];n.name=i,n.steps=[...p.steps,i],p.setChild(n.getName(),n)}renameSync(e,t){const n=(0,te.pathToFilename)(e),u=(0,te.pathToFilename)(t);this.renameBase(n,u)}rename(e,t,n){const u=(0,te.pathToFilename)(e),p=(0,te.pathToFilename)(t);this.wrapAsync(this.renameBase,[u,p],n)}existsBase(e){return!!this.statBase(e)}existsSync(e){try{return this.existsBase((0,te.pathToFilename)(e))}catch{return!1}}exists(e,t){const n=(0,te.pathToFilename)(e);if(typeof t!="function")throw Error(_r.ERRSTR.CB);(0,zt.default)(()=>{try{t(this.existsBase(n))}catch{t(!1)}})}accessBase(e,t){this.getLinkOrThrow(e,"access")}accessSync(e,t=io){const n=(0,te.pathToFilename)(e);t=t|0,this.accessBase(n,t)}access(e,t,n){let u=io,p;typeof t!="function"?(u=t|0,p=(0,te.validateCallback)(n)):p=t;const m=(0,te.pathToFilename)(e);this.wrapAsync(this.accessBase,[m,u],p)}appendFileSync(e,t,n){const u=(0,Be.getAppendFileOpts)(n);(!u.flag||(0,te.isFd)(e))&&(u.flag="a"),this.writeFileSync(e,t,u)}appendFile(e,t,n,u){const[p,m]=(0,Be.getAppendFileOptsAndCb)(n,u);(!p.flag||(0,te.isFd)(e))&&(p.flag="a"),this.writeFile(e,t,p,m)}readdirBase(e,t){const n=Ke(e),u=this.getResolvedLink(n);if(!u)throw(0,te.createError)(Ge,"readdir",e);if(!u.getNode().isDirectory())throw(0,te.createError)(Vt,"scandir",e);const m=[];for(const l of u.children.keys()){const h=u.getChild(l);if(!(!h||l==="."||l==="..")&&(m.push(Sf.default.build(h,t.encoding)),t.recursive&&h.children.size)){const b=Object.assign(Object.assign({},t),{recursive:!0,withFileTypes:!0}),f=this.readdirBase(h.getPath(),b);m.push(...f)}}if(!te.isWin&&t.encoding!=="buffer"&&m.sort((l,h)=>l.name<h.name?-1:l.name>h.name?1:0),t.withFileTypes)return m;let i=e;return te.isWin&&(i=i.replace(/\\/g,"/")),m.map(l=>t.recursive?l.path.replace(i+dr.posix.sep,""):l.name)}readdirSync(e,t){const n=(0,Be.getReaddirOptions)(t),u=(0,te.pathToFilename)(e);return this.readdirBase(u,n)}readdir(e,t,n){const[u,p]=(0,Be.getReaddirOptsAndCb)(t,n),m=(0,te.pathToFilename)(e);this.wrapAsync(this.readdirBase,[m,u],p)}readlinkBase(e,t){const u=this.getLinkOrThrow(e,"readlink").getNode();if(!u.isSymlink())throw(0,te.createError)(Nf,"readlink",e);const p=dt+u.symlink.join(dt);return(0,Ft.strToEncoding)(p,t)}readlinkSync(e,t){const n=(0,Be.getDefaultOpts)(t),u=(0,te.pathToFilename)(e);return this.readlinkBase(u,n.encoding)}readlink(e,t,n){const[u,p]=(0,Be.getDefaultOptsAndCb)(t,n),m=(0,te.pathToFilename)(e);this.wrapAsync(this.readlinkBase,[m,u.encoding],p)}fsyncBase(e){this.getFileByFdOrThrow(e,"fsync")}fsyncSync(e){this.fsyncBase(e)}fsync(e,t){this.wrapAsync(this.fsyncBase,[e],t)}fdatasyncBase(e){this.getFileByFdOrThrow(e,"fdatasync")}fdatasyncSync(e){this.fdatasyncBase(e)}fdatasync(e,t){this.wrapAsync(this.fdatasyncBase,[e],t)}ftruncateBase(e,t){this.getFileByFdOrThrow(e,"ftruncate").truncate(t)}ftruncateSync(e,t){this.ftruncateBase(e,t)}ftruncate(e,t,n){const u=typeof t=="number"?t:0,p=(0,te.validateCallback)(typeof t=="number"?n:t);this.wrapAsync(this.ftruncateBase,[e,u],p)}truncateBase(e,t){const n=this.openSync(e,"r+");try{this.ftruncateSync(n,t)}finally{this.closeSync(n)}}truncateSync(e,t){if((0,te.isFd)(e))return this.ftruncateSync(e,t);this.truncateBase(e,t)}truncate(e,t,n){const u=typeof t=="number"?t:0,p=(0,te.validateCallback)(typeof t=="number"?n:t);if((0,te.isFd)(e))return this.ftruncate(e,u,p);this.wrapAsync(this.truncateBase,[e,u],p)}futimesBase(e,t,n){const p=this.getFileByFdOrThrow(e,"futimes").node;p.atime=new Date(t*1e3),p.mtime=new Date(n*1e3)}futimesSync(e,t,n){this.futimesBase(e,St(t),St(n))}futimes(e,t,n,u){this.wrapAsync(this.futimesBase,[e,St(t),St(n)],u)}utimesBase(e,t,n){const u=this.openSync(e,"r");try{this.futimesBase(u,t,n)}finally{this.closeSync(u)}}utimesSync(e,t,n){this.utimesBase((0,te.pathToFilename)(e),St(t),St(n))}utimes(e,t,n,u){this.wrapAsync(this.utimesBase,[(0,te.pathToFilename)(e),St(t),St(n)],u)}mkdirBase(e,t){const n=Ke(e);if(!n.length)throw(0,te.createError)(Pt,"mkdir",e);const u=this.getLinkParentAsDirOrThrow(e,"mkdir"),p=n[n.length-1];if(u.getChild(p))throw(0,te.createError)(Pt,"mkdir",e);u.createChild(p,this.createNode(!0,t))}mkdirpBase(e,t){const n=mr(e),u=n.substring(1),p=u?u.split(dt):[];let m=this.root,i=!1;for(let l=0;l<p.length;l++){const h=p[l];if(!m.getNode().isDirectory())throw(0,te.createError)(Vt,"mkdir",m.getPath());const b=m.getChild(h);if(b)if(b.getNode().isDirectory())m=b;else throw(0,te.createError)(Vt,"mkdir",b.getPath());else m=m.createChild(h,this.createNode(!0,t)),i=!0}return i?n:void 0}mkdirSync(e,t){const n=(0,Be.getMkdirOptions)(t),u=(0,te.modeToNumber)(n.mode,511),p=(0,te.pathToFilename)(e);if(n.recursive)return this.mkdirpBase(p,u);this.mkdirBase(p,u)}mkdir(e,t,n){const u=(0,Be.getMkdirOptions)(t),p=(0,te.validateCallback)(typeof t=="function"?t:n),m=(0,te.modeToNumber)(u.mode,511),i=(0,te.pathToFilename)(e);u.recursive?this.wrapAsync(this.mkdirpBase,[i,m],p):this.wrapAsync(this.mkdirBase,[i,m],p)}mkdtempBase(e,t,n=5){const u=e+(0,te.genRndStr6)();try{return this.mkdirBase(u,511),(0,Ft.strToEncoding)(u,t)}catch(p){if(p.code===Pt){if(n>1)return this.mkdtempBase(e,t,n-1);throw Error("Could not create temp dir.")}else throw p}}mkdtempSync(e,t){const{encoding:n}=(0,Be.getDefaultOpts)(t);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");return(0,te.nullCheck)(e),this.mkdtempBase(e,n)}mkdtemp(e,t,n){const[{encoding:u},p]=(0,Be.getDefaultOptsAndCb)(t,n);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");(0,te.nullCheck)(e)&&this.wrapAsync(this.mkdtempBase,[e,u],p)}rmdirBase(e,t){const n=(0,Be.getRmdirOptions)(t),u=this.getLinkAsDirOrThrow(e,"rmdir");if(u.length&&!n.recursive)throw(0,te.createError)(Hf,"rmdir",e);this.deleteLink(u)}rmdirSync(e,t){this.rmdirBase((0,te.pathToFilename)(e),t)}rmdir(e,t,n){const u=(0,Be.getRmdirOptions)(t),p=(0,te.validateCallback)(typeof t=="function"?t:n);this.wrapAsync(this.rmdirBase,[(0,te.pathToFilename)(e),u],p)}rmBase(e,t={}){const n=this.getResolvedLink(e);if(!n){if(!t.force)throw(0,te.createError)(Ge,"stat",e);return}if(n.getNode().isDirectory()&&!t.recursive)throw(0,te.createError)(Wf,"rm",e);this.deleteLink(n)}rmSync(e,t){this.rmBase((0,te.pathToFilename)(e),t)}rm(e,t,n){const[u,p]=(0,Be.getRmOptsAndCb)(t,n);this.wrapAsync(this.rmBase,[(0,te.pathToFilename)(e),u],p)}fchmodBase(e,t){this.getFileByFdOrThrow(e,"fchmod").chmod(t)}fchmodSync(e,t){this.fchmodBase(e,(0,te.modeToNumber)(t))}fchmod(e,t,n){this.wrapAsync(this.fchmodBase,[e,(0,te.modeToNumber)(t)],n)}chmodBase(e,t){const n=this.openSync(e,"r");try{this.fchmodBase(n,t)}finally{this.closeSync(n)}}chmodSync(e,t){const n=(0,te.modeToNumber)(t),u=(0,te.pathToFilename)(e);this.chmodBase(u,n)}chmod(e,t,n){const u=(0,te.modeToNumber)(t),p=(0,te.pathToFilename)(e);this.wrapAsync(this.chmodBase,[p,u],n)}lchmodBase(e,t){const n=this.openBase(e,eo,0,!1);try{this.fchmodBase(n,t)}finally{this.closeSync(n)}}lchmodSync(e,t){const n=(0,te.modeToNumber)(t),u=(0,te.pathToFilename)(e);this.lchmodBase(u,n)}lchmod(e,t,n){const u=(0,te.modeToNumber)(t),p=(0,te.pathToFilename)(e);this.wrapAsync(this.lchmodBase,[p,u],n)}fchownBase(e,t,n){this.getFileByFdOrThrow(e,"fchown").chown(t,n)}fchownSync(e,t,n){Kt(t),Gt(n),this.fchownBase(e,t,n)}fchown(e,t,n,u){Kt(t),Gt(n),this.wrapAsync(this.fchownBase,[e,t,n],u)}chownBase(e,t,n){this.getResolvedLinkOrThrow(e,"chown").getNode().chown(t,n)}chownSync(e,t,n){Kt(t),Gt(n),this.chownBase((0,te.pathToFilename)(e),t,n)}chown(e,t,n,u){Kt(t),Gt(n),this.wrapAsync(this.chownBase,[(0,te.pathToFilename)(e),t,n],u)}lchownBase(e,t,n){this.getLinkOrThrow(e,"lchown").getNode().chown(t,n)}lchownSync(e,t,n){Kt(t),Gt(n),this.lchownBase((0,te.pathToFilename)(e),t,n)}lchown(e,t,n,u){Kt(t),Gt(n),this.wrapAsync(this.lchownBase,[(0,te.pathToFilename)(e),t,n],u)}watchFile(e,t,n){const u=(0,te.pathToFilename)(e);let p=t,m=n;if(typeof p=="function"&&(m=t,p=null),typeof m!="function")throw Error('"watchFile()" requires a listener function');let i=5007,l=!0;p&&typeof p=="object"&&(typeof p.interval=="number"&&(i=p.interval),typeof p.persistent=="boolean"&&(l=p.persistent));let h=this.statWatchers[u];return h||(h=new this.StatWatcher,h.start(u,l,i),this.statWatchers[u]=h),h.addListener("change",m),h}unwatchFile(e,t){const n=(0,te.pathToFilename)(e),u=this.statWatchers[n];u&&(typeof t=="function"?u.removeListener("change",t):u.removeAllListeners("change"),u.listenerCount("change")===0&&(u.stop(),delete this.statWatchers[n]))}createReadStream(e,t){return new this.ReadStream(e,t)}createWriteStream(e,t){return new this.WriteStream(e,t)}watch(e,t,n){const u=(0,te.pathToFilename)(e);let p=t;typeof t=="function"&&(n=t,p=null);let{persistent:m,recursive:i,encoding:l}=(0,Be.getDefaultOpts)(p);m===void 0&&(m=!0),i===void 0&&(i=!1);const h=new this.FSWatcher;return h.start(u,m,i,l),n&&h.addListener("change",n),h}}Xe.Volume=ir;ir.fd=2147483647;function Gf(r){r.emit("stop")}class Ra extends Ea.EventEmitter{constructor(e){super(),this.onInterval=()=>{try{const t=this.vol.statSync(this.filename);this.hasChanged(t)&&(this.emit("change",t,this.prev),this.prev=t)}finally{this.loop()}},this.vol=e}loop(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)}hasChanged(e){return e.mtimeMs>this.prev.mtimeMs||e.nlink!==this.prev.nlink}start(e,t=!0,n=5007){this.filename=(0,te.pathToFilename)(e),this.setTimeout=t?setTimeout.bind(typeof globalThis<"u"?globalThis:Ze):wf.default,this.interval=n,this.prev=this.vol.statSync(this.filename),this.loop()}stop(){clearTimeout(this.timeoutRef),(0,oi.default)(()=>{Gf.call(this,this)})}}Xe.StatWatcher=Ra;var ot;function Yf(r){ot=(0,Lt.bufferAllocUnsafe)(r),ot.used=0}Ca.inherits(vt,ai.Readable);Xe.ReadStream=vt;function vt(r,e,t){if(!(this instanceof vt))return new vt(r,e,t);if(this._vol=r,t=Object.assign({},(0,Be.getOptions)(t,{})),t.highWaterMark===void 0&&(t.highWaterMark=64*1024),ai.Readable.call(this,t),this.path=(0,te.pathToFilename)(e),this.fd=t.fd===void 0?null:t.fd,this.flags=t.flags===void 0?"r":t.flags,this.mode=t.mode===void 0?438:t.mode,this.start=t.start,this.end=t.end,this.autoClose=t.autoClose===void 0?!0:t.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}vt.prototype.open=function(){var r=this;this._vol.open(this.path,this.flags,this.mode,(e,t)=>{if(e){r.autoClose&&r.destroy&&r.destroy(),r.emit("error",e);return}r.fd=t,r.emit("open",t),r.read()})};vt.prototype._read=function(r){if(typeof this.fd!="number")return this.once("open",function(){this._read(r)});if(this.destroyed)return;(!ot||ot.length-ot.used<Mf)&&Yf(this._readableState.highWaterMark);var e=ot,t=Math.min(ot.length-ot.used,r),n=ot.used;if(this.pos!==void 0&&(t=Math.min(this.end-this.pos+1,t)),t<=0)return this.push(null);var u=this;this._vol.read(this.fd,ot,ot.used,t,this.pos,p),this.pos!==void 0&&(this.pos+=t),ot.used+=t;function p(m,i){if(m)u.autoClose&&u.destroy&&u.destroy(),u.emit("error",m);else{var l=null;i>0&&(u.bytesRead+=i,l=e.slice(n,n+i)),u.push(l)}}};vt.prototype._destroy=function(r,e){this.close(t=>{e(r||t)})};vt.prototype.close=function(r){var e;if(r&&this.once("close",r),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",Aa);return}return(0,oi.default)(()=>this.emit("close"))}typeof((e=this._readableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,t=>{t?this.emit("error",t):this.emit("close")}),this.fd=null};function Aa(r){this.close()}Ca.inherits(ht,ai.Writable);Xe.WriteStream=ht;function ht(r,e,t){if(!(this instanceof ht))return new ht(r,e,t);if(this._vol=r,t=Object.assign({},(0,Be.getOptions)(t,{})),ai.Writable.call(this,t),this.path=(0,te.pathToFilename)(e),this.fd=t.fd===void 0?null:t.fd,this.flags=t.flags===void 0?"w":t.flags,this.mode=t.mode===void 0?438:t.mode,this.start=t.start,this.autoClose=t.autoClose===void 0?!0:!!t.autoClose,this.pos=void 0,this.bytesWritten=0,this.pending=!0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}t.encoding&&this.setDefaultEncoding(t.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}ht.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,(function(r,e){if(r){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",r);return}this.fd=e,this.pending=!1,this.emit("open",e)}).bind(this))};ht.prototype._write=function(r,e,t){if(!(r instanceof Lt.Buffer||r instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(r,e,t)});var n=this;this._vol.write(this.fd,r,0,r.length,this.pos,(u,p)=>{if(u)return n.autoClose&&n.destroy&&n.destroy(),t(u);n.bytesWritten+=p,t()}),this.pos!==void 0&&(this.pos+=r.length)};ht.prototype._writev=function(r,e){if(typeof this.fd!="number")return this.once("open",function(){this._writev(r,e)});const t=this,n=r.length,u=new Array(n);for(var p=0,m=0;m<n;m++){var i=r[m].chunk;u[m]=i,p+=i.length}const l=Lt.Buffer.concat(u);this._vol.write(this.fd,l,0,l.length,this.pos,(h,b)=>{if(h)return t.destroy&&t.destroy(),e(h);t.bytesWritten+=b,e()}),this.pos!==void 0&&(this.pos+=p)};ht.prototype.close=function(r){var e;if(r&&this.once("close",r),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",Aa);return}return(0,oi.default)(()=>this.emit("close"))}typeof((e=this._writableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,t=>{t?this.emit("error",t):this.emit("close")}),this.fd=null};ht.prototype._destroy=vt.prototype._destroy;ht.prototype.destroySoon=ht.prototype.end;class Ta extends Ea.EventEmitter{constructor(e){super(),this._filename="",this._filenameEncoded="",this._recursive=!1,this._encoding=Ft.ENCODING_UTF8,this._listenerRemovers=new Map,this._onParentChild=t=>{t.getName()===this._getName()&&this._emit("rename")},this._emit=t=>{this.emit("change",t,this._filenameEncoded)},this._persist=()=>{this._timer=setTimeout(this._persist,1e6)},this._vol=e}_getName(){return this._steps[this._steps.length-1]}start(e,t=!0,n=!1,u=Ft.ENCODING_UTF8){this._filename=(0,te.pathToFilename)(e),this._steps=Ke(this._filename),this._filenameEncoded=(0,Ft.strToEncoding)(this._filename),this._recursive=n,this._encoding=u;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(l){const h=new Error(`watch ${this._filename} ${l.code}`);throw h.code=l.code,h.errno=l.code,h}const p=l=>{var h;const b=l.getPath(),f=l.getNode(),y=()=>{let w=pr(this._filename,b);return w||(w=this._getName()),this.emit("change","change",w)};f.on("change",y);const C=(h=this._listenerRemovers.get(f.ino))!==null&&h!==void 0?h:[];C.push(()=>f.removeListener("change",y)),this._listenerRemovers.set(f.ino,C)},m=l=>{var h;const b=l.getNode(),f=w=>{this.emit("change","rename",pr(this._filename,w.getPath())),setTimeout(()=>{p(w),m(w)})},y=w=>{const S=a=>{const s=a.getNode().ino,o=this._listenerRemovers.get(s);o&&(o.forEach(c=>c()),this._listenerRemovers.delete(s));for(const[c,d]of a.children.entries())d&&c!=="."&&c!==".."&&S(d)};S(w),this.emit("change","rename",pr(this._filename,w.getPath()))};for(const[w,S]of l.children.entries())S&&w!=="."&&w!==".."&&p(S);if(l.on("child:add",f),l.on("child:delete",y),((h=this._listenerRemovers.get(b.ino))!==null&&h!==void 0?h:[]).push(()=>{l.removeListener("child:add",f),l.removeListener("child:delete",y)}),n)for(const[w,S]of l.children.entries())S&&w!=="."&&w!==".."&&m(S)};p(this._link),m(this._link);const i=this._link.parent;i&&(i.setMaxListeners(i.getMaxListeners()+1),i.on("child:delete",this._onParentChild)),t&&this._persist()}close(){clearTimeout(this._timer),this._listenerRemovers.forEach(t=>{t.forEach(n=>n())}),this._listenerRemovers.clear();const e=this._link.parent;e&&e.removeListener("child:delete",this._onParentChild)}}Xe.FSWatcher=Ta;var li={};Object.defineProperty(li,"__esModule",{value:!0});li.fsSynchronousApiList=void 0;li.fsSynchronousApiList=["accessSync","appendFileSync","chmodSync","chownSync","closeSync","copyFileSync","existsSync","fchmodSync","fchownSync","fdatasyncSync","fstatSync","fsyncSync","ftruncateSync","futimesSync","lchmodSync","lchownSync","linkSync","lstatSync","mkdirSync","mkdtempSync","openSync","readdirSync","readFileSync","readlinkSync","readSync","readvSync","realpathSync","renameSync","rmdirSync","rmSync","statSync","symlinkSync","truncateSync","unlinkSync","utimesSync","writeFileSync","writeSync","writevSync"];var ci={};Object.defineProperty(ci,"__esModule",{value:!0});ci.fsCallbackApiList=void 0;ci.fsCallbackApiList=["access","appendFile","chmod","chown","close","copyFile","createReadStream","createWriteStream","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readv","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","unwatchFile","utimes","watch","watchFile","write","writev","writeFile"];(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.memfs=e.fs=e.createFsFromVolume=e.vol=e.Volume=void 0;const t=jt,n=ar,u=Xe,p=yt,m=li,i=ci,{F_OK:l,R_OK:h,W_OK:b,X_OK:f}=p.constants;e.Volume=u.Volume,e.vol=new u.Volume;function y(w){const S={F_OK:l,R_OK:h,W_OK:b,X_OK:f,constants:p.constants,Stats:t.default,Dirent:n.default};for(const a of m.fsSynchronousApiList)typeof w[a]=="function"&&(S[a]=w[a].bind(w));for(const a of i.fsCallbackApiList)typeof w[a]=="function"&&(S[a]=w[a].bind(w));return S.StatWatcher=w.StatWatcher,S.FSWatcher=w.FSWatcher,S.WriteStream=w.WriteStream,S.ReadStream=w.ReadStream,S.promises=w.promises,S._toUnixTimestamp=u.toUnixTimestamp,S.__vol=w,S}e.createFsFromVolume=y,e.fs=y(e.vol);const C=(w={},S="/")=>{const a=e.Volume.fromNestedJSON(w,S);return{fs:y(a),vol:a}};e.memfs=C,r.exports=Object.assign(Object.assign({},r.exports),e.fs),r.exports.semantic=!0})(hn,hn.exports);var Xf=hn.exports;const Jf={Mello_OS:{home:{desktop:{},documents:{},pictures:{}}}};let Rt=Xf.memfs(Jf).vol;function Zf(){var e,t;let r=(t=(e=Rt.root.getChild("Mello_OS"))==null?void 0:e.getChild("home"))==null?void 0:t.getPath();return r==null?void 0:r.replaceAll("/","\\")}function Kr(r,e){r=r==null?void 0:r.replaceAll("\\","/"),e=e.replaceAll("\\","/");let t=Rt.getResolvedLink(`${r}/${e}`),n=Rt.getResolvedLink(e);if(t)return t.getPath().replaceAll("/","\\");if(n)return n.getPath().replaceAll("/","\\")}function Oa(r,e=void 0){var t;return r=r==null?void 0:r.replaceAll("\\","/"),e?(e=Kr(r,e),e?(e=e.replaceAll("\\","/"),Rt.readdirSync(e)):[]):(e=(t=Rt.getResolvedLink(r))==null?void 0:t.getPath(),Rt.readdirSync(e))}function Qf(r,e){r=r==null?void 0:r.replaceAll("\\","/"),e=e.replaceAll("\\","/");let t=`${r}/${e}`;Rt.mkdirSync(t,{recursive:!0})}function ed(r,e,t=[]){r=r==null?void 0:r.replaceAll("\\","/"),e=e.replaceAll("\\","/");let n=!1;if(t.includes("/s")&&(n=!0),Oa(r,e).length>0&&!n)return"Directory is not empty";if(r===`${r}/${e}`)return"Cannot delete current directory";let u=`${r}/${e}`;return Rt.rmdirSync(u,{recursive:n}),"Directory removed"}function td(r,e){r.writeln("For more information on a specific command, type help command-name ");for(let[t,n]of Object.entries(e))r.writeln(`${t}: ${n.description}`)}async function rd(r){r.clear()}function id(r,e){r.writeln(e.join(" "))}function nd(r){var e,t,n,u,p,m;(m=(p=(u=(n=(t=(e=r.element)==null?void 0:e.parentElement)==null?void 0:t.parentElement)==null?void 0:n.parentElement)==null?void 0:u.parentElement)==null?void 0:p.parentElement)==null||m.remove(),r.dispose()}function sd(r,e,t){if(e.length===0)r.writeln(`C:${t.current_dir}`);else{let n=Kr(t.current_dir,e[0]);Kr(t.current_dir,e[0])&&(t.current_dir=n,t.setPrompt(t.current_dir))}}function od(r,e,t){for(let n of Oa(t.current_dir,e[0]))r.writeln(n)}function ad(r,e,t){if(e.length===0){r.writeln("Error: No path argument found");return}Qf(t.current_dir,e[0]),r.writeln("Directory created")}function ld(r,e,t){if(e.length===0){r.writeln("Error: No path argument found");return}let n=e.shift();if(!Kr(t.current_dir,n)){r.writeln("Path doesnt exist or is not valid");return}let u=hd(e,["/s","/q"],2);u.status?r.writeln(ed(t.current_dir,n,e)):r.writeln(u.message)}let nn=2;async function cd(r){if(nn!=0)r.writeln("access: PERMISSION DENIED."),nn--;else return new Promise(e=>{nn=3,r.writeln("access: PERMISSION DENIED....and....."),setTimeout(()=>{new Ml({target:document.getElementById("icons"),props:{name:"DENIED",index:10}})},5e3);let t;setTimeout(()=>{t=setInterval(()=>{new go({target:document.getElementById("icons"),props:{randomPos:!0,type:"alert",action_type:"error",title:"YOU DIDNT SAY THE MAGIC WORD",message:"ERROR: YOU DIDNT SAY THE MAGIC WORD"}})},1e3)},7e3);let n=setInterval(()=>{r.writeln("YOU DIDN'T SAY THE MAGIC WORD!")},100);setTimeout(()=>{e(""),r.writeln("ERROR: PleAsE...HATE THIS HACKER CRAP....ABORTING..."),clearInterval(n),clearInterval(t)},2e4)})}function hd(r,e,t){if(r.length>t)return{status:!1,message:"Error: Invalid flag count"};for(let n of r)if(!e.includes(n))return{status:!1,message:`Error: '${n}' not valid in command`};return{status:!0,message:""}}class ud{constructor(e,t){st(this,"term");st(this,"command","");st(this,"commands",{});st(this,"_cmd");this.term=e,this._cmd=t,this.commands={help:{description:"Prints all commands",syntax:"help [command]",args:["command"],argsd:"command - display help info on that command",function:n=>td(n,this.commands)},cls:{description:"Clear Terminal",syntax:"cls",function:n=>{rd(n)}},echo:{description:"Displays messages",syntax:"echo [message]",args:["message"],argsd:"message - text to display",function:(n,u)=>{id(n,u)}},exit:{description:"Quits CMD program",syntax:"exit",function:n=>{nd(n)}},access:{description:"Attempt to access a security system",syntax:"access <message>",argsd:"message - thing to access",function:async n=>{await cd(n)}},cd:{description:"Displays the name of or changes the current directory",syntax:"cd [path]",argsd:"path - path of directory",function:(n,u)=>{sd(n,u,this._cmd)}},dir:{description:"Displays a list of a directory's files",syntax:"dir [path]",argsd:"path - path of directory",function:(n,u)=>{od(n,u,this._cmd)}},mkdir:{description:"Creates a directory",syntax:"mkdir <path>",argsd:"path - path of directory",function:(n,u)=>{ad(n,u,this._cmd)}},rmdir:{description:"Removes a directory",syntax:"rmdir <path> [/s]",argsd:`path - path of directory\r
	/s - deletes directory including subdirectories/files`,function:(n,u)=>{ld(n,u,this._cmd)}}}}addCommandChar(e){this.command+=e}async executeCommand(){let e=this.command.trim();if(e.length===0)return;let t=e.split(" "),n=t.shift()??"";if(this.command=n,!(this.command in this.commands)){this.term.writeln(`${this.command}: command not found`),this.command="";return}t[0]==="/?"?this.fetchHelp():await this.commands[this.command].function(this.term,t),this.command=""}removeCommandChar(){this.commandLength()>0&&(this.command=this.command.substring(0,this.command.length-1))}commandLength(){return this.command.length}fetchHelp(){this.commands[this.command]&&(this.term.writeln(`${this.commands[this.command].description}\r
`),this.term.writeln(`syntax: ${this.commands[this.command].syntax}`),this.commands[this.command].argsd&&this.term.writeln(`	${this.commands[this.command].argsd}`))}}var fd={foreground:"#F8F8F8",background:"#000",selection:"#5DA5D533",black:"#1E1E1D",brightBlack:"#262625",red:"#CE5C5C",brightRed:"#FF7272",green:"#5BCC5B",brightGreen:"#72FF72",yellow:"#CCCC5B",brightYellow:"#FFFF72",blue:"#5D5DD3",brightBlue:"#7279FF",magenta:"#BC5ED1",brightMagenta:"#E572FF",cyan:"#5DA5D5",brightCyan:"#72F0FF",white:"#F8F8F8",brightWhite:"#FFFFFF"};class dd{constructor(e){st(this,"term",new Dl.Terminal({allowProposedApi:!0,cursorBlink:!0,fontFamily:"VT323",theme:fd}));st(this,"termFit",new Vn.FitAddon);st(this,"commands");st(this,"current_dir",Zf());st(this,"_prompt",`C:${this.current_dir}>`);this.termFit=new Vn.FitAddon,this.term.loadAddon(this.termFit),this.term.open(e),this.termFit.fit(),this.term.focus(),new ResizeObserver(n=>{this.termFit.fit()}).observe(e),this.commands=new ud(this.term,this)}initTerm(){this.term.writeln("Mellosoft(R) Mello OS"),this.term.writeln("Copyright (C) Mellosoft Inc. All rights nonexistent."),this.prompt(),this.term.onData(async e=>{switch(e){case"":this.term.write("^C"),this.prompt();break;case"\r":this.term.writeln(""),await this.commands.executeCommand(),this.prompt();break;case"":this.term.buffer.normal.cursorX>this._prompt.length+1&&(this.term.write("\b \b"),this.commands.removeCommandChar());break;default:(e>=" "&&e<="~"||e>=" ")&&(this.term.write(e),this.commands.addCommandChar(e));break}})}prompt(){this.term.write(`\r
${this._prompt} `)}setPrompt(e){this._prompt=`C:${e}>`}}function _d(r){let e;return{c(){e=we("div"),_e(e,"class","input svelte-gmag9t")},m(t,n){xe(t,e,n),r[3](e)},p:$e,d(t){t&&Ie(e),r[3](null)}}}function pd(r){let e,t,n;return t=new yr({props:{height:"100%",_class:"cmd-container",inset:!1,$$slots:{default:[_d]},$$scope:{ctx:r}}}),{c(){e=we("div"),De(t.$$.fragment),_e(e,"class","cmd svelte-gmag9t")},m(u,p){xe(u,e,p),ke(t,e,null),n=!0},p(u,p){const m={};p&36&&(m.$$scope={dirty:p,ctx:u}),t.$set(m)},i(u){n||(Te(t.$$.fragment,u),n=!0)},o(u){Oe(t.$$.fragment,u),n=!1},d(u){u&&Ie(e),Le(t)}}}function gd(r){let e,t;return e=new at({props:{name:r[1],index:r[0],$$slots:{default:[pd]},$$scope:{ctx:r}}}),{c(){De(e.$$.fragment)},m(n,u){ke(e,n,u),t=!0},p(n,[u]){const p={};u&2&&(p.name=n[1]),u&1&&(p.index=n[0]),u&36&&(p.$$scope={dirty:u,ctx:n}),e.$set(p)},i(n){t||(Te(e.$$.fragment,n),t=!0)},o(n){Oe(e.$$.fragment,n),t=!1},d(n){Le(e,n)}}}function md(r,e,t){let{index:n}=e,{name:u}=e,p,m;Dt(()=>{m=new dd(p),m.initTerm()});function i(l){it[l?"unshift":"push"](()=>{p=l,t(2,p)})}return r.$$set=l=>{"index"in l&&t(0,n=l.index),"name"in l&&t(1,u=l.name)},[n,u,p,i]}class vd extends tt{constructor(e){super(),et(this,e,md,gd,Qe,{index:0,name:1})}}function yd(r){let e,t,n,u,p,m,i,l,h,b,f,y,C,w,S,a,s,o,c,d,_,E,k,v,O,M,$;return u=new ft({props:{name:"Welcome",icon:"https://win98icons.alexmeub.com/icons/png/world-3.png",program:ml}}),m=new ft({props:{name:"Notepad",icon:"https://win98icons.alexmeub.com/icons/png/notepad-4.png",program:wl}}),l=new ft({props:{name:"Wallet",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/briefcase-0.png",program:kl}}),b=new ft({props:{name:"Not Dark Web",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/msagent-3.png",program:at}}),y=new ft({props:{name:"CMD",icon:"https://win98icons.alexmeub.com/icons/png/console_prompt-0.png",program:vd}}),w=new ft({props:{name:"Calendar",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/calendar-3.png",program:at}}),a=new ft({props:{name:"Not A Tracker",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/camera_2-0.png",program:at}}),o=new ft({props:{name:"Internet",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/search_web-0.png",program:at}}),d=new ft({props:{name:"Finder",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/magnifying_glass_4-1.png",program:at}}),E=new ft({props:{name:"Vacations",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/kodak_imaging-0.png",program:at}}),v=new ft({props:{name:"Program",error:!0,program:at}}),M=new ll({props:{alignment:"bottom"}}),{c(){e=we("div"),t=we("div"),n=we("div"),De(u.$$.fragment),p=je(),De(m.$$.fragment),i=je(),De(l.$$.fragment),h=je(),De(b.$$.fragment),f=je(),De(y.$$.fragment),C=je(),De(w.$$.fragment),S=je(),De(a.$$.fragment),s=je(),De(o.$$.fragment),c=je(),De(d.$$.fragment),_=je(),De(E.$$.fragment),k=je(),De(v.$$.fragment),O=je(),De(M.$$.fragment),_e(n,"id","icons-list"),_e(n,"class","svelte-1gvfuer"),_e(t,"id","icons"),_e(t,"class","svelte-1gvfuer"),_e(e,"id","desktop"),_e(e,"class","svelte-1gvfuer")},m(L,q){xe(L,e,q),be(e,t),be(t,n),ke(u,n,null),be(n,p),ke(m,n,null),be(n,i),ke(l,n,null),be(n,h),ke(b,n,null),be(n,f),ke(y,n,null),be(n,C),ke(w,n,null),be(n,S),ke(a,n,null),be(n,s),ke(o,n,null),be(n,c),ke(d,n,null),be(n,_),ke(E,n,null),be(n,k),ke(v,n,null),be(e,O),ke(M,e,null),$=!0},p:$e,i(L){$||(Te(u.$$.fragment,L),Te(m.$$.fragment,L),Te(l.$$.fragment,L),Te(b.$$.fragment,L),Te(y.$$.fragment,L),Te(w.$$.fragment,L),Te(a.$$.fragment,L),Te(o.$$.fragment,L),Te(d.$$.fragment,L),Te(E.$$.fragment,L),Te(v.$$.fragment,L),Te(M.$$.fragment,L),$=!0)},o(L){Oe(u.$$.fragment,L),Oe(m.$$.fragment,L),Oe(l.$$.fragment,L),Oe(b.$$.fragment,L),Oe(y.$$.fragment,L),Oe(w.$$.fragment,L),Oe(a.$$.fragment,L),Oe(o.$$.fragment,L),Oe(d.$$.fragment,L),Oe(E.$$.fragment,L),Oe(v.$$.fragment,L),Oe(M.$$.fragment,L),$=!1},d(L){L&&Ie(e),Le(u),Le(m),Le(l),Le(b),Le(y),Le(w),Le(a),Le(o),Le(d),Le(E),Le(v),Le(M)}}}class bd extends tt{constructor(e){super(),et(this,e,null,yd,Qe,{})}}function Sd(r){let e,t;return e=new bd({}),{c(){De(e.$$.fragment)},m(n,u){ke(e,n,u),t=!0},p:$e,i(n){t||(Te(e.$$.fragment,n),t=!0)},o(n){Oe(e.$$.fragment,n),t=!1},d(n){Le(e,n)}}}class wd extends tt{constructor(e){super(),et(this,e,null,Sd,Qe,{})}}new wd({target:document.getElementById("app")});
