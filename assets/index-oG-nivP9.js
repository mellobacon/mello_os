var Xa=Object.defineProperty;var Ja=(r,e,t)=>e in r?Xa(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var ot=(r,e,t)=>(Ja(r,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const _ of l)if(_.type==="childList")for(const d of _.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function t(l){const _={};return l.integrity&&(_.integrity=l.integrity),l.referrerPolicy&&(_.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?_.credentials="include":l.crossOrigin==="anonymous"?_.credentials="omit":_.credentials="same-origin",_}function i(l){if(l.ep)return;l.ep=!0;const _=t(l);fetch(l.href,_)}})();function Ue(){}function Za(r,e){for(const t in e)r[t]=e[t];return r}function Oo(r){return r()}function Jn(){return Object.create(null)}function wt(r){r.forEach(Oo)}function ri(r){return typeof r=="function"}function Xe(r,e){return r!=r?e==e:r!==e||r&&typeof r=="object"||typeof r=="function"}let Dr;function _n(r,e){return r===e?!0:(Dr||(Dr=document.createElement("a")),Dr.href=e,r===Dr.href)}function Qa(r){return Object.keys(r).length===0}function zr(r,e,t,i){if(r){const l=ko(r,e,t,i);return r[0](l)}}function ko(r,e,t,i){return r[1]&&i?Za(t.ctx.slice(),r[1](i(e))):t.ctx}function Vr(r,e,t,i){if(r[2]&&i){const l=r[2](i(t));if(e.dirty===void 0)return l;if(typeof l=="object"){const _=[],d=Math.max(e.dirty.length,l.length);for(let n=0;n<d;n+=1)_[n]=e.dirty[n]|l[n];return _}return e.dirty|l}return e.dirty}function Kr(r,e,t,i,l,_){if(l){const d=ko(e,t,i,_);r.p(d,l)}}function Gr(r){if(r.ctx.length>32){const e=[],t=r.ctx.length/32;for(let i=0;i<t;i++)e[i]=-1;return e}return-1}function Lo(r){return r&&ri(r.destroy)?r.destroy:Ue}function pe(r,e){r.appendChild(e)}function Ae(r,e,t){r.insertBefore(e,t||null)}function Re(r){r.parentNode&&r.parentNode.removeChild(r)}function Pn(r,e){for(let t=0;t<r.length;t+=1)r[t]&&r[t].d(e)}function ve(r){return document.createElement(r)}function ht(r){return document.createTextNode(r)}function Pe(){return ht(" ")}function Do(){return ht("")}function nt(r,e,t,i){return r.addEventListener(e,t,i),()=>r.removeEventListener(e,t,i)}function el(r){return function(e){return e.stopPropagation(),r.call(this,e)}}function fe(r,e,t){t==null?r.removeAttribute(e):r.getAttribute(e)!==t&&r.setAttribute(e,t)}function tl(r){return Array.from(r.childNodes)}function Pt(r,e){e=""+e,r.data!==e&&(r.data=e)}function Zn(r,e){r.value=e??""}function yt(r,e,t,i){t==null?r.style.removeProperty(e):r.style.setProperty(e,t,i?"important":"")}function Qn(r,e,t){r.classList.toggle(e,!!t)}let wr;function vr(r){wr=r}function rl(){if(!wr)throw new Error("Function called outside component initialization");return wr}function Et(r){rl().$$.on_mount.push(r)}function xn(r,e){const t=r.$$.callbacks[e.type];t&&t.slice().forEach(i=>i.call(this,e))}const Zt=[],Ke=[];let rr=[];const pn=[],il=Promise.resolve();let gn=!1;function nl(){gn||(gn=!0,il.then(Bo))}function mn(r){rr.push(r)}function sl(r){pn.push(r)}const bi=new Set;let qt=0;function Bo(){if(qt!==0)return;const r=wr;do{try{for(;qt<Zt.length;){const e=Zt[qt];qt++,vr(e),ol(e.$$)}}catch(e){throw Zt.length=0,qt=0,e}for(vr(null),Zt.length=0,qt=0;Ke.length;)Ke.pop()();for(let e=0;e<rr.length;e+=1){const t=rr[e];bi.has(t)||(bi.add(t),t())}rr.length=0}while(Zt.length);for(;pn.length;)pn.pop()();gn=!1,bi.clear(),vr(r)}function ol(r){if(r.fragment!==null){r.update(),wt(r.before_update);const e=r.dirty;r.dirty=[-1],r.fragment&&r.fragment.p(r.ctx,e),r.after_update.forEach(mn)}}function al(r){const e=[],t=[];rr.forEach(i=>r.indexOf(i)===-1?e.push(i):t.push(i)),t.forEach(i=>i()),rr=e}const Nr=new Set;let Nt;function ll(){Nt={r:0,c:[],p:Nt}}function cl(){Nt.r||wt(Nt.c),Nt=Nt.p}function we(r,e){r&&r.i&&(Nr.delete(r),r.i(e))}function Ce(r,e,t,i){if(r&&r.o){if(Nr.has(r))return;Nr.add(r),Nt.c.push(()=>{Nr.delete(r),i&&(t&&r.d(1),i())}),r.o(e)}else i&&i()}function lr(r){return(r==null?void 0:r.length)!==void 0?r:Array.from(r)}function hl(r,e,t){const i=r.$$.props[e];i!==void 0&&(r.$$.bound[i]=t,t(r.$$.ctx[i]))}function Be(r){r&&r.c()}function Le(r,e,t){const{fragment:i,after_update:l}=r.$$;i&&i.m(e,t),mn(()=>{const _=r.$$.on_mount.map(Oo).filter(ri);r.$$.on_destroy?r.$$.on_destroy.push(..._):wt(_),r.$$.on_mount=[]}),l.forEach(mn)}function De(r,e){const t=r.$$;t.fragment!==null&&(al(t.after_update),wt(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function ul(r,e){r.$$.dirty[0]===-1&&(Zt.push(r),nl(),r.$$.dirty.fill(0)),r.$$.dirty[e/31|0]|=1<<e%31}function Je(r,e,t,i,l,_,d=null,n=[-1]){const o=wr;vr(r);const u=r.$$={fragment:null,ctx:[],props:_,update:Ue,not_equal:l,bound:Jn(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:Jn(),dirty:n,skip_bound:!1,root:e.target||o.$$.root};d&&d(u.root);let m=!1;if(u.ctx=t?t(r,e.props||{},(f,v,...C)=>{const S=C.length?C[0]:v;return u.ctx&&l(u.ctx[f],u.ctx[f]=S)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](S),m&&ul(r,f)),v}):[],u.update(),m=!0,wt(u.before_update),u.fragment=i?i(u.ctx):!1,e.target){if(e.hydrate){const f=tl(e.target);u.fragment&&u.fragment.l(f),f.forEach(Re)}else u.fragment&&u.fragment.c();e.intro&&we(r.$$.fragment),Le(r,e.target,e.anchor),Bo()}vr(o)}class Ze{constructor(){ot(this,"$$");ot(this,"$$set")}$destroy(){De(this,1),this.$destroy=Ue}$on(e,t){if(!ri(t))return Ue;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(t),()=>{const l=i.indexOf(t);l!==-1&&i.splice(l,1)}}$set(e){this.$$set&&!Qa(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fl="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fl);var Si={dragStart:!0},es=(r,e,t)=>Math.min(Math.max(r,e),t),wi=r=>typeof r=="string",dl=([r,e],t,i)=>{const l=(_,d)=>d===0?0:Math.ceil(_/d)*d;return[l(t,r),l(i,e)]},ts=(r,e)=>r.some(t=>e.some(i=>t.contains(i)));function Ei(r,e){if(r===void 0)return;if(vn(r))return r.getBoundingClientRect();if(typeof r=="object"){const{top:i=0,left:l=0,right:_=0,bottom:d=0}=r;return{top:i,right:window.innerWidth-_,bottom:window.innerHeight-d,left:l}}if(r==="parent")return e.parentNode.getBoundingClientRect();const t=document.querySelector(r);if(t===null)throw new Error("The selector provided for bound doesn't exists in the document.");return t.getBoundingClientRect()}var Br=(r,e,t)=>r.style.setProperty(e,t),vn=r=>r instanceof HTMLElement,Io=(r,e={})=>{let t,i,{bounds:l,axis:_="both",gpuAcceleration:d=!0,legacyTranslate:n=!0,transform:o,applyUserSelectHack:u=!0,disabled:m=!1,ignoreMultitouch:f=!1,recomputeBounds:v=Si,grid:C,position:S,cancel:w,handle:c,defaultClass:s="neodrag",defaultClassDragging:a="neodrag-dragging",defaultClassDragged:h="neodrag-dragged",defaultPosition:p={x:0,y:0},onDragStart:g,onDrag:E,onDragEnd:k}=e,b=!1,O=0,M=0,$=0,L=0,q=0,Z=0,{x:re,y:ie}=S?{x:(S==null?void 0:S.x)??0,y:(S==null?void 0:S.y)??0}:p;z(re,ie);let ne,x,F,P,U,G="",H=!!S;v={...Si,...v};const K=document.body.style,Y=r.classList;function z(V=O,ee=M){if(!o){if(n){let ue=`${+V}px, ${+ee}px`;return Br(r,"transform",d?`translate3d(${ue}, 0)`:`translate(${ue})`)}return Br(r,"translate",`${+V}px ${+ee}px ${d?"1px":""}`)}const le=o({offsetX:V,offsetY:ee,rootNode:r});wi(le)&&Br(r,"transform",le)}const y=(V,ee)=>{const le={offsetX:O,offsetY:M,rootNode:r,currentNode:U};r.dispatchEvent(new CustomEvent(V,{detail:le})),ee==null||ee(le)},A=addEventListener;A("pointerdown",j,!1),A("pointerup",D,!1),A("pointermove",B,!1),Br(r,"touch-action","none");const I=()=>{let V=r.offsetWidth/x.width;return isNaN(V)&&(V=1),V};function j(V){if(m||V.button===2||f&&!V.isPrimary)return;if(v.dragStart&&(ne=Ei(l,r)),wi(c)&&wi(w)&&c===w)throw new Error("`handle` selector can't be same as `cancel` selector");if(Y.add(s),F=function(ge,oe){if(!ge)return[oe];if(vn(ge))return[ge];if(Array.isArray(ge))return ge;const Fe=oe.querySelectorAll(ge);if(Fe===null)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(Fe.values())}(c,r),P=function(ge,oe){if(!ge)return[];if(vn(ge))return[ge];if(Array.isArray(ge))return ge;const Fe=oe.querySelectorAll(ge);if(Fe===null)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(Fe.values())}(w,r),t=/(both|x)/.test(_),i=/(both|y)/.test(_),ts(P,F))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const ee=V.composedPath()[0];if(!F.some(ge=>{var oe;return ge.contains(ee)||((oe=ge.shadowRoot)==null?void 0:oe.contains(ee))})||ts(P,[ee]))return;U=F.length===1?r:F.find(ge=>ge.contains(ee)),b=!0,x=r.getBoundingClientRect(),u&&(G=K.userSelect,K.userSelect="none"),y("neodrag:start",g);const{clientX:le,clientY:ue}=V,ce=I();t&&($=le-re/ce),i&&(L=ue-ie/ce),ne&&(q=le-x.left,Z=ue-x.top)}function D(){b&&(v.dragEnd&&(ne=Ei(l,r)),Y.remove(a),Y.add(h),u&&(K.userSelect=G),y("neodrag:end",k),t&&($=O),i&&(L=M),b=!1)}function B(V){if(!b)return;v.drag&&(ne=Ei(l,r)),Y.add(a),V.preventDefault(),x=r.getBoundingClientRect();let ee=V.clientX,le=V.clientY;const ue=I();if(ne){const ce={left:ne.left+q,top:ne.top+Z,right:ne.right+q-x.width,bottom:ne.bottom+Z-x.height};ee=es(ee,ce.left,ce.right),le=es(le,ce.top,ce.bottom)}if(Array.isArray(C)){let[ce,ge]=C;if(isNaN(+ce)||ce<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+ge)||ge<0)throw new Error("2nd argument of `grid` must be a valid positive number");let oe=ee-$,Fe=le-L;[oe,Fe]=dl([ce/ue,ge/ue],oe,Fe),ee=$+oe,le=L+Fe}t&&(O=Math.round((ee-$)*ue)),i&&(M=Math.round((le-L)*ue)),re=O,ie=M,y("neodrag",E),z()}return{destroy:()=>{const V=removeEventListener;V("pointerdown",j,!1),V("pointerup",D,!1),V("pointermove",B,!1)},update:V=>{var le,ue;_=V.axis||"both",m=V.disabled??!1,f=V.ignoreMultitouch??!1,c=V.handle,l=V.bounds,v=V.recomputeBounds??Si,w=V.cancel,u=V.applyUserSelectHack??!0,C=V.grid,d=V.gpuAcceleration??!0,n=V.legacyTranslate??!0,o=V.transform;const ee=Y.contains(h);Y.remove(s,h),s=V.defaultClass??"neodrag",a=V.defaultClassDragging??"neodrag-dragging",h=V.defaultClassDragged??"neodrag-dragged",Y.add(s),ee&&Y.add(h),H&&(re=O=((le=V.position)==null?void 0:le.x)??O,ie=M=((ue=V.position)==null?void 0:ue.y)??M,z())}}};function _l(r){let e,t,i,l,_,d,n,o;return{c(){e=ve("div"),t=ve("div"),i=ht(r[0]),l=Pe(),_=ve("div"),d=ve("button"),fe(t,"class","title svelte-1073oq"),fe(t,"title",r[0]),fe(d,"class","close button svelte-1073oq"),fe(_,"class","window-buttons svelte-1073oq"),fe(e,"class","header svelte-1073oq")},m(u,m){Ae(u,e,m),pe(e,t),pe(t,i),pe(e,l),pe(e,_),pe(_,d),n||(o=nt(d,"click",r[1]),n=!0)},p(u,[m]){m&1&&Pt(i,u[0]),m&1&&fe(t,"title",u[0])},i:Ue,o:Ue,d(u){u&&Re(e),n=!1,o()}}}function pl(r,e,t){let{title:i=""}=e;function l(_){xn.call(this,r,_)}return r.$$set=_=>{"title"in _&&t(0,i=_.title)},[i,l]}class Po extends Ze{constructor(e){super(),Je(this,e,pl,_l,Xe,{title:0})}}const gl=r=>({}),rs=r=>({});function ml(r){let e,t,i,l,_,d,n,o,u;t=new Po({props:{title:r[0]}}),t.$on("click",r[5]);const m=r[11].toolbar,f=zr(m,r,r[10],rs),v=r[11].default,C=zr(v,r,r[10],null);return{c(){e=ve("div"),Be(t.$$.fragment),i=Pe(),l=ve("div"),f&&f.c(),_=Pe(),d=ve("div"),C&&C.c(),fe(l,"class","program-toolbar svelte-9lykw"),fe(d,"class","program-content svelte-9lykw"),fe(e,"class","program svelte-9lykw")},m(S,w){Ae(S,e,w),Le(t,e,null),pe(e,i),pe(e,l),f&&f.m(l,null),r[13](l),pe(e,_),pe(e,d),C&&C.m(d,null),r[14](d),r[15](e),n=!0,o||(u=[nt(e,"mousedown",r[4]),nt(e,"resize",r[12]),Lo(Io.call(null,e,{handle:".header",bounds:"#icons"}))],o=!0)},p(S,[w]){const c={};w&1&&(c.title=S[0]),t.$set(c),f&&f.p&&(!n||w&1024)&&Kr(f,m,S,S[10],n?Vr(m,S[10],w,gl):Gr(S[10]),rs),C&&C.p&&(!n||w&1024)&&Kr(C,v,S,S[10],n?Vr(v,S[10],w,null):Gr(S[10]),null)},i(S){n||(we(t.$$.fragment,S),we(f,S),we(C,S),n=!0)},o(S){Ce(t.$$.fragment,S),Ce(f,S),Ce(C,S),n=!1},d(S){S&&Re(e),De(t),f&&f.d(S),r[13](null),C&&C.d(S),r[14](null),r[15](null),o=!1,wt(u)}}}function yn(){for(const r of document.getElementsByClassName("program")){const e=r;e.style.zIndex="1",e.getElementsByClassName("header")[0].style.backgroundColor="#747c94"}}function vl(r,e,t){let{$$slots:i={},$$scope:l}=e,{name:_="Window Title"}=e,{index:d=1}=e,{height:n=null,width:o=null}=e,{resizable:u=!0}=e,m,f,v;Et(()=>{if(m){if(f){let h=f.getBoundingClientRect();t(3,v.style.height=`calc(100% - (30px + ${h.height}px))`,v)}n&&t(1,m.style.height=n,m),o&&t(1,m.style.width=o,m),t(1,m.style.resize=u?"both":"none",m),t(1,m.style.zIndex=`${d}`,m),t(1,m.style.top=`${(m.parentElement.clientHeight-320)/2}px`,m),t(1,m.style.left=`${(m.parentElement.clientWidth-450)/2}px`,m),yn(),m.getElementsByClassName("header")[0].style.backgroundColor="#1f3b9a"}});function C(){yn(),t(1,m.style.zIndex=`${d+1}`,m),m.getElementsByClassName("header")[0].style.backgroundColor="#1f3b9a"}function S(){m.remove()}function w(h){xn.call(this,r,h)}function c(h){Ke[h?"unshift":"push"](()=>{f=h,t(2,f)})}function s(h){Ke[h?"unshift":"push"](()=>{v=h,t(3,v)})}function a(h){Ke[h?"unshift":"push"](()=>{m=h,t(1,m)})}return r.$$set=h=>{"name"in h&&t(0,_=h.name),"index"in h&&t(6,d=h.index),"height"in h&&t(7,n=h.height),"width"in h&&t(8,o=h.width),"resizable"in h&&t(9,u=h.resizable),"$$scope"in h&&t(10,l=h.$$scope)},[_,m,f,v,C,S,d,n,o,u,l,i,w,c,s,a]}class lt extends Ze{constructor(e){super(),Je(this,e,vl,ml,Xe,{name:0,index:6,height:7,width:8,resizable:9})}}function is(r){let e,t,i,l,_;return{c(){e=ve("div"),t=ve("div"),i=Pe(),l=ve("div"),_=ht(r[2]),fe(t,"class","icon svelte-1jte0y8"),fe(l,"class","message"),fe(e,"class","alert svelte-1jte0y8")},m(d,n){Ae(d,e,n),pe(e,t),r[11](t),pe(e,i),pe(e,l),pe(l,_)},p(d,n){n&4&&Pt(_,d[2])},d(d){d&&Re(e),r[11](null)}}}function yl(r){let e,t,i,l,_,d,n,o;i=new Po({props:{title:r[1]}}),i.$on("click",r[6]);let u=r[0]==="alert"&&is(r);return{c(){e=ve("div"),t=ve("div"),Be(i.$$.fragment),l=Pe(),_=ve("div"),u&&u.c(),fe(_,"class","dialog-content svelte-1jte0y8"),fe(t,"class","dialog svelte-1jte0y8"),fe(e,"id","dialog-overlay"),fe(e,"class","svelte-1jte0y8")},m(m,f){Ae(m,e,f),pe(e,t),Le(i,t,null),pe(t,l),pe(t,_),u&&u.m(_,null),r[12](t),r[13](e),d=!0,n||(o=[Lo(Io.call(null,t,{handle:".header",bounds:"#icons"})),nt(e,"click",el(r[7]))],n=!0)},p(m,[f]){const v={};f&2&&(v.title=m[1]),i.$set(v),m[0]==="alert"?u?u.p(m,f):(u=is(m),u.c(),u.m(_,null)):u&&(u.d(1),u=null)},i(m){d||(we(i.$$.fragment,m),d=!0)},o(m){Ce(i.$$.fragment,m),d=!1},d(m){m&&Re(e),De(i),u&&u.d(),r[12](null),r[13](null),n=!1,wt(o)}}}function bl(r,e,t){let{type:i="alert"}=e,{action_type:l="info"}=e,{input_type:_="text"}=e,{title:d="Dialog"}=e,{message:n=""}=e,{randomPos:o=!1}=e,u,m,f,v,C={info:"https://win98icons.alexmeub.com/icons/png/msg_information-0.png",warning:"https://win98icons.alexmeub.com/icons/png/msg_warning-0.png",error:"https://win98icons.alexmeub.com/icons/png/msg_error-0.png",confirm:"https://win98icons.alexmeub.com/icons/png/msg_question-0.png",success:"https://win98icons.alexmeub.com/icons/png/check-0.png"};Et(()=>{t(4,m.style.backgroundImage=`url("${C[l]}")`,m),o&&(t(5,f.style.left=`${Math.random()*(u.clientWidth-300-0)+0}px`,f),t(5,f.style.top=`${Math.random()*(u.clientHeight-200-0)+0}px`,f)),v=f.getAnimations()[0],v.finish(),yn()});function S(){u.remove()}function w(h){h.target===u&&v.play()}function c(h){Ke[h?"unshift":"push"](()=>{m=h,t(4,m)})}function s(h){Ke[h?"unshift":"push"](()=>{f=h,t(5,f)})}function a(h){Ke[h?"unshift":"push"](()=>{u=h,t(3,u)})}return r.$$set=h=>{"type"in h&&t(0,i=h.type),"action_type"in h&&t(8,l=h.action_type),"input_type"in h&&t(9,_=h.input_type),"title"in h&&t(1,d=h.title),"message"in h&&t(2,n=h.message),"randomPos"in h&&t(10,o=h.randomPos)},[i,d,n,u,m,f,S,w,l,_,o,c,s,a]}class er extends Ze{constructor(e){super(),Je(this,e,bl,yl,Xe,{type:0,action_type:8,input_type:9,title:1,message:2,randomPos:10})}}function Sl(r){let e,t,i,l,_,d,n;return{c(){e=ve("div"),t=ve("span"),i=Pe(),l=ve("div"),_=ht(r[0]),fe(t,"class","logo svelte-19mtfhv"),fe(l,"class","name svelte-19mtfhv"),fe(e,"class","desktop-icon svelte-19mtfhv"),fe(e,"draggable","true"),fe(e,"title",r[0])},m(o,u){Ae(o,e,u),pe(e,t),r[6](t),pe(e,i),pe(e,l),pe(l,_),d||(n=nt(e,"click",r[7]),d=!0)},p(o,[u]){u&1&&Pt(_,o[0]),u&1&&fe(e,"title",o[0])},i:Ue,o:Ue,d(o){o&&Re(e),r[6](null),d=!1,n()}}}function wl(r,e,t){let{name:i="Program Icon"}=e,{icon:l="https://win98icons.alexmeub.com/icons/png/executable-0.png"}=e,{program:_}=e,{error:d=!1}=e,n,o;Et(()=>{t(1,n.style.backgroundImage=`url('${l}')`,n),o=document.getElementById("icons")});let u=1;function m(C){if(d){new er({target:o,props:{action_type:"error",title:"Error opening program",message:`The program "${C}" cannot be found.`}});return}new _({target:o,props:{name:C,index:u++}})}function f(C){Ke[C?"unshift":"push"](()=>{n=C,t(1,n)})}const v=()=>{m(i)};return r.$$set=C=>{"name"in C&&t(0,i=C.name),"icon"in C&&t(3,l=C.icon),"program"in C&&t(4,_=C.program),"error"in C&&t(5,d=C.error)},[i,n,m,l,_,d,f,v]}class _t extends Ze{constructor(e){super(),Je(this,e,wl,Sl,Xe,{name:0,icon:3,program:4,error:5})}}function El(r){let e,t,i,l,_,d;return{c(){e=ve("button"),t=ve("span"),i=ht(`Start\r
    `),l=ve("div"),l.innerHTML='<div class="menu-item svelte-ijru5t">Help</div> <div class="menu-item svelte-ijru5t">Shut Down...</div>',fe(t,"class","logo svelte-ijru5t"),fe(l,"id","start-menu"),fe(l,"class","svelte-ijru5t"),fe(e,"id","start-button"),fe(e,"class","svelte-ijru5t")},m(n,o){Ae(n,e,o),pe(e,t),r[6](t),pe(e,i),pe(e,l),r[7](l),r[8](e),_||(d=[nt(window,"click",r[5]),nt(e,"click",r[3])],_=!0)},p:Ue,i:Ue,o:Ue,d(n){n&&Re(e),r[6](null),r[7](null),r[8](null),_=!1,wt(d)}}}let Cl="https://assets.codepen.io/345377/start.png";function Rl(r,e,t){let i=null,l=null,_=null;Et(()=>{l&&t(1,l.style.backgroundImage=`url('${Cl}')`,l)});function d(){_&&t(2,_.style.visibility=_.style.visibility==="visible"?"hidden":"visible",_)}function n(){_&&t(2,_.style.visibility="hidden",_)}const o=v=>{v.target!==i&&n()};function u(v){Ke[v?"unshift":"push"](()=>{l=v,t(1,l)})}function m(v){Ke[v?"unshift":"push"](()=>{_=v,t(2,_)})}function f(v){Ke[v?"unshift":"push"](()=>{i=v,t(0,i)})}return[i,l,_,d,n,o,u,m,f]}class Al extends Ze{constructor(e){super(),Je(this,e,Rl,El,Xe,{})}}function Tl(r){let e,t,i,l,_;return t=new Al({}),{c(){e=ve("div"),Be(t.$$.fragment),i=Pe(),l=ve("div"),l.textContent="v0.2.1",fe(l,"class","version"),fe(e,"id","taskbar"),fe(e,"class","svelte-yqgcho")},m(d,n){Ae(d,e,n),Le(t,e,null),pe(e,i),pe(e,l),r[2](e),_=!0},p:Ue,i(d){_||(we(t.$$.fragment,d),_=!0)},o(d){Ce(t.$$.fragment,d),_=!1},d(d){d&&Re(e),De(t),r[2](null)}}}function Ol(r,e,t){let{alignment:i="left"}=e,l=null;Et(()=>{if(l)switch(i){case"left":t(0,l.style.height="100%",l),t(0,l.style.width="44px",l),t(0,l.style.alignSelf="flex-start",l);break;case"top":t(0,l.style.height="44px",l),t(0,l.style.alignSelf="flex-start",l);break;case"bottom":t(0,l.style.height="44px",l),t(0,l.style.alignSelf="flex-end",l);break}});function _(d){Ke[d?"unshift":"push"](()=>{l=d,t(0,l)})}return r.$$set=d=>{"alignment"in d&&t(1,i=d.alignment)},[l,i,_]}class kl extends Ze{constructor(e){super(),Je(this,e,Ol,Tl,Xe,{alignment:1})}}function Ll(r){let e,t,i,l;return{c(){e=ve("button"),t=ht(r[0]),fe(e,"class","button svelte-1dpuff4")},m(_,d){Ae(_,e,d),pe(e,t),r[6](e),i||(l=nt(e,"click",r[5]),i=!0)},p(_,[d]){d&1&&Pt(t,_[0])},i:Ue,o:Ue,d(_){_&&Re(e),r[6](null),i=!1,l()}}}function Dl(r,e,t){let{width:i=""}=e,{height:l=""}=e,{label:_="Button"}=e,{direction:d="center"}=e,n;Et(()=>{t(1,n.style.height=l,n),t(1,n.style.width=i,n),t(1,n.style.alignSelf=d,n)});function o(m){xn.call(this,r,m)}function u(m){Ke[m?"unshift":"push"](()=>{n=m,t(1,n)})}return r.$$set=m=>{"width"in m&&t(2,i=m.width),"height"in m&&t(3,l=m.height),"label"in m&&t(0,_=m.label),"direction"in m&&t(4,d=m.direction)},[_,n,i,l,d,o,u]}class Yr extends Ze{constructor(e){super(),Je(this,e,Dl,Ll,Xe,{width:2,height:3,label:0,direction:4})}}function Bl(r){let e,t,i;const l=r[7].default,_=zr(l,r,r[6],null);return{c(){e=ve("div"),_&&_.c(),fe(e,"class",t="container "+r[0]+" svelte-1pjhfxx"),yt(e,"background-color",r[1])},m(d,n){Ae(d,e,n),_&&_.m(e,null),r[8](e),i=!0},p(d,[n]){_&&_.p&&(!i||n&64)&&Kr(_,l,d,d[6],i?Vr(l,d[6],n,null):Gr(d[6]),null),(!i||n&1&&t!==(t="container "+d[0]+" svelte-1pjhfxx"))&&fe(e,"class",t),(!i||n&2)&&yt(e,"background-color",d[1])},i(d){i||(we(_,d),i=!0)},o(d){Ce(_,d),i=!1},d(d){d&&Re(e),_&&_.d(d),r[8](null)}}}function Il(r,e,t){let{$$slots:i={},$$scope:l}=e,{width:_="100%"}=e,{height:d="200px"}=e,{_class:n=""}=e,{inset:o=!0}=e,{background:u="#fcfcfc"}=e,m;Et(()=>{t(2,m.style.width=_,m),t(2,m.style.height=d,m),o&&t(2,m.style.boxShadow="inset -1.5px -1.5px 0 0 #fcfcfc, inset 1.5px 1.5px 0 0 #a099a1",m)});function f(v){Ke[v?"unshift":"push"](()=>{m=v,t(2,m)})}return r.$$set=v=>{"width"in v&&t(3,_=v.width),"height"in v&&t(4,d=v.height),"_class"in v&&t(0,n=v._class),"inset"in v&&t(5,o=v.inset),"background"in v&&t(1,u=v.background),"$$scope"in v&&t(6,l=v.$$scope)},[n,u,m,_,d,o,l,i,f]}class fr extends Ze{constructor(e){super(),Je(this,e,Il,Bl,Xe,{width:3,height:4,_class:0,inset:5,background:1})}}function Pl(r){let e;return{c(){e=ve("div"),e.innerHTML='<h3 class="svelte-krh3sy">About</h3> <p class="svelte-krh3sy">A fake OS styled as Windows 95 using web dev magic (Svelte, TypeScript and CSS basically)</p> <h3 class="svelte-krh3sy">Features</h3> <ul class="svelte-krh3sy"><li class="svelte-krh3sy">Working windows -- well some anyways</li> <li class="svelte-krh3sy">Working terminal</li> <li class="svelte-krh3sy">An easter egg just because</li> <li class="svelte-krh3sy">Virtual filesystem</li> <li class="svelte-krh3sy">More to come...</li></ul> <h3 class="svelte-krh3sy">Changelog</h3> <h4 class="svelte-krh3sy">0.1</h4> <ul class="svelte-krh3sy"><li class="svelte-krh3sy">Initial deployment</li></ul> <h4 class="svelte-krh3sy">0.2</h4> <ul class="svelte-krh3sy"><li class="svelte-krh3sy">Added a basic virtual filesystem. Just supports directories for now</li> <li class="svelte-krh3sy">Added terminal commands to navigate filesystem. Namely dir, mkdir, rmdir</li> <li class="svelte-krh3sy">Added actual info to welcome window</li></ul> <h4 class="svelte-krh3sy">0.2.1</h4> <ul class="svelte-krh3sy"><li class="svelte-krh3sy">Added functional browser. Loads websites from the 1990s via <a href="https://web.archive.org/">the wayback machine</a></li> <li class="svelte-krh3sy">Fixed desktop container not filling width of screen</li> <li class="svelte-krh3sy">Added version number to taskbar</li></ul> <h3 class="svelte-krh3sy">Links</h3> <p class="svelte-krh3sy"><a href="https://github.com/mellobacon/mello_os">GitHub</a></p>',fe(e,"class","info svelte-krh3sy")},m(t,i){Ae(t,e,i)},p:Ue,d(t){t&&Re(e)}}}function xl(r){let e,t,i,l,_,d,n;return l=new fr({props:{height:"180px",$$slots:{default:[Pl]},$$scope:{ctx:r}}}),d=new Yr({props:{width:"120px",direction:"flex-end",label:"Close"}}),d.$on("click",r[3]),{c(){e=ve("div"),t=ve("h2"),t.textContent="Welcome to Mello OS",i=Pe(),Be(l.$$.fragment),_=Pe(),Be(d.$$.fragment),fe(t,"class","svelte-krh3sy"),fe(e,"class","welcome svelte-krh3sy")},m(o,u){Ae(o,e,u),pe(e,t),pe(e,i),Le(l,e,null),pe(e,_),Le(d,e,null),n=!0},p(o,u){const m={};u&32&&(m.$$scope={dirty:u,ctx:o}),l.$set(m)},i(o){n||(we(l.$$.fragment,o),we(d.$$.fragment,o),n=!0)},o(o){Ce(l.$$.fragment,o),Ce(d.$$.fragment,o),n=!1},d(o){o&&Re(e),De(l),De(d)}}}function Ml(r){let e,t,i={name:r[1],index:r[0],resizable:!1,height:"auto",$$slots:{default:[xl]},$$scope:{ctx:r}};return e=new lt({props:i}),r[4](e),{c(){Be(e.$$.fragment)},m(l,_){Le(e,l,_),t=!0},p(l,[_]){const d={};_&2&&(d.name=l[1]),_&1&&(d.index=l[0]),_&32&&(d.$$scope={dirty:_,ctx:l}),e.$set(d)},i(l){t||(we(e.$$.fragment,l),t=!0)},o(l){Ce(e.$$.fragment,l),t=!1},d(l){r[4](null),De(e,l)}}}function Fl(r,e,t){let{index:i}=e,{name:l}=e,_;function d(){_.$destroy()}function n(o){Ke[o?"unshift":"push"](()=>{_=o,t(2,_)})}return r.$$set=o=>{"index"in o&&t(0,i=o.index),"name"in o&&t(1,l=o.name)},[i,l,_,d,n]}class Nl extends Ze{constructor(e){super(),Je(this,e,Fl,Ml,Xe,{index:0,name:1})}}function jl(r){let e;return{c(){e=ve("textarea"),fe(e,"autocomplete","off"),fe(e,"spellcheck","false"),fe(e,"class","svelte-4g3yux")},m(t,i){Ae(t,e,i)},p:Ue,d(t){t&&Re(e)}}}function Ul(r){let e,t,i;return t=new fr({props:{height:"100%",_class:"notepad-container",$$slots:{default:[jl]},$$scope:{ctx:r}}}),{c(){e=ve("div"),Be(t.$$.fragment),fe(e,"class","notepad svelte-4g3yux")},m(l,_){Ae(l,e,_),Le(t,e,null),i=!0},p(l,_){const d={};_&4&&(d.$$scope={dirty:_,ctx:l}),t.$set(d)},i(l){i||(we(t.$$.fragment,l),i=!0)},o(l){Ce(t.$$.fragment,l),i=!1},d(l){l&&Re(e),De(t)}}}function Hl(r){let e,t;return e=new lt({props:{name:r[1],index:r[0],$$slots:{default:[Ul]},$$scope:{ctx:r}}}),{c(){Be(e.$$.fragment)},m(i,l){Le(e,i,l),t=!0},p(i,[l]){const _={};l&2&&(_.name=i[1]),l&1&&(_.index=i[0]),l&4&&(_.$$scope={dirty:l,ctx:i}),e.$set(_)},i(i){t||(we(e.$$.fragment,i),t=!0)},o(i){Ce(e.$$.fragment,i),t=!1},d(i){De(e,i)}}}function $l(r,e,t){let{index:i}=e,{name:l}=e;return r.$$set=_=>{"index"in _&&t(0,i=_.index),"name"in _&&t(1,l=_.name)},[i,l]}class Wl extends Ze{constructor(e){super(),Je(this,e,$l,Hl,Xe,{index:0,name:1})}}function ns(r,e,t){const i=r.slice();return i[19]=e[t],i}function ss(r){let e,t,i;return{c(){e=ve("label"),t=ht(r[2]),i=ht(":"),fe(e,"for","input")},m(l,_){Ae(l,e,_),pe(e,t),pe(e,i)},p(l,_){_&4&&Pt(t,l[2])},d(l){l&&Re(e)}}}function os(r){let e,t,i,l,_,d=r[9]&&as(r);return{c(){e=ve("div"),t=Pe(),d&&d.c(),i=Do(),fe(e,"class","dropdown-button svelte-tw1io6")},m(n,o){Ae(n,e,o),r[17](e),Ae(n,t,o),d&&d.m(n,o),Ae(n,i,o),l||(_=nt(e,"click",r[11]),l=!0)},p(n,o){n[9]?d?d.p(n,o):(d=as(n),d.c(),d.m(i.parentNode,i)):d&&(d.d(1),d=null)},d(n){n&&(Re(e),Re(t),Re(i)),r[17](null),d&&d.d(n),l=!1,_()}}}function as(r){let e,t=lr(r[4]),i=[];for(let l=0;l<t.length;l+=1)i[l]=ls(ns(r,t,l));return{c(){e=ve("div");for(let l=0;l<i.length;l+=1)i[l].c();fe(e,"class","dropdown-container svelte-tw1io6"),yt(e,"width",r[10]-3+"px")},m(l,_){Ae(l,e,_);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(e,null)},p(l,_){if(_&4112){t=lr(l[4]);let d;for(d=0;d<t.length;d+=1){const n=ns(l,t,d);i[d]?i[d].p(n,_):(i[d]=ls(n),i[d].c(),i[d].m(e,null))}for(;d<i.length;d+=1)i[d].d(1);i.length=t.length}_&1024&&yt(e,"width",l[10]-3+"px")},d(l){l&&Re(e),Pn(i,l)}}}function ls(r){let e,t=r[19]+"",i,l,_;function d(){return r[18](r[19])}return{c(){e=ve("div"),i=ht(t),fe(e,"class","dropdown-item svelte-tw1io6")},m(n,o){Ae(n,e,o),pe(e,i),l||(_=nt(e,"click",d),l=!0)},p(n,o){r=n,o&16&&t!==(t=r[19]+"")&&Pt(i,t)},d(n){n&&Re(e),l=!1,_()}}}function ql(r){let e,t,i,l,_,d,n=!r[1]&&ss(r),o=r[3]&&os(r);return{c(){e=ve("div"),n&&n.c(),t=Pe(),i=ve("input"),l=Pe(),o&&o.c(),fe(i,"class","input svelte-tw1io6"),fe(e,"class","input-container svelte-tw1io6"),yt(e,"height",r[6]),yt(e,"width",r[5]),Qn(e,"dropdown",r[3])},m(u,m){Ae(u,e,m),n&&n.m(e,null),pe(e,t),pe(e,i),r[15](i),Zn(i,r[0]),pe(e,l),o&&o.m(e,null),_||(d=[nt(window,"mousedown",r[14]),nt(i,"input",r[16])],_=!0)},p(u,[m]){u[1]?n&&(n.d(1),n=null):n?n.p(u,m):(n=ss(u),n.c(),n.m(e,t)),m&1&&i.value!==u[0]&&Zn(i,u[0]),u[3]?o?o.p(u,m):(o=os(u),o.c(),o.m(e,null)):o&&(o.d(1),o=null),m&64&&yt(e,"height",u[6]),m&32&&yt(e,"width",u[5]),m&8&&Qn(e,"dropdown",u[3])},i:Ue,o:Ue,d(u){u&&Re(e),n&&n.d(),r[15](null),o&&o.d(),_=!1,wt(d)}}}function zl(r,e,t){let{nolabel:i=!1}=e,{label:l="Input"}=e,{type:_="text"}=e,{dropdown:d=!1}=e,{dropdown_items:n=[]}=e,o,u,m=!1,{width:f=""}=e,{height:v=""}=e,C,{input:S=""}=e;function w(){t(9,m=!m),t(10,C=o.getBoundingClientRect().width)}function c(E){t(0,S=E)}Et(()=>{t(10,C=o.getBoundingClientRect().width)});const s=E=>{E.target!=u&&setTimeout(()=>{t(9,m=!1)},220)};function a(E){Ke[E?"unshift":"push"](()=>{o=E,t(7,o)})}function h(){S=this.value,t(0,S)}function p(E){Ke[E?"unshift":"push"](()=>{u=E,t(8,u)})}const g=E=>{c(E)};return r.$$set=E=>{"nolabel"in E&&t(1,i=E.nolabel),"label"in E&&t(2,l=E.label),"type"in E&&t(13,_=E.type),"dropdown"in E&&t(3,d=E.dropdown),"dropdown_items"in E&&t(4,n=E.dropdown_items),"width"in E&&t(5,f=E.width),"height"in E&&t(6,v=E.height),"input"in E&&t(0,S=E.input)},[S,i,l,d,n,f,v,o,u,m,C,w,c,_,s,a,h,p,g]}class bn extends Ze{constructor(e){super(),Je(this,e,zl,ql,Xe,{nolabel:1,label:2,type:13,dropdown:3,dropdown_items:4,width:5,height:6,input:0})}}function Vl(r){let e,t,i,l,_,d,n;return{c(){e=ve("h2"),e.textContent="Funds: $1000",t=Pe(),i=ve("h3"),i.textContent="Income: $2/hr",l=Pe(),_=ve("h3"),_.textContent="Expenses: $50.700/month",d=Pe(),n=ve("h3"),n.textContent="Budget: $20.84 over",fe(e,"class","svelte-1eqswdx"),fe(i,"class","svelte-1eqswdx"),fe(_,"class","svelte-1eqswdx"),fe(n,"class","svelte-1eqswdx")},m(o,u){Ae(o,e,u),Ae(o,t,u),Ae(o,i,u),Ae(o,l,u),Ae(o,_,u),Ae(o,d,u),Ae(o,n,u)},p:Ue,d(o){o&&(Re(e),Re(t),Re(i),Re(l),Re(_),Re(d),Re(n))}}}function Kl(r){let e,t,i,l,_,d,n,o,u,m,f,v;return t=new fr({props:{height:"100%",width:"300px",_class:"wallet-container",$$slots:{default:[Vl]},$$scope:{ctx:r}}}),_=new bn({props:{label:"Deposit",width:"100%"}}),n=new Yr({props:{label:"Transfer"}}),u=new bn({props:{label:"Withdraw",width:"100%"}}),f=new Yr({props:{label:"Transfer"}}),{c(){e=ve("div"),Be(t.$$.fragment),i=Pe(),l=ve("div"),Be(_.$$.fragment),d=Pe(),Be(n.$$.fragment),o=Pe(),Be(u.$$.fragment),m=Pe(),Be(f.$$.fragment),fe(l,"class","buttons svelte-1eqswdx"),fe(e,"class","wallet svelte-1eqswdx")},m(C,S){Ae(C,e,S),Le(t,e,null),pe(e,i),pe(e,l),Le(_,l,null),pe(l,d),Le(n,l,null),pe(l,o),Le(u,l,null),pe(l,m),Le(f,l,null),v=!0},p(C,S){const w={};S&4&&(w.$$scope={dirty:S,ctx:C}),t.$set(w)},i(C){v||(we(t.$$.fragment,C),we(_.$$.fragment,C),we(n.$$.fragment,C),we(u.$$.fragment,C),we(f.$$.fragment,C),v=!0)},o(C){Ce(t.$$.fragment,C),Ce(_.$$.fragment,C),Ce(n.$$.fragment,C),Ce(u.$$.fragment,C),Ce(f.$$.fragment,C),v=!1},d(C){C&&Re(e),De(t),De(_),De(n),De(u),De(f)}}}function Gl(r){let e,t;return e=new lt({props:{name:r[1],index:r[0],$$slots:{default:[Kl]},$$scope:{ctx:r}}}),{c(){Be(e.$$.fragment)},m(i,l){Le(e,i,l),t=!0},p(i,[l]){const _={};l&2&&(_.name=i[1]),l&1&&(_.index=i[0]),l&4&&(_.$$scope={dirty:l,ctx:i}),e.$set(_)},i(i){t||(we(e.$$.fragment,i),t=!0)},o(i){Ce(e.$$.fragment,i),t=!1},d(i){De(e,i)}}}function Yl(r,e,t){let{index:i}=e,{name:l}=e;return r.$$set=_=>{"index"in _&&t(0,i=_.index),"name"in _&&t(1,l=_.name)},[i,l]}class Xl extends Ze{constructor(e){super(),Je(this,e,Yl,Gl,Xe,{index:0,name:1})}}var rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xo(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function Jl(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var l=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(t,i,l.get?l:{enumerable:!0,get:function(){return r[i]}})}),t}var Mo={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(self,()=>(()=>{var t={4567:function(d,n,o){var u=this&&this.__decorate||function(h,p,g,E){var k,b=arguments.length,O=b<3?p:E===null?E=Object.getOwnPropertyDescriptor(p,g):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(h,p,g,E);else for(var M=h.length-1;M>=0;M--)(k=h[M])&&(O=(b<3?k(O):b>3?k(p,g,O):k(p,g))||O);return b>3&&O&&Object.defineProperty(p,g,O),O},m=this&&this.__param||function(h,p){return function(g,E){p(g,E,h)}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccessibilityManager=void 0;const f=o(9042),v=o(6114),C=o(9924),S=o(844),w=o(5596),c=o(4725),s=o(3656);let a=n.AccessibilityManager=class extends S.Disposable{constructor(h,p){super(),this._terminal=h,this._renderService=p,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let g=0;g<this._terminal.rows;g++)this._rowElements[g]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[g]);if(this._topBoundaryFocusListener=g=>this._handleBoundaryFocus(g,0),this._bottomBoundaryFocusListener=g=>this._handleBoundaryFocus(g,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new C.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(g=>this._handleResize(g.rows))),this.register(this._terminal.onRender(g=>this._refreshRows(g.start,g.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(g=>this._handleChar(g))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(g=>this._handleTab(g))),this.register(this._terminal.onKey(g=>this._handleKey(g.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new w.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,s.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,S.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(h){for(let p=0;p<h;p++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=f.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&this._liveRegion.remove()}_handleKey(h){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(h)||this._charsToConsume.push(h)}_refreshRows(h,p){this._liveRegionDebouncer.refresh(h,p,this._terminal.rows)}_renderRows(h,p){const g=this._terminal.buffer,E=g.lines.length.toString();for(let k=h;k<=p;k++){const b=g.translateBufferLineToString(g.ydisp+k,!0),O=(g.ydisp+k+1).toString(),M=this._rowElements[k];M&&(b.length===0?M.innerText="Â ":M.textContent=b,M.setAttribute("aria-posinset",O),M.setAttribute("aria-setsize",E))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,p){const g=h.target,E=this._rowElements[p===0?1:this._rowElements.length-2];if(g.getAttribute("aria-posinset")===(p===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==E)return;let k,b;if(p===0?(k=g,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(k=this._rowElements.shift(),b=g,this._rowContainer.removeChild(k)),k.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),p===0){const O=this._createAccessibilityTreeNode();this._rowElements.unshift(O),this._rowContainer.insertAdjacentElement("afterbegin",O)}else{const O=this._createAccessibilityTreeNode();this._rowElements.push(O),this._rowContainer.appendChild(O)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(p===0?-1:1),this._rowElements[p===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let p=this._rowContainer.children.length;p<this._terminal.rows;p++)this._rowElements[p]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[p]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const h=document.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};n.AccessibilityManager=a=u([m(1,c.IRenderService)],a)},3614:(d,n)=>{function o(v){return v.replace(/\r?\n/g,"\r")}function u(v,C){return C?"\x1B[200~"+v+"\x1B[201~":v}function m(v,C,S,w){v=u(v=o(v),S.decPrivateModes.bracketedPasteMode&&w.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(v,!0),C.value=""}function f(v,C,S){const w=S.getBoundingClientRect(),c=v.clientX-w.left-10,s=v.clientY-w.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${c}px`,C.style.top=`${s}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(n,"__esModule",{value:!0}),n.rightClickHandler=n.moveTextAreaUnderMouseCursor=n.paste=n.handlePasteEvent=n.copyHandler=n.bracketTextForPaste=n.prepareTextForTerminal=void 0,n.prepareTextForTerminal=o,n.bracketTextForPaste=u,n.copyHandler=function(v,C){v.clipboardData&&v.clipboardData.setData("text/plain",C.selectionText),v.preventDefault()},n.handlePasteEvent=function(v,C,S,w){v.stopPropagation(),v.clipboardData&&m(v.clipboardData.getData("text/plain"),C,S,w)},n.paste=m,n.moveTextAreaUnderMouseCursor=f,n.rightClickHandler=function(v,C,S,w,c){f(v,C,S),c&&w.rightClickSelect(v),C.value=w.selectionText,C.select()}},7239:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorContrastCache=void 0;const u=o(1505);n.ColorContrastCache=class{constructor(){this._color=new u.TwoKeyMap,this._css=new u.TwoKeyMap}setCss(m,f,v){this._css.set(m,f,v)}getCss(m,f){return this._css.get(m,f)}setColor(m,f,v){this._color.set(m,f,v)}getColor(m,f){return this._color.get(m,f)}clear(){this._color.clear(),this._css.clear()}}},3656:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.addDisposableDomListener=void 0,n.addDisposableDomListener=function(o,u,m,f){o.addEventListener(u,m,f);let v=!1;return{dispose:()=>{v||(v=!0,o.removeEventListener(u,m,f))}}}},6465:function(d,n,o){var u=this&&this.__decorate||function(c,s,a,h){var p,g=arguments.length,E=g<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,s,a,h);else for(var k=c.length-1;k>=0;k--)(p=c[k])&&(E=(g<3?p(E):g>3?p(s,a,E):p(s,a))||E);return g>3&&E&&Object.defineProperty(s,a,E),E},m=this&&this.__param||function(c,s){return function(a,h){s(a,h,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Linkifier2=void 0;const f=o(3656),v=o(8460),C=o(844),S=o(2585);let w=n.Linkifier2=class extends C.Disposable{get currentLink(){return this._currentLink}constructor(c){super(),this._bufferService=c,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(c){return this._linkProviders.push(c),{dispose:()=>{const s=this._linkProviders.indexOf(c);s!==-1&&this._linkProviders.splice(s,1)}}}attachToDom(c,s,a){this._element=c,this._mouseService=s,this._renderService=a,this.register((0,f.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,f.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,f.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(c){if(this._lastMouseEvent=c,!this._element||!this._mouseService)return;const s=this._positionFromMouseEvent(c,this._element,this._mouseService);if(!s)return;this._isMouseOut=!1;const a=c.composedPath();for(let h=0;h<a.length;h++){const p=a[h];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&s.x===this._lastBufferCell.x&&s.y===this._lastBufferCell.y||(this._handleHover(s),this._lastBufferCell=s)}_handleHover(c){if(this._activeLine!==c.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(c,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,c)||(this._clearCurrentLink(),this._askForLink(c,!0))}_askForLink(c,s){var a,h;this._activeProviderReplies&&s||((a=this._activeProviderReplies)===null||a===void 0||a.forEach(g=>{g==null||g.forEach(E=>{E.link.dispose&&E.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=c.y);let p=!1;for(const[g,E]of this._linkProviders.entries())s?!((h=this._activeProviderReplies)===null||h===void 0)&&h.get(g)&&(p=this._checkLinkProviderResult(g,c,p)):E.provideLinks(c.y,k=>{var b,O;if(this._isMouseOut)return;const M=k==null?void 0:k.map($=>({link:$}));(b=this._activeProviderReplies)===null||b===void 0||b.set(g,M),p=this._checkLinkProviderResult(g,c,p),((O=this._activeProviderReplies)===null||O===void 0?void 0:O.size)===this._linkProviders.length&&this._removeIntersectingLinks(c.y,this._activeProviderReplies)})}_removeIntersectingLinks(c,s){const a=new Set;for(let h=0;h<s.size;h++){const p=s.get(h);if(p)for(let g=0;g<p.length;g++){const E=p[g],k=E.link.range.start.y<c?0:E.link.range.start.x,b=E.link.range.end.y>c?this._bufferService.cols:E.link.range.end.x;for(let O=k;O<=b;O++){if(a.has(O)){p.splice(g--,1);break}a.add(O)}}}}_checkLinkProviderResult(c,s,a){var h;if(!this._activeProviderReplies)return a;const p=this._activeProviderReplies.get(c);let g=!1;for(let E=0;E<c;E++)this._activeProviderReplies.has(E)&&!this._activeProviderReplies.get(E)||(g=!0);if(!g&&p){const E=p.find(k=>this._linkAtPosition(k.link,s));E&&(a=!0,this._handleNewLink(E))}if(this._activeProviderReplies.size===this._linkProviders.length&&!a)for(let E=0;E<this._activeProviderReplies.size;E++){const k=(h=this._activeProviderReplies.get(E))===null||h===void 0?void 0:h.find(b=>this._linkAtPosition(b.link,s));if(k){a=!0,this._handleNewLink(k);break}}return a}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(c){if(!this._element||!this._mouseService||!this._currentLink)return;const s=this._positionFromMouseEvent(c,this._element,this._mouseService);s&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,s)&&this._currentLink.link.activate(c,this._currentLink.link.text)}_clearCurrentLink(c,s){this._element&&this._currentLink&&this._lastMouseEvent&&(!c||!s||this._currentLink.link.range.start.y>=c&&this._currentLink.link.range.end.y<=s)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(c){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(c.link,s)&&(this._currentLink=c,this._currentLink.state={decorations:{underline:c.link.decorations===void 0||c.link.decorations.underline,pointerCursor:c.link.decorations===void 0||c.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,c.link,this._lastMouseEvent),c.link.decorations={},Object.defineProperties(c.link.decorations,{pointerCursor:{get:()=>{var a,h;return(h=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:a=>{var h,p;!((h=this._currentLink)===null||h===void 0)&&h.state&&this._currentLink.state.decorations.pointerCursor!==a&&(this._currentLink.state.decorations.pointerCursor=a,this._currentLink.state.isHovered&&((p=this._element)===null||p===void 0||p.classList.toggle("xterm-cursor-pointer",a)))}},underline:{get:()=>{var a,h;return(h=(a=this._currentLink)===null||a===void 0?void 0:a.state)===null||h===void 0?void 0:h.decorations.underline},set:a=>{var h,p,g;!((h=this._currentLink)===null||h===void 0)&&h.state&&((g=(p=this._currentLink)===null||p===void 0?void 0:p.state)===null||g===void 0?void 0:g.decorations.underline)!==a&&(this._currentLink.state.decorations.underline=a,this._currentLink.state.isHovered&&this._fireUnderlineEvent(c.link,a))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(a=>{if(!this._currentLink)return;const h=a.start===0?0:a.start+1+this._bufferService.buffer.ydisp,p=this._bufferService.buffer.ydisp+1+a.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=p&&(this._clearCurrentLink(h,p),this._lastMouseEvent&&this._element)){const g=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);g&&this._askForLink(g,!1)}})))}_linkHover(c,s,a){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!0),this._currentLink.state.decorations.pointerCursor&&c.classList.add("xterm-cursor-pointer")),s.hover&&s.hover(a,s.text)}_fireUnderlineEvent(c,s){const a=c.range,h=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(a.start.x-1,a.start.y-h-1,a.end.x,a.end.y-h-1,void 0);(s?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)}_linkLeave(c,s,a){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!1),this._currentLink.state.decorations.pointerCursor&&c.classList.remove("xterm-cursor-pointer")),s.leave&&s.leave(a,s.text)}_linkAtPosition(c,s){const a=c.range.start.y*this._bufferService.cols+c.range.start.x,h=c.range.end.y*this._bufferService.cols+c.range.end.x,p=s.y*this._bufferService.cols+s.x;return a<=p&&p<=h}_positionFromMouseEvent(c,s,a){const h=a.getCoords(c,s,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(c,s,a,h,p){return{x1:c,y1:s,x2:a,y2:h,cols:this._bufferService.cols,fg:p}}};n.Linkifier2=w=u([m(0,S.IBufferService)],w)},9042:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.tooMuchOutput=n.promptLabel=void 0,n.promptLabel="Terminal input",n.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(d,n,o){var u=this&&this.__decorate||function(w,c,s,a){var h,p=arguments.length,g=p<3?c:a===null?a=Object.getOwnPropertyDescriptor(c,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(w,c,s,a);else for(var E=w.length-1;E>=0;E--)(h=w[E])&&(g=(p<3?h(g):p>3?h(c,s,g):h(c,s))||g);return p>3&&g&&Object.defineProperty(c,s,g),g},m=this&&this.__param||function(w,c){return function(s,a){c(s,a,w)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkProvider=void 0;const f=o(511),v=o(2585);let C=n.OscLinkProvider=class{constructor(w,c,s){this._bufferService=w,this._optionsService=c,this._oscLinkService=s}provideLinks(w,c){var s;const a=this._bufferService.buffer.lines.get(w-1);if(!a)return void c(void 0);const h=[],p=this._optionsService.rawOptions.linkHandler,g=new f.CellData,E=a.getTrimmedLength();let k=-1,b=-1,O=!1;for(let M=0;M<E;M++)if(b!==-1||a.hasContent(M)){if(a.loadCell(M,g),g.hasExtendedAttrs()&&g.extended.urlId){if(b===-1){b=M,k=g.extended.urlId;continue}O=g.extended.urlId!==k}else b!==-1&&(O=!0);if(O||b!==-1&&M===E-1){const $=(s=this._oscLinkService.getLinkData(k))===null||s===void 0?void 0:s.uri;if($){const L={start:{x:b+1,y:w},end:{x:M+(O||M!==E-1?0:1),y:w}};let q=!1;if(!(p!=null&&p.allowNonHttpProtocols))try{const Z=new URL($);["http:","https:"].includes(Z.protocol)||(q=!0)}catch{q=!0}q||h.push({text:$,range:L,activate:(Z,re)=>p?p.activate(Z,re,L):S(0,re),hover:(Z,re)=>{var ie;return(ie=p==null?void 0:p.hover)===null||ie===void 0?void 0:ie.call(p,Z,re,L)},leave:(Z,re)=>{var ie;return(ie=p==null?void 0:p.leave)===null||ie===void 0?void 0:ie.call(p,Z,re,L)}})}O=!1,g.hasExtendedAttrs()&&g.extended.urlId?(b=M,k=g.extended.urlId):(b=-1,k=-1)}}c(h)}};function S(w,c){if(confirm(`Do you want to navigate to ${c}?

WARNING: This link could potentially be dangerous`)){const s=window.open();if(s){try{s.opener=null}catch{}s.location.href=c}else console.warn("Opening link blocked as opener could not be cleared")}}n.OscLinkProvider=C=u([m(0,v.IBufferService),m(1,v.IOptionsService),m(2,v.IOscLinkService)],C)},6193:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.RenderDebouncer=void 0,n.RenderDebouncer=class{constructor(o,u){this._parentWindow=o,this._renderCallback=u,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,u,m){this._rowCount=m,o=o!==void 0?o:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,u),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ScreenDprMonitor=void 0;const u=o(844);class m extends u.Disposable{constructor(v){super(),this._parentWindow=v,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,u.toDisposable)(()=>{this.clearListener()}))}setListener(v){this._listener&&this.clearListener(),this._listener=v,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}n.ScreenDprMonitor=m},3236:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Terminal=void 0;const u=o(3614),m=o(3656),f=o(6465),v=o(9042),C=o(3730),S=o(1680),w=o(3107),c=o(5744),s=o(2950),a=o(1296),h=o(428),p=o(4269),g=o(5114),E=o(8934),k=o(3230),b=o(9312),O=o(4725),M=o(6731),$=o(8055),L=o(8969),q=o(8460),Z=o(844),re=o(6114),ie=o(8437),ne=o(2584),x=o(7399),F=o(5941),P=o(9074),U=o(2585),G=o(5435),H=o(4567),K=typeof window<"u"?window.document:null;class Y extends L.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(y={}){super(y),this.browser=re,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new Z.MutableDisposable),this._onCursorMove=this.register(new q.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new q.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new q.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new q.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new q.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new q.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new q.EventEmitter),this._onBlur=this.register(new q.EventEmitter),this._onA11yCharEmitter=this.register(new q.EventEmitter),this._onA11yTabEmitter=this.register(new q.EventEmitter),this._onWillOpen=this.register(new q.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(f.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(C.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(U.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((A,I)=>this.refresh(A,I))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(A=>this._reportWindowsOptions(A))),this.register(this._inputHandler.onColor(A=>this._handleColorEvent(A))),this.register((0,q.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,q.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,q.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,q.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(A=>this._afterResize(A.cols,A.rows))),this.register((0,Z.toDisposable)(()=>{var A,I;this._customKeyEventHandler=void 0,(I=(A=this.element)===null||A===void 0?void 0:A.parentNode)===null||I===void 0||I.removeChild(this.element)}))}_handleColorEvent(y){if(this._themeService)for(const A of y){let I,j="";switch(A.index){case 256:I="foreground",j="10";break;case 257:I="background",j="11";break;case 258:I="cursor",j="12";break;default:I="ansi",j="4;"+A.index}switch(A.type){case 0:const D=$.color.toColorRGB(I==="ansi"?this._themeService.colors.ansi[A.index]:this._themeService.colors[I]);this.coreService.triggerDataEvent(`${ne.C0.ESC}]${j};${(0,F.toRgbString)(D)}${ne.C1_ESCAPED.ST}`);break;case 1:if(I==="ansi")this._themeService.modifyColors(B=>B.ansi[A.index]=$.rgba.toColor(...A.color));else{const B=I;this._themeService.modifyColors(V=>V[B]=$.rgba.toColor(...A.color))}break;case 2:this._themeService.restoreColor(A.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(y){y?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(H.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(y){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ne.C0.ESC+"[I"),this.updateCursorStyle(y),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var y;return(y=this.textarea)===null||y===void 0?void 0:y.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ne.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const y=this.buffer.ybase+this.buffer.y,A=this.buffer.lines.get(y);if(!A)return;const I=Math.min(this.buffer.x,this.cols-1),j=this._renderService.dimensions.css.cell.height,D=A.getWidth(I),B=this._renderService.dimensions.css.cell.width*D,V=this.buffer.y*this._renderService.dimensions.css.cell.height,ee=I*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ee+"px",this.textarea.style.top=V+"px",this.textarea.style.width=B+"px",this.textarea.style.height=j+"px",this.textarea.style.lineHeight=j+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,m.addDisposableDomListener)(this.element,"copy",A=>{this.hasSelection()&&(0,u.copyHandler)(A,this._selectionService)}));const y=A=>(0,u.handlePasteEvent)(A,this.textarea,this.coreService,this.optionsService);this.register((0,m.addDisposableDomListener)(this.textarea,"paste",y)),this.register((0,m.addDisposableDomListener)(this.element,"paste",y)),re.isFirefox?this.register((0,m.addDisposableDomListener)(this.element,"mousedown",A=>{A.button===2&&(0,u.rightClickHandler)(A,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,m.addDisposableDomListener)(this.element,"contextmenu",A=>{(0,u.rightClickHandler)(A,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),re.isLinux&&this.register((0,m.addDisposableDomListener)(this.element,"auxclick",A=>{A.button===1&&(0,u.moveTextAreaUnderMouseCursor)(A,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,m.addDisposableDomListener)(this.textarea,"keyup",y=>this._keyUp(y),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keydown",y=>this._keyDown(y),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"keypress",y=>this._keyPress(y),!0)),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionupdate",y=>this._compositionHelper.compositionupdate(y))),this.register((0,m.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,m.addDisposableDomListener)(this.textarea,"input",y=>this._inputEvent(y),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(y){var A;if(!y)throw new Error("Terminal requires a parent element.");y.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=y.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),y.appendChild(this.element);const I=K.createDocumentFragment();this._viewportElement=K.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),I.appendChild(this._viewportElement),this._viewportScrollArea=K.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=K.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=K.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),I.appendChild(this.screenElement),this.textarea=K.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),re.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(g.CoreBrowserService,this.textarea,(A=this._document.defaultView)!==null&&A!==void 0?A:window),this._instantiationService.setService(O.ICoreBrowserService,this._coreBrowserService),this.register((0,m.addDisposableDomListener)(this.textarea,"focus",j=>this._handleTextAreaFocus(j))),this.register((0,m.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(O.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(M.ThemeService),this._instantiationService.setService(O.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(O.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(O.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(j=>this._onRender.fire(j))),this.onResize(j=>this._renderService.resize(j.cols,j.rows)),this._compositionView=K.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(s.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(I);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(E.MouseService),this._instantiationService.setService(O.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(b.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(O.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(j=>this.scrollLines(j.amount,j.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(j=>this._renderService.handleSelectionChanged(j.start,j.end,j.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(j=>{this.textarea.value=j,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(j=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,m.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(w.BufferDecorationRenderer,this.screenElement)),this.register((0,m.addDisposableDomListener)(this.element,"mousedown",j=>this._selectionService.handleMouseDown(j))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(H.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",j=>this._handleScreenReaderModeOptionChange(j))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",j=>{!this._overviewRulerRenderer&&j&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(c.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(a.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const y=this,A=this.element;function I(B){const V=y._mouseService.getMouseReportCoords(B,y.screenElement);if(!V)return!1;let ee,le;switch(B.overrideType||B.type){case"mousemove":le=32,B.buttons===void 0?(ee=3,B.button!==void 0&&(ee=B.button<3?B.button:3)):ee=1&B.buttons?0:4&B.buttons?1:2&B.buttons?2:3;break;case"mouseup":le=0,ee=B.button<3?B.button:3;break;case"mousedown":le=1,ee=B.button<3?B.button:3;break;case"wheel":if(y.viewport.getLinesScrolled(B)===0)return!1;le=B.deltaY<0?0:1,ee=4;break;default:return!1}return!(le===void 0||ee===void 0||ee>4)&&y.coreMouseService.triggerMouseEvent({col:V.col,row:V.row,x:V.x,y:V.y,button:ee,action:le,ctrl:B.ctrlKey,alt:B.altKey,shift:B.shiftKey})}const j={mouseup:null,wheel:null,mousedrag:null,mousemove:null},D={mouseup:B=>(I(B),B.buttons||(this._document.removeEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.removeEventListener("mousemove",j.mousedrag)),this.cancel(B)),wheel:B=>(I(B),this.cancel(B,!0)),mousedrag:B=>{B.buttons&&I(B)},mousemove:B=>{B.buttons||I(B)}};this.register(this.coreMouseService.onProtocolChange(B=>{B?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(B)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&B?j.mousemove||(A.addEventListener("mousemove",D.mousemove),j.mousemove=D.mousemove):(A.removeEventListener("mousemove",j.mousemove),j.mousemove=null),16&B?j.wheel||(A.addEventListener("wheel",D.wheel,{passive:!1}),j.wheel=D.wheel):(A.removeEventListener("wheel",j.wheel),j.wheel=null),2&B?j.mouseup||(A.addEventListener("mouseup",D.mouseup),j.mouseup=D.mouseup):(this._document.removeEventListener("mouseup",j.mouseup),A.removeEventListener("mouseup",j.mouseup),j.mouseup=null),4&B?j.mousedrag||(j.mousedrag=D.mousedrag):(this._document.removeEventListener("mousemove",j.mousedrag),j.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,m.addDisposableDomListener)(A,"mousedown",B=>{if(B.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(B))return I(B),j.mouseup&&this._document.addEventListener("mouseup",j.mouseup),j.mousedrag&&this._document.addEventListener("mousemove",j.mousedrag),this.cancel(B)})),this.register((0,m.addDisposableDomListener)(A,"wheel",B=>{if(!j.wheel){if(!this.buffer.hasScrollback){const V=this.viewport.getLinesScrolled(B);if(V===0)return;const ee=ne.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(B.deltaY<0?"A":"B");let le="";for(let ue=0;ue<Math.abs(V);ue++)le+=ee;return this.coreService.triggerDataEvent(le,!0),this.cancel(B,!0)}return this.viewport.handleWheel(B)?this.cancel(B):void 0}},{passive:!1})),this.register((0,m.addDisposableDomListener)(A,"touchstart",B=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(B),this.cancel(B)},{passive:!0})),this.register((0,m.addDisposableDomListener)(A,"touchmove",B=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(B)?void 0:this.cancel(B)},{passive:!1}))}refresh(y,A){var I;(I=this._renderService)===null||I===void 0||I.refreshRows(y,A)}updateCursorStyle(y){var A;!((A=this._selectionService)===null||A===void 0)&&A.shouldColumnSelect(y)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(y,A,I=0){var j;I===1?(super.scrollLines(y,A,I),this.refresh(0,this.rows-1)):(j=this.viewport)===null||j===void 0||j.scrollLines(y)}paste(y){(0,u.paste)(y,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(y){this._customKeyEventHandler=y}registerLinkProvider(y){return this.linkifier2.registerLinkProvider(y)}registerCharacterJoiner(y){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const A=this._characterJoinerService.register(y);return this.refresh(0,this.rows-1),A}deregisterCharacterJoiner(y){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(y)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(y){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+y)}registerDecoration(y){return this._decorationService.registerDecoration(y)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(y,A,I){this._selectionService.setSelection(y,A,I)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var y;(y=this._selectionService)===null||y===void 0||y.clearSelection()}selectAll(){var y;(y=this._selectionService)===null||y===void 0||y.selectAll()}selectLines(y,A){var I;(I=this._selectionService)===null||I===void 0||I.selectLines(y,A)}_keyDown(y){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(y)===!1)return!1;const A=this.browser.isMac&&this.options.macOptionIsMeta&&y.altKey;if(!A&&!this._compositionHelper.keydown(y))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;A||y.key!=="Dead"&&y.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const I=(0,x.evaluateKeyboardEvent)(y,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(y),I.type===3||I.type===2){const j=this.rows-1;return this.scrollLines(I.type===2?-j:j),this.cancel(y,!0)}return I.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,y)||(I.cancel&&this.cancel(y,!0),!I.key||!!(y.key&&!y.ctrlKey&&!y.altKey&&!y.metaKey&&y.key.length===1&&y.key.charCodeAt(0)>=65&&y.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(I.key!==ne.C0.ETX&&I.key!==ne.C0.CR||(this.textarea.value=""),this._onKey.fire({key:I.key,domEvent:y}),this._showCursor(),this.coreService.triggerDataEvent(I.key,!0),!this.optionsService.rawOptions.screenReaderMode||y.altKey||y.ctrlKey?this.cancel(y,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(y,A){const I=y.isMac&&!this.options.macOptionIsMeta&&A.altKey&&!A.ctrlKey&&!A.metaKey||y.isWindows&&A.altKey&&A.ctrlKey&&!A.metaKey||y.isWindows&&A.getModifierState("AltGraph");return A.type==="keypress"?I:I&&(!A.keyCode||A.keyCode>47)}_keyUp(y){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(y)===!1||(function(A){return A.keyCode===16||A.keyCode===17||A.keyCode===18}(y)||this.focus(),this.updateCursorStyle(y),this._keyPressHandled=!1)}_keyPress(y){let A;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(y)===!1)return!1;if(this.cancel(y),y.charCode)A=y.charCode;else if(y.which===null||y.which===void 0)A=y.keyCode;else{if(y.which===0||y.charCode===0)return!1;A=y.which}return!(!A||(y.altKey||y.ctrlKey||y.metaKey)&&!this._isThirdLevelShift(this.browser,y)||(A=String.fromCharCode(A),this._onKey.fire({key:A,domEvent:y}),this._showCursor(),this.coreService.triggerDataEvent(A,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(y){if(y.data&&y.inputType==="insertText"&&(!y.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const A=y.data;return this.coreService.triggerDataEvent(A,!0),this.cancel(y),!0}return!1}resize(y,A){y!==this.cols||A!==this.rows?super.resize(y,A):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(y,A){var I,j;(I=this._charSizeService)===null||I===void 0||I.measure(),(j=this.viewport)===null||j===void 0||j.syncScrollArea(!0)}clear(){var y;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let A=1;A<this.rows;A++)this.buffer.lines.push(this.buffer.getBlankLine(ie.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(y=this.viewport)===null||y===void 0||y.reset(),this.refresh(0,this.rows-1)}}reset(){var y,A;this.options.rows=this.rows,this.options.cols=this.cols;const I=this._customKeyEventHandler;this._setup(),super.reset(),(y=this._selectionService)===null||y===void 0||y.reset(),this._decorationService.reset(),(A=this.viewport)===null||A===void 0||A.reset(),this._customKeyEventHandler=I,this.refresh(0,this.rows-1)}clearTextureAtlas(){var y;(y=this._renderService)===null||y===void 0||y.clearTextureAtlas()}_reportFocus(){var y;!((y=this.element)===null||y===void 0)&&y.classList.contains("focus")?this.coreService.triggerDataEvent(ne.C0.ESC+"[I"):this.coreService.triggerDataEvent(ne.C0.ESC+"[O")}_reportWindowsOptions(y){if(this._renderService)switch(y){case G.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const A=this._renderService.dimensions.css.canvas.width.toFixed(0),I=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ne.C0.ESC}[4;${I};${A}t`);break;case G.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const j=this._renderService.dimensions.css.cell.width.toFixed(0),D=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ne.C0.ESC}[6;${D};${j}t`)}}cancel(y,A){if(this.options.cancelEvents||A)return y.preventDefault(),y.stopPropagation(),!1}}n.Terminal=Y},9924:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TimeBasedDebouncer=void 0,n.TimeBasedDebouncer=class{constructor(o,u=1e3){this._renderCallback=o,this._debounceThresholdMS=u,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,u,m){this._rowCount=m,o=o!==void 0?o:0,u=u!==void 0?u:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,u):u;const f=Date.now();if(f-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=f,this._innerRefresh();else if(!this._additionalRefreshRequested){const v=f-this._lastRefreshMs,C=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,u)}}},1680:function(d,n,o){var u=this&&this.__decorate||function(s,a,h,p){var g,E=arguments.length,k=E<3?a:p===null?p=Object.getOwnPropertyDescriptor(a,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(s,a,h,p);else for(var b=s.length-1;b>=0;b--)(g=s[b])&&(k=(E<3?g(k):E>3?g(a,h,k):g(a,h))||k);return E>3&&k&&Object.defineProperty(a,h,k),k},m=this&&this.__param||function(s,a){return function(h,p){a(h,p,s)}};Object.defineProperty(n,"__esModule",{value:!0}),n.Viewport=void 0;const f=o(3656),v=o(4725),C=o(8460),S=o(844),w=o(2585);let c=n.Viewport=class extends S.Disposable{constructor(s,a,h,p,g,E,k,b){super(),this._viewportElement=s,this._scrollArea=a,this._bufferService=h,this._optionsService=p,this._charSizeService=g,this._renderService=E,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,f.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(O=>this._activeBuffer=O.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(O=>this._renderDimensions=O)),this._handleThemeChange(b.colors),this.register(b.onChangeColors(O=>this._handleThemeChange(O))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(s){this._viewportElement.style.backgroundColor=s.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(s){if(s)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const a=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==a&&(this._lastRecordedBufferHeight=a,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const s=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==s&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=s),this._refreshAnimationFrame=null}syncScrollArea(s=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(s);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(s)}_handleScroll(s){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const a=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:a,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const s=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(s*(this._smoothScrollState.target-this._smoothScrollState.origin)),s<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(s,a){const h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(a<0&&this._viewportElement.scrollTop!==0||a>0&&h<this._lastRecordedBufferHeight)||(s.cancelable&&s.preventDefault(),!1)}handleWheel(s){const a=this._getPixelsScrolled(s);return a!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+a:this._smoothScrollState.target+=a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=a,this._bubbleScroll(s,a))}scrollLines(s){if(s!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const a=s*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+a,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!1})}_getPixelsScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let a=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_LINE?a*=this._currentRowHeight:s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._currentRowHeight*this._bufferService.rows),a}getBufferElements(s,a){var h;let p,g="";const E=[],k=a??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let O=s;O<k;O++){const M=b.get(O);if(!M)continue;const $=(h=b.get(O+1))===null||h===void 0?void 0:h.isWrapped;if(g+=M.translateToString(!$),!$||O===b.length-1){const L=document.createElement("div");L.textContent=g,E.push(L),g.length>0&&(p=L),g=""}}return{bufferElements:E,cursorElement:p}}getLinesScrolled(s){if(s.deltaY===0||s.shiftKey)return 0;let a=this._applyScrollModifier(s.deltaY,s);return s.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(a/=this._currentRowHeight+0,this._wheelPartialScroll+=a,a=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):s.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(a*=this._bufferService.rows),a}_applyScrollModifier(s,a){const h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&a.altKey||h==="ctrl"&&a.ctrlKey||h==="shift"&&a.shiftKey?s*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:s*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(s){this._lastTouchY=s.touches[0].pageY}handleTouchMove(s){const a=this._lastTouchY-s.touches[0].pageY;return this._lastTouchY=s.touches[0].pageY,a!==0&&(this._viewportElement.scrollTop+=a,this._bubbleScroll(s,a))}};n.Viewport=c=u([m(2,w.IBufferService),m(3,w.IOptionsService),m(4,v.ICharSizeService),m(5,v.IRenderService),m(6,v.ICoreBrowserService),m(7,v.IThemeService)],c)},3107:function(d,n,o){var u=this&&this.__decorate||function(c,s,a,h){var p,g=arguments.length,E=g<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,s,a,h);else for(var k=c.length-1;k>=0;k--)(p=c[k])&&(E=(g<3?p(E):g>3?p(s,a,E):p(s,a))||E);return g>3&&E&&Object.defineProperty(s,a,E),E},m=this&&this.__param||function(c,s){return function(a,h){s(a,h,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferDecorationRenderer=void 0;const f=o(3656),v=o(4725),C=o(844),S=o(2585);let w=n.BufferDecorationRenderer=class extends C.Disposable{constructor(c,s,a,h){super(),this._screenElement=c,this._bufferService=s,this._decorationService=a,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,f.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(p=>this._removeDecoration(p))),this.register((0,C.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const c of this._decorationService.decorations)this._renderDecoration(c);this._dimensionsChanged=!1}_renderDecoration(c){this._refreshStyle(c),this._dimensionsChanged&&this._refreshXPosition(c)}_createElement(c){var s,a;const h=document.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((s=c==null?void 0:c.options)===null||s===void 0?void 0:s.layer)==="top"),h.style.width=`${Math.round((c.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(c.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(c.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const p=(a=c.options.x)!==null&&a!==void 0?a:0;return p&&p>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(c,h),h}_refreshStyle(c){const s=c.marker.line-this._bufferService.buffers.active.ydisp;if(s<0||s>=this._bufferService.rows)c.element&&(c.element.style.display="none",c.onRenderEmitter.fire(c.element));else{let a=this._decorationElements.get(c);a||(a=this._createElement(c),c.element=a,this._decorationElements.set(c,a),this._container.appendChild(a),c.onDispose(()=>{this._decorationElements.delete(c),a.remove()})),a.style.top=s*this._renderService.dimensions.css.cell.height+"px",a.style.display=this._altBufferIsActive?"none":"block",c.onRenderEmitter.fire(a)}}_refreshXPosition(c,s=c.element){var a;if(!s)return;const h=(a=c.options.x)!==null&&a!==void 0?a:0;(c.options.anchor||"left")==="right"?s.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":s.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(c){var s;(s=this._decorationElements.get(c))===null||s===void 0||s.remove(),this._decorationElements.delete(c),c.dispose()}};n.BufferDecorationRenderer=w=u([m(1,S.IBufferService),m(2,S.IDecorationService),m(3,v.IRenderService)],w)},5871:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ColorZoneStore=void 0,n.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const u of this._zones)if(u.color===o.options.overviewRulerOptions.color&&u.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(u,o.marker.line))return;if(this._lineAdjacentToZone(u,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(u,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,u){return u>=o.startBufferLine&&u<=o.endBufferLine}_lineAdjacentToZone(o,u,m){return u>=o.startBufferLine-this._linePadding[m||"full"]&&u<=o.endBufferLine+this._linePadding[m||"full"]}_addLineToZone(o,u){o.startBufferLine=Math.min(o.startBufferLine,u),o.endBufferLine=Math.max(o.endBufferLine,u)}}},5744:function(d,n,o){var u=this&&this.__decorate||function(p,g,E,k){var b,O=arguments.length,M=O<3?g:k===null?k=Object.getOwnPropertyDescriptor(g,E):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(p,g,E,k);else for(var $=p.length-1;$>=0;$--)(b=p[$])&&(M=(O<3?b(M):O>3?b(g,E,M):b(g,E))||M);return O>3&&M&&Object.defineProperty(g,E,M),M},m=this&&this.__param||function(p,g){return function(E,k){g(E,k,p)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OverviewRulerRenderer=void 0;const f=o(5871),v=o(3656),C=o(4725),S=o(844),w=o(2585),c={full:0,left:0,center:0,right:0},s={full:0,left:0,center:0,right:0},a={full:0,left:0,center:0,right:0};let h=n.OverviewRulerRenderer=class extends S.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(p,g,E,k,b,O,M){var $;super(),this._viewportElement=p,this._screenElement=g,this._bufferService=E,this._decorationService=k,this._renderService=b,this._optionsService=O,this._coreBrowseService=M,this._colorZoneStore=new f.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),($=this._viewportElement.parentElement)===null||$===void 0||$.insertBefore(this._canvas,this._viewportElement);const L=this._canvas.getContext("2d");if(!L)throw new Error("Ctx cannot be null");this._ctx=L,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,S.toDisposable)(()=>{var q;(q=this._canvas)===null||q===void 0||q.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,v.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const p=Math.floor(this._canvas.width/3),g=Math.ceil(this._canvas.width/3);s.full=this._canvas.width,s.left=p,s.center=g,s.right=p,this._refreshDrawHeightConstants(),a.full=0,a.left=0,a.center=s.left,a.right=s.left+s.center}_refreshDrawHeightConstants(){c.full=Math.round(2*this._coreBrowseService.dpr);const p=this._canvas.height/this._bufferService.buffer.lines.length,g=Math.round(Math.max(Math.min(p,12),6)*this._coreBrowseService.dpr);c.left=g,c.center=g,c.right=g}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*c.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const g of this._decorationService.decorations)this._colorZoneStore.addDecoration(g);this._ctx.lineWidth=1;const p=this._colorZoneStore.zones;for(const g of p)g.position!=="full"&&this._renderColorZone(g);for(const g of p)g.position==="full"&&this._renderColorZone(g);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(p){this._ctx.fillStyle=p.color,this._ctx.fillRect(a[p.position||"full"],Math.round((this._canvas.height-1)*(p.startBufferLine/this._bufferService.buffers.active.lines.length)-c[p.position||"full"]/2),s[p.position||"full"],Math.round((this._canvas.height-1)*((p.endBufferLine-p.startBufferLine)/this._bufferService.buffers.active.lines.length)+c[p.position||"full"]))}_queueRefresh(p,g){this._shouldUpdateDimensions=p||this._shouldUpdateDimensions,this._shouldUpdateAnchor=g||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};n.OverviewRulerRenderer=h=u([m(2,w.IBufferService),m(3,w.IDecorationService),m(4,C.IRenderService),m(5,w.IOptionsService),m(6,C.ICoreBrowserService)],h)},2950:function(d,n,o){var u=this&&this.__decorate||function(w,c,s,a){var h,p=arguments.length,g=p<3?c:a===null?a=Object.getOwnPropertyDescriptor(c,s):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(w,c,s,a);else for(var E=w.length-1;E>=0;E--)(h=w[E])&&(g=(p<3?h(g):p>3?h(c,s,g):h(c,s))||g);return p>3&&g&&Object.defineProperty(c,s,g),g},m=this&&this.__param||function(w,c){return function(s,a){c(s,a,w)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CompositionHelper=void 0;const f=o(4725),v=o(2585),C=o(2584);let S=n.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(w,c,s,a,h,p){this._textarea=w,this._compositionView=c,this._bufferService=s,this._optionsService=a,this._coreService=h,this._renderService=p,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(w){this._compositionView.textContent=w.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(w){if(this._isComposing||this._isSendingComposition){if(w.keyCode===229||w.keyCode===16||w.keyCode===17||w.keyCode===18)return!1;this._finalizeComposition(!1)}return w.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(w){if(this._compositionView.classList.remove("active"),this._isComposing=!1,w){const c={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let s;this._isSendingComposition=!1,c.start+=this._dataAlreadySent.length,s=this._isComposing?this._textarea.value.substring(c.start,c.end):this._textarea.value.substring(c.start),s.length>0&&this._coreService.triggerDataEvent(s,!0)}},0)}else{this._isSendingComposition=!1;const c=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(c,!0)}}_handleAnyTextareaChanges(){const w=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const c=this._textarea.value,s=c.replace(w,"");this._dataAlreadySent=s,c.length>w.length?this._coreService.triggerDataEvent(s,!0):c.length<w.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):c.length===w.length&&c!==w&&this._coreService.triggerDataEvent(c,!0)}},0)}updateCompositionElements(w){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const c=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),s=this._renderService.dimensions.css.cell.height,a=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=c*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=a+"px",this._compositionView.style.height=s+"px",this._compositionView.style.lineHeight=s+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const p=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=a+"px",this._textarea.style.width=Math.max(p.width,1)+"px",this._textarea.style.height=Math.max(p.height,1)+"px",this._textarea.style.lineHeight=p.height+"px"}w||setTimeout(()=>this.updateCompositionElements(!0),0)}}};n.CompositionHelper=S=u([m(2,v.IBufferService),m(3,v.IOptionsService),m(4,v.ICoreService),m(5,f.IRenderService)],S)},9806:(d,n)=>{function o(u,m,f){const v=f.getBoundingClientRect(),C=u.getComputedStyle(f),S=parseInt(C.getPropertyValue("padding-left")),w=parseInt(C.getPropertyValue("padding-top"));return[m.clientX-v.left-S,m.clientY-v.top-w]}Object.defineProperty(n,"__esModule",{value:!0}),n.getCoords=n.getCoordsRelativeToElement=void 0,n.getCoordsRelativeToElement=o,n.getCoords=function(u,m,f,v,C,S,w,c,s){if(!S)return;const a=o(u,m,f);return a?(a[0]=Math.ceil((a[0]+(s?w/2:0))/w),a[1]=Math.ceil(a[1]/c),a[0]=Math.min(Math.max(a[0],1),v+(s?1:0)),a[1]=Math.min(Math.max(a[1],1),C),a):void 0}},9504:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.moveToCellSequence=void 0;const u=o(2584);function m(c,s,a,h){const p=c-f(c,a),g=s-f(s,a),E=Math.abs(p-g)-function(k,b,O){let M=0;const $=k-f(k,O),L=b-f(b,O);for(let q=0;q<Math.abs($-L);q++){const Z=v(k,b)==="A"?-1:1,re=O.buffer.lines.get($+Z*q);re!=null&&re.isWrapped&&M++}return M}(c,s,a);return w(E,S(v(c,s),h))}function f(c,s){let a=0,h=s.buffer.lines.get(c),p=h==null?void 0:h.isWrapped;for(;p&&c>=0&&c<s.rows;)a++,h=s.buffer.lines.get(--c),p=h==null?void 0:h.isWrapped;return a}function v(c,s){return c>s?"A":"B"}function C(c,s,a,h,p,g){let E=c,k=s,b="";for(;E!==a||k!==h;)E+=p?1:-1,p&&E>g.cols-1?(b+=g.buffer.translateBufferLineToString(k,!1,c,E),E=0,c=0,k++):!p&&E<0&&(b+=g.buffer.translateBufferLineToString(k,!1,0,c+1),E=g.cols-1,c=E,k--);return b+g.buffer.translateBufferLineToString(k,!1,c,E)}function S(c,s){const a=s?"O":"[";return u.C0.ESC+a+c}function w(c,s){c=Math.floor(c);let a="";for(let h=0;h<c;h++)a+=s;return a}n.moveToCellSequence=function(c,s,a,h){const p=a.buffer.x,g=a.buffer.y;if(!a.buffer.hasScrollback)return function(b,O,M,$,L,q){return m(O,$,L,q).length===0?"":w(C(b,O,b,O-f(O,L),!1,L).length,S("D",q))}(p,g,0,s,a,h)+m(g,s,a,h)+function(b,O,M,$,L,q){let Z;Z=m(O,$,L,q).length>0?$-f($,L):O;const re=$,ie=function(ne,x,F,P,U,G){let H;return H=m(F,P,U,G).length>0?P-f(P,U):x,ne<F&&H<=P||ne>=F&&H<P?"C":"D"}(b,O,M,$,L,q);return w(C(b,Z,M,re,ie==="C",L).length,S(ie,q))}(p,g,c,s,a,h);let E;if(g===s)return E=p>c?"D":"C",w(Math.abs(p-c),S(E,h));E=g>s?"D":"C";const k=Math.abs(g-s);return w(function(b,O){return O.cols-b}(g>s?c:p,a)+(k-1)*a.cols+1+((g>s?p:c)-1),S(E,h))}},1296:function(d,n,o){var u=this&&this.__decorate||function(L,q,Z,re){var ie,ne=arguments.length,x=ne<3?q:re===null?re=Object.getOwnPropertyDescriptor(q,Z):re;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(L,q,Z,re);else for(var F=L.length-1;F>=0;F--)(ie=L[F])&&(x=(ne<3?ie(x):ne>3?ie(q,Z,x):ie(q,Z))||x);return ne>3&&x&&Object.defineProperty(q,Z,x),x},m=this&&this.__param||function(L,q){return function(Z,re){q(Z,re,L)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRenderer=void 0;const f=o(3787),v=o(2550),C=o(2223),S=o(6171),w=o(4725),c=o(8055),s=o(8460),a=o(844),h=o(2585),p="xterm-dom-renderer-owner-",g="xterm-rows",E="xterm-fg-",k="xterm-bg-",b="xterm-focus",O="xterm-selection";let M=1,$=n.DomRenderer=class extends a.Disposable{constructor(L,q,Z,re,ie,ne,x,F,P,U){super(),this._element=L,this._screenElement=q,this._viewportElement=Z,this._linkifier2=re,this._charSizeService=ne,this._optionsService=x,this._bufferService=F,this._coreBrowserService=P,this._themeService=U,this._terminalClass=M++,this._rowElements=[],this.onRequestRedraw=this.register(new s.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(g),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(O),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(G=>this._injectCss(G))),this._injectCss(this._themeService.colors),this._rowFactory=ie.createInstance(f.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(G=>this._handleLinkHover(G))),this.register(this._linkifier2.onHideLinkUnderline(G=>this._handleLinkLeave(G))),this.register((0,a.toDisposable)(()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const L=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*L,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*L),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/L),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/L),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const Z of this._rowElements)Z.style.width=`${this.dimensions.css.canvas.width}px`,Z.style.height=`${this.dimensions.css.cell.height}px`,Z.style.lineHeight=`${this.dimensions.css.cell.height}px`,Z.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const q=`${this._terminalSelector} .${g} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=q,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(L){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let q=`${this._terminalSelector} .${g} { color: ${L.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;q+=`${this._terminalSelector} .${g} .xterm-dim { color: ${c.color.multiplyOpacity(L.foreground,.5).css};}`,q+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,q+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",q+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${L.cursor.css};  color: ${L.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${L.cursor.css}; }}`,q+=`${this._terminalSelector} .${g}.${b} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${g}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-block { background-color: ${L.cursor.css}; color: ${L.cursorAccent.css};}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${L.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${L.cursor.css} inset;}${this._terminalSelector} .${g} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${L.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,q+=`${this._terminalSelector} .${O} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${O} div { position: absolute; background-color: ${L.selectionBackgroundOpaque.css};}${this._terminalSelector} .${O} div { position: absolute; background-color: ${L.selectionInactiveBackgroundOpaque.css};}`;for(const[Z,re]of L.ansi.entries())q+=`${this._terminalSelector} .${E}${Z} { color: ${re.css}; }${this._terminalSelector} .${E}${Z}.xterm-dim { color: ${c.color.multiplyOpacity(re,.5).css}; }${this._terminalSelector} .${k}${Z} { background-color: ${re.css}; }`;q+=`${this._terminalSelector} .${E}${C.INVERTED_DEFAULT_COLOR} { color: ${c.color.opaque(L.background).css}; }${this._terminalSelector} .${E}${C.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${c.color.multiplyOpacity(c.color.opaque(L.background),.5).css}; }${this._terminalSelector} .${k}${C.INVERTED_DEFAULT_COLOR} { background-color: ${L.foreground.css}; }`,this._themeStyleElement.textContent=q}_setDefaultSpacing(){const L=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${L}px`,this._rowFactory.defaultSpacing=L}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(L,q){for(let Z=this._rowElements.length;Z<=q;Z++){const re=document.createElement("div");this._rowContainer.appendChild(re),this._rowElements.push(re)}for(;this._rowElements.length>q;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(L,q){this._refreshRowElements(L,q),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(L,q,Z){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(L,q,Z),this.renderRows(0,this._bufferService.rows-1),!L||!q)return;const re=L[1]-this._bufferService.buffer.ydisp,ie=q[1]-this._bufferService.buffer.ydisp,ne=Math.max(re,0),x=Math.min(ie,this._bufferService.rows-1);if(ne>=this._bufferService.rows||x<0)return;const F=document.createDocumentFragment();if(Z){const P=L[0]>q[0];F.appendChild(this._createSelectionElement(ne,P?q[0]:L[0],P?L[0]:q[0],x-ne+1))}else{const P=re===ne?L[0]:0,U=ne===ie?q[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(ne,P,U));const G=x-ne-1;if(F.appendChild(this._createSelectionElement(ne+1,0,this._bufferService.cols,G)),ne!==x){const H=ie===x?q[0]:this._bufferService.cols;F.appendChild(this._createSelectionElement(x,0,H))}}this._selectionContainer.appendChild(F)}_createSelectionElement(L,q,Z,re=1){const ie=document.createElement("div");return ie.style.height=re*this.dimensions.css.cell.height+"px",ie.style.top=L*this.dimensions.css.cell.height+"px",ie.style.left=q*this.dimensions.css.cell.width+"px",ie.style.width=this.dimensions.css.cell.width*(Z-q)+"px",ie}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const L of this._rowElements)L.replaceChildren()}renderRows(L,q){const Z=this._bufferService.buffer,re=Z.ybase+Z.y,ie=Math.min(Z.x,this._bufferService.cols-1),ne=this._optionsService.rawOptions.cursorBlink,x=this._optionsService.rawOptions.cursorStyle,F=this._optionsService.rawOptions.cursorInactiveStyle;for(let P=L;P<=q;P++){const U=P+Z.ydisp,G=this._rowElements[P],H=Z.lines.get(U);if(!G||!H)break;G.replaceChildren(...this._rowFactory.createRow(H,U,U===re,x,F,ie,ne,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(L){this._setCellUnderline(L.x1,L.x2,L.y1,L.y2,L.cols,!0)}_handleLinkLeave(L){this._setCellUnderline(L.x1,L.x2,L.y1,L.y2,L.cols,!1)}_setCellUnderline(L,q,Z,re,ie,ne){Z<0&&(L=0),re<0&&(q=0);const x=this._bufferService.rows-1;Z=Math.max(Math.min(Z,x),0),re=Math.max(Math.min(re,x),0),ie=Math.min(ie,this._bufferService.cols);const F=this._bufferService.buffer,P=F.ybase+F.y,U=Math.min(F.x,ie-1),G=this._optionsService.rawOptions.cursorBlink,H=this._optionsService.rawOptions.cursorStyle,K=this._optionsService.rawOptions.cursorInactiveStyle;for(let Y=Z;Y<=re;++Y){const z=Y+F.ydisp,y=this._rowElements[Y],A=F.lines.get(z);if(!y||!A)break;y.replaceChildren(...this._rowFactory.createRow(A,z,z===P,H,K,U,G,this.dimensions.css.cell.width,this._widthCache,ne?Y===Z?L:0:-1,ne?(Y===re?q:ie)-1:-1))}}};n.DomRenderer=$=u([m(4,h.IInstantiationService),m(5,w.ICharSizeService),m(6,h.IOptionsService),m(7,h.IBufferService),m(8,w.ICoreBrowserService),m(9,w.IThemeService)],$)},3787:function(d,n,o){var u=this&&this.__decorate||function(E,k,b,O){var M,$=arguments.length,L=$<3?k:O===null?O=Object.getOwnPropertyDescriptor(k,b):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")L=Reflect.decorate(E,k,b,O);else for(var q=E.length-1;q>=0;q--)(M=E[q])&&(L=($<3?M(L):$>3?M(k,b,L):M(k,b))||L);return $>3&&L&&Object.defineProperty(k,b,L),L},m=this&&this.__param||function(E,k){return function(b,O){k(b,O,E)}};Object.defineProperty(n,"__esModule",{value:!0}),n.DomRendererRowFactory=void 0;const f=o(2223),v=o(643),C=o(511),S=o(2585),w=o(8055),c=o(4725),s=o(4269),a=o(6171),h=o(3734);let p=n.DomRendererRowFactory=class{constructor(E,k,b,O,M,$,L){this._document=E,this._characterJoinerService=k,this._optionsService=b,this._coreBrowserService=O,this._coreService=M,this._decorationService=$,this._themeService=L,this._workCell=new C.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(E,k,b){this._selectionStart=E,this._selectionEnd=k,this._columnSelectMode=b}createRow(E,k,b,O,M,$,L,q,Z,re,ie){const ne=[],x=this._characterJoinerService.getJoinedCharacters(k),F=this._themeService.colors;let P,U=E.getNoBgTrimmedLength();b&&U<$+1&&(U=$+1);let G=0,H="",K=0,Y=0,z=0,y=!1,A=0,I=!1,j=0;const D=[],B=re!==-1&&ie!==-1;for(let V=0;V<U;V++){E.loadCell(V,this._workCell);let ee=this._workCell.getWidth();if(ee===0)continue;let le=!1,ue=V,ce=this._workCell;if(x.length>0&&V===x[0][0]){le=!0;const me=x.shift();ce=new s.JoinedCellData(this._workCell,E.translateToString(!0,me[0],me[1]),me[1]-me[0]),ue=me[1]-1,ee=ce.getWidth()}const ge=this._isCellInSelection(V,k),oe=b&&V===$,Fe=B&&V>=re&&V<=ie;let He=!1;this._decorationService.forEachDecorationAtCell(V,k,void 0,me=>{He=!0});let Oe=ce.getChars()||v.WHITESPACE_CELL_CHAR;if(Oe===" "&&(ce.isUnderline()||ce.isOverline())&&(Oe="Â "),j=ee*q-Z.get(Oe,ce.isBold(),ce.isItalic()),P){if(G&&(ge&&I||!ge&&!I&&ce.bg===K)&&(ge&&I&&F.selectionForeground||ce.fg===Y)&&ce.extended.ext===z&&Fe===y&&j===A&&!oe&&!le&&!He){H+=Oe,G++;continue}G&&(P.textContent=H),P=this._document.createElement("span"),G=0,H=""}else P=this._document.createElement("span");if(K=ce.bg,Y=ce.fg,z=ce.extended.ext,y=Fe,A=j,I=ge,le&&$>=V&&$<=ue&&($=V),!this._coreService.isCursorHidden&&oe){if(D.push("xterm-cursor"),this._coreBrowserService.isFocused)L&&D.push("xterm-cursor-blink"),D.push(O==="bar"?"xterm-cursor-bar":O==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(M)switch(M){case"outline":D.push("xterm-cursor-outline");break;case"block":D.push("xterm-cursor-block");break;case"bar":D.push("xterm-cursor-bar");break;case"underline":D.push("xterm-cursor-underline")}}if(ce.isBold()&&D.push("xterm-bold"),ce.isItalic()&&D.push("xterm-italic"),ce.isDim()&&D.push("xterm-dim"),H=ce.isInvisible()?v.WHITESPACE_CELL_CHAR:ce.getChars()||v.WHITESPACE_CELL_CHAR,ce.isUnderline()&&(D.push(`xterm-underline-${ce.extended.underlineStyle}`),H===" "&&(H="Â "),!ce.isUnderlineColorDefault()))if(ce.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(ce.getUnderlineColor()).join(",")})`;else{let me=ce.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&ce.isBold()&&me<8&&(me+=8),P.style.textDecorationColor=F.ansi[me].css}ce.isOverline()&&(D.push("xterm-overline"),H===" "&&(H="Â ")),ce.isStrikethrough()&&D.push("xterm-strikethrough"),Fe&&(P.style.textDecoration="underline");let Ee=ce.getFgColor(),X=ce.getFgColorMode(),Q=ce.getBgColor(),he=ce.getBgColorMode();const _e=!!ce.isInverse();if(_e){const me=Ee;Ee=Q,Q=me;const We=X;X=he,he=We}let de,Se,ye,Te=!1;switch(this._decorationService.forEachDecorationAtCell(V,k,void 0,me=>{me.options.layer!=="top"&&Te||(me.backgroundColorRGB&&(he=50331648,Q=me.backgroundColorRGB.rgba>>8&16777215,de=me.backgroundColorRGB),me.foregroundColorRGB&&(X=50331648,Ee=me.foregroundColorRGB.rgba>>8&16777215,Se=me.foregroundColorRGB),Te=me.options.layer==="top")}),!Te&&ge&&(de=this._coreBrowserService.isFocused?F.selectionBackgroundOpaque:F.selectionInactiveBackgroundOpaque,Q=de.rgba>>8&16777215,he=50331648,Te=!0,F.selectionForeground&&(X=50331648,Ee=F.selectionForeground.rgba>>8&16777215,Se=F.selectionForeground)),Te&&D.push("xterm-decoration-top"),he){case 16777216:case 33554432:ye=F.ansi[Q],D.push(`xterm-bg-${Q}`);break;case 50331648:ye=w.rgba.toColor(Q>>16,Q>>8&255,255&Q),this._addStyle(P,`background-color:#${g((Q>>>0).toString(16),"0",6)}`);break;default:_e?(ye=F.foreground,D.push(`xterm-bg-${f.INVERTED_DEFAULT_COLOR}`)):ye=F.background}switch(de||ce.isDim()&&(de=w.color.multiplyOpacity(ye,.5)),X){case 16777216:case 33554432:ce.isBold()&&Ee<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(Ee+=8),this._applyMinimumContrast(P,ye,F.ansi[Ee],ce,de,void 0)||D.push(`xterm-fg-${Ee}`);break;case 50331648:const me=w.rgba.toColor(Ee>>16&255,Ee>>8&255,255&Ee);this._applyMinimumContrast(P,ye,me,ce,de,Se)||this._addStyle(P,`color:#${g(Ee.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,ye,F.foreground,ce,de,void 0)||_e&&D.push(`xterm-fg-${f.INVERTED_DEFAULT_COLOR}`)}D.length&&(P.className=D.join(" "),D.length=0),oe||le||He?P.textContent=H:G++,j!==this.defaultSpacing&&(P.style.letterSpacing=`${j}px`),ne.push(P),V=ue}return P&&G&&(P.textContent=H),ne}_applyMinimumContrast(E,k,b,O,M,$){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,a.excludeFromContrastRatioDemands)(O.getCode()))return!1;const L=this._getContrastCache(O);let q;if(M||$||(q=L.getColor(k.rgba,b.rgba)),q===void 0){const Z=this._optionsService.rawOptions.minimumContrastRatio/(O.isDim()?2:1);q=w.color.ensureContrastRatio(M||k,$||b,Z),L.setColor((M||k).rgba,($||b).rgba,q??null)}return!!q&&(this._addStyle(E,`color:${q.css}`),!0)}_getContrastCache(E){return E.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(E,k){E.setAttribute("style",`${E.getAttribute("style")||""}${k};`)}_isCellInSelection(E,k){const b=this._selectionStart,O=this._selectionEnd;return!(!b||!O)&&(this._columnSelectMode?b[0]<=O[0]?E>=b[0]&&k>=b[1]&&E<O[0]&&k<=O[1]:E<b[0]&&k>=b[1]&&E>=O[0]&&k<=O[1]:k>b[1]&&k<O[1]||b[1]===O[1]&&k===b[1]&&E>=b[0]&&E<O[0]||b[1]<O[1]&&k===O[1]&&E<O[0]||b[1]<O[1]&&k===b[1]&&E>=b[0])}};function g(E,k,b){for(;E.length<b;)E=k+E;return E}n.DomRendererRowFactory=p=u([m(1,c.ICharacterJoinerService),m(2,S.IOptionsService),m(3,c.ICoreBrowserService),m(4,S.ICoreService),m(5,S.IDecorationService),m(6,c.IThemeService)],p)},2550:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WidthCache=void 0,n.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const u=o.createElement("span"),m=o.createElement("span");m.style.fontWeight="bold";const f=o.createElement("span");f.style.fontStyle="italic";const v=o.createElement("span");v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[u,m,f,v],this._container.appendChild(u),this._container.appendChild(m),this._container.appendChild(f),this._container.appendChild(v),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,u,m,f){o===this._font&&u===this._fontSize&&m===this._weight&&f===this._weightBold||(this._font=o,this._fontSize=u,this._weight=m,this._weightBold=f,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${m}`,this._measureElements[1].style.fontWeight=`${f}`,this._measureElements[2].style.fontWeight=`${m}`,this._measureElements[3].style.fontWeight=`${f}`,this.clear())}get(o,u,m){let f=0;if(!u&&!m&&o.length===1&&(f=o.charCodeAt(0))<256)return this._flat[f]!==-9999?this._flat[f]:this._flat[f]=this._measure(o,0);let v=o;u&&(v+="B"),m&&(v+="I");let C=this._holey.get(v);if(C===void 0){let S=0;u&&(S|=1),m&&(S|=2),C=this._measure(o,S),this._holey.set(v,C)}return C}_measure(o,u){const m=this._measureElements[u];return m.textContent=o.repeat(32),m.offsetWidth/32}}},2223:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.TEXT_BASELINE=n.DIM_OPACITY=n.INVERTED_DEFAULT_COLOR=void 0;const u=o(6114);n.INVERTED_DEFAULT_COLOR=257,n.DIM_OPACITY=.5,n.TEXT_BASELINE=u.isFirefox||u.isLegacyEdge?"bottom":"ideographic"},6171:(d,n)=>{function o(u){return 57508<=u&&u<=57558}Object.defineProperty(n,"__esModule",{value:!0}),n.createRenderDimensions=n.excludeFromContrastRatioDemands=n.isRestrictedPowerlineGlyph=n.isPowerlineGlyph=n.throwIfFalsy=void 0,n.throwIfFalsy=function(u){if(!u)throw new Error("value must not be falsy");return u},n.isPowerlineGlyph=o,n.isRestrictedPowerlineGlyph=function(u){return 57520<=u&&u<=57527},n.excludeFromContrastRatioDemands=function(u){return o(u)||function(m){return 9472<=m&&m<=9631}(u)},n.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionModel=void 0,n.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,u=this.selectionEnd;return!(!o||!u)&&(o[1]>u[1]||o[1]===u[1]&&o[0]>u[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(d,n,o){var u=this&&this.__decorate||function(c,s,a,h){var p,g=arguments.length,E=g<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,s,a,h);else for(var k=c.length-1;k>=0;k--)(p=c[k])&&(E=(g<3?p(E):g>3?p(s,a,E):p(s,a))||E);return g>3&&E&&Object.defineProperty(s,a,E),E},m=this&&this.__param||function(c,s){return function(a,h){s(a,h,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharSizeService=void 0;const f=o(2585),v=o(8460),C=o(844);let S=n.CharSizeService=class extends C.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(c,s,a){super(),this._optionsService=a,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new w(c,s,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const c=this._measureStrategy.measure();c.width===this.width&&c.height===this.height||(this.width=c.width,this.height=c.height,this._onCharSizeChange.fire())}};n.CharSizeService=S=u([m(2,f.IOptionsService)],S);class w{constructor(s,a,h){this._document=s,this._parentElement=a,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const s={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return s.width!==0&&s.height!==0&&(this._result.width=s.width/32,this._result.height=Math.ceil(s.height)),this._result}}},4269:function(d,n,o){var u=this&&this.__decorate||function(s,a,h,p){var g,E=arguments.length,k=E<3?a:p===null?p=Object.getOwnPropertyDescriptor(a,h):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(s,a,h,p);else for(var b=s.length-1;b>=0;b--)(g=s[b])&&(k=(E<3?g(k):E>3?g(a,h,k):g(a,h))||k);return E>3&&k&&Object.defineProperty(a,h,k),k},m=this&&this.__param||function(s,a){return function(h,p){a(h,p,s)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CharacterJoinerService=n.JoinedCellData=void 0;const f=o(3734),v=o(643),C=o(511),S=o(2585);class w extends f.AttributeData{constructor(a,h,p){super(),this.content=0,this.combinedData="",this.fg=a.fg,this.bg=a.bg,this.combinedData=h,this._width=p}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(a){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.JoinedCellData=w;let c=n.CharacterJoinerService=class Fo{constructor(a){this._bufferService=a,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(a){const h={id:this._nextCharacterJoinerId++,handler:a};return this._characterJoiners.push(h),h.id}deregister(a){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===a)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(a){if(this._characterJoiners.length===0)return[];const h=this._bufferService.buffer.lines.get(a);if(!h||h.length===0)return[];const p=[],g=h.translateToString(!0);let E=0,k=0,b=0,O=h.getFg(0),M=h.getBg(0);for(let $=0;$<h.getTrimmedLength();$++)if(h.loadCell($,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==O||this._workCell.bg!==M){if($-E>1){const L=this._getJoinedRanges(g,b,k,h,E);for(let q=0;q<L.length;q++)p.push(L[q])}E=$,b=k,O=this._workCell.fg,M=this._workCell.bg}k+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-E>1){const $=this._getJoinedRanges(g,b,k,h,E);for(let L=0;L<$.length;L++)p.push($[L])}return p}_getJoinedRanges(a,h,p,g,E){const k=a.substring(h,p);let b=[];try{b=this._characterJoiners[0].handler(k)}catch(O){console.error(O)}for(let O=1;O<this._characterJoiners.length;O++)try{const M=this._characterJoiners[O].handler(k);for(let $=0;$<M.length;$++)Fo._mergeRanges(b,M[$])}catch(M){console.error(M)}return this._stringRangesToCellRanges(b,g,E),b}_stringRangesToCellRanges(a,h,p){let g=0,E=!1,k=0,b=a[g];if(b){for(let O=p;O<this._bufferService.cols;O++){const M=h.getWidth(O),$=h.getString(O).length||v.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!E&&b[0]<=k&&(b[0]=O,E=!0),b[1]<=k){if(b[1]=O,b=a[++g],!b)break;b[0]<=k?(b[0]=O,E=!0):E=!1}k+=$}}b&&(b[1]=this._bufferService.cols)}}static _mergeRanges(a,h){let p=!1;for(let g=0;g<a.length;g++){const E=a[g];if(p){if(h[1]<=E[0])return a[g-1][1]=h[1],a;if(h[1]<=E[1])return a[g-1][1]=Math.max(h[1],E[1]),a.splice(g,1),a;a.splice(g,1),g--}else{if(h[1]<=E[0])return a.splice(g,0,h),a;if(h[1]<=E[1])return E[0]=Math.min(h[0],E[0]),a;h[0]<E[1]&&(E[0]=Math.min(h[0],E[0]),p=!0)}}return p?a[a.length-1][1]=h[1]:a.push(h),a}};n.CharacterJoinerService=c=u([m(0,S.IBufferService)],c)},5114:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreBrowserService=void 0,n.CoreBrowserService=class{constructor(o,u){this._textarea=o,this.window=u,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(d,n,o){var u=this&&this.__decorate||function(S,w,c,s){var a,h=arguments.length,p=h<3?w:s===null?s=Object.getOwnPropertyDescriptor(w,c):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(S,w,c,s);else for(var g=S.length-1;g>=0;g--)(a=S[g])&&(p=(h<3?a(p):h>3?a(w,c,p):a(w,c))||p);return h>3&&p&&Object.defineProperty(w,c,p),p},m=this&&this.__param||function(S,w){return function(c,s){w(c,s,S)}};Object.defineProperty(n,"__esModule",{value:!0}),n.MouseService=void 0;const f=o(4725),v=o(9806);let C=n.MouseService=class{constructor(S,w){this._renderService=S,this._charSizeService=w}getCoords(S,w,c,s,a){return(0,v.getCoords)(window,S,w,c,s,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,a)}getMouseReportCoords(S,w){const c=(0,v.getCoordsRelativeToElement)(window,S,w);if(this._charSizeService.hasValidSize)return c[0]=Math.min(Math.max(c[0],0),this._renderService.dimensions.css.canvas.width-1),c[1]=Math.min(Math.max(c[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(c[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(c[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(c[0]),y:Math.floor(c[1])}}};n.MouseService=C=u([m(0,f.IRenderService),m(1,f.ICharSizeService)],C)},3230:function(d,n,o){var u=this&&this.__decorate||function(p,g,E,k){var b,O=arguments.length,M=O<3?g:k===null?k=Object.getOwnPropertyDescriptor(g,E):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(p,g,E,k);else for(var $=p.length-1;$>=0;$--)(b=p[$])&&(M=(O<3?b(M):O>3?b(g,E,M):b(g,E))||M);return O>3&&M&&Object.defineProperty(g,E,M),M},m=this&&this.__param||function(p,g){return function(E,k){g(E,k,p)}};Object.defineProperty(n,"__esModule",{value:!0}),n.RenderService=void 0;const f=o(3656),v=o(6193),C=o(5596),S=o(4725),w=o(8460),c=o(844),s=o(7226),a=o(2585);let h=n.RenderService=class extends c.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(p,g,E,k,b,O,M,$){if(super(),this._rowCount=p,this._charSizeService=k,this._renderer=this.register(new c.MutableDisposable),this._pausedResizeTask=new s.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new w.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new w.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new w.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new w.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer(M.window,(L,q)=>this._renderRows(L,q)),this.register(this._renderDebouncer),this._screenDprMonitor=new C.ScreenDprMonitor(M.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(O.onResize(()=>this._fullRefresh())),this.register(O.buffers.onBufferActivate(()=>{var L;return(L=this._renderer.value)===null||L===void 0?void 0:L.clear()})),this.register(E.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(b.onDecorationRegistered(()=>this._fullRefresh())),this.register(b.onDecorationRemoved(()=>this._fullRefresh())),this.register(E.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(O.cols,O.rows),this._fullRefresh()})),this.register(E.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(O.buffer.y,O.buffer.y,!0))),this.register((0,f.addDisposableDomListener)(M.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register($.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in M.window){const L=new M.window.IntersectionObserver(q=>this._handleIntersectionChange(q[q.length-1]),{threshold:0});L.observe(g),this.register({dispose:()=>L.disconnect()})}}_handleIntersectionChange(p){this._isPaused=p.isIntersecting===void 0?p.intersectionRatio===0:!p.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(p,g,E=!1){this._isPaused?this._needsFullRefresh=!0:(E||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(p,g,this._rowCount))}_renderRows(p,g){this._renderer.value&&(p=Math.min(p,this._rowCount-1),g=Math.min(g,this._rowCount-1),this._renderer.value.renderRows(p,g),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:p,end:g}),this._onRender.fire({start:p,end:g}),this._isNextRenderRedrawOnly=!0)}resize(p,g){this._rowCount=g,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(p){this._renderer.value=p,this._renderer.value.onRequestRedraw(g=>this.refreshRows(g.start,g.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(p){return this._renderDebouncer.addRefreshCallback(p)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var p,g;this._renderer.value&&((g=(p=this._renderer.value).clearTextureAtlas)===null||g===void 0||g.call(p),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(p,g){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(p,g)):this._renderer.value.handleResize(p,g),this._fullRefresh())}handleCharSizeChanged(){var p;(p=this._renderer.value)===null||p===void 0||p.handleCharSizeChanged()}handleBlur(){var p;(p=this._renderer.value)===null||p===void 0||p.handleBlur()}handleFocus(){var p;(p=this._renderer.value)===null||p===void 0||p.handleFocus()}handleSelectionChanged(p,g,E){var k;this._selectionState.start=p,this._selectionState.end=g,this._selectionState.columnSelectMode=E,(k=this._renderer.value)===null||k===void 0||k.handleSelectionChanged(p,g,E)}handleCursorMove(){var p;(p=this._renderer.value)===null||p===void 0||p.handleCursorMove()}clear(){var p;(p=this._renderer.value)===null||p===void 0||p.clear()}};n.RenderService=h=u([m(2,a.IOptionsService),m(3,S.ICharSizeService),m(4,a.IDecorationService),m(5,a.IBufferService),m(6,S.ICoreBrowserService),m(7,S.IThemeService)],h)},9312:function(d,n,o){var u=this&&this.__decorate||function(b,O,M,$){var L,q=arguments.length,Z=q<3?O:$===null?$=Object.getOwnPropertyDescriptor(O,M):$;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Z=Reflect.decorate(b,O,M,$);else for(var re=b.length-1;re>=0;re--)(L=b[re])&&(Z=(q<3?L(Z):q>3?L(O,M,Z):L(O,M))||Z);return q>3&&Z&&Object.defineProperty(O,M,Z),Z},m=this&&this.__param||function(b,O){return function(M,$){O(M,$,b)}};Object.defineProperty(n,"__esModule",{value:!0}),n.SelectionService=void 0;const f=o(9806),v=o(9504),C=o(456),S=o(4725),w=o(8460),c=o(844),s=o(6114),a=o(4841),h=o(511),p=o(2585),g="Â ",E=new RegExp(g,"g");let k=n.SelectionService=class extends c.Disposable{constructor(b,O,M,$,L,q,Z,re,ie){super(),this._element=b,this._screenElement=O,this._linkifier=M,this._bufferService=$,this._coreService=L,this._mouseService=q,this._optionsService=Z,this._renderService=re,this._coreBrowserService=ie,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new w.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new w.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new w.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new w.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=ne=>this._handleMouseMove(ne),this._mouseUpListener=ne=>this._handleMouseUp(ne),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(ne=>this._handleTrim(ne)),this.register(this._bufferService.buffers.onBufferActivate(ne=>this._handleBufferActivate(ne))),this.enable(),this._model=new C.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,c.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const b=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!b||!O||b[0]===O[0]&&b[1]===O[1])}get selectionText(){const b=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;if(!b||!O)return"";const M=this._bufferService.buffer,$=[];if(this._activeSelectionMode===3){if(b[0]===O[0])return"";const L=b[0]<O[0]?b[0]:O[0],q=b[0]<O[0]?O[0]:b[0];for(let Z=b[1];Z<=O[1];Z++){const re=M.translateBufferLineToString(Z,!0,L,q);$.push(re)}}else{const L=b[1]===O[1]?O[0]:void 0;$.push(M.translateBufferLineToString(b[1],!0,b[0],L));for(let q=b[1]+1;q<=O[1]-1;q++){const Z=M.lines.get(q),re=M.translateBufferLineToString(q,!0);Z!=null&&Z.isWrapped?$[$.length-1]+=re:$.push(re)}if(b[1]!==O[1]){const q=M.lines.get(O[1]),Z=M.translateBufferLineToString(O[1],!0,0,O[0]);q&&q.isWrapped?$[$.length-1]+=Z:$.push(Z)}}return $.map(L=>L.replace(E," ")).join(s.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(b){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),s.isLinux&&b&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(b){const O=this._getMouseBufferCoords(b),M=this._model.finalSelectionStart,$=this._model.finalSelectionEnd;return!!(M&&$&&O)&&this._areCoordsInSelection(O,M,$)}isCellInSelection(b,O){const M=this._model.finalSelectionStart,$=this._model.finalSelectionEnd;return!(!M||!$)&&this._areCoordsInSelection([b,O],M,$)}_areCoordsInSelection(b,O,M){return b[1]>O[1]&&b[1]<M[1]||O[1]===M[1]&&b[1]===O[1]&&b[0]>=O[0]&&b[0]<M[0]||O[1]<M[1]&&b[1]===M[1]&&b[0]<M[0]||O[1]<M[1]&&b[1]===O[1]&&b[0]>=O[0]}_selectWordAtCursor(b,O){var M,$;const L=($=(M=this._linkifier.currentLink)===null||M===void 0?void 0:M.link)===null||$===void 0?void 0:$.range;if(L)return this._model.selectionStart=[L.start.x-1,L.start.y-1],this._model.selectionStartLength=(0,a.getRangeLength)(L,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const q=this._getMouseBufferCoords(b);return!!q&&(this._selectWordAt(q,O),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(b,O){this._model.clearSelection(),b=Math.max(b,0),O=Math.min(O,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,b],this._model.selectionEnd=[this._bufferService.cols,O],this.refresh(),this._onSelectionChange.fire()}_handleTrim(b){this._model.handleTrim(b)&&this.refresh()}_getMouseBufferCoords(b){const O=this._mouseService.getCoords(b,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(O)return O[0]--,O[1]--,O[1]+=this._bufferService.buffer.ydisp,O}_getMouseEventScrollAmount(b){let O=(0,f.getCoordsRelativeToElement)(this._coreBrowserService.window,b,this._screenElement)[1];const M=this._renderService.dimensions.css.canvas.height;return O>=0&&O<=M?0:(O>M&&(O-=M),O=Math.min(Math.max(O,-50),50),O/=50,O/Math.abs(O)+Math.round(14*O))}shouldForceSelection(b){return s.isMac?b.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:b.shiftKey}handleMouseDown(b){if(this._mouseDownTimeStamp=b.timeStamp,(b.button!==2||!this.hasSelection)&&b.button===0){if(!this._enabled){if(!this.shouldForceSelection(b))return;b.stopPropagation()}b.preventDefault(),this._dragScrollAmount=0,this._enabled&&b.shiftKey?this._handleIncrementalClick(b):b.detail===1?this._handleSingleClick(b):b.detail===2?this._handleDoubleClick(b):b.detail===3&&this._handleTripleClick(b),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(b){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(b))}_handleSingleClick(b){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(b)?3:0,this._model.selectionStart=this._getMouseBufferCoords(b),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const O=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);O&&O.length!==this._model.selectionStart[0]&&O.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(b){this._selectWordAtCursor(b,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(b){const O=this._getMouseBufferCoords(b);O&&(this._activeSelectionMode=2,this._selectLineAt(O[1]))}shouldColumnSelect(b){return b.altKey&&!(s.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(b){if(b.stopImmediatePropagation(),!this._model.selectionStart)return;const O=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(b),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(b),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const M=this._bufferService.buffer;if(this._model.selectionEnd[1]<M.lines.length){const $=M.lines.get(this._model.selectionEnd[1]);$&&$.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}O&&O[0]===this._model.selectionEnd[0]&&O[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const b=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(b.ydisp+this._bufferService.rows,b.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=b.ydisp),this.refresh()}}_handleMouseUp(b){const O=b.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&O<500&&b.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const M=this._mouseService.getCoords(b,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(M&&M[0]!==void 0&&M[1]!==void 0){const $=(0,v.moveToCellSequence)(M[0]-1,M[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent($,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const b=this._model.finalSelectionStart,O=this._model.finalSelectionEnd,M=!(!b||!O||b[0]===O[0]&&b[1]===O[1]);M?b&&O&&(this._oldSelectionStart&&this._oldSelectionEnd&&b[0]===this._oldSelectionStart[0]&&b[1]===this._oldSelectionStart[1]&&O[0]===this._oldSelectionEnd[0]&&O[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(b,O,M)):this._oldHasSelection&&this._fireOnSelectionChange(b,O,M)}_fireOnSelectionChange(b,O,M){this._oldSelectionStart=b,this._oldSelectionEnd=O,this._oldHasSelection=M,this._onSelectionChange.fire()}_handleBufferActivate(b){this.clearSelection(),this._trimListener.dispose(),this._trimListener=b.activeBuffer.lines.onTrim(O=>this._handleTrim(O))}_convertViewportColToCharacterIndex(b,O){let M=O;for(let $=0;O>=$;$++){const L=b.loadCell($,this._workCell).getChars().length;this._workCell.getWidth()===0?M--:L>1&&O!==$&&(M+=L-1)}return M}setSelection(b,O,M){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[b,O],this._model.selectionStartLength=M,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(b){this._isClickInSelection(b)||(this._selectWordAtCursor(b,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(b,O,M=!0,$=!0){if(b[0]>=this._bufferService.cols)return;const L=this._bufferService.buffer,q=L.lines.get(b[1]);if(!q)return;const Z=L.translateBufferLineToString(b[1],!1);let re=this._convertViewportColToCharacterIndex(q,b[0]),ie=re;const ne=b[0]-re;let x=0,F=0,P=0,U=0;if(Z.charAt(re)===" "){for(;re>0&&Z.charAt(re-1)===" ";)re--;for(;ie<Z.length&&Z.charAt(ie+1)===" ";)ie++}else{let K=b[0],Y=b[0];q.getWidth(K)===0&&(x++,K--),q.getWidth(Y)===2&&(F++,Y++);const z=q.getString(Y).length;for(z>1&&(U+=z-1,ie+=z-1);K>0&&re>0&&!this._isCharWordSeparator(q.loadCell(K-1,this._workCell));){q.loadCell(K-1,this._workCell);const y=this._workCell.getChars().length;this._workCell.getWidth()===0?(x++,K--):y>1&&(P+=y-1,re-=y-1),re--,K--}for(;Y<q.length&&ie+1<Z.length&&!this._isCharWordSeparator(q.loadCell(Y+1,this._workCell));){q.loadCell(Y+1,this._workCell);const y=this._workCell.getChars().length;this._workCell.getWidth()===2?(F++,Y++):y>1&&(U+=y-1,ie+=y-1),ie++,Y++}}ie++;let G=re+ne-x+P,H=Math.min(this._bufferService.cols,ie-re+x+F-P-U);if(O||Z.slice(re,ie).trim()!==""){if(M&&G===0&&q.getCodePoint(0)!==32){const K=L.lines.get(b[1]-1);if(K&&q.isWrapped&&K.getCodePoint(this._bufferService.cols-1)!==32){const Y=this._getWordAt([this._bufferService.cols-1,b[1]-1],!1,!0,!1);if(Y){const z=this._bufferService.cols-Y.start;G-=z,H+=z}}}if($&&G+H===this._bufferService.cols&&q.getCodePoint(this._bufferService.cols-1)!==32){const K=L.lines.get(b[1]+1);if(K!=null&&K.isWrapped&&K.getCodePoint(0)!==32){const Y=this._getWordAt([0,b[1]+1],!1,!1,!0);Y&&(H+=Y.length)}}return{start:G,length:H}}}_selectWordAt(b,O){const M=this._getWordAt(b,O);if(M){for(;M.start<0;)M.start+=this._bufferService.cols,b[1]--;this._model.selectionStart=[M.start,b[1]],this._model.selectionStartLength=M.length}}_selectToWordAt(b){const O=this._getWordAt(b,!0);if(O){let M=b[1];for(;O.start<0;)O.start+=this._bufferService.cols,M--;if(!this._model.areSelectionValuesReversed())for(;O.start+O.length>this._bufferService.cols;)O.length-=this._bufferService.cols,M++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?O.start:O.start+O.length,M]}}_isCharWordSeparator(b){return b.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(b.getChars())>=0}_selectLineAt(b){const O=this._bufferService.buffer.getWrappedRangeForLine(b),M={start:{x:0,y:O.first},end:{x:this._bufferService.cols-1,y:O.last}};this._model.selectionStart=[0,O.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,a.getRangeLength)(M,this._bufferService.cols)}};n.SelectionService=k=u([m(3,p.IBufferService),m(4,p.ICoreService),m(5,S.IMouseService),m(6,p.IOptionsService),m(7,S.IRenderService),m(8,S.ICoreBrowserService)],k)},4725:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IThemeService=n.ICharacterJoinerService=n.ISelectionService=n.IRenderService=n.IMouseService=n.ICoreBrowserService=n.ICharSizeService=void 0;const u=o(8343);n.ICharSizeService=(0,u.createDecorator)("CharSizeService"),n.ICoreBrowserService=(0,u.createDecorator)("CoreBrowserService"),n.IMouseService=(0,u.createDecorator)("MouseService"),n.IRenderService=(0,u.createDecorator)("RenderService"),n.ISelectionService=(0,u.createDecorator)("SelectionService"),n.ICharacterJoinerService=(0,u.createDecorator)("CharacterJoinerService"),n.IThemeService=(0,u.createDecorator)("ThemeService")},6731:function(d,n,o){var u=this&&this.__decorate||function(k,b,O,M){var $,L=arguments.length,q=L<3?b:M===null?M=Object.getOwnPropertyDescriptor(b,O):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")q=Reflect.decorate(k,b,O,M);else for(var Z=k.length-1;Z>=0;Z--)($=k[Z])&&(q=(L<3?$(q):L>3?$(b,O,q):$(b,O))||q);return L>3&&q&&Object.defineProperty(b,O,q),q},m=this&&this.__param||function(k,b){return function(O,M){b(O,M,k)}};Object.defineProperty(n,"__esModule",{value:!0}),n.ThemeService=n.DEFAULT_ANSI_COLORS=void 0;const f=o(7239),v=o(8055),C=o(8460),S=o(844),w=o(2585),c=v.css.toColor("#ffffff"),s=v.css.toColor("#000000"),a=v.css.toColor("#ffffff"),h=v.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};n.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],b=[0,95,135,175,215,255];for(let O=0;O<216;O++){const M=b[O/36%6|0],$=b[O/6%6|0],L=b[O%6];k.push({css:v.channels.toCss(M,$,L),rgba:v.channels.toRgba(M,$,L)})}for(let O=0;O<24;O++){const M=8+10*O;k.push({css:v.channels.toCss(M,M,M),rgba:v.channels.toRgba(M,M,M)})}return k})());let g=n.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new f.ColorContrastCache,this._halfContrastCache=new f.ColorContrastCache,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:c,background:s,cursor:a,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:v.color.blend(s,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:v.color.blend(s,p),ansi:n.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const b=this._colors;if(b.foreground=E(k.foreground,c),b.background=E(k.background,s),b.cursor=E(k.cursor,a),b.cursorAccent=E(k.cursorAccent,h),b.selectionBackgroundTransparent=E(k.selectionBackground,p),b.selectionBackgroundOpaque=v.color.blend(b.background,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundTransparent=E(k.selectionInactiveBackground,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundOpaque=v.color.blend(b.background,b.selectionInactiveBackgroundTransparent),b.selectionForeground=k.selectionForeground?E(k.selectionForeground,v.NULL_COLOR):void 0,b.selectionForeground===v.NULL_COLOR&&(b.selectionForeground=void 0),v.color.isOpaque(b.selectionBackgroundTransparent)&&(b.selectionBackgroundTransparent=v.color.opacity(b.selectionBackgroundTransparent,.3)),v.color.isOpaque(b.selectionInactiveBackgroundTransparent)&&(b.selectionInactiveBackgroundTransparent=v.color.opacity(b.selectionInactiveBackgroundTransparent,.3)),b.ansi=n.DEFAULT_ANSI_COLORS.slice(),b.ansi[0]=E(k.black,n.DEFAULT_ANSI_COLORS[0]),b.ansi[1]=E(k.red,n.DEFAULT_ANSI_COLORS[1]),b.ansi[2]=E(k.green,n.DEFAULT_ANSI_COLORS[2]),b.ansi[3]=E(k.yellow,n.DEFAULT_ANSI_COLORS[3]),b.ansi[4]=E(k.blue,n.DEFAULT_ANSI_COLORS[4]),b.ansi[5]=E(k.magenta,n.DEFAULT_ANSI_COLORS[5]),b.ansi[6]=E(k.cyan,n.DEFAULT_ANSI_COLORS[6]),b.ansi[7]=E(k.white,n.DEFAULT_ANSI_COLORS[7]),b.ansi[8]=E(k.brightBlack,n.DEFAULT_ANSI_COLORS[8]),b.ansi[9]=E(k.brightRed,n.DEFAULT_ANSI_COLORS[9]),b.ansi[10]=E(k.brightGreen,n.DEFAULT_ANSI_COLORS[10]),b.ansi[11]=E(k.brightYellow,n.DEFAULT_ANSI_COLORS[11]),b.ansi[12]=E(k.brightBlue,n.DEFAULT_ANSI_COLORS[12]),b.ansi[13]=E(k.brightMagenta,n.DEFAULT_ANSI_COLORS[13]),b.ansi[14]=E(k.brightCyan,n.DEFAULT_ANSI_COLORS[14]),b.ansi[15]=E(k.brightWhite,n.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const O=Math.min(b.ansi.length-16,k.extendedAnsi.length);for(let M=0;M<O;M++)b.ansi[M+16]=E(k.extendedAnsi[M],n.DEFAULT_ANSI_COLORS[M+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let b=0;b<this._restoreColors.ansi.length;++b)this._colors.ansi[b]=this._restoreColors.ansi[b]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function E(k,b){if(k!==void 0)try{return v.css.toColor(k)}catch{}return b}n.ThemeService=g=u([m(0,w.IOptionsService)],g)},6349:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CircularList=void 0;const u=o(8460),m=o(844);class f extends m.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new u.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new u.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new u.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const S=new Array(C);for(let w=0;w<Math.min(C,this.length);w++)S[w]=this._array[this._getCyclicIndex(w)];this._array=S,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let S=this._length;S<C;S++)this._array[S]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,S){this._array[this._getCyclicIndex(C)]=S}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,S,...w){if(S){for(let c=C;c<this._length-S;c++)this._array[this._getCyclicIndex(c)]=this._array[this._getCyclicIndex(c+S)];this._length-=S,this.onDeleteEmitter.fire({index:C,amount:S})}for(let c=this._length-1;c>=C;c--)this._array[this._getCyclicIndex(c+w.length)]=this._array[this._getCyclicIndex(c)];for(let c=0;c<w.length;c++)this._array[this._getCyclicIndex(C+c)]=w[c];if(w.length&&this.onInsertEmitter.fire({index:C,amount:w.length}),this._length+w.length>this._maxLength){const c=this._length+w.length-this._maxLength;this._startIndex+=c,this._length=this._maxLength,this.onTrimEmitter.fire(c)}else this._length+=w.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,S,w){if(!(S<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+w<0)throw new Error("Cannot shift elements in list beyond index 0");if(w>0){for(let s=S-1;s>=0;s--)this.set(C+s+w,this.get(C+s));const c=C+S+w-this._length;if(c>0)for(this._length+=c;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let c=0;c<S;c++)this.set(C+c+w,this.get(C+c))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}n.CircularList=f},1439:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.clone=void 0,n.clone=function o(u,m=5){if(typeof u!="object")return u;const f=Array.isArray(u)?[]:{};for(const v in u)f[v]=m<=1?u[v]:u[v]&&o(u[v],m-1);return f}},8055:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.contrastRatio=n.toPaddedHex=n.rgba=n.rgb=n.css=n.color=n.channels=n.NULL_COLOR=void 0;const u=o(6114);let m=0,f=0,v=0,C=0;var S,w,c,s,a;function h(g){const E=g.toString(16);return E.length<2?"0"+E:E}function p(g,E){return g<E?(E+.05)/(g+.05):(g+.05)/(E+.05)}n.NULL_COLOR={css:"#00000000",rgba:0},function(g){g.toCss=function(E,k,b,O){return O!==void 0?`#${h(E)}${h(k)}${h(b)}${h(O)}`:`#${h(E)}${h(k)}${h(b)}`},g.toRgba=function(E,k,b,O=255){return(E<<24|k<<16|b<<8|O)>>>0}}(S||(n.channels=S={})),function(g){function E(k,b){return C=Math.round(255*b),[m,f,v]=a.toChannels(k.rgba),{css:S.toCss(m,f,v,C),rgba:S.toRgba(m,f,v,C)}}g.blend=function(k,b){if(C=(255&b.rgba)/255,C===1)return{css:b.css,rgba:b.rgba};const O=b.rgba>>24&255,M=b.rgba>>16&255,$=b.rgba>>8&255,L=k.rgba>>24&255,q=k.rgba>>16&255,Z=k.rgba>>8&255;return m=L+Math.round((O-L)*C),f=q+Math.round((M-q)*C),v=Z+Math.round(($-Z)*C),{css:S.toCss(m,f,v),rgba:S.toRgba(m,f,v)}},g.isOpaque=function(k){return(255&k.rgba)==255},g.ensureContrastRatio=function(k,b,O){const M=a.ensureContrastRatio(k.rgba,b.rgba,O);if(M)return a.toColor(M>>24&255,M>>16&255,M>>8&255)},g.opaque=function(k){const b=(255|k.rgba)>>>0;return[m,f,v]=a.toChannels(b),{css:S.toCss(m,f,v),rgba:b}},g.opacity=E,g.multiplyOpacity=function(k,b){return C=255&k.rgba,E(k,C*b/255)},g.toColorRGB=function(k){return[k.rgba>>24&255,k.rgba>>16&255,k.rgba>>8&255]}}(w||(n.color=w={})),function(g){let E,k;if(!u.isNode){const b=document.createElement("canvas");b.width=1,b.height=1;const O=b.getContext("2d",{willReadFrequently:!0});O&&(E=O,E.globalCompositeOperation="copy",k=E.createLinearGradient(0,0,1,1))}g.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return m=parseInt(b.slice(1,2).repeat(2),16),f=parseInt(b.slice(2,3).repeat(2),16),v=parseInt(b.slice(3,4).repeat(2),16),a.toColor(m,f,v);case 5:return m=parseInt(b.slice(1,2).repeat(2),16),f=parseInt(b.slice(2,3).repeat(2),16),v=parseInt(b.slice(3,4).repeat(2),16),C=parseInt(b.slice(4,5).repeat(2),16),a.toColor(m,f,v,C);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const O=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(O)return m=parseInt(O[1]),f=parseInt(O[2]),v=parseInt(O[3]),C=Math.round(255*(O[5]===void 0?1:parseFloat(O[5]))),a.toColor(m,f,v,C);if(!E||!k)throw new Error("css.toColor: Unsupported css format");if(E.fillStyle=k,E.fillStyle=b,typeof E.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(E.fillRect(0,0,1,1),[m,f,v,C]=E.getImageData(0,0,1,1).data,C!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:S.toRgba(m,f,v,C),css:b}}}(c||(n.css=c={})),function(g){function E(k,b,O){const M=k/255,$=b/255,L=O/255;return .2126*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.7152*($<=.03928?$/12.92:Math.pow(($+.055)/1.055,2.4))+.0722*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))}g.relativeLuminance=function(k){return E(k>>16&255,k>>8&255,255&k)},g.relativeLuminance2=E}(s||(n.rgb=s={})),function(g){function E(b,O,M){const $=b>>24&255,L=b>>16&255,q=b>>8&255;let Z=O>>24&255,re=O>>16&255,ie=O>>8&255,ne=p(s.relativeLuminance2(Z,re,ie),s.relativeLuminance2($,L,q));for(;ne<M&&(Z>0||re>0||ie>0);)Z-=Math.max(0,Math.ceil(.1*Z)),re-=Math.max(0,Math.ceil(.1*re)),ie-=Math.max(0,Math.ceil(.1*ie)),ne=p(s.relativeLuminance2(Z,re,ie),s.relativeLuminance2($,L,q));return(Z<<24|re<<16|ie<<8|255)>>>0}function k(b,O,M){const $=b>>24&255,L=b>>16&255,q=b>>8&255;let Z=O>>24&255,re=O>>16&255,ie=O>>8&255,ne=p(s.relativeLuminance2(Z,re,ie),s.relativeLuminance2($,L,q));for(;ne<M&&(Z<255||re<255||ie<255);)Z=Math.min(255,Z+Math.ceil(.1*(255-Z))),re=Math.min(255,re+Math.ceil(.1*(255-re))),ie=Math.min(255,ie+Math.ceil(.1*(255-ie))),ne=p(s.relativeLuminance2(Z,re,ie),s.relativeLuminance2($,L,q));return(Z<<24|re<<16|ie<<8|255)>>>0}g.ensureContrastRatio=function(b,O,M){const $=s.relativeLuminance(b>>8),L=s.relativeLuminance(O>>8);if(p($,L)<M){if(L<$){const re=E(b,O,M),ie=p($,s.relativeLuminance(re>>8));if(ie<M){const ne=k(b,O,M);return ie>p($,s.relativeLuminance(ne>>8))?re:ne}return re}const q=k(b,O,M),Z=p($,s.relativeLuminance(q>>8));if(Z<M){const re=E(b,O,M);return Z>p($,s.relativeLuminance(re>>8))?q:re}return q}},g.reduceLuminance=E,g.increaseLuminance=k,g.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},g.toColor=function(b,O,M,$){return{css:S.toCss(b,O,M,$),rgba:S.toRgba(b,O,M,$)}}}(a||(n.rgba=a={})),n.toPaddedHex=h,n.contrastRatio=p},8969:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CoreTerminal=void 0;const u=o(844),m=o(2585),f=o(4348),v=o(7866),C=o(744),S=o(7302),w=o(6975),c=o(8460),s=o(1753),a=o(1480),h=o(7994),p=o(9282),g=o(5435),E=o(5981),k=o(2660);let b=!1;class O extends u.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new c.EventEmitter),this._onScroll.event($=>{var L;(L=this._onScrollApi)===null||L===void 0||L.fire($.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options($){for(const L in $)this.optionsService.options[L]=$[L]}constructor($){super(),this._windowsWrappingHeuristics=this.register(new u.MutableDisposable),this._onBinary=this.register(new c.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new c.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new c.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new c.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new c.EventEmitter),this._instantiationService=new f.InstantiationService,this.optionsService=this.register(new S.OptionsService($)),this._instantiationService.setService(m.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(m.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(m.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(w.CoreService)),this._instantiationService.setService(m.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(s.CoreMouseService)),this._instantiationService.setService(m.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(a.UnicodeService)),this._instantiationService.setService(m.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(m.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(m.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new g.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,c.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,c.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,c.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,c.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(L=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(L=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new E.WriteBuffer((L,q)=>this._inputHandler.parse(L,q))),this.register((0,c.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write($,L){this._writeBuffer.write($,L)}writeSync($,L){this._logService.logLevel<=m.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync($,L)}resize($,L){isNaN($)||isNaN(L)||($=Math.max($,C.MINIMUM_COLS),L=Math.max(L,C.MINIMUM_ROWS),this._bufferService.resize($,L))}scroll($,L=!1){this._bufferService.scroll($,L)}scrollLines($,L,q){this._bufferService.scrollLines($,L,q)}scrollPages($){this.scrollLines($*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine($){const L=$-this._bufferService.buffer.ydisp;L!==0&&this.scrollLines(L)}registerEscHandler($,L){return this._inputHandler.registerEscHandler($,L)}registerDcsHandler($,L){return this._inputHandler.registerDcsHandler($,L)}registerCsiHandler($,L){return this._inputHandler.registerCsiHandler($,L)}registerOscHandler($,L){return this._inputHandler.registerOscHandler($,L)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let $=!1;const L=this.optionsService.rawOptions.windowsPty;L&&L.buildNumber!==void 0&&L.buildNumber!==void 0?$=L.backend==="conpty"&&L.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&($=!0),$?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const $=[];$.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),$.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,u.toDisposable)(()=>{for(const L of $)L.dispose()})}}}n.CoreTerminal=O},8460:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.forwardEvent=n.EventEmitter=void 0,n.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let u=0;u<this._listeners.length;u++)if(this._listeners[u]===o)return void this._listeners.splice(u,1)}}})),this._event}fire(o,u){const m=[];for(let f=0;f<this._listeners.length;f++)m.push(this._listeners[f]);for(let f=0;f<m.length;f++)m[f].call(void 0,o,u)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},n.forwardEvent=function(o,u){return o(m=>u.fire(m))}},5435:function(d,n,o){var u=this&&this.__decorate||function(ne,x,F,P){var U,G=arguments.length,H=G<3?x:P===null?P=Object.getOwnPropertyDescriptor(x,F):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(ne,x,F,P);else for(var K=ne.length-1;K>=0;K--)(U=ne[K])&&(H=(G<3?U(H):G>3?U(x,F,H):U(x,F))||H);return G>3&&H&&Object.defineProperty(x,F,H),H},m=this&&this.__param||function(ne,x){return function(F,P){x(F,P,ne)}};Object.defineProperty(n,"__esModule",{value:!0}),n.InputHandler=n.WindowsOptionsReportType=void 0;const f=o(2584),v=o(7116),C=o(2015),S=o(844),w=o(482),c=o(8437),s=o(8460),a=o(643),h=o(511),p=o(3734),g=o(2585),E=o(6242),k=o(6351),b=o(5941),O={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function $(ne,x){if(ne>24)return x.setWinLines||!1;switch(ne){case 1:return!!x.restoreWin;case 2:return!!x.minimizeWin;case 3:return!!x.setWinPosition;case 4:return!!x.setWinSizePixels;case 5:return!!x.raiseWin;case 6:return!!x.lowerWin;case 7:return!!x.refreshWin;case 8:return!!x.setWinSizeChars;case 9:return!!x.maximizeWin;case 10:return!!x.fullscreenWin;case 11:return!!x.getWinState;case 13:return!!x.getWinPosition;case 14:return!!x.getWinSizePixels;case 15:return!!x.getScreenSizePixels;case 16:return!!x.getCellSizePixels;case 18:return!!x.getWinSizeChars;case 19:return!!x.getScreenSizeChars;case 20:return!!x.getIconTitle;case 21:return!!x.getWinTitle;case 22:return!!x.pushTitle;case 23:return!!x.popTitle;case 24:return!!x.setWinLines}return!1}var L;(function(ne){ne[ne.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",ne[ne.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(L||(n.WindowsOptionsReportType=L={}));let q=0;class Z extends S.Disposable{getAttrData(){return this._curAttrData}constructor(x,F,P,U,G,H,K,Y,z=new C.EscapeSequenceParser){super(),this._bufferService=x,this._charsetService=F,this._coreService=P,this._logService=U,this._optionsService=G,this._oscLinkService=H,this._coreMouseService=K,this._unicodeService=Y,this._parser=z,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new w.StringToUtf32,this._utf8Decoder=new w.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new s.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new s.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new s.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new s.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new s.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new s.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new s.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new s.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new s.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new s.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new s.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new s.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new s.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new re(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(y=>this._activeBuffer=y.activeBuffer)),this._parser.setCsiHandlerFallback((y,A)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(y),params:A.toArray()})}),this._parser.setEscHandlerFallback(y=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(y)})}),this._parser.setExecuteHandlerFallback(y=>{this._logService.debug("Unknown EXECUTE code: ",{code:y})}),this._parser.setOscHandlerFallback((y,A,I)=>{this._logService.debug("Unknown OSC code: ",{identifier:y,action:A,data:I})}),this._parser.setDcsHandlerFallback((y,A,I)=>{A==="HOOK"&&(I=I.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(y),action:A,payload:I})}),this._parser.setPrintHandler((y,A,I)=>this.print(y,A,I)),this._parser.registerCsiHandler({final:"@"},y=>this.insertChars(y)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},y=>this.scrollLeft(y)),this._parser.registerCsiHandler({final:"A"},y=>this.cursorUp(y)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},y=>this.scrollRight(y)),this._parser.registerCsiHandler({final:"B"},y=>this.cursorDown(y)),this._parser.registerCsiHandler({final:"C"},y=>this.cursorForward(y)),this._parser.registerCsiHandler({final:"D"},y=>this.cursorBackward(y)),this._parser.registerCsiHandler({final:"E"},y=>this.cursorNextLine(y)),this._parser.registerCsiHandler({final:"F"},y=>this.cursorPrecedingLine(y)),this._parser.registerCsiHandler({final:"G"},y=>this.cursorCharAbsolute(y)),this._parser.registerCsiHandler({final:"H"},y=>this.cursorPosition(y)),this._parser.registerCsiHandler({final:"I"},y=>this.cursorForwardTab(y)),this._parser.registerCsiHandler({final:"J"},y=>this.eraseInDisplay(y,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},y=>this.eraseInDisplay(y,!0)),this._parser.registerCsiHandler({final:"K"},y=>this.eraseInLine(y,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},y=>this.eraseInLine(y,!0)),this._parser.registerCsiHandler({final:"L"},y=>this.insertLines(y)),this._parser.registerCsiHandler({final:"M"},y=>this.deleteLines(y)),this._parser.registerCsiHandler({final:"P"},y=>this.deleteChars(y)),this._parser.registerCsiHandler({final:"S"},y=>this.scrollUp(y)),this._parser.registerCsiHandler({final:"T"},y=>this.scrollDown(y)),this._parser.registerCsiHandler({final:"X"},y=>this.eraseChars(y)),this._parser.registerCsiHandler({final:"Z"},y=>this.cursorBackwardTab(y)),this._parser.registerCsiHandler({final:"`"},y=>this.charPosAbsolute(y)),this._parser.registerCsiHandler({final:"a"},y=>this.hPositionRelative(y)),this._parser.registerCsiHandler({final:"b"},y=>this.repeatPrecedingCharacter(y)),this._parser.registerCsiHandler({final:"c"},y=>this.sendDeviceAttributesPrimary(y)),this._parser.registerCsiHandler({prefix:">",final:"c"},y=>this.sendDeviceAttributesSecondary(y)),this._parser.registerCsiHandler({final:"d"},y=>this.linePosAbsolute(y)),this._parser.registerCsiHandler({final:"e"},y=>this.vPositionRelative(y)),this._parser.registerCsiHandler({final:"f"},y=>this.hVPosition(y)),this._parser.registerCsiHandler({final:"g"},y=>this.tabClear(y)),this._parser.registerCsiHandler({final:"h"},y=>this.setMode(y)),this._parser.registerCsiHandler({prefix:"?",final:"h"},y=>this.setModePrivate(y)),this._parser.registerCsiHandler({final:"l"},y=>this.resetMode(y)),this._parser.registerCsiHandler({prefix:"?",final:"l"},y=>this.resetModePrivate(y)),this._parser.registerCsiHandler({final:"m"},y=>this.charAttributes(y)),this._parser.registerCsiHandler({final:"n"},y=>this.deviceStatus(y)),this._parser.registerCsiHandler({prefix:"?",final:"n"},y=>this.deviceStatusPrivate(y)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},y=>this.softReset(y)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},y=>this.setCursorStyle(y)),this._parser.registerCsiHandler({final:"r"},y=>this.setScrollRegion(y)),this._parser.registerCsiHandler({final:"s"},y=>this.saveCursor(y)),this._parser.registerCsiHandler({final:"t"},y=>this.windowOptions(y)),this._parser.registerCsiHandler({final:"u"},y=>this.restoreCursor(y)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},y=>this.insertColumns(y)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},y=>this.deleteColumns(y)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},y=>this.selectProtected(y)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},y=>this.requestMode(y,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},y=>this.requestMode(y,!1)),this._parser.setExecuteHandler(f.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(f.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(f.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(f.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(f.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(f.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(f.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(f.C1.IND,()=>this.index()),this._parser.setExecuteHandler(f.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(f.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new E.OscHandler(y=>(this.setTitle(y),this.setIconName(y),!0))),this._parser.registerOscHandler(1,new E.OscHandler(y=>this.setIconName(y))),this._parser.registerOscHandler(2,new E.OscHandler(y=>this.setTitle(y))),this._parser.registerOscHandler(4,new E.OscHandler(y=>this.setOrReportIndexedColor(y))),this._parser.registerOscHandler(8,new E.OscHandler(y=>this.setHyperlink(y))),this._parser.registerOscHandler(10,new E.OscHandler(y=>this.setOrReportFgColor(y))),this._parser.registerOscHandler(11,new E.OscHandler(y=>this.setOrReportBgColor(y))),this._parser.registerOscHandler(12,new E.OscHandler(y=>this.setOrReportCursorColor(y))),this._parser.registerOscHandler(104,new E.OscHandler(y=>this.restoreIndexedColor(y))),this._parser.registerOscHandler(110,new E.OscHandler(y=>this.restoreFgColor(y))),this._parser.registerOscHandler(111,new E.OscHandler(y=>this.restoreBgColor(y))),this._parser.registerOscHandler(112,new E.OscHandler(y=>this.restoreCursorColor(y))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const y in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:y},()=>this.selectCharset("("+y)),this._parser.registerEscHandler({intermediates:")",final:y},()=>this.selectCharset(")"+y)),this._parser.registerEscHandler({intermediates:"*",final:y},()=>this.selectCharset("*"+y)),this._parser.registerEscHandler({intermediates:"+",final:y},()=>this.selectCharset("+"+y)),this._parser.registerEscHandler({intermediates:"-",final:y},()=>this.selectCharset("-"+y)),this._parser.registerEscHandler({intermediates:".",final:y},()=>this.selectCharset("."+y)),this._parser.registerEscHandler({intermediates:"/",final:y},()=>this.selectCharset("/"+y));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(y=>(this._logService.error("Parsing error: ",y),y)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new k.DcsHandler((y,A)=>this.requestStatusString(y,A)))}_preserveStack(x,F,P,U){this._parseStack.paused=!0,this._parseStack.cursorStartX=x,this._parseStack.cursorStartY=F,this._parseStack.decodedLength=P,this._parseStack.position=U}_logSlowResolvingAsync(x){this._logService.logLevel<=g.LogLevelEnum.WARN&&Promise.race([x,new Promise((F,P)=>setTimeout(()=>P("#SLOW_TIMEOUT"),5e3))]).catch(F=>{if(F!=="#SLOW_TIMEOUT")throw F;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(x,F){let P,U=this._activeBuffer.x,G=this._activeBuffer.y,H=0;const K=this._parseStack.paused;if(K){if(P=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,F))return this._logSlowResolvingAsync(P),P;U=this._parseStack.cursorStartX,G=this._parseStack.cursorStartY,this._parseStack.paused=!1,x.length>M&&(H=this._parseStack.position+M)}if(this._logService.logLevel<=g.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof x=="string"?` "${x}"`:` "${Array.prototype.map.call(x,Y=>String.fromCharCode(Y)).join("")}"`),typeof x=="string"?x.split("").map(Y=>Y.charCodeAt(0)):x),this._parseBuffer.length<x.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(x.length,M))),K||this._dirtyRowTracker.clearRange(),x.length>M)for(let Y=H;Y<x.length;Y+=M){const z=Y+M<x.length?Y+M:x.length,y=typeof x=="string"?this._stringDecoder.decode(x.substring(Y,z),this._parseBuffer):this._utf8Decoder.decode(x.subarray(Y,z),this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,y))return this._preserveStack(U,G,y,Y),this._logSlowResolvingAsync(P),P}else if(!K){const Y=typeof x=="string"?this._stringDecoder.decode(x,this._parseBuffer):this._utf8Decoder.decode(x,this._parseBuffer);if(P=this._parser.parse(this._parseBuffer,Y))return this._preserveStack(U,G,Y,0),this._logSlowResolvingAsync(P),P}this._activeBuffer.x===U&&this._activeBuffer.y===G||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(x,F,P){let U,G;const H=this._charsetService.charset,K=this._optionsService.rawOptions.screenReaderMode,Y=this._bufferService.cols,z=this._coreService.decPrivateModes.wraparound,y=this._coreService.modes.insertMode,A=this._curAttrData;let I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&P-F>0&&I.getWidth(this._activeBuffer.x-1)===2&&I.setCellFromCodePoint(this._activeBuffer.x-1,0,1,A.fg,A.bg,A.extended);for(let j=F;j<P;++j){if(U=x[j],G=this._unicodeService.wcwidth(U),U<127&&H){const D=H[String.fromCharCode(U)];D&&(U=D.charCodeAt(0))}if(K&&this._onA11yChar.fire((0,w.stringFromCodePoint)(U)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),G||!this._activeBuffer.x){if(this._activeBuffer.x+G-1>=Y){if(z){for(;this._activeBuffer.x<Y;)I.setCellFromCodePoint(this._activeBuffer.x++,0,1,A.fg,A.bg,A.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),I=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=Y-1,G===2)continue}if(y&&(I.insertCells(this._activeBuffer.x,G,this._activeBuffer.getNullCell(A),A),I.getWidth(Y-1)===2&&I.setCellFromCodePoint(Y-1,a.NULL_CELL_CODE,a.NULL_CELL_WIDTH,A.fg,A.bg,A.extended)),I.setCellFromCodePoint(this._activeBuffer.x++,U,G,A.fg,A.bg,A.extended),G>0)for(;--G;)I.setCellFromCodePoint(this._activeBuffer.x++,0,0,A.fg,A.bg,A.extended)}else I.getWidth(this._activeBuffer.x-1)?I.addCodepointToCell(this._activeBuffer.x-1,U):I.addCodepointToCell(this._activeBuffer.x-2,U)}P-F>0&&(I.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<Y&&P-F>0&&I.getWidth(this._activeBuffer.x)===0&&!I.hasContent(this._activeBuffer.x)&&I.setCellFromCodePoint(this._activeBuffer.x,0,1,A.fg,A.bg,A.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(x,F){return x.final!=="t"||x.prefix||x.intermediates?this._parser.registerCsiHandler(x,F):this._parser.registerCsiHandler(x,P=>!$(P.params[0],this._optionsService.rawOptions.windowOptions)||F(P))}registerDcsHandler(x,F){return this._parser.registerDcsHandler(x,new k.DcsHandler(F))}registerEscHandler(x,F){return this._parser.registerEscHandler(x,F)}registerOscHandler(x,F){return this._parser.registerOscHandler(x,new E.OscHandler(F))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var x;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((x=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||x===void 0)&&x.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);F.hasWidth(this._activeBuffer.x)&&!F.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const x=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-x),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(x=this._bufferService.cols-1){this._activeBuffer.x=Math.min(x,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(x,F){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=x,this._activeBuffer.y=this._activeBuffer.scrollTop+F):(this._activeBuffer.x=x,this._activeBuffer.y=F),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(x,F){this._restrictCursor(),this._setCursor(this._activeBuffer.x+x,this._activeBuffer.y+F)}cursorUp(x){const F=this._activeBuffer.y-this._activeBuffer.scrollTop;return F>=0?this._moveCursor(0,-Math.min(F,x.params[0]||1)):this._moveCursor(0,-(x.params[0]||1)),!0}cursorDown(x){const F=this._activeBuffer.scrollBottom-this._activeBuffer.y;return F>=0?this._moveCursor(0,Math.min(F,x.params[0]||1)):this._moveCursor(0,x.params[0]||1),!0}cursorForward(x){return this._moveCursor(x.params[0]||1,0),!0}cursorBackward(x){return this._moveCursor(-(x.params[0]||1),0),!0}cursorNextLine(x){return this.cursorDown(x),this._activeBuffer.x=0,!0}cursorPrecedingLine(x){return this.cursorUp(x),this._activeBuffer.x=0,!0}cursorCharAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(x){return this._setCursor(x.length>=2?(x.params[1]||1)-1:0,(x.params[0]||1)-1),!0}charPosAbsolute(x){return this._setCursor((x.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(x){return this._moveCursor(x.params[0]||1,0),!0}linePosAbsolute(x){return this._setCursor(this._activeBuffer.x,(x.params[0]||1)-1),!0}vPositionRelative(x){return this._moveCursor(0,x.params[0]||1),!0}hVPosition(x){return this.cursorPosition(x),!0}tabClear(x){const F=x.params[0];return F===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:F===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=x.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(x){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let F=x.params[0]||1;for(;F--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(x){const F=x.params[0];return F===1&&(this._curAttrData.bg|=536870912),F!==2&&F!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(x,F,P,U=!1,G=!1){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);H.replaceCells(F,P,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),G),U&&(H.isWrapped=!1)}_resetBufferLine(x,F=!1){const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+x);P&&(P.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),F),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+x),P.isWrapped=!1)}eraseInDisplay(x,F=!1){let P;switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);P<this._bufferService.rows;P++)this._resetBufferLine(P,F);this._dirtyRowTracker.markDirty(P);break;case 1:for(P=this._activeBuffer.y,this._dirtyRowTracker.markDirty(P),this._eraseInBufferLine(P,0,this._activeBuffer.x+1,!0,F),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(P+1).isWrapped=!1);P--;)this._resetBufferLine(P,F);this._dirtyRowTracker.markDirty(0);break;case 2:for(P=this._bufferService.rows,this._dirtyRowTracker.markDirty(P-1);P--;)this._resetBufferLine(P,F);this._dirtyRowTracker.markDirty(0);break;case 3:const U=this._activeBuffer.lines.length-this._bufferService.rows;U>0&&(this._activeBuffer.lines.trimStart(U),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-U,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-U,0),this._onScroll.fire(0))}return!0}eraseInLine(x,F=!1){switch(this._restrictCursor(this._bufferService.cols),x.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,F);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,F);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,F)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(x){this._restrictCursor();let F=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y,U=this._bufferService.rows-1-this._activeBuffer.scrollBottom,G=this._bufferService.rows-1+this._activeBuffer.ybase-U+1;for(;F--;)this._activeBuffer.lines.splice(G-1,1),this._activeBuffer.lines.splice(P,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(x){this._restrictCursor();let F=x.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=this._activeBuffer.ybase+this._activeBuffer.y;let U;for(U=this._bufferService.rows-1-this._activeBuffer.scrollBottom,U=this._bufferService.rows-1+this._activeBuffer.ybase-U;F--;)this._activeBuffer.lines.splice(P,1),this._activeBuffer.lines.splice(U,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(x){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.insertCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(x){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.deleteCells(this._activeBuffer.x,x.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(x){let F=x.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(x){let F=x.params[0]||1;for(;F--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(c.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=x.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);U.deleteCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=x.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);U.insertCells(0,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=x.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);U.insertCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(x){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=x.params[0]||1;for(let P=this._activeBuffer.scrollTop;P<=this._activeBuffer.scrollBottom;++P){const U=this._activeBuffer.lines.get(this._activeBuffer.ybase+P);U.deleteCells(this._activeBuffer.x,F,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),U.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(x){this._restrictCursor();const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return F&&(F.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(x.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(x){if(!this._parser.precedingCodepoint)return!0;const F=x.params[0]||1,P=new Uint32Array(F);for(let U=0;U<F;++U)P[U]=this._parser.precedingCodepoint;return this.print(P,0,P.length),!0}sendDeviceAttributesPrimary(x){return x.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(f.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(f.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(x){return x.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(f.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(f.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(x.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(f.C0.ESC+"[>83;40003;0c")),!0}_is(x){return(this._optionsService.rawOptions.termName+"").indexOf(x)===0}setMode(x){for(let F=0;F<x.length;F++)switch(x.params[F]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(x){for(let F=0;F<x.length;F++)switch(x.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(x){for(let F=0;F<x.length;F++)switch(x.params[F]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(x){for(let F=0;F<x.length;F++)switch(x.params[F]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),x.params[F]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(x,F){const P=this._coreService.decPrivateModes,{activeProtocol:U,activeEncoding:G}=this._coreMouseService,H=this._coreService,{buffers:K,cols:Y}=this._bufferService,{active:z,alt:y}=K,A=this._optionsService.rawOptions,I=V=>V?1:2,j=x.params[0];return D=j,B=F?j===2?4:j===4?I(H.modes.insertMode):j===12?3:j===20?I(A.convertEol):0:j===1?I(P.applicationCursorKeys):j===3?A.windowOptions.setWinLines?Y===80?2:Y===132?1:0:0:j===6?I(P.origin):j===7?I(P.wraparound):j===8?3:j===9?I(U==="X10"):j===12?I(A.cursorBlink):j===25?I(!H.isCursorHidden):j===45?I(P.reverseWraparound):j===66?I(P.applicationKeypad):j===67?4:j===1e3?I(U==="VT200"):j===1002?I(U==="DRAG"):j===1003?I(U==="ANY"):j===1004?I(P.sendFocus):j===1005?4:j===1006?I(G==="SGR"):j===1015?4:j===1016?I(G==="SGR_PIXELS"):j===1048?1:j===47||j===1047||j===1049?I(z===y):j===2004?I(P.bracketedPasteMode):0,H.triggerDataEvent(`${f.C0.ESC}[${F?"":"?"}${D};${B}$y`),!0;var D,B}_updateAttrColor(x,F,P,U,G){return F===2?(x|=50331648,x&=-16777216,x|=p.AttributeData.fromColorRGB([P,U,G])):F===5&&(x&=-50331904,x|=33554432|255&P),x}_extractColor(x,F,P){const U=[0,0,-1,0,0,0];let G=0,H=0;do{if(U[H+G]=x.params[F+H],x.hasSubParams(F+H)){const K=x.getSubParams(F+H);let Y=0;do U[1]===5&&(G=1),U[H+Y+1+G]=K[Y];while(++Y<K.length&&Y+H+1+G<U.length);break}if(U[1]===5&&H+G>=2||U[1]===2&&H+G>=5)break;U[1]&&(G=1)}while(++H+F<x.length&&H+G<U.length);for(let K=2;K<U.length;++K)U[K]===-1&&(U[K]=0);switch(U[0]){case 38:P.fg=this._updateAttrColor(P.fg,U[1],U[3],U[4],U[5]);break;case 48:P.bg=this._updateAttrColor(P.bg,U[1],U[3],U[4],U[5]);break;case 58:P.extended=P.extended.clone(),P.extended.underlineColor=this._updateAttrColor(P.extended.underlineColor,U[1],U[3],U[4],U[5])}return H}_processUnderline(x,F){F.extended=F.extended.clone(),(!~x||x>5)&&(x=1),F.extended.underlineStyle=x,F.fg|=268435456,x===0&&(F.fg&=-268435457),F.updateExtended()}_processSGR0(x){x.fg=c.DEFAULT_ATTR_DATA.fg,x.bg=c.DEFAULT_ATTR_DATA.bg,x.extended=x.extended.clone(),x.extended.underlineStyle=0,x.extended.underlineColor&=-67108864,x.updateExtended()}charAttributes(x){if(x.length===1&&x.params[0]===0)return this._processSGR0(this._curAttrData),!0;const F=x.length;let P;const U=this._curAttrData;for(let G=0;G<F;G++)P=x.params[G],P>=30&&P<=37?(U.fg&=-50331904,U.fg|=16777216|P-30):P>=40&&P<=47?(U.bg&=-50331904,U.bg|=16777216|P-40):P>=90&&P<=97?(U.fg&=-50331904,U.fg|=16777224|P-90):P>=100&&P<=107?(U.bg&=-50331904,U.bg|=16777224|P-100):P===0?this._processSGR0(U):P===1?U.fg|=134217728:P===3?U.bg|=67108864:P===4?(U.fg|=268435456,this._processUnderline(x.hasSubParams(G)?x.getSubParams(G)[0]:1,U)):P===5?U.fg|=536870912:P===7?U.fg|=67108864:P===8?U.fg|=1073741824:P===9?U.fg|=2147483648:P===2?U.bg|=134217728:P===21?this._processUnderline(2,U):P===22?(U.fg&=-134217729,U.bg&=-134217729):P===23?U.bg&=-67108865:P===24?(U.fg&=-268435457,this._processUnderline(0,U)):P===25?U.fg&=-536870913:P===27?U.fg&=-67108865:P===28?U.fg&=-1073741825:P===29?U.fg&=2147483647:P===39?(U.fg&=-67108864,U.fg|=16777215&c.DEFAULT_ATTR_DATA.fg):P===49?(U.bg&=-67108864,U.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):P===38||P===48||P===58?G+=this._extractColor(x,G,U):P===53?U.bg|=1073741824:P===55?U.bg&=-1073741825:P===59?(U.extended=U.extended.clone(),U.extended.underlineColor=-1,U.updateExtended()):P===100?(U.fg&=-67108864,U.fg|=16777215&c.DEFAULT_ATTR_DATA.fg,U.bg&=-67108864,U.bg|=16777215&c.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",P);return!0}deviceStatus(x){switch(x.params[0]){case 5:this._coreService.triggerDataEvent(`${f.C0.ESC}[0n`);break;case 6:const F=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[${F};${P}R`)}return!0}deviceStatusPrivate(x){if(x.params[0]===6){const F=this._activeBuffer.y+1,P=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${f.C0.ESC}[?${F};${P}R`)}return!0}softReset(x){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(x){const F=x.params[0]||1;switch(F){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const P=F%2==1;return this._optionsService.options.cursorBlink=P,!0}setScrollRegion(x){const F=x.params[0]||1;let P;return(x.length<2||(P=x.params[1])>this._bufferService.rows||P===0)&&(P=this._bufferService.rows),P>F&&(this._activeBuffer.scrollTop=F-1,this._activeBuffer.scrollBottom=P-1,this._setCursor(0,0)),!0}windowOptions(x){if(!$(x.params[0],this._optionsService.rawOptions.windowOptions))return!0;const F=x.length>1?x.params[1]:0;switch(x.params[0]){case 14:F!==2&&this._onRequestWindowsOptionsReport.fire(L.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(L.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${f.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:F!==0&&F!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),F!==0&&F!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:F!==0&&F!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),F!==0&&F!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(x){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(x){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(x){return this._windowTitle=x,this._onTitleChange.fire(x),!0}setIconName(x){return this._iconName=x,!0}setOrReportIndexedColor(x){const F=[],P=x.split(";");for(;P.length>1;){const U=P.shift(),G=P.shift();if(/^\d+$/.exec(U)){const H=parseInt(U);if(ie(H))if(G==="?")F.push({type:0,index:H});else{const K=(0,b.parseColor)(G);K&&F.push({type:1,index:H,color:K})}}}return F.length&&this._onColor.fire(F),!0}setHyperlink(x){const F=x.split(";");return!(F.length<2)&&(F[1]?this._createHyperlink(F[0],F[1]):!F[0]&&this._finishHyperlink())}_createHyperlink(x,F){this._getCurrentLinkId()&&this._finishHyperlink();const P=x.split(":");let U;const G=P.findIndex(H=>H.startsWith("id="));return G!==-1&&(U=P[G].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:U,uri:F}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(x,F){const P=x.split(";");for(let U=0;U<P.length&&!(F>=this._specialColors.length);++U,++F)if(P[U]==="?")this._onColor.fire([{type:0,index:this._specialColors[F]}]);else{const G=(0,b.parseColor)(P[U]);G&&this._onColor.fire([{type:1,index:this._specialColors[F],color:G}])}return!0}setOrReportFgColor(x){return this._setOrReportSpecialColor(x,0)}setOrReportBgColor(x){return this._setOrReportSpecialColor(x,1)}setOrReportCursorColor(x){return this._setOrReportSpecialColor(x,2)}restoreIndexedColor(x){if(!x)return this._onColor.fire([{type:2}]),!0;const F=[],P=x.split(";");for(let U=0;U<P.length;++U)if(/^\d+$/.exec(P[U])){const G=parseInt(P[U]);ie(G)&&F.push({type:2,index:G})}return F.length&&this._onColor.fire(F),!0}restoreFgColor(x){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(x){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(x){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(x){return x.length!==2?(this.selectDefaultCharset(),!0):(x[0]==="/"||this._charsetService.setgCharset(O[x[0]],v.CHARSETS[x[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const x=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,x,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=c.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=c.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(x){return this._charsetService.setgLevel(x),!0}screenAlignmentPattern(){const x=new h.CellData;x.content=4194373,x.fg=this._curAttrData.fg,x.bg=this._curAttrData.bg,this._setCursor(0,0);for(let F=0;F<this._bufferService.rows;++F){const P=this._activeBuffer.ybase+this._activeBuffer.y+F,U=this._activeBuffer.lines.get(P);U&&(U.fill(x),U.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(x,F){const P=this._bufferService.buffer,U=this._optionsService.rawOptions;return(G=>(this._coreService.triggerDataEvent(`${f.C0.ESC}${G}${f.C0.ESC}\\`),!0))(x==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:x==='"p'?'P1$r61;1"p':x==="r"?`P1$r${P.scrollTop+1};${P.scrollBottom+1}r`:x==="m"?"P1$r0m":x===" q"?`P1$r${{block:2,underline:4,bar:6}[U.cursorStyle]-(U.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(x,F){this._dirtyRowTracker.markRangeDirty(x,F)}}n.InputHandler=Z;let re=class{constructor(ne){this._bufferService=ne,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(ne){ne<this.start?this.start=ne:ne>this.end&&(this.end=ne)}markRangeDirty(ne,x){ne>x&&(q=ne,ne=x,x=q),ne<this.start&&(this.start=ne),x>this.end&&(this.end=x)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function ie(ne){return 0<=ne&&ne<256}re=u([m(0,g.IBufferService)],re)},844:(d,n)=>{function o(u){for(const m of u)m.dispose();u.length=0}Object.defineProperty(n,"__esModule",{value:!0}),n.getDisposeArrayDisposable=n.disposeArray=n.toDisposable=n.MutableDisposable=n.Disposable=void 0,n.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const u of this._disposables)u.dispose();this._disposables.length=0}register(u){return this._disposables.push(u),u}unregister(u){const m=this._disposables.indexOf(u);m!==-1&&this._disposables.splice(m,1)}},n.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(u){var m;this._isDisposed||u===this._value||((m=this._value)===null||m===void 0||m.dispose(),this._value=u)}clear(){this.value=void 0}dispose(){var u;this._isDisposed=!0,(u=this._value)===null||u===void 0||u.dispose(),this._value=void 0}},n.toDisposable=function(u){return{dispose:u}},n.disposeArray=o,n.getDisposeArrayDisposable=function(u){return{dispose:()=>o(u)}}},1505:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.FourKeyMap=n.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(m,f,v){this._data[m]||(this._data[m]={}),this._data[m][f]=v}get(m,f){return this._data[m]?this._data[m][f]:void 0}clear(){this._data={}}}n.TwoKeyMap=o,n.FourKeyMap=class{constructor(){this._data=new o}set(u,m,f,v,C){this._data.get(u,m)||this._data.set(u,m,new o),this._data.get(u,m).set(f,v,C)}get(u,m,f,v){var C;return(C=this._data.get(u,m))===null||C===void 0?void 0:C.get(f,v)}clear(){this._data.clear()}}},6114:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.isChromeOS=n.isLinux=n.isWindows=n.isIphone=n.isIpad=n.isMac=n.getSafariVersion=n.isSafari=n.isLegacyEdge=n.isFirefox=n.isNode=void 0,n.isNode=typeof navigator>"u";const o=n.isNode?"node":navigator.userAgent,u=n.isNode?"node":navigator.platform;n.isFirefox=o.includes("Firefox"),n.isLegacyEdge=o.includes("Edge"),n.isSafari=/^((?!chrome|android).)*safari/i.test(o),n.getSafariVersion=function(){if(!n.isSafari)return 0;const m=o.match(/Version\/(\d+)/);return m===null||m.length<2?0:parseInt(m[1])},n.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(u),n.isIpad=u==="iPad",n.isIphone=u==="iPhone",n.isWindows=["Windows","Win16","Win32","WinCE"].includes(u),n.isLinux=u.indexOf("Linux")>=0,n.isChromeOS=/\bCrOS\b/.test(o)},6106:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.SortedList=void 0;let o=0;n.SortedList=class{constructor(u){this._getKey=u,this._array=[]}clear(){this._array.length=0}insert(u){this._array.length!==0?(o=this._search(this._getKey(u)),this._array.splice(o,0,u)):this._array.push(u)}delete(u){if(this._array.length===0)return!1;const m=this._getKey(u);if(m===void 0||(o=this._search(m),o===-1)||this._getKey(this._array[o])!==m)return!1;do if(this._array[o]===u)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===m);return!1}*getKeyIterator(u){if(this._array.length!==0&&(o=this._search(u),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===u))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===u)}forEachByKey(u,m){if(this._array.length!==0&&(o=this._search(u),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===u))do m(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===u)}values(){return[...this._array].values()}_search(u){let m=0,f=this._array.length-1;for(;f>=m;){let v=m+f>>1;const C=this._getKey(this._array[v]);if(C>u)f=v-1;else{if(!(C<u)){for(;v>0&&this._getKey(this._array[v-1])===u;)v--;return v}m=v+1}}return m}}},7226:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DebouncedIdleTask=n.IdleTaskQueue=n.PriorityTaskQueue=void 0;const u=o(6114);class m{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let S=0,w=0,c=C.timeRemaining(),s=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),w=Math.max(S,w),s=C.timeRemaining(),1.5*w>s)return c-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(c-S))}ms`),void this._start();c=s}this.clear()}}class f extends m{_requestCallback(C){return setTimeout(()=>C(this._createDeadline(16)))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const S=Date.now()+C;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}n.PriorityTaskQueue=f,n.IdleTaskQueue=!u.isNode&&"requestIdleCallback"in window?class extends m{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:f,n.DebouncedIdleTask=class{constructor(){this._queue=new n.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.updateWindowsModeWrappedState=void 0;const u=o(643);n.updateWindowsModeWrappedState=function(m){const f=m.buffer.lines.get(m.buffer.ybase+m.buffer.y-1),v=f==null?void 0:f.get(m.cols-1),C=m.buffer.lines.get(m.buffer.ybase+m.buffer.y);C&&v&&(C.isWrapped=v[u.CHAR_DATA_CODE_INDEX]!==u.NULL_CELL_CODE&&v[u.CHAR_DATA_CODE_INDEX]!==u.WHITESPACE_CELL_CODE)}},3734:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ExtendedAttrs=n.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new u}static toColorRGB(f){return[f>>>16&255,f>>>8&255,255&f]}static fromColorRGB(f){return(255&f[0])<<16|(255&f[1])<<8|255&f[2]}clone(){const f=new o;return f.fg=this.fg,f.bg=this.bg,f.extended=this.extended.clone(),f}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}n.AttributeData=o;class u{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(f){this._ext=f}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(f){this._ext&=-469762049,this._ext|=f<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(f){this._ext&=-67108864,this._ext|=67108863&f}get urlId(){return this._urlId}set urlId(f){this._urlId=f}constructor(f=0,v=0){this._ext=0,this._urlId=0,this._ext=f,this._urlId=v}clone(){return new u(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}n.ExtendedAttrs=u},9092:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Buffer=n.MAX_BUFFER_SIZE=void 0;const u=o(6349),m=o(7226),f=o(3734),v=o(8437),C=o(4634),S=o(511),w=o(643),c=o(4863),s=o(7116);n.MAX_BUFFER_SIZE=4294967295,n.Buffer=class{constructor(a,h,p){this._hasScrollback=a,this._optionsService=h,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=s.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,w.NULL_CELL_CHAR,w.NULL_CELL_WIDTH,w.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,w.WHITESPACE_CELL_CHAR,w.WHITESPACE_CELL_WIDTH,w.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new m.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(a){return a?(this._nullCell.fg=a.fg,this._nullCell.bg=a.bg,this._nullCell.extended=a.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new f.ExtendedAttrs),this._nullCell}getWhitespaceCell(a){return a?(this._whitespaceCell.fg=a.fg,this._whitespaceCell.bg=a.bg,this._whitespaceCell.extended=a.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new f.ExtendedAttrs),this._whitespaceCell}getBlankLine(a,h){return new v.BufferLine(this._bufferService.cols,this.getNullCell(a),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const a=this.ybase+this.y-this.ydisp;return a>=0&&a<this._rows}_getCorrectBufferLength(a){if(!this._hasScrollback)return a;const h=a+this._optionsService.rawOptions.scrollback;return h>n.MAX_BUFFER_SIZE?n.MAX_BUFFER_SIZE:h}fillViewportRows(a){if(this.lines.length===0){a===void 0&&(a=v.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(a))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new u.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(a,h){const p=this.getNullCell(v.DEFAULT_ATTR_DATA);let g=0;const E=this._getCorrectBufferLength(h);if(E>this.lines.maxLength&&(this.lines.maxLength=E),this.lines.length>0){if(this._cols<a)for(let b=0;b<this.lines.length;b++)g+=+this.lines.get(b).resize(a,p);let k=0;if(this._rows<h)for(let b=this._rows;b<h;b++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(a,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(a,p)));else for(let b=this._rows;b>h;b--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(E<this.lines.maxLength){const b=this.lines.length-E;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=E}this.x=Math.min(this.x,a-1),this.y=Math.min(this.y,h-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,a-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(a,h),this._cols>a))for(let k=0;k<this.lines.length;k++)g+=+this.lines.get(k).resize(a,p);this._cols=a,this._rows=h,this._memoryCleanupQueue.clear(),g>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let a=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,a=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return a}get _isReflowEnabled(){const a=this._optionsService.rawOptions.windowsPty;return a&&a.buildNumber?this._hasScrollback&&a.backend==="conpty"&&a.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(a,h){this._cols!==a&&(a>this._cols?this._reflowLarger(a,h):this._reflowSmaller(a,h))}_reflowLarger(a,h){const p=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,a,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(p.length>0){const g=(0,C.reflowLargerCreateNewLayout)(this.lines,p);(0,C.reflowLargerApplyNewLayout)(this.lines,g.layout),this._reflowLargerAdjustViewport(a,h,g.countRemoved)}}_reflowLargerAdjustViewport(a,h,p){const g=this.getNullCell(v.DEFAULT_ATTR_DATA);let E=p;for(;E-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new v.BufferLine(a,g))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)}_reflowSmaller(a,h){const p=this.getNullCell(v.DEFAULT_ATTR_DATA),g=[];let E=0;for(let k=this.lines.length-1;k>=0;k--){let b=this.lines.get(k);if(!b||!b.isWrapped&&b.getTrimmedLength()<=a)continue;const O=[b];for(;b.isWrapped&&k>0;)b=this.lines.get(--k),O.unshift(b);const M=this.ybase+this.y;if(M>=k&&M<k+O.length)continue;const $=O[O.length-1].getTrimmedLength(),L=(0,C.reflowSmallerGetNewLineLengths)(O,this._cols,a),q=L.length-O.length;let Z;Z=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+q):Math.max(0,this.lines.length-this.lines.maxLength+q);const re=[];for(let U=0;U<q;U++){const G=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);re.push(G)}re.length>0&&(g.push({start:k+O.length+E,newLines:re}),E+=re.length),O.push(...re);let ie=L.length-1,ne=L[ie];ne===0&&(ie--,ne=L[ie]);let x=O.length-q-1,F=$;for(;x>=0;){const U=Math.min(F,ne);if(O[ie]===void 0)break;if(O[ie].copyCellsFrom(O[x],F-U,ne-U,U,!0),ne-=U,ne===0&&(ie--,ne=L[ie]),F-=U,F===0){x--;const G=Math.max(x,0);F=(0,C.getWrappedLineTrimmedLength)(O,G,this._cols)}}for(let U=0;U<O.length;U++)L[U]<a&&O[U].setCell(L[U],p);let P=q-Z;for(;P-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+E)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+q,this.ybase+h-1)}if(g.length>0){const k=[],b=[];for(let ie=0;ie<this.lines.length;ie++)b.push(this.lines.get(ie));const O=this.lines.length;let M=O-1,$=0,L=g[$];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+E);let q=0;for(let ie=Math.min(this.lines.maxLength-1,O+E-1);ie>=0;ie--)if(L&&L.start>M+q){for(let ne=L.newLines.length-1;ne>=0;ne--)this.lines.set(ie--,L.newLines[ne]);ie++,k.push({index:M+1,amount:L.newLines.length}),q+=L.newLines.length,L=g[++$]}else this.lines.set(ie,b[M--]);let Z=0;for(let ie=k.length-1;ie>=0;ie--)k[ie].index+=Z,this.lines.onInsertEmitter.fire(k[ie]),Z+=k[ie].amount;const re=Math.max(0,O+E-this.lines.maxLength);re>0&&this.lines.onTrimEmitter.fire(re)}}translateBufferLineToString(a,h,p=0,g){const E=this.lines.get(a);return E?E.translateToString(h,p,g):""}getWrappedRangeForLine(a){let h=a,p=a;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:h,last:p}}setupTabStops(a){for(a!=null?this.tabs[a]||(a=this.prevStop(a)):(this.tabs={},a=0);a<this._cols;a+=this._optionsService.rawOptions.tabStopWidth)this.tabs[a]=!0}prevStop(a){for(a==null&&(a=this.x);!this.tabs[--a]&&a>0;);return a>=this._cols?this._cols-1:a<0?0:a}nextStop(a){for(a==null&&(a=this.x);!this.tabs[++a]&&a<this._cols;);return a>=this._cols?this._cols-1:a<0?0:a}clearMarkers(a){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===a&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let a=0;a<this.markers.length;a++)this.markers[a].dispose(),this.markers.splice(a--,1);this._isClearing=!1}addMarker(a){const h=new c.Marker(a);return this.markers.push(h),h.register(this.lines.onTrim(p=>{h.line-=p,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(p=>{h.line>=p.index&&(h.line+=p.amount)})),h.register(this.lines.onDelete(p=>{h.line>=p.index&&h.line<p.index+p.amount&&h.dispose(),h.line>p.index&&(h.line-=p.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(a){this._isClearing||this.markers.splice(this.markers.indexOf(a),1)}}},8437:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLine=n.DEFAULT_ATTR_DATA=void 0;const u=o(3734),m=o(511),f=o(643),v=o(482);n.DEFAULT_ATTR_DATA=Object.freeze(new u.AttributeData);let C=0;class S{constructor(c,s,a=!1){this.isWrapped=a,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*c);const h=s||m.CellData.fromCharData([0,f.NULL_CELL_CHAR,f.NULL_CELL_WIDTH,f.NULL_CELL_CODE]);for(let p=0;p<c;++p)this.setCell(p,h);this.length=c}get(c){const s=this._data[3*c+0],a=2097151&s;return[this._data[3*c+1],2097152&s?this._combined[c]:a?(0,v.stringFromCodePoint)(a):"",s>>22,2097152&s?this._combined[c].charCodeAt(this._combined[c].length-1):a]}set(c,s){this._data[3*c+1]=s[f.CHAR_DATA_ATTR_INDEX],s[f.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[c]=s[1],this._data[3*c+0]=2097152|c|s[f.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*c+0]=s[f.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|s[f.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(c){return this._data[3*c+0]>>22}hasWidth(c){return 12582912&this._data[3*c+0]}getFg(c){return this._data[3*c+1]}getBg(c){return this._data[3*c+2]}hasContent(c){return 4194303&this._data[3*c+0]}getCodePoint(c){const s=this._data[3*c+0];return 2097152&s?this._combined[c].charCodeAt(this._combined[c].length-1):2097151&s}isCombined(c){return 2097152&this._data[3*c+0]}getString(c){const s=this._data[3*c+0];return 2097152&s?this._combined[c]:2097151&s?(0,v.stringFromCodePoint)(2097151&s):""}isProtected(c){return 536870912&this._data[3*c+2]}loadCell(c,s){return C=3*c,s.content=this._data[C+0],s.fg=this._data[C+1],s.bg=this._data[C+2],2097152&s.content&&(s.combinedData=this._combined[c]),268435456&s.bg&&(s.extended=this._extendedAttrs[c]),s}setCell(c,s){2097152&s.content&&(this._combined[c]=s.combinedData),268435456&s.bg&&(this._extendedAttrs[c]=s.extended),this._data[3*c+0]=s.content,this._data[3*c+1]=s.fg,this._data[3*c+2]=s.bg}setCellFromCodePoint(c,s,a,h,p,g){268435456&p&&(this._extendedAttrs[c]=g),this._data[3*c+0]=s|a<<22,this._data[3*c+1]=h,this._data[3*c+2]=p}addCodepointToCell(c,s){let a=this._data[3*c+0];2097152&a?this._combined[c]+=(0,v.stringFromCodePoint)(s):(2097151&a?(this._combined[c]=(0,v.stringFromCodePoint)(2097151&a)+(0,v.stringFromCodePoint)(s),a&=-2097152,a|=2097152):a=s|4194304,this._data[3*c+0]=a)}insertCells(c,s,a,h){if((c%=this.length)&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new u.ExtendedAttrs),s<this.length-c){const p=new m.CellData;for(let g=this.length-c-s-1;g>=0;--g)this.setCell(c+s+g,this.loadCell(c+g,p));for(let g=0;g<s;++g)this.setCell(c+g,a)}else for(let p=c;p<this.length;++p)this.setCell(p,a);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new u.ExtendedAttrs)}deleteCells(c,s,a,h){if(c%=this.length,s<this.length-c){const p=new m.CellData;for(let g=0;g<this.length-c-s;++g)this.setCell(c+g,this.loadCell(c+s+g,p));for(let g=this.length-s;g<this.length;++g)this.setCell(g,a)}else for(let p=c;p<this.length;++p)this.setCell(p,a);c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new u.ExtendedAttrs),this.getWidth(c)!==0||this.hasContent(c)||this.setCellFromCodePoint(c,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new u.ExtendedAttrs)}replaceCells(c,s,a,h,p=!1){if(p)for(c&&this.getWidth(c-1)===2&&!this.isProtected(c-1)&&this.setCellFromCodePoint(c-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new u.ExtendedAttrs),s<this.length&&this.getWidth(s-1)===2&&!this.isProtected(s)&&this.setCellFromCodePoint(s,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new u.ExtendedAttrs);c<s&&c<this.length;)this.isProtected(c)||this.setCell(c,a),c++;else for(c&&this.getWidth(c-1)===2&&this.setCellFromCodePoint(c-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new u.ExtendedAttrs),s<this.length&&this.getWidth(s-1)===2&&this.setCellFromCodePoint(s,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new u.ExtendedAttrs);c<s&&c<this.length;)this.setCell(c++,a)}resize(c,s){if(c===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const a=3*c;if(c>this.length){if(this._data.buffer.byteLength>=4*a)this._data=new Uint32Array(this._data.buffer,0,a);else{const h=new Uint32Array(a);h.set(this._data),this._data=h}for(let h=this.length;h<c;++h)this.setCell(h,s)}else{this._data=this._data.subarray(0,a);const h=Object.keys(this._combined);for(let g=0;g<h.length;g++){const E=parseInt(h[g],10);E>=c&&delete this._combined[E]}const p=Object.keys(this._extendedAttrs);for(let g=0;g<p.length;g++){const E=parseInt(p[g],10);E>=c&&delete this._extendedAttrs[E]}}return this.length=c,4*a*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const c=new Uint32Array(this._data.length);return c.set(this._data),this._data=c,1}return 0}fill(c,s=!1){if(s)for(let a=0;a<this.length;++a)this.isProtected(a)||this.setCell(a,c);else{this._combined={},this._extendedAttrs={};for(let a=0;a<this.length;++a)this.setCell(a,c)}}copyFrom(c){this.length!==c.length?this._data=new Uint32Array(c._data):this._data.set(c._data),this.length=c.length,this._combined={};for(const s in c._combined)this._combined[s]=c._combined[s];this._extendedAttrs={};for(const s in c._extendedAttrs)this._extendedAttrs[s]=c._extendedAttrs[s];this.isWrapped=c.isWrapped}clone(){const c=new S(0);c._data=new Uint32Array(this._data),c.length=this.length;for(const s in this._combined)c._combined[s]=this._combined[s];for(const s in this._extendedAttrs)c._extendedAttrs[s]=this._extendedAttrs[s];return c.isWrapped=this.isWrapped,c}getTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0])return c+(this._data[3*c+0]>>22);return 0}getNoBgTrimmedLength(){for(let c=this.length-1;c>=0;--c)if(4194303&this._data[3*c+0]||50331648&this._data[3*c+2])return c+(this._data[3*c+0]>>22);return 0}copyCellsFrom(c,s,a,h,p){const g=c._data;if(p)for(let k=h-1;k>=0;k--){for(let b=0;b<3;b++)this._data[3*(a+k)+b]=g[3*(s+k)+b];268435456&g[3*(s+k)+2]&&(this._extendedAttrs[a+k]=c._extendedAttrs[s+k])}else for(let k=0;k<h;k++){for(let b=0;b<3;b++)this._data[3*(a+k)+b]=g[3*(s+k)+b];268435456&g[3*(s+k)+2]&&(this._extendedAttrs[a+k]=c._extendedAttrs[s+k])}const E=Object.keys(c._combined);for(let k=0;k<E.length;k++){const b=parseInt(E[k],10);b>=s&&(this._combined[b-s+a]=c._combined[b])}}translateToString(c=!1,s=0,a=this.length){c&&(a=Math.min(a,this.getTrimmedLength()));let h="";for(;s<a;){const p=this._data[3*s+0],g=2097151&p;h+=2097152&p?this._combined[s]:g?(0,v.stringFromCodePoint)(g):f.WHITESPACE_CELL_CHAR,s+=p>>22||1}return h}}n.BufferLine=S},4841:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.getRangeLength=void 0,n.getRangeLength=function(o,u){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return u*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(d,n)=>{function o(u,m,f){if(m===u.length-1)return u[m].getTrimmedLength();const v=!u[m].hasContent(f-1)&&u[m].getWidth(f-1)===1,C=u[m+1].getWidth(0)===2;return v&&C?f-1:f}Object.defineProperty(n,"__esModule",{value:!0}),n.getWrappedLineTrimmedLength=n.reflowSmallerGetNewLineLengths=n.reflowLargerApplyNewLayout=n.reflowLargerCreateNewLayout=n.reflowLargerGetLinesToRemove=void 0,n.reflowLargerGetLinesToRemove=function(u,m,f,v,C){const S=[];for(let w=0;w<u.length-1;w++){let c=w,s=u.get(++c);if(!s.isWrapped)continue;const a=[u.get(w)];for(;c<u.length&&s.isWrapped;)a.push(s),s=u.get(++c);if(v>=w&&v<c){w+=a.length-1;continue}let h=0,p=o(a,h,m),g=1,E=0;for(;g<a.length;){const b=o(a,g,m),O=b-E,M=f-p,$=Math.min(O,M);a[h].copyCellsFrom(a[g],E,p,$,!1),p+=$,p===f&&(h++,p=0),E+=$,E===b&&(g++,E=0),p===0&&h!==0&&a[h-1].getWidth(f-1)===2&&(a[h].copyCellsFrom(a[h-1],f-1,p++,1,!1),a[h-1].setCell(f-1,C))}a[h].replaceCells(p,f,C);let k=0;for(let b=a.length-1;b>0&&(b>h||a[b].getTrimmedLength()===0);b--)k++;k>0&&(S.push(w+a.length-k),S.push(k)),w+=a.length-1}return S},n.reflowLargerCreateNewLayout=function(u,m){const f=[];let v=0,C=m[v],S=0;for(let w=0;w<u.length;w++)if(C===w){const c=m[++v];u.onDeleteEmitter.fire({index:w-S,amount:c}),w+=c-1,S+=c,C=m[++v]}else f.push(w);return{layout:f,countRemoved:S}},n.reflowLargerApplyNewLayout=function(u,m){const f=[];for(let v=0;v<m.length;v++)f.push(u.get(m[v]));for(let v=0;v<f.length;v++)u.set(v,f[v]);u.length=m.length},n.reflowSmallerGetNewLineLengths=function(u,m,f){const v=[],C=u.map((s,a)=>o(u,a,m)).reduce((s,a)=>s+a);let S=0,w=0,c=0;for(;c<C;){if(C-c<f){v.push(C-c);break}S+=f;const s=o(u,w,m);S>s&&(S-=s,w++);const a=u[w].getWidth(S-1)===2;a&&S--;const h=a?f-1:f;v.push(h),c+=h}return v},n.getWrappedLineTrimmedLength=o},5295:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferSet=void 0;const u=o(8460),m=o(844),f=o(9092);class v extends m.Disposable{constructor(S,w){super(),this._optionsService=S,this._bufferService=w,this._onBufferActivate=this.register(new u.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new f.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new f.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,w){this._normal.resize(S,w),this._alt.resize(S,w),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}n.BufferSet=v},511:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CellData=void 0;const u=o(482),m=o(643),f=o(3734);class v extends f.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new f.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const w=new v;return w.setFromCharData(S),w}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,u.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[m.CHAR_DATA_ATTR_INDEX],this.bg=0;let w=!1;if(S[m.CHAR_DATA_CHAR_INDEX].length>2)w=!0;else if(S[m.CHAR_DATA_CHAR_INDEX].length===2){const c=S[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=c&&c<=56319){const s=S[m.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=s&&s<=57343?this.content=1024*(c-55296)+s-56320+65536|S[m.CHAR_DATA_WIDTH_INDEX]<<22:w=!0}else w=!0}else this.content=S[m.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[m.CHAR_DATA_WIDTH_INDEX]<<22;w&&(this.combinedData=S[m.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[m.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}n.CellData=v},643:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WHITESPACE_CELL_CODE=n.WHITESPACE_CELL_WIDTH=n.WHITESPACE_CELL_CHAR=n.NULL_CELL_CODE=n.NULL_CELL_WIDTH=n.NULL_CELL_CHAR=n.CHAR_DATA_CODE_INDEX=n.CHAR_DATA_WIDTH_INDEX=n.CHAR_DATA_CHAR_INDEX=n.CHAR_DATA_ATTR_INDEX=n.DEFAULT_EXT=n.DEFAULT_ATTR=n.DEFAULT_COLOR=void 0,n.DEFAULT_COLOR=0,n.DEFAULT_ATTR=256|n.DEFAULT_COLOR<<9,n.DEFAULT_EXT=0,n.CHAR_DATA_ATTR_INDEX=0,n.CHAR_DATA_CHAR_INDEX=1,n.CHAR_DATA_WIDTH_INDEX=2,n.CHAR_DATA_CODE_INDEX=3,n.NULL_CELL_CHAR="",n.NULL_CELL_WIDTH=1,n.NULL_CELL_CODE=0,n.WHITESPACE_CELL_CHAR=" ",n.WHITESPACE_CELL_WIDTH=1,n.WHITESPACE_CELL_CODE=32},4863:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Marker=void 0;const u=o(8460),m=o(844);class f{get id(){return this._id}constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=f._nextId++,this._onDispose=this.register(new u.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,m.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}n.Marker=f,f._nextId=1},7116:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_CHARSET=n.CHARSETS=void 0,n.CHARSETS={},n.DEFAULT_CHARSET=n.CHARSETS.B,n.CHARSETS[0]={"`":"â",a:"â",b:"â",c:"â",d:"â",e:"â",f:"Â°",g:"Â±",h:"â¤",i:"â",j:"â",k:"â",l:"â",m:"â",n:"â¼",o:"âº",p:"â»",q:"â",r:"â¼",s:"â½",t:"â",u:"â¤",v:"â´",w:"â¬",x:"â",y:"â¤",z:"â¥","{":"Ï","|":"â ","}":"Â£","~":"Â·"},n.CHARSETS.A={"#":"Â£"},n.CHARSETS.B=void 0,n.CHARSETS[4]={"#":"Â£","@":"Â¾","[":"ij","\\":"Â½","]":"|","{":"Â¨","|":"f","}":"Â¼","~":"Â´"},n.CHARSETS.C=n.CHARSETS[5]={"[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},n.CHARSETS.R={"#":"Â£","@":"Ã ","[":"Â°","\\":"Ã§","]":"Â§","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Â¨"},n.CHARSETS.Q={"@":"Ã ","[":"Ã¢","\\":"Ã§","]":"Ãª","^":"Ã®","`":"Ã´","{":"Ã©","|":"Ã¹","}":"Ã¨","~":"Ã»"},n.CHARSETS.K={"@":"Â§","[":"Ã","\\":"Ã","]":"Ã","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã"},n.CHARSETS.Y={"#":"Â£","@":"Â§","[":"Â°","\\":"Ã§","]":"Ã©","`":"Ã¹","{":"Ã ","|":"Ã²","}":"Ã¨","~":"Ã¬"},n.CHARSETS.E=n.CHARSETS[6]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã¤","{":"Ã¦","|":"Ã¸","}":"Ã¥","~":"Ã¼"},n.CHARSETS.Z={"#":"Â£","@":"Â§","[":"Â¡","\\":"Ã","]":"Â¿","{":"Â°","|":"Ã±","}":"Ã§"},n.CHARSETS.H=n.CHARSETS[7]={"@":"Ã","[":"Ã","\\":"Ã","]":"Ã","^":"Ã","`":"Ã©","{":"Ã¤","|":"Ã¶","}":"Ã¥","~":"Ã¼"},n.CHARSETS["="]={"#":"Ã¹","@":"Ã ","[":"Ã©","\\":"Ã§","]":"Ãª","^":"Ã®",_:"Ã¨","`":"Ã´","{":"Ã¤","|":"Ã¶","}":"Ã¼","~":"Ã»"}},2584:(d,n)=>{var o,u,m;Object.defineProperty(n,"__esModule",{value:!0}),n.C1_ESCAPED=n.C1=n.C0=void 0,function(f){f.NUL="\0",f.SOH="",f.STX="",f.ETX="",f.EOT="",f.ENQ="",f.ACK="",f.BEL="\x07",f.BS="\b",f.HT="	",f.LF=`
`,f.VT="\v",f.FF="\f",f.CR="\r",f.SO="",f.SI="",f.DLE="",f.DC1="",f.DC2="",f.DC3="",f.DC4="",f.NAK="",f.SYN="",f.ETB="",f.CAN="",f.EM="",f.SUB="",f.ESC="\x1B",f.FS="",f.GS="",f.RS="",f.US="",f.SP=" ",f.DEL=""}(o||(n.C0=o={})),function(f){f.PAD="Â",f.HOP="Â",f.BPH="Â",f.NBH="Â",f.IND="Â",f.NEL="Â",f.SSA="Â",f.ESA="Â",f.HTS="Â",f.HTJ="Â",f.VTS="Â",f.PLD="Â",f.PLU="Â",f.RI="Â",f.SS2="Â",f.SS3="Â",f.DCS="Â",f.PU1="Â",f.PU2="Â",f.STS="Â",f.CCH="Â",f.MW="Â",f.SPA="Â",f.EPA="Â",f.SOS="Â",f.SGCI="Â",f.SCI="Â",f.CSI="Â",f.ST="Â",f.OSC="Â",f.PM="Â",f.APC="Â"}(u||(n.C1=u={})),function(f){f.ST=`${o.ESC}\\`}(m||(n.C1_ESCAPED=m={}))},7399:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.evaluateKeyboardEvent=void 0;const u=o(2584),m={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};n.evaluateKeyboardEvent=function(f,v,C,S){const w={type:0,cancel:!1,key:void 0},c=(f.shiftKey?1:0)|(f.altKey?2:0)|(f.ctrlKey?4:0)|(f.metaKey?8:0);switch(f.keyCode){case 0:f.key==="UIKeyInputUpArrow"?w.key=v?u.C0.ESC+"OA":u.C0.ESC+"[A":f.key==="UIKeyInputLeftArrow"?w.key=v?u.C0.ESC+"OD":u.C0.ESC+"[D":f.key==="UIKeyInputRightArrow"?w.key=v?u.C0.ESC+"OC":u.C0.ESC+"[C":f.key==="UIKeyInputDownArrow"&&(w.key=v?u.C0.ESC+"OB":u.C0.ESC+"[B");break;case 8:if(f.altKey){w.key=u.C0.ESC+u.C0.DEL;break}w.key=u.C0.DEL;break;case 9:if(f.shiftKey){w.key=u.C0.ESC+"[Z";break}w.key=u.C0.HT,w.cancel=!0;break;case 13:w.key=f.altKey?u.C0.ESC+u.C0.CR:u.C0.CR,w.cancel=!0;break;case 27:w.key=u.C0.ESC,f.altKey&&(w.key=u.C0.ESC+u.C0.ESC),w.cancel=!0;break;case 37:if(f.metaKey)break;c?(w.key=u.C0.ESC+"[1;"+(c+1)+"D",w.key===u.C0.ESC+"[1;3D"&&(w.key=u.C0.ESC+(C?"b":"[1;5D"))):w.key=v?u.C0.ESC+"OD":u.C0.ESC+"[D";break;case 39:if(f.metaKey)break;c?(w.key=u.C0.ESC+"[1;"+(c+1)+"C",w.key===u.C0.ESC+"[1;3C"&&(w.key=u.C0.ESC+(C?"f":"[1;5C"))):w.key=v?u.C0.ESC+"OC":u.C0.ESC+"[C";break;case 38:if(f.metaKey)break;c?(w.key=u.C0.ESC+"[1;"+(c+1)+"A",C||w.key!==u.C0.ESC+"[1;3A"||(w.key=u.C0.ESC+"[1;5A")):w.key=v?u.C0.ESC+"OA":u.C0.ESC+"[A";break;case 40:if(f.metaKey)break;c?(w.key=u.C0.ESC+"[1;"+(c+1)+"B",C||w.key!==u.C0.ESC+"[1;3B"||(w.key=u.C0.ESC+"[1;5B")):w.key=v?u.C0.ESC+"OB":u.C0.ESC+"[B";break;case 45:f.shiftKey||f.ctrlKey||(w.key=u.C0.ESC+"[2~");break;case 46:w.key=c?u.C0.ESC+"[3;"+(c+1)+"~":u.C0.ESC+"[3~";break;case 36:w.key=c?u.C0.ESC+"[1;"+(c+1)+"H":v?u.C0.ESC+"OH":u.C0.ESC+"[H";break;case 35:w.key=c?u.C0.ESC+"[1;"+(c+1)+"F":v?u.C0.ESC+"OF":u.C0.ESC+"[F";break;case 33:f.shiftKey?w.type=2:f.ctrlKey?w.key=u.C0.ESC+"[5;"+(c+1)+"~":w.key=u.C0.ESC+"[5~";break;case 34:f.shiftKey?w.type=3:f.ctrlKey?w.key=u.C0.ESC+"[6;"+(c+1)+"~":w.key=u.C0.ESC+"[6~";break;case 112:w.key=c?u.C0.ESC+"[1;"+(c+1)+"P":u.C0.ESC+"OP";break;case 113:w.key=c?u.C0.ESC+"[1;"+(c+1)+"Q":u.C0.ESC+"OQ";break;case 114:w.key=c?u.C0.ESC+"[1;"+(c+1)+"R":u.C0.ESC+"OR";break;case 115:w.key=c?u.C0.ESC+"[1;"+(c+1)+"S":u.C0.ESC+"OS";break;case 116:w.key=c?u.C0.ESC+"[15;"+(c+1)+"~":u.C0.ESC+"[15~";break;case 117:w.key=c?u.C0.ESC+"[17;"+(c+1)+"~":u.C0.ESC+"[17~";break;case 118:w.key=c?u.C0.ESC+"[18;"+(c+1)+"~":u.C0.ESC+"[18~";break;case 119:w.key=c?u.C0.ESC+"[19;"+(c+1)+"~":u.C0.ESC+"[19~";break;case 120:w.key=c?u.C0.ESC+"[20;"+(c+1)+"~":u.C0.ESC+"[20~";break;case 121:w.key=c?u.C0.ESC+"[21;"+(c+1)+"~":u.C0.ESC+"[21~";break;case 122:w.key=c?u.C0.ESC+"[23;"+(c+1)+"~":u.C0.ESC+"[23~";break;case 123:w.key=c?u.C0.ESC+"[24;"+(c+1)+"~":u.C0.ESC+"[24~";break;default:if(!f.ctrlKey||f.shiftKey||f.altKey||f.metaKey)if(C&&!S||!f.altKey||f.metaKey)!C||f.altKey||f.ctrlKey||f.shiftKey||!f.metaKey?f.key&&!f.ctrlKey&&!f.altKey&&!f.metaKey&&f.keyCode>=48&&f.key.length===1?w.key=f.key:f.key&&f.ctrlKey&&(f.key==="_"&&(w.key=u.C0.US),f.key==="@"&&(w.key=u.C0.NUL)):f.keyCode===65&&(w.type=1);else{const s=m[f.keyCode],a=s==null?void 0:s[f.shiftKey?1:0];if(a)w.key=u.C0.ESC+a;else if(f.keyCode>=65&&f.keyCode<=90){const h=f.ctrlKey?f.keyCode-64:f.keyCode+32;let p=String.fromCharCode(h);f.shiftKey&&(p=p.toUpperCase()),w.key=u.C0.ESC+p}else if(f.keyCode===32)w.key=u.C0.ESC+(f.ctrlKey?u.C0.NUL:" ");else if(f.key==="Dead"&&f.code.startsWith("Key")){let h=f.code.slice(3,4);f.shiftKey||(h=h.toLowerCase()),w.key=u.C0.ESC+h,w.cancel=!0}}else f.keyCode>=65&&f.keyCode<=90?w.key=String.fromCharCode(f.keyCode-64):f.keyCode===32?w.key=u.C0.NUL:f.keyCode>=51&&f.keyCode<=55?w.key=String.fromCharCode(f.keyCode-51+27):f.keyCode===56?w.key=u.C0.DEL:f.keyCode===219?w.key=u.C0.ESC:f.keyCode===220?w.key=u.C0.FS:f.keyCode===221&&(w.key=u.C0.GS)}return w}},482:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Utf8ToUtf32=n.StringToUtf32=n.utf32ToString=n.stringFromCodePoint=void 0,n.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},n.utf32ToString=function(o,u=0,m=o.length){let f="";for(let v=u;v<m;++v){let C=o[v];C>65535?(C-=65536,f+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):f+=String.fromCharCode(C)}return f},n.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,u){const m=o.length;if(!m)return 0;let f=0,v=0;if(this._interim){const C=o.charCodeAt(v++);56320<=C&&C<=57343?u[f++]=1024*(this._interim-55296)+C-56320+65536:(u[f++]=this._interim,u[f++]=C),this._interim=0}for(let C=v;C<m;++C){const S=o.charCodeAt(C);if(55296<=S&&S<=56319){if(++C>=m)return this._interim=S,f;const w=o.charCodeAt(C);56320<=w&&w<=57343?u[f++]=1024*(S-55296)+w-56320+65536:(u[f++]=S,u[f++]=w)}else S!==65279&&(u[f++]=S)}return f}},n.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,u){const m=o.length;if(!m)return 0;let f,v,C,S,w=0,c=0,s=0;if(this.interim[0]){let p=!1,g=this.interim[0];g&=(224&g)==192?31:(240&g)==224?15:7;let E,k=0;for(;(E=63&this.interim[++k])&&k<4;)g<<=6,g|=E;const b=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,O=b-k;for(;s<O;){if(s>=m)return 0;if(E=o[s++],(192&E)!=128){s--,p=!0;break}this.interim[k++]=E,g<<=6,g|=63&E}p||(b===2?g<128?s--:u[w++]=g:b===3?g<2048||g>=55296&&g<=57343||g===65279||(u[w++]=g):g<65536||g>1114111||(u[w++]=g)),this.interim.fill(0)}const a=m-4;let h=s;for(;h<m;){for(;!(!(h<a)||128&(f=o[h])||128&(v=o[h+1])||128&(C=o[h+2])||128&(S=o[h+3]));)u[w++]=f,u[w++]=v,u[w++]=C,u[w++]=S,h+=4;if(f=o[h++],f<128)u[w++]=f;else if((224&f)==192){if(h>=m)return this.interim[0]=f,w;if(v=o[h++],(192&v)!=128){h--;continue}if(c=(31&f)<<6|63&v,c<128){h--;continue}u[w++]=c}else if((240&f)==224){if(h>=m)return this.interim[0]=f,w;if(v=o[h++],(192&v)!=128){h--;continue}if(h>=m)return this.interim[0]=f,this.interim[1]=v,w;if(C=o[h++],(192&C)!=128){h--;continue}if(c=(15&f)<<12|(63&v)<<6|63&C,c<2048||c>=55296&&c<=57343||c===65279)continue;u[w++]=c}else if((248&f)==240){if(h>=m)return this.interim[0]=f,w;if(v=o[h++],(192&v)!=128){h--;continue}if(h>=m)return this.interim[0]=f,this.interim[1]=v,w;if(C=o[h++],(192&C)!=128){h--;continue}if(h>=m)return this.interim[0]=f,this.interim[1]=v,this.interim[2]=C,w;if(S=o[h++],(192&S)!=128){h--;continue}if(c=(7&f)<<18|(63&v)<<12|(63&C)<<6|63&S,c<65536||c>1114111)continue;u[w++]=c}}return w}}},225:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeV6=void 0;const o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],u=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let m;n.UnicodeV6=class{constructor(){if(this.version="6",!m){m=new Uint8Array(65536),m.fill(1),m[0]=0,m.fill(0,1,32),m.fill(0,127,160),m.fill(2,4352,4448),m[9001]=2,m[9002]=2,m.fill(2,11904,42192),m[12351]=1,m.fill(2,44032,55204),m.fill(2,63744,64256),m.fill(2,65040,65050),m.fill(2,65072,65136),m.fill(2,65280,65377),m.fill(2,65504,65511);for(let f=0;f<o.length;++f)m.fill(0,o[f][0],o[f][1]+1)}}wcwidth(f){return f<32?0:f<127?1:f<65536?m[f]:function(v,C){let S,w=0,c=C.length-1;if(v<C[0][0]||v>C[c][1])return!1;for(;c>=w;)if(S=w+c>>1,v>C[S][1])w=S+1;else{if(!(v<C[S][0]))return!0;c=S-1}return!1}(f,u)?0:f>=131072&&f<=196605||f>=196608&&f<=262141?2:1}}},5981:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.WriteBuffer=void 0;const u=o(8460),m=o(844);class f extends m.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new u.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let w;for(this._isSyncWriting=!0;w=this._writeBuffer.shift();){this._action(w);const c=this._callbacks.shift();c&&c()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(S),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(S)}_innerWrite(C=0,S=!0){const w=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const c=this._writeBuffer[this._bufferOffset],s=this._action(c,S);if(s){const h=p=>Date.now()-w>=12?setTimeout(()=>this._innerWrite(0,p)):this._innerWrite(w,p);return void s.catch(p=>(queueMicrotask(()=>{throw p}),Promise.resolve(!1))).then(h)}const a=this._callbacks[this._bufferOffset];if(a&&a(),this._bufferOffset++,this._pendingData-=c.length,Date.now()-w>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}n.WriteBuffer=f},5941:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.toRgbString=n.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,u=/^[\da-f]+$/;function m(f,v){const C=f.toString(16),S=C.length<2?"0"+C:C;switch(v){case 4:return C[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}n.parseColor=function(f){if(!f)return;let v=f.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);const C=o.exec(v);if(C){const S=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/S*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/S*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/S*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),u.exec(v)&&[3,6,9,12].includes(v.length))){const C=v.length/3,S=[0,0,0];for(let w=0;w<3;++w){const c=parseInt(v.slice(C*w,C*w+C),16);S[w]=C===1?c<<4:C===2?c:C===3?c>>4:c>>8}return S}},n.toRgbString=function(f,v=16){const[C,S,w]=f;return`rgb:${m(C,v)}/${m(S,v)}/${m(w,v)}`}},5770:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.PAYLOAD_LIMIT=void 0,n.PAYLOAD_LIMIT=1e7},6351:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DcsHandler=n.DcsParser=void 0;const u=o(482),m=o(8742),f=o(5770),v=[];n.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(S,w){this._handlers[S]===void 0&&(this._handlers[S]=[]);const c=this._handlers[S];return c.push(w),{dispose:()=>{const s=c.indexOf(w);s!==-1&&c.splice(s,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(S,w){if(this.reset(),this._ident=S,this._active=this._handlers[S]||v,this._active.length)for(let c=this._active.length-1;c>=0;c--)this._active[c].hook(w);else this._handlerFb(this._ident,"HOOK",w)}put(S,w,c){if(this._active.length)for(let s=this._active.length-1;s>=0;s--)this._active[s].put(S,w,c);else this._handlerFb(this._ident,"PUT",(0,u.utf32ToString)(S,w,c))}unhook(S,w=!0){if(this._active.length){let c=!1,s=this._active.length-1,a=!1;if(this._stack.paused&&(s=this._stack.loopPosition-1,c=w,a=this._stack.fallThrough,this._stack.paused=!1),!a&&c===!1){for(;s>=0&&(c=this._active[s].unhook(S),c!==!0);s--)if(c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!1,c;s--}for(;s>=0;s--)if(c=this._active[s].unhook(!1),c instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=s,this._stack.fallThrough=!0,c}else this._handlerFb(this._ident,"UNHOOK",S);this._active=v,this._ident=0}};const C=new m.Params;C.addParam(0),n.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=C,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():C,this._data="",this._hitLimit=!1}put(S,w,c){this._hitLimit||(this._data+=(0,u.utf32ToString)(S,w,c),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let w=!1;if(this._hitLimit)w=!1;else if(S&&(w=this._handler(this._data,this._params),w instanceof Promise))return w.then(c=>(this._params=C,this._data="",this._hitLimit=!1,c));return this._params=C,this._data="",this._hitLimit=!1,w}}},2015:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.EscapeSequenceParser=n.VT500_TRANSITION_TABLE=n.TransitionTable=void 0;const u=o(844),m=o(8742),f=o(6242),v=o(6351);class C{constructor(s){this.table=new Uint8Array(s)}setDefault(s,a){this.table.fill(s<<4|a)}add(s,a,h,p){this.table[a<<8|s]=h<<4|p}addMany(s,a,h,p){for(let g=0;g<s.length;g++)this.table[a<<8|s[g]]=h<<4|p}}n.TransitionTable=C;const S=160;n.VT500_TRANSITION_TABLE=function(){const c=new C(4095),s=Array.apply(null,Array(256)).map((k,b)=>b),a=(k,b)=>s.slice(k,b),h=a(32,127),p=a(0,24);p.push(25),p.push.apply(p,a(28,32));const g=a(0,14);let E;for(E in c.setDefault(1,0),c.addMany(h,0,2,0),g)c.addMany([24,26,153,154],E,3,0),c.addMany(a(128,144),E,3,0),c.addMany(a(144,152),E,3,0),c.add(156,E,0,0),c.add(27,E,11,1),c.add(157,E,4,8),c.addMany([152,158,159],E,0,7),c.add(155,E,11,3),c.add(144,E,11,9);return c.addMany(p,0,3,0),c.addMany(p,1,3,1),c.add(127,1,0,1),c.addMany(p,8,0,8),c.addMany(p,3,3,3),c.add(127,3,0,3),c.addMany(p,4,3,4),c.add(127,4,0,4),c.addMany(p,6,3,6),c.addMany(p,5,3,5),c.add(127,5,0,5),c.addMany(p,2,3,2),c.add(127,2,0,2),c.add(93,1,4,8),c.addMany(h,8,5,8),c.add(127,8,5,8),c.addMany([156,27,24,26,7],8,6,0),c.addMany(a(28,32),8,0,8),c.addMany([88,94,95],1,0,7),c.addMany(h,7,0,7),c.addMany(p,7,0,7),c.add(156,7,0,0),c.add(127,7,0,7),c.add(91,1,11,3),c.addMany(a(64,127),3,7,0),c.addMany(a(48,60),3,8,4),c.addMany([60,61,62,63],3,9,4),c.addMany(a(48,60),4,8,4),c.addMany(a(64,127),4,7,0),c.addMany([60,61,62,63],4,0,6),c.addMany(a(32,64),6,0,6),c.add(127,6,0,6),c.addMany(a(64,127),6,0,0),c.addMany(a(32,48),3,9,5),c.addMany(a(32,48),5,9,5),c.addMany(a(48,64),5,0,6),c.addMany(a(64,127),5,7,0),c.addMany(a(32,48),4,9,5),c.addMany(a(32,48),1,9,2),c.addMany(a(32,48),2,9,2),c.addMany(a(48,127),2,10,0),c.addMany(a(48,80),1,10,0),c.addMany(a(81,88),1,10,0),c.addMany([89,90,92],1,10,0),c.addMany(a(96,127),1,10,0),c.add(80,1,11,9),c.addMany(p,9,0,9),c.add(127,9,0,9),c.addMany(a(28,32),9,0,9),c.addMany(a(32,48),9,9,12),c.addMany(a(48,60),9,8,10),c.addMany([60,61,62,63],9,9,10),c.addMany(p,11,0,11),c.addMany(a(32,128),11,0,11),c.addMany(a(28,32),11,0,11),c.addMany(p,10,0,10),c.add(127,10,0,10),c.addMany(a(28,32),10,0,10),c.addMany(a(48,60),10,8,10),c.addMany([60,61,62,63],10,0,11),c.addMany(a(32,48),10,9,12),c.addMany(p,12,0,12),c.add(127,12,0,12),c.addMany(a(28,32),12,0,12),c.addMany(a(32,48),12,9,12),c.addMany(a(48,64),12,0,11),c.addMany(a(64,127),12,12,13),c.addMany(a(64,127),10,12,13),c.addMany(a(64,127),9,12,13),c.addMany(p,13,13,13),c.addMany(h,13,13,13),c.add(127,13,0,13),c.addMany([27,156,24,26],13,14,0),c.add(S,0,2,0),c.add(S,8,5,8),c.add(S,6,0,6),c.add(S,11,0,11),c.add(S,13,13,13),c}();class w extends u.Disposable{constructor(s=n.VT500_TRANSITION_TABLE){super(),this._transitions=s,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new m.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(a,h,p)=>{},this._executeHandlerFb=a=>{},this._csiHandlerFb=(a,h)=>{},this._escHandlerFb=a=>{},this._errorHandlerFb=a=>a,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,u.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new f.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(s,a=[64,126]){let h=0;if(s.prefix){if(s.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=s.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(s.intermediates){if(s.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let g=0;g<s.intermediates.length;++g){const E=s.intermediates.charCodeAt(g);if(32>E||E>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=E}}if(s.final.length!==1)throw new Error("final must be a single byte");const p=s.final.charCodeAt(0);if(a[0]>p||p>a[1])throw new Error(`final must be in range ${a[0]} .. ${a[1]}`);return h<<=8,h|=p,h}identToString(s){const a=[];for(;s;)a.push(String.fromCharCode(255&s)),s>>=8;return a.reverse().join("")}setPrintHandler(s){this._printHandler=s}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(s,a){const h=this._identifier(s,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);const p=this._escHandlers[h];return p.push(a),{dispose:()=>{const g=p.indexOf(a);g!==-1&&p.splice(g,1)}}}clearEscHandler(s){this._escHandlers[this._identifier(s,[48,126])]&&delete this._escHandlers[this._identifier(s,[48,126])]}setEscHandlerFallback(s){this._escHandlerFb=s}setExecuteHandler(s,a){this._executeHandlers[s.charCodeAt(0)]=a}clearExecuteHandler(s){this._executeHandlers[s.charCodeAt(0)]&&delete this._executeHandlers[s.charCodeAt(0)]}setExecuteHandlerFallback(s){this._executeHandlerFb=s}registerCsiHandler(s,a){const h=this._identifier(s);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);const p=this._csiHandlers[h];return p.push(a),{dispose:()=>{const g=p.indexOf(a);g!==-1&&p.splice(g,1)}}}clearCsiHandler(s){this._csiHandlers[this._identifier(s)]&&delete this._csiHandlers[this._identifier(s)]}setCsiHandlerFallback(s){this._csiHandlerFb=s}registerDcsHandler(s,a){return this._dcsParser.registerHandler(this._identifier(s),a)}clearDcsHandler(s){this._dcsParser.clearHandler(this._identifier(s))}setDcsHandlerFallback(s){this._dcsParser.setHandlerFallback(s)}registerOscHandler(s,a){return this._oscParser.registerHandler(s,a)}clearOscHandler(s){this._oscParser.clearHandler(s)}setOscHandlerFallback(s){this._oscParser.setHandlerFallback(s)}setErrorHandler(s){this._errorHandler=s}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(s,a,h,p,g){this._parseStack.state=s,this._parseStack.handlers=a,this._parseStack.handlerPos=h,this._parseStack.transition=p,this._parseStack.chunkPos=g}parse(s,a,h){let p,g=0,E=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const b=this._parseStack.handlers;let O=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&O>-1){for(;O>=0&&(p=b[O](this._params),p!==!0);O--)if(p instanceof Promise)return this._parseStack.handlerPos=O,p}this._parseStack.handlers=[];break;case 4:if(h===!1&&O>-1){for(;O>=0&&(p=b[O](),p!==!0);O--)if(p instanceof Promise)return this._parseStack.handlerPos=O,p}this._parseStack.handlers=[];break;case 6:if(g=s[this._parseStack.chunkPos],p=this._dcsParser.unhook(g!==24&&g!==26,h),p)return p;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(g=s[this._parseStack.chunkPos],p=this._oscParser.end(g!==24&&g!==26,h),p)return p;g===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let b=k;b<a;++b){switch(g=s[b],E=this._transitions.table[this.currentState<<8|(g<160?g:S)],E>>4){case 2:for(let q=b+1;;++q){if(q>=a||(g=s[q])<32||g>126&&g<S){this._printHandler(s,b,q),b=q-1;break}if(++q>=a||(g=s[q])<32||g>126&&g<S){this._printHandler(s,b,q),b=q-1;break}if(++q>=a||(g=s[q])<32||g>126&&g<S){this._printHandler(s,b,q),b=q-1;break}if(++q>=a||(g=s[q])<32||g>126&&g<S){this._printHandler(s,b,q),b=q-1;break}}break;case 3:this._executeHandlers[g]?this._executeHandlers[g]():this._executeHandlerFb(g),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:b,code:g,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const O=this._csiHandlers[this._collect<<8|g];let M=O?O.length-1:-1;for(;M>=0&&(p=O[M](this._params),p!==!0);M--)if(p instanceof Promise)return this._preserveStack(3,O,M,E,b),p;M<0&&this._csiHandlerFb(this._collect<<8|g,this._params),this.precedingCodepoint=0;break;case 8:do switch(g){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(g-48)}while(++b<a&&(g=s[b])>47&&g<60);b--;break;case 9:this._collect<<=8,this._collect|=g;break;case 10:const $=this._escHandlers[this._collect<<8|g];let L=$?$.length-1:-1;for(;L>=0&&(p=$[L](),p!==!0);L--)if(p instanceof Promise)return this._preserveStack(4,$,L,E,b),p;L<0&&this._escHandlerFb(this._collect<<8|g),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|g,this._params);break;case 13:for(let q=b+1;;++q)if(q>=a||(g=s[q])===24||g===26||g===27||g>127&&g<S){this._dcsParser.put(s,b,q),b=q-1;break}break;case 14:if(p=this._dcsParser.unhook(g!==24&&g!==26),p)return this._preserveStack(6,[],0,E,b),p;g===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let q=b+1;;q++)if(q>=a||(g=s[q])<32||g>127&&g<S){this._oscParser.put(s,b,q),b=q-1;break}break;case 6:if(p=this._oscParser.end(g!==24&&g!==26),p)return this._preserveStack(5,[],0,E,b),p;g===27&&(E|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&E}}}n.EscapeSequenceParser=w},6242:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OscHandler=n.OscParser=void 0;const u=o(5770),m=o(482),f=[];n.OscParser=class{constructor(){this._state=0,this._active=f,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,C){this._handlers[v]===void 0&&(this._handlers[v]=[]);const S=this._handlers[v];return S.push(C),{dispose:()=>{const w=S.indexOf(C);w!==-1&&S.splice(w,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=f}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=f,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||f,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,C,S){if(this._active.length)for(let w=this._active.length-1;w>=0;w--)this._active[w].put(v,C,S);else this._handlerFb(this._id,"PUT",(0,m.utf32ToString)(v,C,S))}start(){this.reset(),this._state=1}put(v,C,S){if(this._state!==3){if(this._state===1)for(;C<S;){const w=v[C++];if(w===59){this._state=2,this._start();break}if(w<48||57<w)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+w-48}this._state===2&&S-C>0&&this._put(v,C,S)}}end(v,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,w=this._active.length-1,c=!1;if(this._stack.paused&&(w=this._stack.loopPosition-1,S=C,c=this._stack.fallThrough,this._stack.paused=!1),!c&&S===!1){for(;w>=0&&(S=this._active[w].end(v),S!==!0);w--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!1,S;w--}for(;w>=0;w--)if(S=this._active[w].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=w,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",v);this._active=f,this._id=-1,this._state=0}}},n.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,C,S){this._hitLimit||(this._data+=(0,m.utf32ToString)(v,C,S),this._data.length>u.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let C=!1;if(this._hitLimit)C=!1;else if(v&&(C=this._handler(this._data),C instanceof Promise))return C.then(S=>(this._data="",this._hitLimit=!1,S));return this._data="",this._hitLimit=!1,C}}},8742:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.Params=void 0;const o=2147483647;class u{static fromArray(f){const v=new u;if(!f.length)return v;for(let C=Array.isArray(f[0])?1:0;C<f.length;++C){const S=f[C];if(Array.isArray(S))for(let w=0;w<S.length;++w)v.addSubParam(S[w]);else v.addParam(S)}return v}constructor(f=32,v=32){if(this.maxLength=f,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(f),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(f),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const f=new u(this.maxLength,this.maxSubParamsLength);return f.params.set(this.params),f.length=this.length,f._subParams.set(this._subParams),f._subParamsLength=this._subParamsLength,f._subParamsIdx.set(this._subParamsIdx),f._rejectDigits=this._rejectDigits,f._rejectSubDigits=this._rejectSubDigits,f._digitIsSub=this._digitIsSub,f}toArray(){const f=[];for(let v=0;v<this.length;++v){f.push(this.params[v]);const C=this._subParamsIdx[v]>>8,S=255&this._subParamsIdx[v];S-C>0&&f.push(Array.prototype.slice.call(this._subParams,C,S))}return f}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(f){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=f>o?o:f}}addSubParam(f){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(f<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=f>o?o:f,this._subParamsIdx[this.length-1]++}}hasSubParams(f){return(255&this._subParamsIdx[f])-(this._subParamsIdx[f]>>8)>0}getSubParams(f){const v=this._subParamsIdx[f]>>8,C=255&this._subParamsIdx[f];return C-v>0?this._subParams.subarray(v,C):null}getSubParamsAll(){const f={};for(let v=0;v<this.length;++v){const C=this._subParamsIdx[v]>>8,S=255&this._subParamsIdx[v];S-C>0&&(f[v]=this._subParams.slice(C,S))}return f}addDigit(f){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,S=C[v-1];C[v-1]=~S?Math.min(10*S+f,o):f}}n.Params=u},5741:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.AddonManager=void 0,n.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,u){const m={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(m),u.dispose=()=>this._wrappedAddonDispose(m),u.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let u=-1;for(let m=0;m<this._addons.length;m++)if(this._addons[m]===o){u=m;break}if(u===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(u,1)}}},8771:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferApiView=void 0;const u=o(3785),m=o(511);n.BufferApiView=class{constructor(f,v){this._buffer=f,this.type=v}init(f){return this._buffer=f,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(f){const v=this._buffer.lines.get(f);if(v)return new u.BufferLineApiView(v)}getNullCell(){return new m.CellData}}},3785:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferLineApiView=void 0;const u=o(511);n.BufferLineApiView=class{constructor(m){this._line=m}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(m,f){if(!(m<0||m>=this._line.length))return f?(this._line.loadCell(m,f),f):this._line.loadCell(m,new u.CellData)}translateToString(m,f,v){return this._line.translateToString(m,f,v)}}},8285:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.BufferNamespaceApi=void 0;const u=o(8771),m=o(8460),f=o(844);class v extends f.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new m.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new u.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new u.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}n.BufferNamespaceApi=v},7975:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.ParserApi=void 0,n.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,u){return this._core.registerCsiHandler(o,m=>u(m.toArray()))}addCsiHandler(o,u){return this.registerCsiHandler(o,u)}registerDcsHandler(o,u){return this._core.registerDcsHandler(o,(m,f)=>u(m,f.toArray()))}addDcsHandler(o,u){return this.registerDcsHandler(o,u)}registerEscHandler(o,u){return this._core.registerEscHandler(o,u)}addEscHandler(o,u){return this.registerEscHandler(o,u)}registerOscHandler(o,u){return this._core.registerOscHandler(o,u)}addOscHandler(o,u){return this.registerOscHandler(o,u)}}},7090:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeApi=void 0,n.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(d,n,o){var u=this&&this.__decorate||function(c,s,a,h){var p,g=arguments.length,E=g<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,s,a,h);else for(var k=c.length-1;k>=0;k--)(p=c[k])&&(E=(g<3?p(E):g>3?p(s,a,E):p(s,a))||E);return g>3&&E&&Object.defineProperty(s,a,E),E},m=this&&this.__param||function(c,s){return function(a,h){s(a,h,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.BufferService=n.MINIMUM_ROWS=n.MINIMUM_COLS=void 0;const f=o(8460),v=o(844),C=o(5295),S=o(2585);n.MINIMUM_COLS=2,n.MINIMUM_ROWS=1;let w=n.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(c){super(),this.isUserScrolling=!1,this._onResize=this.register(new f.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new f.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(c.rawOptions.cols||0,n.MINIMUM_COLS),this.rows=Math.max(c.rawOptions.rows||0,n.MINIMUM_ROWS),this.buffers=this.register(new C.BufferSet(c,this))}resize(c,s){this.cols=c,this.rows=s,this.buffers.resize(c,s),this._onResize.fire({cols:c,rows:s})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(c,s=!1){const a=this.buffer;let h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===c.fg&&h.getBg(0)===c.bg||(h=a.getBlankLine(c,s),this._cachedBlankLine=h),h.isWrapped=s;const p=a.ybase+a.scrollTop,g=a.ybase+a.scrollBottom;if(a.scrollTop===0){const E=a.lines.isFull;g===a.lines.length-1?E?a.lines.recycle().copyFrom(h):a.lines.push(h.clone()):a.lines.splice(g+1,0,h.clone()),E?this.isUserScrolling&&(a.ydisp=Math.max(a.ydisp-1,0)):(a.ybase++,this.isUserScrolling||a.ydisp++)}else{const E=g-p+1;a.lines.shiftElements(p+1,E-1,-1),a.lines.set(g,h.clone())}this.isUserScrolling||(a.ydisp=a.ybase),this._onScroll.fire(a.ydisp)}scrollLines(c,s,a){const h=this.buffer;if(c<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else c+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);const p=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+c,h.ybase),0),p!==h.ydisp&&(s||this._onScroll.fire(h.ydisp))}};n.BufferService=w=u([m(0,S.IOptionsService)],w)},7994:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.CharsetService=void 0,n.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,u){this._charsets[o]=u,this.glevel===o&&(this.charset=u)}}},1753:function(d,n,o){var u=this&&this.__decorate||function(h,p,g,E){var k,b=arguments.length,O=b<3?p:E===null?E=Object.getOwnPropertyDescriptor(p,g):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(h,p,g,E);else for(var M=h.length-1;M>=0;M--)(k=h[M])&&(O=(b<3?k(O):b>3?k(p,g,O):k(p,g))||O);return b>3&&O&&Object.defineProperty(p,g,O),O},m=this&&this.__param||function(h,p){return function(g,E){p(g,E,h)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreMouseService=void 0;const f=o(2585),v=o(8460),C=o(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function w(h,p){let g=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(g|=64,g|=h.action):(g|=3&h.button,4&h.button&&(g|=64),8&h.button&&(g|=128),h.action===32?g|=32:h.action!==0||p||(g|=3)),g}const c=String.fromCharCode,s={DEFAULT:h=>{const p=[w(h,!1)+32,h.col+32,h.row+32];return p[0]>255||p[1]>255||p[2]>255?"":`\x1B[M${c(p[0])}${c(p[1])}${c(p[2])}`},SGR:h=>{const p=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${w(h,!0)};${h.col};${h.row}${p}`},SGR_PIXELS:h=>{const p=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${w(h,!0)};${h.x};${h.y}${p}`}};let a=n.CoreMouseService=class extends C.Disposable{constructor(h,p){super(),this._bufferService=h,this._coreService=p,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const g of Object.keys(S))this.addProtocol(g,S[g]);for(const g of Object.keys(s))this.addEncoding(g,s[g]);this.reset()}addProtocol(h,p){this._protocols[h]=p}addEncoding(h,p){this._encodings[h]=p}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;const p=this._encodings[this._activeEncoding](h);return p&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(p):this._coreService.triggerDataEvent(p,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,p,g){if(g){if(h.x!==p.x||h.y!==p.y)return!1}else if(h.col!==p.col||h.row!==p.row)return!1;return h.button===p.button&&h.action===p.action&&h.ctrl===p.ctrl&&h.alt===p.alt&&h.shift===p.shift}};n.CoreMouseService=a=u([m(0,f.IBufferService),m(1,f.ICoreService)],a)},6975:function(d,n,o){var u=this&&this.__decorate||function(a,h,p,g){var E,k=arguments.length,b=k<3?h:g===null?g=Object.getOwnPropertyDescriptor(h,p):g;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(a,h,p,g);else for(var O=a.length-1;O>=0;O--)(E=a[O])&&(b=(k<3?E(b):k>3?E(h,p,b):E(h,p))||b);return k>3&&b&&Object.defineProperty(h,p,b),b},m=this&&this.__param||function(a,h){return function(p,g){h(p,g,a)}};Object.defineProperty(n,"__esModule",{value:!0}),n.CoreService=void 0;const f=o(1439),v=o(8460),C=o(844),S=o(2585),w=Object.freeze({insertMode:!1}),c=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let s=n.CoreService=class extends C.Disposable{constructor(a,h,p){super(),this._bufferService=a,this._logService=h,this._optionsService=p,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,f.clone)(w),this.decPrivateModes=(0,f.clone)(c)}reset(){this.modes=(0,f.clone)(w),this.decPrivateModes=(0,f.clone)(c)}triggerDataEvent(a,h=!1){if(this._optionsService.rawOptions.disableStdin)return;const p=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&p.ybase!==p.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${a}"`,()=>a.split("").map(g=>g.charCodeAt(0))),this._onData.fire(a)}triggerBinaryEvent(a){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${a}"`,()=>a.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(a))}};n.CoreService=s=u([m(0,S.IBufferService),m(1,S.ILogService),m(2,S.IOptionsService)],s)},9074:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.DecorationService=void 0;const u=o(8055),m=o(8460),f=o(844),v=o(6106);let C=0,S=0;class w extends f.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(a=>a==null?void 0:a.marker.line),this._onDecorationRegistered=this.register(new m.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new m.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,f.toDisposable)(()=>this.reset()))}registerDecoration(a){if(a.marker.isDisposed)return;const h=new c(a);if(h){const p=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),p.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(const a of this._decorations.values())a.dispose();this._decorations.clear()}*getDecorationsAtCell(a,h,p){var g,E,k;let b=0,O=0;for(const M of this._decorations.getKeyIterator(h))b=(g=M.options.x)!==null&&g!==void 0?g:0,O=b+((E=M.options.width)!==null&&E!==void 0?E:1),a>=b&&a<O&&(!p||((k=M.options.layer)!==null&&k!==void 0?k:"bottom")===p)&&(yield M)}forEachDecorationAtCell(a,h,p,g){this._decorations.forEachByKey(h,E=>{var k,b,O;C=(k=E.options.x)!==null&&k!==void 0?k:0,S=C+((b=E.options.width)!==null&&b!==void 0?b:1),a>=C&&a<S&&(!p||((O=E.options.layer)!==null&&O!==void 0?O:"bottom")===p)&&g(E)})}}n.DecorationService=w;class c extends f.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=u.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=u.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(a){super(),this.options=a,this.onRenderEmitter=this.register(new m.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=a.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.InstantiationService=n.ServiceCollection=void 0;const u=o(2585),m=o(8343);class f{constructor(...C){this._entries=new Map;for(const[S,w]of C)this.set(S,w)}set(C,S){const w=this._entries.get(C);return this._entries.set(C,S),w}forEach(C){for(const[S,w]of this._entries.entries())C(S,w)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}n.ServiceCollection=f,n.InstantiationService=class{constructor(){this._services=new f,this._services.set(u.IInstantiationService,this)}setService(v,C){this._services.set(v,C)}getService(v){return this._services.get(v)}createInstance(v,...C){const S=(0,m.getServiceDependencies)(v).sort((s,a)=>s.index-a.index),w=[];for(const s of S){const a=this._services.get(s.id);if(!a)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${s.id}.`);w.push(a)}const c=S.length>0?S[0].index:C.length;if(C.length!==c)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${c+1} conflicts with ${C.length} static arguments`);return new v(...C,...w)}}},7866:function(d,n,o){var u=this&&this.__decorate||function(c,s,a,h){var p,g=arguments.length,E=g<3?s:h===null?h=Object.getOwnPropertyDescriptor(s,a):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(c,s,a,h);else for(var k=c.length-1;k>=0;k--)(p=c[k])&&(E=(g<3?p(E):g>3?p(s,a,E):p(s,a))||E);return g>3&&E&&Object.defineProperty(s,a,E),E},m=this&&this.__param||function(c,s){return function(a,h){s(a,h,c)}};Object.defineProperty(n,"__esModule",{value:!0}),n.traceCall=n.setTraceLogger=n.LogService=void 0;const f=o(844),v=o(2585),C={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let S,w=n.LogService=class extends f.Disposable{get logLevel(){return this._logLevel}constructor(c){super(),this._optionsService=c,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),S=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(c){for(let s=0;s<c.length;s++)typeof c[s]=="function"&&(c[s]=c[s]())}_log(c,s,a){this._evalLazyOptionalParams(a),c.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+s,...a)}trace(c,...s){var a,h;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((h=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.trace.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,c,s)}debug(c,...s){var a,h;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((h=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.debug.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,c,s)}info(c,...s){var a,h;this._logLevel<=v.LogLevelEnum.INFO&&this._log((h=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.info.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.info,c,s)}warn(c,...s){var a,h;this._logLevel<=v.LogLevelEnum.WARN&&this._log((h=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.warn.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.warn,c,s)}error(c,...s){var a,h;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((h=(a=this._optionsService.options.logger)===null||a===void 0?void 0:a.error.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.error,c,s)}};n.LogService=w=u([m(0,v.IOptionsService)],w),n.setTraceLogger=function(c){S=c},n.traceCall=function(c,s,a){if(typeof a.value!="function")throw new Error("not supported");const h=a.value;a.value=function(...p){if(S.logLevel!==v.LogLevelEnum.TRACE)return h.apply(this,p);S.trace(`GlyphRenderer#${h.name}(${p.map(E=>JSON.stringify(E)).join(", ")})`);const g=h.apply(this,p);return S.trace(`GlyphRenderer#${h.name} return`,g),g}}},7302:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.OptionsService=n.DEFAULT_OPTIONS=void 0;const u=o(8460),m=o(844),f=o(6114);n.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:f.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const v=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends m.Disposable{constructor(w){super(),this._onOptionChange=this.register(new u.EventEmitter),this.onOptionChange=this._onOptionChange.event;const c=Object.assign({},n.DEFAULT_OPTIONS);for(const s in w)if(s in c)try{const a=w[s];c[s]=this._sanitizeAndValidateOption(s,a)}catch(a){console.error(a)}this.rawOptions=c,this.options=Object.assign({},c),this._setupOptions()}onSpecificOptionChange(w,c){return this.onOptionChange(s=>{s===w&&c(this.rawOptions[w])})}onMultipleOptionChange(w,c){return this.onOptionChange(s=>{w.indexOf(s)!==-1&&c()})}_setupOptions(){const w=s=>{if(!(s in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);return this.rawOptions[s]},c=(s,a)=>{if(!(s in n.DEFAULT_OPTIONS))throw new Error(`No option with key "${s}"`);a=this._sanitizeAndValidateOption(s,a),this.rawOptions[s]!==a&&(this.rawOptions[s]=a,this._onOptionChange.fire(s))};for(const s in this.rawOptions){const a={get:w.bind(this,s),set:c.bind(this,s)};Object.defineProperty(this.options,s,a)}}_sanitizeAndValidateOption(w,c){switch(w){case"cursorStyle":if(c||(c=n.DEFAULT_OPTIONS[w]),!function(s){return s==="block"||s==="underline"||s==="bar"}(c))throw new Error(`"${c}" is not a valid value for ${w}`);break;case"wordSeparator":c||(c=n.DEFAULT_OPTIONS[w]);break;case"fontWeight":case"fontWeightBold":if(typeof c=="number"&&1<=c&&c<=1e3)break;c=v.includes(c)?c:n.DEFAULT_OPTIONS[w];break;case"cursorWidth":c=Math.floor(c);case"lineHeight":case"tabStopWidth":if(c<1)throw new Error(`${w} cannot be less than 1, value: ${c}`);break;case"minimumContrastRatio":c=Math.max(1,Math.min(21,Math.round(10*c)/10));break;case"scrollback":if((c=Math.min(c,4294967295))<0)throw new Error(`${w} cannot be less than 0, value: ${c}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(c<=0)throw new Error(`${w} cannot be less than or equal to 0, value: ${c}`);break;case"rows":case"cols":if(!c&&c!==0)throw new Error(`${w} must be numeric, value: ${c}`);break;case"windowsPty":c=c??{}}return c}}n.OptionsService=C},2660:function(d,n,o){var u=this&&this.__decorate||function(C,S,w,c){var s,a=arguments.length,h=a<3?S:c===null?c=Object.getOwnPropertyDescriptor(S,w):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(C,S,w,c);else for(var p=C.length-1;p>=0;p--)(s=C[p])&&(h=(a<3?s(h):a>3?s(S,w,h):s(S,w))||h);return a>3&&h&&Object.defineProperty(S,w,h),h},m=this&&this.__param||function(C,S){return function(w,c){S(w,c,C)}};Object.defineProperty(n,"__esModule",{value:!0}),n.OscLinkService=void 0;const f=o(2585);let v=n.OscLinkService=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const S=this._bufferService.buffer;if(C.id===void 0){const p=S.addMarker(S.ybase+S.y),g={data:C,id:this._nextId++,lines:[p]};return p.onDispose(()=>this._removeMarkerFromLink(g,p)),this._dataByLinkId.set(g.id,g),g.id}const w=C,c=this._getEntryIdKey(w),s=this._entriesWithId.get(c);if(s)return this.addLineToLink(s.id,S.ybase+S.y),s.id;const a=S.addMarker(S.ybase+S.y),h={id:this._nextId++,key:this._getEntryIdKey(w),data:w,lines:[a]};return a.onDispose(()=>this._removeMarkerFromLink(h,a)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(C,S){const w=this._dataByLinkId.get(C);if(w&&w.lines.every(c=>c.line!==S)){const c=this._bufferService.buffer.addMarker(S);w.lines.push(c),c.onDispose(()=>this._removeMarkerFromLink(w,c))}}getLinkData(C){var S;return(S=this._dataByLinkId.get(C))===null||S===void 0?void 0:S.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,S){const w=C.lines.indexOf(S);w!==-1&&(C.lines.splice(w,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};n.OscLinkService=v=u([m(0,f.IBufferService)],v)},8343:(d,n)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.createDecorator=n.getServiceDependencies=n.serviceRegistry=void 0;const o="di$target",u="di$dependencies";n.serviceRegistry=new Map,n.getServiceDependencies=function(m){return m[u]||[]},n.createDecorator=function(m){if(n.serviceRegistry.has(m))return n.serviceRegistry.get(m);const f=function(v,C,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(w,c,s){c[o]===c?c[u].push({id:w,index:s}):(c[u]=[{id:w,index:s}],c[o]=c)})(f,v,S)};return f.toString=()=>m,n.serviceRegistry.set(m,f),f}},2585:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.IDecorationService=n.IUnicodeService=n.IOscLinkService=n.IOptionsService=n.ILogService=n.LogLevelEnum=n.IInstantiationService=n.ICharsetService=n.ICoreService=n.ICoreMouseService=n.IBufferService=void 0;const u=o(8343);var m;n.IBufferService=(0,u.createDecorator)("BufferService"),n.ICoreMouseService=(0,u.createDecorator)("CoreMouseService"),n.ICoreService=(0,u.createDecorator)("CoreService"),n.ICharsetService=(0,u.createDecorator)("CharsetService"),n.IInstantiationService=(0,u.createDecorator)("InstantiationService"),function(f){f[f.TRACE=0]="TRACE",f[f.DEBUG=1]="DEBUG",f[f.INFO=2]="INFO",f[f.WARN=3]="WARN",f[f.ERROR=4]="ERROR",f[f.OFF=5]="OFF"}(m||(n.LogLevelEnum=m={})),n.ILogService=(0,u.createDecorator)("LogService"),n.IOptionsService=(0,u.createDecorator)("OptionsService"),n.IOscLinkService=(0,u.createDecorator)("OscLinkService"),n.IUnicodeService=(0,u.createDecorator)("UnicodeService"),n.IDecorationService=(0,u.createDecorator)("DecorationService")},1480:(d,n,o)=>{Object.defineProperty(n,"__esModule",{value:!0}),n.UnicodeService=void 0;const u=o(8460),m=o(225);n.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new u.EventEmitter,this.onChange=this._onChange.event;const f=new m.UnicodeV6;this.register(f),this._active=f.version,this._activeProvider=f}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(f){if(!this._providers[f])throw new Error(`unknown Unicode version "${f}"`);this._active=f,this._activeProvider=this._providers[f],this._onChange.fire(f)}register(f){this._providers[f.version]=f}wcwidth(f){return this._activeProvider.wcwidth(f)}getStringCellWidth(f){let v=0;const C=f.length;for(let S=0;S<C;++S){let w=f.charCodeAt(S);if(55296<=w&&w<=56319){if(++S>=C)return v+this.wcwidth(w);const c=f.charCodeAt(S);56320<=c&&c<=57343?w=1024*(w-55296)+c-56320+65536:v+=this.wcwidth(c)}v+=this.wcwidth(w)}return v}}}},i={};function l(d){var n=i[d];if(n!==void 0)return n.exports;var o=i[d]={exports:{}};return t[d].call(o.exports,o,o.exports,l),o.exports}var _={};return(()=>{var d=_;Object.defineProperty(d,"__esModule",{value:!0}),d.Terminal=void 0;const n=l(9042),o=l(3236),u=l(844),m=l(5741),f=l(8285),v=l(7975),C=l(7090),S=["cols","rows"];class w extends u.Disposable{constructor(s){super(),this._core=this.register(new o.Terminal(s)),this._addonManager=this.register(new m.AddonManager),this._publicOptions=Object.assign({},this._core.options);const a=p=>this._core.options[p],h=(p,g)=>{this._checkReadonlyOptions(p),this._core.options[p]=g};for(const p in this._core.options){const g={get:a.bind(this,p),set:h.bind(this,p)};Object.defineProperty(this._publicOptions,p,g)}}_checkReadonlyOptions(s){if(S.includes(s))throw new Error(`Option "${s}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new C.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new f.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const s=this._core.coreService.decPrivateModes;let a="none";switch(this._core.coreMouseService.activeProtocol){case"X10":a="x10";break;case"VT200":a="vt200";break;case"DRAG":a="drag";break;case"ANY":a="any"}return{applicationCursorKeysMode:s.applicationCursorKeys,applicationKeypadMode:s.applicationKeypad,bracketedPasteMode:s.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:a,originMode:s.origin,reverseWraparoundMode:s.reverseWraparound,sendFocusMode:s.sendFocus,wraparoundMode:s.wraparound}}get options(){return this._publicOptions}set options(s){for(const a in s)this._publicOptions[a]=s[a]}blur(){this._core.blur()}focus(){this._core.focus()}resize(s,a){this._verifyIntegers(s,a),this._core.resize(s,a)}open(s){this._core.open(s)}attachCustomKeyEventHandler(s){this._core.attachCustomKeyEventHandler(s)}registerLinkProvider(s){return this._core.registerLinkProvider(s)}registerCharacterJoiner(s){return this._checkProposedApi(),this._core.registerCharacterJoiner(s)}deregisterCharacterJoiner(s){this._checkProposedApi(),this._core.deregisterCharacterJoiner(s)}registerMarker(s=0){return this._verifyIntegers(s),this._core.registerMarker(s)}registerDecoration(s){var a,h,p;return this._checkProposedApi(),this._verifyPositiveIntegers((a=s.x)!==null&&a!==void 0?a:0,(h=s.width)!==null&&h!==void 0?h:0,(p=s.height)!==null&&p!==void 0?p:0),this._core.registerDecoration(s)}hasSelection(){return this._core.hasSelection()}select(s,a,h){this._verifyIntegers(s,a,h),this._core.select(s,a,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(s,a){this._verifyIntegers(s,a),this._core.selectLines(s,a)}dispose(){super.dispose()}scrollLines(s){this._verifyIntegers(s),this._core.scrollLines(s)}scrollPages(s){this._verifyIntegers(s),this._core.scrollPages(s)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(s){this._verifyIntegers(s),this._core.scrollToLine(s)}clear(){this._core.clear()}write(s,a){this._core.write(s,a)}writeln(s,a){this._core.write(s),this._core.write(`\r
`,a)}paste(s){this._core.paste(s)}refresh(s,a){this._verifyIntegers(s,a),this._core.refresh(s,a)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(s){this._addonManager.loadAddon(this,s)}static get strings(){return n}_verifyIntegers(...s){for(const a of s)if(a===1/0||isNaN(a)||a%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...s){for(const a of s)if(a&&(a===1/0||isNaN(a)||a%1!=0||a<0))throw new Error("This API only accepts positive integers")}}d.Terminal=w})(),_})())})(Mo);var Zl=Mo.exports,No={exports:{}};(function(r,e){(function(t,i){r.exports=i()})(self,()=>(()=>{var t={};return(()=>{var i=t;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(l){this._terminal=l}dispose(){}fit(){const l=this.proposeDimensions();if(!l||!this._terminal||isNaN(l.cols)||isNaN(l.rows))return;const _=this._terminal._core;this._terminal.rows===l.rows&&this._terminal.cols===l.cols||(_._renderService.clear(),this._terminal.resize(l.cols,l.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const l=this._terminal._core,_=l._renderService.dimensions;if(_.css.cell.width===0||_.css.cell.height===0)return;const d=this._terminal.options.scrollback===0?0:l.viewport.scrollBarWidth,n=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(n.getPropertyValue("height")),u=Math.max(0,parseInt(n.getPropertyValue("width"))),m=window.getComputedStyle(this._terminal.element),f=o-(parseInt(m.getPropertyValue("padding-top"))+parseInt(m.getPropertyValue("padding-bottom"))),v=u-(parseInt(m.getPropertyValue("padding-right"))+parseInt(m.getPropertyValue("padding-left")))-d;return{cols:Math.max(2,Math.floor(v/_.css.cell.width)),rows:Math.max(1,Math.floor(f/_.css.cell.height))}}}})(),t})())})(No);var cs=No.exports;function Ql(r){let e,t;return{c(){e=ve("img"),_n(e.src,t="https://media.discordapp.net/attachments/243005537342586880/1209607571162406922/49f226612149af8cfe8a7a07218ed8b9-3925355693.jpg?ex=65e789d6&is=65d514d6&hm=4ec018c1e438554573dd1202104b42a1777db19fe773680423a3bc88fbc66f54&=&format=webp&width=750&height=663")||fe(e,"src",t),fe(e,"alt","YOU DIDNT SAY THE MAGIC WORD!"),fe(e,"class","svelte-q6tgof")},m(i,l){Ae(i,e,l)},p:Ue,d(i){i&&Re(e)}}}function ec(r){let e,t,i;return t=new fr({props:{height:"100%",_class:"cmd-container",inset:!1,$$slots:{default:[Ql]},$$scope:{ctx:r}}}),{c(){e=ve("div"),Be(t.$$.fragment),fe(e,"class","magicword svelte-q6tgof")},m(l,_){Ae(l,e,_),Le(t,e,null),i=!0},p(l,_){const d={};_&4&&(d.$$scope={dirty:_,ctx:l}),t.$set(d)},i(l){i||(we(t.$$.fragment,l),i=!0)},o(l){Ce(t.$$.fragment,l),i=!1},d(l){l&&Re(e),De(t)}}}function tc(r){let e,t;return e=new lt({props:{name:r[1],index:r[0],$$slots:{default:[ec]},$$scope:{ctx:r}}}),{c(){Be(e.$$.fragment)},m(i,l){Le(e,i,l),t=!0},p(i,[l]){const _={};l&2&&(_.name=i[1]),l&1&&(_.index=i[0]),l&4&&(_.$$scope={dirty:l,ctx:i}),e.$set(_)},i(i){t||(we(e.$$.fragment,i),t=!0)},o(i){Ce(e.$$.fragment,i),t=!1},d(i){De(e,i)}}}function rc(r,e,t){let{index:i}=e,{name:l}=e;return r.$$set=_=>{"index"in _&&t(0,i=_.index),"name"in _&&t(1,l=_.name)},[i,l]}class ic extends Ze{constructor(e){super(),Je(this,e,rc,tc,Xe,{index:0,name:1})}}var Sn={exports:{}},$t={},Ct={};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.constants=void 0;Ct.constants={O_RDONLY:0,O_WRONLY:1,O_RDWR:2,S_IFMT:61440,S_IFREG:32768,S_IFDIR:16384,S_IFCHR:8192,S_IFBLK:24576,S_IFIFO:4096,S_IFLNK:40960,S_IFSOCK:49152,O_CREAT:64,O_EXCL:128,O_NOCTTY:256,O_TRUNC:512,O_APPEND:1024,O_DIRECTORY:65536,O_NOATIME:262144,O_NOFOLLOW:131072,O_SYNC:1052672,O_SYMLINK:2097152,O_DIRECT:16384,O_NONBLOCK:2048,S_IRWXU:448,S_IRUSR:256,S_IWUSR:128,S_IXUSR:64,S_IRWXG:56,S_IRGRP:32,S_IWGRP:16,S_IXGRP:8,S_IRWXO:7,S_IROTH:4,S_IWOTH:2,S_IXOTH:1,F_OK:0,R_OK:4,W_OK:2,X_OK:1,UV_FS_SYMLINK_DIR:1,UV_FS_SYMLINK_JUNCTION:2,UV_FS_COPYFILE_EXCL:1,UV_FS_COPYFILE_FICLONE:2,UV_FS_COPYFILE_FICLONE_FORCE:4,COPYFILE_EXCL:1,COPYFILE_FICLONE:2,COPYFILE_FICLONE_FORCE:4};Object.defineProperty($t,"__esModule",{value:!0});$t.Stats=void 0;const nc=Ct,{S_IFMT:sc,S_IFDIR:oc,S_IFREG:ac,S_IFBLK:lc,S_IFCHR:cc,S_IFLNK:hc,S_IFIFO:uc,S_IFSOCK:fc}=nc.constants;class ii{static build(e,t=!1){const i=new ii,{uid:l,gid:_,atime:d,mtime:n,ctime:o}=e,u=t?f=>BigInt(f):f=>f;i.uid=u(l),i.gid=u(_),i.rdev=u(0),i.blksize=u(4096),i.ino=u(e.ino),i.size=u(e.getSize()),i.blocks=u(1),i.atime=d,i.mtime=n,i.ctime=o,i.birthtime=o,i.atimeMs=u(d.getTime()),i.mtimeMs=u(n.getTime());const m=u(o.getTime());if(i.ctimeMs=m,i.birthtimeMs=m,t){i.atimeNs=BigInt(d.getTime())*BigInt(1e6),i.mtimeNs=BigInt(n.getTime())*BigInt(1e6);const f=BigInt(o.getTime())*BigInt(1e6);i.ctimeNs=f,i.birthtimeNs=f}return i.dev=u(0),i.mode=u(e.mode),i.nlink=u(e.nlink),i}_checkModeProperty(e){return(Number(this.mode)&sc)===e}isDirectory(){return this._checkModeProperty(oc)}isFile(){return this._checkModeProperty(ac)}isBlockDevice(){return this._checkModeProperty(lc)}isCharacterDevice(){return this._checkModeProperty(cc)}isSymbolicLink(){return this._checkModeProperty(hc)}isFIFO(){return this._checkModeProperty(uc)}isSocket(){return this._checkModeProperty(fc)}}$t.Stats=ii;$t.default=ii;var dr={},Cr={},cr={},_r={};(function(r){Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var e={},t={};t.byteLength=m,t.toByteArray=v,t.fromByteArray=w;for(var i=[],l=[],_=typeof Uint8Array<"u"?Uint8Array:Array,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=d.length;n<o;++n)i[n]=d[n],l[d.charCodeAt(n)]=n;l[45]=62,l[95]=63;function u(a){var h=a.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=a.indexOf("=");p===-1&&(p=h);var g=p===h?0:4-p%4;return[p,g]}function m(a){var h=u(a),p=h[0],g=h[1];return(p+g)*3/4-g}function f(a,h,p){return(h+p)*3/4-p}function v(a){var h,p=u(a),g=p[0],E=p[1],k=new _(f(a,g,E)),b=0,O=E>0?g-4:g,M;for(M=0;M<O;M+=4)h=l[a.charCodeAt(M)]<<18|l[a.charCodeAt(M+1)]<<12|l[a.charCodeAt(M+2)]<<6|l[a.charCodeAt(M+3)],k[b++]=h>>16&255,k[b++]=h>>8&255,k[b++]=h&255;return E===2&&(h=l[a.charCodeAt(M)]<<2|l[a.charCodeAt(M+1)]>>4,k[b++]=h&255),E===1&&(h=l[a.charCodeAt(M)]<<10|l[a.charCodeAt(M+1)]<<4|l[a.charCodeAt(M+2)]>>2,k[b++]=h>>8&255,k[b++]=h&255),k}function C(a){return i[a>>18&63]+i[a>>12&63]+i[a>>6&63]+i[a&63]}function S(a,h,p){for(var g,E=[],k=h;k<p;k+=3)g=(a[k]<<16&16711680)+(a[k+1]<<8&65280)+(a[k+2]&255),E.push(C(g));return E.join("")}function w(a){for(var h,p=a.length,g=p%3,E=[],k=16383,b=0,O=p-g;b<O;b+=k)E.push(S(a,b,b+k>O?O:b+k));return g===1?(h=a[p-1],E.push(i[h>>2]+i[h<<4&63]+"==")):g===2&&(h=(a[p-2]<<8)+a[p-1],E.push(i[h>>10]+i[h>>4&63]+i[h<<2&63]+"=")),E.join("")}var c={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */c.read=function(a,h,p,g,E){var k,b,O=E*8-g-1,M=(1<<O)-1,$=M>>1,L=-7,q=p?E-1:0,Z=p?-1:1,re=a[h+q];for(q+=Z,k=re&(1<<-L)-1,re>>=-L,L+=O;L>0;k=k*256+a[h+q],q+=Z,L-=8);for(b=k&(1<<-L)-1,k>>=-L,L+=g;L>0;b=b*256+a[h+q],q+=Z,L-=8);if(k===0)k=1-$;else{if(k===M)return b?NaN:(re?-1:1)*(1/0);b=b+Math.pow(2,g),k=k-$}return(re?-1:1)*b*Math.pow(2,k-g)},c.write=function(a,h,p,g,E,k){var b,O,M,$=k*8-E-1,L=(1<<$)-1,q=L>>1,Z=E===23?Math.pow(2,-24)-Math.pow(2,-77):0,re=g?0:k-1,ie=g?1:-1,ne=h<0||h===0&&1/h<0?1:0;for(h=Math.abs(h),isNaN(h)||h===1/0?(O=isNaN(h)?1:0,b=L):(b=Math.floor(Math.log(h)/Math.LN2),h*(M=Math.pow(2,-b))<1&&(b--,M*=2),b+q>=1?h+=Z/M:h+=Z*Math.pow(2,1-q),h*M>=2&&(b++,M/=2),b+q>=L?(O=0,b=L):b+q>=1?(O=(h*M-1)*Math.pow(2,E),b=b+q):(O=h*Math.pow(2,q-1)*Math.pow(2,E),b=0));E>=8;a[p+re]=O&255,re+=ie,O/=256,E-=8);for(b=b<<E|O,$+=E;$>0;a[p+re]=b&255,re+=ie,b/=256,$-=8);a[p+re-ie]|=ne*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(a){const h=t,p=c,g=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=L,a.SlowBuffer=H,a.INSPECT_MAX_BYTES=50;const E=2147483647;a.kMaxLength=E;const{Uint8Array:k,ArrayBuffer:b,SharedArrayBuffer:O}=globalThis;L.TYPED_ARRAY_SUPPORT=M(),!L.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function M(){try{const N=new k(1),R={foo:function(){return 42}};return Object.setPrototypeOf(R,k.prototype),Object.setPrototypeOf(N,R),N.foo()===42}catch{return!1}}Object.defineProperty(L.prototype,"parent",{enumerable:!0,get:function(){if(L.isBuffer(this))return this.buffer}}),Object.defineProperty(L.prototype,"offset",{enumerable:!0,get:function(){if(L.isBuffer(this))return this.byteOffset}});function $(N){if(N>E)throw new RangeError('The value "'+N+'" is invalid for option "size"');const R=new k(N);return Object.setPrototypeOf(R,L.prototype),R}function L(N,R,T){if(typeof N=="number"){if(typeof R=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return ie(N)}return q(N,R,T)}L.poolSize=8192;function q(N,R,T){if(typeof N=="string")return ne(N,R);if(b.isView(N))return F(N);if(N==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N);if(gt(N,b)||N&&gt(N.buffer,b)||typeof O<"u"&&(gt(N,O)||N&&gt(N.buffer,O)))return P(N,R,T);if(typeof N=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=N.valueOf&&N.valueOf();if(W!=null&&W!==N)return L.from(W,R,T);const J=U(N);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof N[Symbol.toPrimitive]=="function")return L.from(N[Symbol.toPrimitive]("string"),R,T);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof N)}L.from=function(N,R,T){return q(N,R,T)},Object.setPrototypeOf(L.prototype,k.prototype),Object.setPrototypeOf(L,k);function Z(N){if(typeof N!="number")throw new TypeError('"size" argument must be of type number');if(N<0)throw new RangeError('The value "'+N+'" is invalid for option "size"')}function re(N,R,T){return Z(N),N<=0?$(N):R!==void 0?typeof T=="string"?$(N).fill(R,T):$(N).fill(R):$(N)}L.alloc=function(N,R,T){return re(N,R,T)};function ie(N){return Z(N),$(N<0?0:G(N)|0)}L.allocUnsafe=function(N){return ie(N)},L.allocUnsafeSlow=function(N){return ie(N)};function ne(N,R){if((typeof R!="string"||R==="")&&(R="utf8"),!L.isEncoding(R))throw new TypeError("Unknown encoding: "+R);const T=K(N,R)|0;let W=$(T);const J=W.write(N,R);return J!==T&&(W=W.slice(0,J)),W}function x(N){const R=N.length<0?0:G(N.length)|0,T=$(R);for(let W=0;W<R;W+=1)T[W]=N[W]&255;return T}function F(N){if(gt(N,k)){const R=new k(N);return P(R.buffer,R.byteOffset,R.byteLength)}return x(N)}function P(N,R,T){if(R<0||N.byteLength<R)throw new RangeError('"offset" is outside of buffer bounds');if(N.byteLength<R+(T||0))throw new RangeError('"length" is outside of buffer bounds');let W;return R===void 0&&T===void 0?W=new k(N):T===void 0?W=new k(N,R):W=new k(N,R,T),Object.setPrototypeOf(W,L.prototype),W}function U(N){if(L.isBuffer(N)){const R=G(N.length)|0,T=$(R);return T.length===0||N.copy(T,0,0,R),T}if(N.length!==void 0)return typeof N.length!="number"||yi(N.length)?$(0):x(N);if(N.type==="Buffer"&&Array.isArray(N.data))return x(N.data)}function G(N){if(N>=E)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+E.toString(16)+" bytes");return N|0}function H(N){return+N!=N&&(N=0),L.alloc(+N)}L.isBuffer=function(R){return R!=null&&R._isBuffer===!0&&R!==L.prototype},L.compare=function(R,T){if(gt(R,k)&&(R=L.from(R,R.offset,R.byteLength)),gt(T,k)&&(T=L.from(T,T.offset,T.byteLength)),!L.isBuffer(R)||!L.isBuffer(T))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(R===T)return 0;let W=R.length,J=T.length;for(let se=0,ae=Math.min(W,J);se<ae;++se)if(R[se]!==T[se]){W=R[se],J=T[se];break}return W<J?-1:J<W?1:0},L.isEncoding=function(R){switch(String(R).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},L.concat=function(R,T){if(!Array.isArray(R))throw new TypeError('"list" argument must be an Array of Buffers');if(R.length===0)return L.alloc(0);let W;if(T===void 0)for(T=0,W=0;W<R.length;++W)T+=R[W].length;const J=L.allocUnsafe(T);let se=0;for(W=0;W<R.length;++W){let ae=R[W];if(gt(ae,k))se+ae.length>J.length?(L.isBuffer(ae)||(ae=L.from(ae)),ae.copy(J,se)):k.prototype.set.call(J,ae,se);else if(L.isBuffer(ae))ae.copy(J,se);else throw new TypeError('"list" argument must be an Array of Buffers');se+=ae.length}return J};function K(N,R){if(L.isBuffer(N))return N.length;if(b.isView(N)||gt(N,b))return N.byteLength;if(typeof N!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof N);const T=N.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&T===0)return 0;let J=!1;for(;;)switch(R){case"ascii":case"latin1":case"binary":return T;case"utf8":case"utf-8":return st(N).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T*2;case"hex":return T>>>1;case"base64":return Xn(N).length;default:if(J)return W?-1:st(N).length;R=(""+R).toLowerCase(),J=!0}}L.byteLength=K;function Y(N,R,T){let W=!1;if((R===void 0||R<0)&&(R=0),R>this.length||((T===void 0||T>this.length)&&(T=this.length),T<=0)||(T>>>=0,R>>>=0,T<=R))return"";for(N||(N="utf8");;)switch(N){case"hex":return Fe(this,R,T);case"utf8":case"utf-8":return le(this,R,T);case"ascii":return ge(this,R,T);case"latin1":case"binary":return oe(this,R,T);case"base64":return ee(this,R,T);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return He(this,R,T);default:if(W)throw new TypeError("Unknown encoding: "+N);N=(N+"").toLowerCase(),W=!0}}L.prototype._isBuffer=!0;function z(N,R,T){const W=N[R];N[R]=N[T],N[T]=W}L.prototype.swap16=function(){const R=this.length;if(R%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let T=0;T<R;T+=2)z(this,T,T+1);return this},L.prototype.swap32=function(){const R=this.length;if(R%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let T=0;T<R;T+=4)z(this,T,T+3),z(this,T+1,T+2);return this},L.prototype.swap64=function(){const R=this.length;if(R%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let T=0;T<R;T+=8)z(this,T,T+7),z(this,T+1,T+6),z(this,T+2,T+5),z(this,T+3,T+4);return this},L.prototype.toString=function(){const R=this.length;return R===0?"":arguments.length===0?le(this,0,R):Y.apply(this,arguments)},L.prototype.toLocaleString=L.prototype.toString,L.prototype.equals=function(R){if(!L.isBuffer(R))throw new TypeError("Argument must be a Buffer");return this===R?!0:L.compare(this,R)===0},L.prototype.inspect=function(){let R="";const T=a.INSPECT_MAX_BYTES;return R=this.toString("hex",0,T).replace(/(.{2})/g,"$1 ").trim(),this.length>T&&(R+=" ... "),"<Buffer "+R+">"},g&&(L.prototype[g]=L.prototype.inspect),L.prototype.compare=function(R,T,W,J,se){if(gt(R,k)&&(R=L.from(R,R.offset,R.byteLength)),!L.isBuffer(R))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof R);if(T===void 0&&(T=0),W===void 0&&(W=R?R.length:0),J===void 0&&(J=0),se===void 0&&(se=this.length),T<0||W>R.length||J<0||se>this.length)throw new RangeError("out of range index");if(J>=se&&T>=W)return 0;if(J>=se)return-1;if(T>=W)return 1;if(T>>>=0,W>>>=0,J>>>=0,se>>>=0,this===R)return 0;let ae=se-J,ke=W-T;const ze=Math.min(ae,ke),$e=this.slice(J,se),Ve=R.slice(T,W);for(let je=0;je<ze;++je)if($e[je]!==Ve[je]){ae=$e[je],ke=Ve[je];break}return ae<ke?-1:ke<ae?1:0};function y(N,R,T,W,J){if(N.length===0)return-1;if(typeof T=="string"?(W=T,T=0):T>2147483647?T=2147483647:T<-2147483648&&(T=-2147483648),T=+T,yi(T)&&(T=J?0:N.length-1),T<0&&(T=N.length+T),T>=N.length){if(J)return-1;T=N.length-1}else if(T<0)if(J)T=0;else return-1;if(typeof R=="string"&&(R=L.from(R,W)),L.isBuffer(R))return R.length===0?-1:A(N,R,T,W,J);if(typeof R=="number")return R=R&255,typeof k.prototype.indexOf=="function"?J?k.prototype.indexOf.call(N,R,T):k.prototype.lastIndexOf.call(N,R,T):A(N,[R],T,W,J);throw new TypeError("val must be string, number or Buffer")}function A(N,R,T,W,J){let se=1,ae=N.length,ke=R.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(N.length<2||R.length<2)return-1;se=2,ae/=2,ke/=2,T/=2}function ze(Ve,je){return se===1?Ve[je]:Ve.readUInt16BE(je*se)}let $e;if(J){let Ve=-1;for($e=T;$e<ae;$e++)if(ze(N,$e)===ze(R,Ve===-1?0:$e-Ve)){if(Ve===-1&&(Ve=$e),$e-Ve+1===ke)return Ve*se}else Ve!==-1&&($e-=$e-Ve),Ve=-1}else for(T+ke>ae&&(T=ae-ke),$e=T;$e>=0;$e--){let Ve=!0;for(let je=0;je<ke;je++)if(ze(N,$e+je)!==ze(R,je)){Ve=!1;break}if(Ve)return $e}return-1}L.prototype.includes=function(R,T,W){return this.indexOf(R,T,W)!==-1},L.prototype.indexOf=function(R,T,W){return y(this,R,T,W,!0)},L.prototype.lastIndexOf=function(R,T,W){return y(this,R,T,W,!1)};function I(N,R,T,W){T=Number(T)||0;const J=N.length-T;W?(W=Number(W),W>J&&(W=J)):W=J;const se=R.length;W>se/2&&(W=se/2);let ae;for(ae=0;ae<W;++ae){const ke=parseInt(R.substr(ae*2,2),16);if(yi(ke))return ae;N[T+ae]=ke}return ae}function j(N,R,T,W){return Lr(st(R,N.length-T),N,T,W)}function D(N,R,T,W){return Lr(Mt(R),N,T,W)}function B(N,R,T,W){return Lr(Xn(R),N,T,W)}function V(N,R,T,W){return Lr(Ka(R,N.length-T),N,T,W)}L.prototype.write=function(R,T,W,J){if(T===void 0)J="utf8",W=this.length,T=0;else if(W===void 0&&typeof T=="string")J=T,W=this.length,T=0;else if(isFinite(T))T=T>>>0,isFinite(W)?(W=W>>>0,J===void 0&&(J="utf8")):(J=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const se=this.length-T;if((W===void 0||W>se)&&(W=se),R.length>0&&(W<0||T<0)||T>this.length)throw new RangeError("Attempt to write outside buffer bounds");J||(J="utf8");let ae=!1;for(;;)switch(J){case"hex":return I(this,R,T,W);case"utf8":case"utf-8":return j(this,R,T,W);case"ascii":case"latin1":case"binary":return D(this,R,T,W);case"base64":return B(this,R,T,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,R,T,W);default:if(ae)throw new TypeError("Unknown encoding: "+J);J=(""+J).toLowerCase(),ae=!0}},L.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ee(N,R,T){return R===0&&T===N.length?h.fromByteArray(N):h.fromByteArray(N.slice(R,T))}function le(N,R,T){T=Math.min(N.length,T);const W=[];let J=R;for(;J<T;){const se=N[J];let ae=null,ke=se>239?4:se>223?3:se>191?2:1;if(J+ke<=T){let ze,$e,Ve,je;switch(ke){case 1:se<128&&(ae=se);break;case 2:ze=N[J+1],(ze&192)===128&&(je=(se&31)<<6|ze&63,je>127&&(ae=je));break;case 3:ze=N[J+1],$e=N[J+2],(ze&192)===128&&($e&192)===128&&(je=(se&15)<<12|(ze&63)<<6|$e&63,je>2047&&(je<55296||je>57343)&&(ae=je));break;case 4:ze=N[J+1],$e=N[J+2],Ve=N[J+3],(ze&192)===128&&($e&192)===128&&(Ve&192)===128&&(je=(se&15)<<18|(ze&63)<<12|($e&63)<<6|Ve&63,je>65535&&je<1114112&&(ae=je))}}ae===null?(ae=65533,ke=1):ae>65535&&(ae-=65536,W.push(ae>>>10&1023|55296),ae=56320|ae&1023),W.push(ae),J+=ke}return ce(W)}const ue=4096;function ce(N){const R=N.length;if(R<=ue)return String.fromCharCode.apply(String,N);let T="",W=0;for(;W<R;)T+=String.fromCharCode.apply(String,N.slice(W,W+=ue));return T}function ge(N,R,T){let W="";T=Math.min(N.length,T);for(let J=R;J<T;++J)W+=String.fromCharCode(N[J]&127);return W}function oe(N,R,T){let W="";T=Math.min(N.length,T);for(let J=R;J<T;++J)W+=String.fromCharCode(N[J]);return W}function Fe(N,R,T){const W=N.length;(!R||R<0)&&(R=0),(!T||T<0||T>W)&&(T=W);let J="";for(let se=R;se<T;++se)J+=Ga[N[se]];return J}function He(N,R,T){const W=N.slice(R,T);let J="";for(let se=0;se<W.length-1;se+=2)J+=String.fromCharCode(W[se]+W[se+1]*256);return J}L.prototype.slice=function(R,T){const W=this.length;R=~~R,T=T===void 0?W:~~T,R<0?(R+=W,R<0&&(R=0)):R>W&&(R=W),T<0?(T+=W,T<0&&(T=0)):T>W&&(T=W),T<R&&(T=R);const J=this.subarray(R,T);return Object.setPrototypeOf(J,L.prototype),J};function Oe(N,R,T){if(N%1!==0||N<0)throw new RangeError("offset is not uint");if(N+R>T)throw new RangeError("Trying to access beyond buffer length")}L.prototype.readUintLE=L.prototype.readUIntLE=function(R,T,W){R=R>>>0,T=T>>>0,W||Oe(R,T,this.length);let J=this[R],se=1,ae=0;for(;++ae<T&&(se*=256);)J+=this[R+ae]*se;return J},L.prototype.readUintBE=L.prototype.readUIntBE=function(R,T,W){R=R>>>0,T=T>>>0,W||Oe(R,T,this.length);let J=this[R+--T],se=1;for(;T>0&&(se*=256);)J+=this[R+--T]*se;return J},L.prototype.readUint8=L.prototype.readUInt8=function(R,T){return R=R>>>0,T||Oe(R,1,this.length),this[R]},L.prototype.readUint16LE=L.prototype.readUInt16LE=function(R,T){return R=R>>>0,T||Oe(R,2,this.length),this[R]|this[R+1]<<8},L.prototype.readUint16BE=L.prototype.readUInt16BE=function(R,T){return R=R>>>0,T||Oe(R,2,this.length),this[R]<<8|this[R+1]},L.prototype.readUint32LE=L.prototype.readUInt32LE=function(R,T){return R=R>>>0,T||Oe(R,4,this.length),(this[R]|this[R+1]<<8|this[R+2]<<16)+this[R+3]*16777216},L.prototype.readUint32BE=L.prototype.readUInt32BE=function(R,T){return R=R>>>0,T||Oe(R,4,this.length),this[R]*16777216+(this[R+1]<<16|this[R+2]<<8|this[R+3])},L.prototype.readBigUInt64LE=Ot(function(R){R=R>>>0,qe(R,"offset");const T=this[R],W=this[R+7];(T===void 0||W===void 0)&&dt(R,this.length-8);const J=T+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24,se=this[++R]+this[++R]*2**8+this[++R]*2**16+W*2**24;return BigInt(J)+(BigInt(se)<<BigInt(32))}),L.prototype.readBigUInt64BE=Ot(function(R){R=R>>>0,qe(R,"offset");const T=this[R],W=this[R+7];(T===void 0||W===void 0)&&dt(R,this.length-8);const J=T*2**24+this[++R]*2**16+this[++R]*2**8+this[++R],se=this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+W;return(BigInt(J)<<BigInt(32))+BigInt(se)}),L.prototype.readIntLE=function(R,T,W){R=R>>>0,T=T>>>0,W||Oe(R,T,this.length);let J=this[R],se=1,ae=0;for(;++ae<T&&(se*=256);)J+=this[R+ae]*se;return se*=128,J>=se&&(J-=Math.pow(2,8*T)),J},L.prototype.readIntBE=function(R,T,W){R=R>>>0,T=T>>>0,W||Oe(R,T,this.length);let J=T,se=1,ae=this[R+--J];for(;J>0&&(se*=256);)ae+=this[R+--J]*se;return se*=128,ae>=se&&(ae-=Math.pow(2,8*T)),ae},L.prototype.readInt8=function(R,T){return R=R>>>0,T||Oe(R,1,this.length),this[R]&128?(255-this[R]+1)*-1:this[R]},L.prototype.readInt16LE=function(R,T){R=R>>>0,T||Oe(R,2,this.length);const W=this[R]|this[R+1]<<8;return W&32768?W|4294901760:W},L.prototype.readInt16BE=function(R,T){R=R>>>0,T||Oe(R,2,this.length);const W=this[R+1]|this[R]<<8;return W&32768?W|4294901760:W},L.prototype.readInt32LE=function(R,T){return R=R>>>0,T||Oe(R,4,this.length),this[R]|this[R+1]<<8|this[R+2]<<16|this[R+3]<<24},L.prototype.readInt32BE=function(R,T){return R=R>>>0,T||Oe(R,4,this.length),this[R]<<24|this[R+1]<<16|this[R+2]<<8|this[R+3]},L.prototype.readBigInt64LE=Ot(function(R){R=R>>>0,qe(R,"offset");const T=this[R],W=this[R+7];(T===void 0||W===void 0)&&dt(R,this.length-8);const J=this[R+4]+this[R+5]*2**8+this[R+6]*2**16+(W<<24);return(BigInt(J)<<BigInt(32))+BigInt(T+this[++R]*2**8+this[++R]*2**16+this[++R]*2**24)}),L.prototype.readBigInt64BE=Ot(function(R){R=R>>>0,qe(R,"offset");const T=this[R],W=this[R+7];(T===void 0||W===void 0)&&dt(R,this.length-8);const J=(T<<24)+this[++R]*2**16+this[++R]*2**8+this[++R];return(BigInt(J)<<BigInt(32))+BigInt(this[++R]*2**24+this[++R]*2**16+this[++R]*2**8+W)}),L.prototype.readFloatLE=function(R,T){return R=R>>>0,T||Oe(R,4,this.length),p.read(this,R,!0,23,4)},L.prototype.readFloatBE=function(R,T){return R=R>>>0,T||Oe(R,4,this.length),p.read(this,R,!1,23,4)},L.prototype.readDoubleLE=function(R,T){return R=R>>>0,T||Oe(R,8,this.length),p.read(this,R,!0,52,8)},L.prototype.readDoubleBE=function(R,T){return R=R>>>0,T||Oe(R,8,this.length),p.read(this,R,!1,52,8)};function Ee(N,R,T,W,J,se){if(!L.isBuffer(N))throw new TypeError('"buffer" argument must be a Buffer instance');if(R>J||R<se)throw new RangeError('"value" argument is out of bounds');if(T+W>N.length)throw new RangeError("Index out of range")}L.prototype.writeUintLE=L.prototype.writeUIntLE=function(R,T,W,J){if(R=+R,T=T>>>0,W=W>>>0,!J){const ke=Math.pow(2,8*W)-1;Ee(this,R,T,W,ke,0)}let se=1,ae=0;for(this[T]=R&255;++ae<W&&(se*=256);)this[T+ae]=R/se&255;return T+W},L.prototype.writeUintBE=L.prototype.writeUIntBE=function(R,T,W,J){if(R=+R,T=T>>>0,W=W>>>0,!J){const ke=Math.pow(2,8*W)-1;Ee(this,R,T,W,ke,0)}let se=W-1,ae=1;for(this[T+se]=R&255;--se>=0&&(ae*=256);)this[T+se]=R/ae&255;return T+W},L.prototype.writeUint8=L.prototype.writeUInt8=function(R,T,W){return R=+R,T=T>>>0,W||Ee(this,R,T,1,255,0),this[T]=R&255,T+1},L.prototype.writeUint16LE=L.prototype.writeUInt16LE=function(R,T,W){return R=+R,T=T>>>0,W||Ee(this,R,T,2,65535,0),this[T]=R&255,this[T+1]=R>>>8,T+2},L.prototype.writeUint16BE=L.prototype.writeUInt16BE=function(R,T,W){return R=+R,T=T>>>0,W||Ee(this,R,T,2,65535,0),this[T]=R>>>8,this[T+1]=R&255,T+2},L.prototype.writeUint32LE=L.prototype.writeUInt32LE=function(R,T,W){return R=+R,T=T>>>0,W||Ee(this,R,T,4,4294967295,0),this[T+3]=R>>>24,this[T+2]=R>>>16,this[T+1]=R>>>8,this[T]=R&255,T+4},L.prototype.writeUint32BE=L.prototype.writeUInt32BE=function(R,T,W){return R=+R,T=T>>>0,W||Ee(this,R,T,4,4294967295,0),this[T]=R>>>24,this[T+1]=R>>>16,this[T+2]=R>>>8,this[T+3]=R&255,T+4};function X(N,R,T,W,J){We(R,W,J,N,T,7);let se=Number(R&BigInt(4294967295));N[T++]=se,se=se>>8,N[T++]=se,se=se>>8,N[T++]=se,se=se>>8,N[T++]=se;let ae=Number(R>>BigInt(32)&BigInt(4294967295));return N[T++]=ae,ae=ae>>8,N[T++]=ae,ae=ae>>8,N[T++]=ae,ae=ae>>8,N[T++]=ae,T}function Q(N,R,T,W,J){We(R,W,J,N,T,7);let se=Number(R&BigInt(4294967295));N[T+7]=se,se=se>>8,N[T+6]=se,se=se>>8,N[T+5]=se,se=se>>8,N[T+4]=se;let ae=Number(R>>BigInt(32)&BigInt(4294967295));return N[T+3]=ae,ae=ae>>8,N[T+2]=ae,ae=ae>>8,N[T+1]=ae,ae=ae>>8,N[T]=ae,T+8}L.prototype.writeBigUInt64LE=Ot(function(R,T=0){return X(this,R,T,BigInt(0),BigInt("0xffffffffffffffff"))}),L.prototype.writeBigUInt64BE=Ot(function(R,T=0){return Q(this,R,T,BigInt(0),BigInt("0xffffffffffffffff"))}),L.prototype.writeIntLE=function(R,T,W,J){if(R=+R,T=T>>>0,!J){const ze=Math.pow(2,8*W-1);Ee(this,R,T,W,ze-1,-ze)}let se=0,ae=1,ke=0;for(this[T]=R&255;++se<W&&(ae*=256);)R<0&&ke===0&&this[T+se-1]!==0&&(ke=1),this[T+se]=(R/ae>>0)-ke&255;return T+W},L.prototype.writeIntBE=function(R,T,W,J){if(R=+R,T=T>>>0,!J){const ze=Math.pow(2,8*W-1);Ee(this,R,T,W,ze-1,-ze)}let se=W-1,ae=1,ke=0;for(this[T+se]=R&255;--se>=0&&(ae*=256);)R<0&&ke===0&&this[T+se+1]!==0&&(ke=1),this[T+se]=(R/ae>>0)-ke&255;return T+W},L.prototype.writeInt8=function(R,T,W){return R=+R,T=T>>>0,W||Ee(this,R,T,1,127,-128),R<0&&(R=255+R+1),this[T]=R&255,T+1},L.prototype.writeInt16LE=function(R,T,W){return R=+R,T=T>>>0,W||Ee(this,R,T,2,32767,-32768),this[T]=R&255,this[T+1]=R>>>8,T+2},L.prototype.writeInt16BE=function(R,T,W){return R=+R,T=T>>>0,W||Ee(this,R,T,2,32767,-32768),this[T]=R>>>8,this[T+1]=R&255,T+2},L.prototype.writeInt32LE=function(R,T,W){return R=+R,T=T>>>0,W||Ee(this,R,T,4,2147483647,-2147483648),this[T]=R&255,this[T+1]=R>>>8,this[T+2]=R>>>16,this[T+3]=R>>>24,T+4},L.prototype.writeInt32BE=function(R,T,W){return R=+R,T=T>>>0,W||Ee(this,R,T,4,2147483647,-2147483648),R<0&&(R=4294967295+R+1),this[T]=R>>>24,this[T+1]=R>>>16,this[T+2]=R>>>8,this[T+3]=R&255,T+4},L.prototype.writeBigInt64LE=Ot(function(R,T=0){return X(this,R,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),L.prototype.writeBigInt64BE=Ot(function(R,T=0){return Q(this,R,T,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function he(N,R,T,W,J,se){if(T+W>N.length)throw new RangeError("Index out of range");if(T<0)throw new RangeError("Index out of range")}function _e(N,R,T,W,J){return R=+R,T=T>>>0,J||he(N,R,T,4),p.write(N,R,T,W,23,4),T+4}L.prototype.writeFloatLE=function(R,T,W){return _e(this,R,T,!0,W)},L.prototype.writeFloatBE=function(R,T,W){return _e(this,R,T,!1,W)};function de(N,R,T,W,J){return R=+R,T=T>>>0,J||he(N,R,T,8),p.write(N,R,T,W,52,8),T+8}L.prototype.writeDoubleLE=function(R,T,W){return de(this,R,T,!0,W)},L.prototype.writeDoubleBE=function(R,T,W){return de(this,R,T,!1,W)},L.prototype.copy=function(R,T,W,J){if(!L.isBuffer(R))throw new TypeError("argument should be a Buffer");if(W||(W=0),!J&&J!==0&&(J=this.length),T>=R.length&&(T=R.length),T||(T=0),J>0&&J<W&&(J=W),J===W||R.length===0||this.length===0)return 0;if(T<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("sourceEnd out of bounds");J>this.length&&(J=this.length),R.length-T<J-W&&(J=R.length-T+W);const se=J-W;return this===R&&typeof k.prototype.copyWithin=="function"?this.copyWithin(T,W,J):k.prototype.set.call(R,this.subarray(W,J),T),se},L.prototype.fill=function(R,T,W,J){if(typeof R=="string"){if(typeof T=="string"?(J=T,T=0,W=this.length):typeof W=="string"&&(J=W,W=this.length),J!==void 0&&typeof J!="string")throw new TypeError("encoding must be a string");if(typeof J=="string"&&!L.isEncoding(J))throw new TypeError("Unknown encoding: "+J);if(R.length===1){const ae=R.charCodeAt(0);(J==="utf8"&&ae<128||J==="latin1")&&(R=ae)}}else typeof R=="number"?R=R&255:typeof R=="boolean"&&(R=Number(R));if(T<0||this.length<T||this.length<W)throw new RangeError("Out of range index");if(W<=T)return this;T=T>>>0,W=W===void 0?this.length:W>>>0,R||(R=0);let se;if(typeof R=="number")for(se=T;se<W;++se)this[se]=R;else{const ae=L.isBuffer(R)?R:L.from(R,J),ke=ae.length;if(ke===0)throw new TypeError('The value "'+R+'" is invalid for argument "value"');for(se=0;se<W-T;++se)this[se+T]=ae[se%ke]}return this};const Se={};function ye(N,R,T){Se[N]=class extends T{constructor(){super(),Object.defineProperty(this,"message",{value:R.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${N}]`,this.stack,delete this.name}get code(){return N}set code(J){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:J,writable:!0})}toString(){return`${this.name} [${N}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(N){return N?`${N} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(N,R){return`The "${N}" argument must be of type number. Received type ${typeof R}`},TypeError),ye("ERR_OUT_OF_RANGE",function(N,R,T){let W=`The value of "${N}" is out of range.`,J=T;return Number.isInteger(T)&&Math.abs(T)>2**32?J=Te(String(T)):typeof T=="bigint"&&(J=String(T),(T>BigInt(2)**BigInt(32)||T<-(BigInt(2)**BigInt(32)))&&(J=Te(J)),J+="n"),W+=` It must be ${R}. Received ${J}`,W},RangeError);function Te(N){let R="",T=N.length;const W=N[0]==="-"?1:0;for(;T>=W+4;T-=3)R=`_${N.slice(T-3,T)}${R}`;return`${N.slice(0,T)}${R}`}function me(N,R,T){qe(R,"offset"),(N[R]===void 0||N[R+T]===void 0)&&dt(R,N.length-(T+1))}function We(N,R,T,W,J,se){if(N>T||N<R){const ae=typeof R=="bigint"?"n":"";let ke;throw se>3?R===0||R===BigInt(0)?ke=`>= 0${ae} and < 2${ae} ** ${(se+1)*8}${ae}`:ke=`>= -(2${ae} ** ${(se+1)*8-1}${ae}) and < 2 ** ${(se+1)*8-1}${ae}`:ke=`>= ${R}${ae} and <= ${T}${ae}`,new Se.ERR_OUT_OF_RANGE("value",ke,N)}me(W,J,se)}function qe(N,R){if(typeof N!="number")throw new Se.ERR_INVALID_ARG_TYPE(R,"number",N)}function dt(N,R,T){throw Math.floor(N)!==N?(qe(N,T),new Se.ERR_OUT_OF_RANGE(T||"offset","an integer",N)):R<0?new Se.ERR_BUFFER_OUT_OF_BOUNDS:new Se.ERR_OUT_OF_RANGE(T||"offset",`>= ${T?1:0} and <= ${R}`,N)}const Tt=/[^+/0-9A-Za-z-_]/g;function xt(N){if(N=N.split("=")[0],N=N.trim().replace(Tt,""),N.length<2)return"";for(;N.length%4!==0;)N=N+"=";return N}function st(N,R){R=R||1/0;let T;const W=N.length;let J=null;const se=[];for(let ae=0;ae<W;++ae){if(T=N.charCodeAt(ae),T>55295&&T<57344){if(!J){if(T>56319){(R-=3)>-1&&se.push(239,191,189);continue}else if(ae+1===W){(R-=3)>-1&&se.push(239,191,189);continue}J=T;continue}if(T<56320){(R-=3)>-1&&se.push(239,191,189),J=T;continue}T=(J-55296<<10|T-56320)+65536}else J&&(R-=3)>-1&&se.push(239,191,189);if(J=null,T<128){if((R-=1)<0)break;se.push(T)}else if(T<2048){if((R-=2)<0)break;se.push(T>>6|192,T&63|128)}else if(T<65536){if((R-=3)<0)break;se.push(T>>12|224,T>>6&63|128,T&63|128)}else if(T<1114112){if((R-=4)<0)break;se.push(T>>18|240,T>>12&63|128,T>>6&63|128,T&63|128)}else throw new Error("Invalid code point")}return se}function Mt(N){const R=[];for(let T=0;T<N.length;++T)R.push(N.charCodeAt(T)&255);return R}function Ka(N,R){let T,W,J;const se=[];for(let ae=0;ae<N.length&&!((R-=2)<0);++ae)T=N.charCodeAt(ae),W=T>>8,J=T%256,se.push(J),se.push(W);return se}function Xn(N){return h.toByteArray(xt(N))}function Lr(N,R,T,W){let J;for(J=0;J<W&&!(J+T>=R.length||J>=N.length);++J)R[J+T]=N[J];return J}function gt(N,R){return N instanceof R||N!=null&&N.constructor!=null&&N.constructor.name!=null&&N.constructor.name===R.name}function yi(N){return N!==N}const Ga=function(){const N="0123456789abcdef",R=new Array(256);for(let T=0;T<16;++T){const W=T*16;for(let J=0;J<16;++J)R[W+J]=N[T]+N[J]}return R}();function Ot(N){return typeof BigInt>"u"?Ya:N}function Ya(){throw new Error("BigInt not supported")}})(e);const s=e.Buffer;r.Blob=e.Blob,r.BlobOptions=e.BlobOptions,r.Buffer=e.Buffer,r.File=e.File,r.FileOptions=e.FileOptions,r.INSPECT_MAX_BYTES=e.INSPECT_MAX_BYTES,r.SlowBuffer=e.SlowBuffer,r.TranscodeEncoding=e.TranscodeEncoding,r.atob=e.atob,r.btoa=e.btoa,r.constants=e.constants,r.default=s,r.isAscii=e.isAscii,r.isUtf8=e.isUtf8,r.kMaxLength=e.kMaxLength,r.kStringMaxLength=e.kStringMaxLength,r.resolveObjectURL=e.resolveObjectURL,r.transcode=e.transcode})(_r);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.bufferFrom=r.bufferAllocUnsafe=r.Buffer=void 0;const e=_r;Object.defineProperty(r,"Buffer",{enumerable:!0,get:function(){return e.Buffer}});function t(_,...d){return new e.Buffer(_,...d)}const i=e.Buffer.allocUnsafe||t;r.bufferAllocUnsafe=i;const l=e.Buffer.from||t;r.bufferFrom=l})(cr);var Mn={},Ci={},hs;function jo(){return hs||(hs=1,function(r){Object.defineProperties(r,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});function e(p){return p&&p.__esModule&&Object.prototype.hasOwnProperty.call(p,"default")?p.default:p}var t={exports:{}},i=t.exports={},l,_;function d(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?l=setTimeout:l=d}catch{l=d}try{typeof clearTimeout=="function"?_=clearTimeout:_=n}catch{_=n}})();function o(p){if(l===setTimeout)return setTimeout(p,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(p,0);try{return l(p,0)}catch{try{return l.call(null,p,0)}catch{return l.call(this,p,0)}}}function u(p){if(_===clearTimeout)return clearTimeout(p);if((_===n||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(p);try{return _(p)}catch{try{return _.call(null,p)}catch{return _.call(this,p)}}}var m=[],f=!1,v,C=-1;function S(){!f||!v||(f=!1,v.length?m=v.concat(m):C=-1,m.length&&w())}function w(){if(!f){var p=o(S);f=!0;for(var g=m.length;g;){for(v=m,m=[];++C<g;)v&&v[C].run();C=-1,g=m.length}v=null,f=!1,u(p)}}i.nextTick=function(p){var g=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)g[E-1]=arguments[E];m.push(new c(p,g)),m.length===1&&!f&&o(w)};function c(p,g){this.fun=p,this.array=g}c.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={};function s(){}i.on=s,i.addListener=s,i.once=s,i.off=s,i.removeListener=s,i.removeAllListeners=s,i.emit=s,i.prependListener=s,i.prependOnceListener=s,i.listeners=function(p){return[]},i.binding=function(p){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(p){throw new Error("process.chdir is not supported")},i.umask=function(){return 0};var a=t.exports;const h=e(a);r.default=h,r.process=h}(Ci)),Ci}var dc=jo();const be=xo(dc);var Ri={exports:{}},Ai={},bt={},Uo={},Fn=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),i=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(i)!=="[object Symbol]")return!1;var l=42;e[t]=l;for(t in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var _=Object.getOwnPropertySymbols(e);if(_.length!==1||_[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var d=Object.getOwnPropertyDescriptor(e,t);if(d.value!==l||d.enumerable!==!0)return!1}return!0},_c=Fn,Nn=function(){return _c()&&!!Symbol.toStringTag},pc=Error,gc=EvalError,mc=RangeError,vc=ReferenceError,Ho=SyntaxError,ni=TypeError,yc=URIError,us=typeof Symbol<"u"&&Symbol,bc=Fn,Sc=function(){return typeof us!="function"||typeof Symbol!="function"||typeof us("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:bc()},Ti={__proto__:null,foo:{}},wc=Object,Ec=function(){return{__proto__:Ti}.foo===Ti.foo&&!(Ti instanceof wc)},Cc="Function.prototype.bind called on incompatible ",Rc=Object.prototype.toString,Ac=Math.max,Tc="[object Function]",fs=function(e,t){for(var i=[],l=0;l<e.length;l+=1)i[l]=e[l];for(var _=0;_<t.length;_+=1)i[_+e.length]=t[_];return i},Oc=function(e,t){for(var i=[],l=t||0,_=0;l<e.length;l+=1,_+=1)i[_]=e[l];return i},kc=function(r,e){for(var t="",i=0;i<r.length;i+=1)t+=r[i],i+1<r.length&&(t+=e);return t},Lc=function(e){var t=this;if(typeof t!="function"||Rc.apply(t)!==Tc)throw new TypeError(Cc+t);for(var i=Oc(arguments,1),l,_=function(){if(this instanceof l){var m=t.apply(this,fs(i,arguments));return Object(m)===m?m:this}return t.apply(e,fs(i,arguments))},d=Ac(0,t.length-i.length),n=[],o=0;o<d;o++)n[o]="$"+o;if(l=Function("binder","return function ("+kc(n,",")+"){ return binder.apply(this,arguments); }")(_),t.prototype){var u=function(){};u.prototype=t.prototype,l.prototype=new u,u.prototype=null}return l},Dc=Lc,jn=Function.prototype.bind||Dc,Bc=Function.prototype.call,Ic=Object.prototype.hasOwnProperty,Pc=jn,xc=Pc.call(Bc,Ic),Ie,Mc=pc,Fc=gc,Nc=mc,jc=vc,hr=Ho,ir=ni,Uc=yc,$o=Function,Oi=function(r){try{return $o('"use strict"; return ('+r+").constructor;")()}catch{}},jt=Object.getOwnPropertyDescriptor;if(jt)try{jt({},"")}catch{jt=null}var ki=function(){throw new ir},Hc=jt?function(){try{return arguments.callee,ki}catch{try{return jt(arguments,"callee").get}catch{return ki}}}():ki,zt=Sc(),$c=Ec(),Qe=Object.getPrototypeOf||($c?function(r){return r.__proto__}:null),Qt={},Wc=typeof Uint8Array>"u"||!Qe?Ie:Qe(Uint8Array),Ut={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ie:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ie:ArrayBuffer,"%ArrayIteratorPrototype%":zt&&Qe?Qe([][Symbol.iterator]()):Ie,"%AsyncFromSyncIteratorPrototype%":Ie,"%AsyncFunction%":Qt,"%AsyncGenerator%":Qt,"%AsyncGeneratorFunction%":Qt,"%AsyncIteratorPrototype%":Qt,"%Atomics%":typeof Atomics>"u"?Ie:Atomics,"%BigInt%":typeof BigInt>"u"?Ie:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ie:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ie:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ie:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Mc,"%eval%":eval,"%EvalError%":Fc,"%Float32Array%":typeof Float32Array>"u"?Ie:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ie:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ie:FinalizationRegistry,"%Function%":$o,"%GeneratorFunction%":Qt,"%Int8Array%":typeof Int8Array>"u"?Ie:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ie:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ie:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":zt&&Qe?Qe(Qe([][Symbol.iterator]())):Ie,"%JSON%":typeof JSON=="object"?JSON:Ie,"%Map%":typeof Map>"u"?Ie:Map,"%MapIteratorPrototype%":typeof Map>"u"||!zt||!Qe?Ie:Qe(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ie:Promise,"%Proxy%":typeof Proxy>"u"?Ie:Proxy,"%RangeError%":Nc,"%ReferenceError%":jc,"%Reflect%":typeof Reflect>"u"?Ie:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ie:Set,"%SetIteratorPrototype%":typeof Set>"u"||!zt||!Qe?Ie:Qe(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ie:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":zt&&Qe?Qe(""[Symbol.iterator]()):Ie,"%Symbol%":zt?Symbol:Ie,"%SyntaxError%":hr,"%ThrowTypeError%":Hc,"%TypedArray%":Wc,"%TypeError%":ir,"%Uint8Array%":typeof Uint8Array>"u"?Ie:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ie:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ie:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ie:Uint32Array,"%URIError%":Uc,"%WeakMap%":typeof WeakMap>"u"?Ie:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ie:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ie:WeakSet};if(Qe)try{null.error}catch(r){var qc=Qe(Qe(r));Ut["%Error.prototype%"]=qc}var zc=function r(e){var t;if(e==="%AsyncFunction%")t=Oi("async function () {}");else if(e==="%GeneratorFunction%")t=Oi("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=Oi("async function* () {}");else if(e==="%AsyncGenerator%"){var i=r("%AsyncGeneratorFunction%");i&&(t=i.prototype)}else if(e==="%AsyncIteratorPrototype%"){var l=r("%AsyncGenerator%");l&&Qe&&(t=Qe(l.prototype))}return Ut[e]=t,t},ds={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Rr=jn,Xr=xc,Vc=Rr.call(Function.call,Array.prototype.concat),Kc=Rr.call(Function.apply,Array.prototype.splice),_s=Rr.call(Function.call,String.prototype.replace),Jr=Rr.call(Function.call,String.prototype.slice),Gc=Rr.call(Function.call,RegExp.prototype.exec),Yc=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Xc=/\\(\\)?/g,Jc=function(e){var t=Jr(e,0,1),i=Jr(e,-1);if(t==="%"&&i!=="%")throw new hr("invalid intrinsic syntax, expected closing `%`");if(i==="%"&&t!=="%")throw new hr("invalid intrinsic syntax, expected opening `%`");var l=[];return _s(e,Yc,function(_,d,n,o){l[l.length]=n?_s(o,Xc,"$1"):d||_}),l},Zc=function(e,t){var i=e,l;if(Xr(ds,i)&&(l=ds[i],i="%"+l[0]+"%"),Xr(Ut,i)){var _=Ut[i];if(_===Qt&&(_=zc(i)),typeof _>"u"&&!t)throw new ir("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:l,name:i,value:_}}throw new hr("intrinsic "+e+" does not exist!")},Ar=function(e,t){if(typeof e!="string"||e.length===0)throw new ir("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new ir('"allowMissing" argument must be a boolean');if(Gc(/^%?[^%]*%?$/,e)===null)throw new hr("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=Jc(e),l=i.length>0?i[0]:"",_=Zc("%"+l+"%",t),d=_.name,n=_.value,o=!1,u=_.alias;u&&(l=u[0],Kc(i,Vc([0,1],u)));for(var m=1,f=!0;m<i.length;m+=1){var v=i[m],C=Jr(v,0,1),S=Jr(v,-1);if((C==='"'||C==="'"||C==="`"||S==='"'||S==="'"||S==="`")&&C!==S)throw new hr("property names with quotes must have matching quotes");if((v==="constructor"||!f)&&(o=!0),l+="."+v,d="%"+l+"%",Xr(Ut,d))n=Ut[d];else if(n!=null){if(!(v in n)){if(!t)throw new ir("base intrinsic for "+e+" exists, but the property is not available.");return}if(jt&&m+1>=i.length){var w=jt(n,v);f=!!w,f&&"get"in w&&!("originalValue"in w.get)?n=w.get:n=n[v]}else f=Xr(n,v),n=n[v];f&&!o&&(Ut[d]=n)}}return n},Wo={exports:{}},Li,ps;function Un(){if(ps)return Li;ps=1;var r=Ar,e=r("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return Li=e,Li}var Qc=Ar,jr=Qc("%Object.getOwnPropertyDescriptor%",!0);if(jr)try{jr([],"length")}catch{jr=null}var Hn=jr,gs=Un(),eh=Ho,Vt=ni,ms=Hn,qo=function(e,t,i){if(!e||typeof e!="object"&&typeof e!="function")throw new Vt("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new Vt("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new Vt("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new Vt("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new Vt("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new Vt("`loose`, if provided, must be a boolean");var l=arguments.length>3?arguments[3]:null,_=arguments.length>4?arguments[4]:null,d=arguments.length>5?arguments[5]:null,n=arguments.length>6?arguments[6]:!1,o=!!ms&&ms(e,t);if(gs)gs(e,t,{configurable:d===null&&o?o.configurable:!d,enumerable:l===null&&o?o.enumerable:!l,value:i,writable:_===null&&o?o.writable:!_});else if(n||!l&&!_&&!d)e[t]=i;else throw new eh("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},wn=Un(),zo=function(){return!!wn};zo.hasArrayLengthDefineBug=function(){if(!wn)return null;try{return wn([],"length",{value:1}).length!==1}catch{return!0}};var Vo=zo,th=Ar,vs=qo,rh=Vo(),ys=Hn,bs=ni,ih=th("%Math.floor%"),nh=function(e,t){if(typeof e!="function")throw new bs("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||ih(t)!==t)throw new bs("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],l=!0,_=!0;if("length"in e&&ys){var d=ys(e,"length");d&&!d.configurable&&(l=!1),d&&!d.writable&&(_=!1)}return(l||_||!i)&&(rh?vs(e,"length",t,!0,!0):vs(e,"length",t)),e};(function(r){var e=jn,t=Ar,i=nh,l=ni,_=t("%Function.prototype.apply%"),d=t("%Function.prototype.call%"),n=t("%Reflect.apply%",!0)||e.call(d,_),o=Un(),u=t("%Math.max%");r.exports=function(v){if(typeof v!="function")throw new l("a function is required");var C=n(e,d,arguments);return i(C,1+u(0,v.length-(arguments.length-1)),!0)};var m=function(){return n(e,_,arguments)};o?o(r.exports,"apply",{value:m}):r.exports.apply=m})(Wo);var si=Wo.exports,Ko=Ar,Go=si,sh=Go(Ko("String.prototype.indexOf")),oi=function(e,t){var i=Ko(e,!!t);return typeof i=="function"&&sh(e,".prototype.")>-1?Go(i):i},oh=Nn(),ah=oi,En=ah("Object.prototype.toString"),ai=function(e){return oh&&e&&typeof e=="object"&&Symbol.toStringTag in e?!1:En(e)==="[object Arguments]"},Yo=function(e){return ai(e)?!0:e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&En(e)!=="[object Array]"&&En(e.callee)==="[object Function]"},lh=function(){return ai(arguments)}();ai.isLegacyArguments=Yo;var ch=lh?ai:Yo,hh=Object.prototype.toString,uh=Function.prototype.toString,fh=/^\s*(?:function)?\*/,Xo=Nn(),Di=Object.getPrototypeOf,dh=function(){if(!Xo)return!1;try{return Function("return function*() {}")()}catch{}},Bi,_h=function(e){if(typeof e!="function")return!1;if(fh.test(uh.call(e)))return!0;if(!Xo){var t=hh.call(e);return t==="[object GeneratorFunction]"}if(!Di)return!1;if(typeof Bi>"u"){var i=dh();Bi=i?Di(i):!1}return Di(e)===Bi},Jo=Function.prototype.toString,tr=typeof Reflect=="object"&&Reflect!==null&&Reflect.apply,Cn,Ur;if(typeof tr=="function"&&typeof Object.defineProperty=="function")try{Cn=Object.defineProperty({},"length",{get:function(){throw Ur}}),Ur={},tr(function(){throw 42},null,Cn)}catch(r){r!==Ur&&(tr=null)}else tr=null;var ph=/^\s*class\b/,Rn=function(e){try{var t=Jo.call(e);return ph.test(t)}catch{return!1}},Ii=function(e){try{return Rn(e)?!1:(Jo.call(e),!0)}catch{return!1}},Hr=Object.prototype.toString,gh="[object Object]",mh="[object Function]",vh="[object GeneratorFunction]",yh="[object HTMLAllCollection]",bh="[object HTML document.all class]",Sh="[object HTMLCollection]",wh=typeof Symbol=="function"&&!!Symbol.toStringTag,Eh=!(0 in[,]),An=function(){return!1};if(typeof document=="object"){var Ch=document.all;Hr.call(Ch)===Hr.call(document.all)&&(An=function(e){if((Eh||!e)&&(typeof e>"u"||typeof e=="object"))try{var t=Hr.call(e);return(t===yh||t===bh||t===Sh||t===gh)&&e("")==null}catch{}return!1})}var Rh=tr?function(e){if(An(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;try{tr(e,null,Cn)}catch(t){if(t!==Ur)return!1}return!Rn(e)&&Ii(e)}:function(e){if(An(e))return!0;if(!e||typeof e!="function"&&typeof e!="object")return!1;if(wh)return Ii(e);if(Rn(e))return!1;var t=Hr.call(e);return t!==mh&&t!==vh&&!/^\[object HTML/.test(t)?!1:Ii(e)},Ah=Rh,Th=Object.prototype.toString,Zo=Object.prototype.hasOwnProperty,Oh=function(e,t,i){for(var l=0,_=e.length;l<_;l++)Zo.call(e,l)&&(i==null?t(e[l],l,e):t.call(i,e[l],l,e))},kh=function(e,t,i){for(var l=0,_=e.length;l<_;l++)i==null?t(e.charAt(l),l,e):t.call(i,e.charAt(l),l,e)},Lh=function(e,t,i){for(var l in e)Zo.call(e,l)&&(i==null?t(e[l],l,e):t.call(i,e[l],l,e))},Dh=function(e,t,i){if(!Ah(t))throw new TypeError("iterator must be a function");var l;arguments.length>=3&&(l=i),Th.call(e)==="[object Array]"?Oh(e,t,l):typeof e=="string"?kh(e,t,l):Lh(e,t,l)},Bh=Dh,Ih=["Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"],Pi=Ih,Ph=typeof globalThis>"u"?rt:globalThis,xh=function(){for(var e=[],t=0;t<Pi.length;t++)typeof Ph[Pi[t]]=="function"&&(e[e.length]=Pi[t]);return e},Zr=Bh,Mh=xh,Ss=si,$n=oi,$r=Hn,Fh=$n("Object.prototype.toString"),Qo=Nn(),ws=typeof globalThis>"u"?rt:globalThis,Tn=Mh(),Wn=$n("String.prototype.slice"),xi=Object.getPrototypeOf,Nh=$n("Array.prototype.indexOf",!0)||function(e,t){for(var i=0;i<e.length;i+=1)if(e[i]===t)return i;return-1},Qr={__proto__:null};Qo&&$r&&xi?Zr(Tn,function(r){var e=new ws[r];if(Symbol.toStringTag in e){var t=xi(e),i=$r(t,Symbol.toStringTag);if(!i){var l=xi(t);i=$r(l,Symbol.toStringTag)}Qr["$"+r]=Ss(i.get)}}):Zr(Tn,function(r){var e=new ws[r],t=e.slice||e.set;t&&(Qr["$"+r]=Ss(t))});var jh=function(e){var t=!1;return Zr(Qr,function(i,l){if(!t)try{"$"+i(e)===l&&(t=Wn(l,1))}catch{}}),t},Uh=function(e){var t=!1;return Zr(Qr,function(i,l){if(!t)try{i(e),t=Wn(l,1)}catch{}}),t},ea=function(e){if(!e||typeof e!="object")return!1;if(!Qo){var t=Wn(Fh(e),8,-1);return Nh(Tn,t)>-1?t:t!=="Object"?!1:Uh(e)}return $r?jh(e):null},Hh=ea,$h=function(e){return!!Hh(e)};(function(r){var e=ch,t=_h,i=ea,l=$h;function _(oe){return oe.call.bind(oe)}var d=typeof BigInt<"u",n=typeof Symbol<"u",o=_(Object.prototype.toString),u=_(Number.prototype.valueOf),m=_(String.prototype.valueOf),f=_(Boolean.prototype.valueOf);if(d)var v=_(BigInt.prototype.valueOf);if(n)var C=_(Symbol.prototype.valueOf);function S(oe,Fe){if(typeof oe!="object")return!1;try{return Fe(oe),!0}catch{return!1}}r.isArgumentsObject=e,r.isGeneratorFunction=t,r.isTypedArray=l;function w(oe){return typeof Promise<"u"&&oe instanceof Promise||oe!==null&&typeof oe=="object"&&typeof oe.then=="function"&&typeof oe.catch=="function"}r.isPromise=w;function c(oe){return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?ArrayBuffer.isView(oe):l(oe)||H(oe)}r.isArrayBufferView=c;function s(oe){return i(oe)==="Uint8Array"}r.isUint8Array=s;function a(oe){return i(oe)==="Uint8ClampedArray"}r.isUint8ClampedArray=a;function h(oe){return i(oe)==="Uint16Array"}r.isUint16Array=h;function p(oe){return i(oe)==="Uint32Array"}r.isUint32Array=p;function g(oe){return i(oe)==="Int8Array"}r.isInt8Array=g;function E(oe){return i(oe)==="Int16Array"}r.isInt16Array=E;function k(oe){return i(oe)==="Int32Array"}r.isInt32Array=k;function b(oe){return i(oe)==="Float32Array"}r.isFloat32Array=b;function O(oe){return i(oe)==="Float64Array"}r.isFloat64Array=O;function M(oe){return i(oe)==="BigInt64Array"}r.isBigInt64Array=M;function $(oe){return i(oe)==="BigUint64Array"}r.isBigUint64Array=$;function L(oe){return o(oe)==="[object Map]"}L.working=typeof Map<"u"&&L(new Map);function q(oe){return typeof Map>"u"?!1:L.working?L(oe):oe instanceof Map}r.isMap=q;function Z(oe){return o(oe)==="[object Set]"}Z.working=typeof Set<"u"&&Z(new Set);function re(oe){return typeof Set>"u"?!1:Z.working?Z(oe):oe instanceof Set}r.isSet=re;function ie(oe){return o(oe)==="[object WeakMap]"}ie.working=typeof WeakMap<"u"&&ie(new WeakMap);function ne(oe){return typeof WeakMap>"u"?!1:ie.working?ie(oe):oe instanceof WeakMap}r.isWeakMap=ne;function x(oe){return o(oe)==="[object WeakSet]"}x.working=typeof WeakSet<"u"&&x(new WeakSet);function F(oe){return x(oe)}r.isWeakSet=F;function P(oe){return o(oe)==="[object ArrayBuffer]"}P.working=typeof ArrayBuffer<"u"&&P(new ArrayBuffer);function U(oe){return typeof ArrayBuffer>"u"?!1:P.working?P(oe):oe instanceof ArrayBuffer}r.isArrayBuffer=U;function G(oe){return o(oe)==="[object DataView]"}G.working=typeof ArrayBuffer<"u"&&typeof DataView<"u"&&G(new DataView(new ArrayBuffer(1),0,1));function H(oe){return typeof DataView>"u"?!1:G.working?G(oe):oe instanceof DataView}r.isDataView=H;var K=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:void 0;function Y(oe){return o(oe)==="[object SharedArrayBuffer]"}function z(oe){return typeof K>"u"?!1:(typeof Y.working>"u"&&(Y.working=Y(new K)),Y.working?Y(oe):oe instanceof K)}r.isSharedArrayBuffer=z;function y(oe){return o(oe)==="[object AsyncFunction]"}r.isAsyncFunction=y;function A(oe){return o(oe)==="[object Map Iterator]"}r.isMapIterator=A;function I(oe){return o(oe)==="[object Set Iterator]"}r.isSetIterator=I;function j(oe){return o(oe)==="[object Generator]"}r.isGeneratorObject=j;function D(oe){return o(oe)==="[object WebAssembly.Module]"}r.isWebAssemblyCompiledModule=D;function B(oe){return S(oe,u)}r.isNumberObject=B;function V(oe){return S(oe,m)}r.isStringObject=V;function ee(oe){return S(oe,f)}r.isBooleanObject=ee;function le(oe){return d&&S(oe,v)}r.isBigIntObject=le;function ue(oe){return n&&S(oe,C)}r.isSymbolObject=ue;function ce(oe){return B(oe)||V(oe)||ee(oe)||le(oe)||ue(oe)}r.isBoxedPrimitive=ce;function ge(oe){return typeof Uint8Array<"u"&&(U(oe)||z(oe))}r.isAnyArrayBuffer=ge,["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(oe){Object.defineProperty(r,oe,{enumerable:!1,value:function(){throw new Error(oe+" is not supported in userland")}})})})(Uo);var Wh=function(e){return e&&typeof e=="object"&&typeof e.copy=="function"&&typeof e.fill=="function"&&typeof e.readUInt8=="function"},On={exports:{}};typeof Object.create=="function"?On.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:On.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}};var Wt=On.exports;(function(r){var e={},t=Object.getOwnPropertyDescriptors||function(K){for(var Y=Object.keys(K),z={},y=0;y<Y.length;y++)z[Y[y]]=Object.getOwnPropertyDescriptor(K,Y[y]);return z},i=/%[sdj%]/g;r.format=function(H){if(!E(H)){for(var K=[],Y=0;Y<arguments.length;Y++)K.push(n(arguments[Y]));return K.join(" ")}for(var Y=1,z=arguments,y=z.length,A=String(H).replace(i,function(j){if(j==="%%")return"%";if(Y>=y)return j;switch(j){case"%s":return String(z[Y++]);case"%d":return Number(z[Y++]);case"%j":try{return JSON.stringify(z[Y++])}catch{return"[Circular]"}default:return j}}),I=z[Y];Y<y;I=z[++Y])h(I)||!M(I)?A+=" "+I:A+=" "+n(I);return A},r.deprecate=function(H,K){if(typeof be<"u"&&be.noDeprecation===!0)return H;if(typeof be>"u")return function(){return r.deprecate(H,K).apply(this,arguments)};var Y=!1;function z(){if(!Y){if(be.throwDeprecation)throw new Error(K);be.traceDeprecation?console.trace(K):console.error(K),Y=!0}return H.apply(this,arguments)}return z};var l={},_=/^$/;if(e.NODE_DEBUG){var d=e.NODE_DEBUG;d=d.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),_=new RegExp("^"+d+"$","i")}r.debuglog=function(H){if(H=H.toUpperCase(),!l[H])if(_.test(H)){var K=be.pid;l[H]=function(){var Y=r.format.apply(r,arguments);console.error("%s %d: %s",H,K,Y)}}else l[H]=function(){};return l[H]};function n(H,K){var Y={seen:[],stylize:u};return arguments.length>=3&&(Y.depth=arguments[2]),arguments.length>=4&&(Y.colors=arguments[3]),a(K)?Y.showHidden=K:K&&r._extend(Y,K),b(Y.showHidden)&&(Y.showHidden=!1),b(Y.depth)&&(Y.depth=2),b(Y.colors)&&(Y.colors=!1),b(Y.customInspect)&&(Y.customInspect=!0),Y.colors&&(Y.stylize=o),f(Y,H,Y.depth)}r.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function o(H,K){var Y=n.styles[K];return Y?"\x1B["+n.colors[Y][0]+"m"+H+"\x1B["+n.colors[Y][1]+"m":H}function u(H,K){return H}function m(H){var K={};return H.forEach(function(Y,z){K[Y]=!0}),K}function f(H,K,Y){if(H.customInspect&&K&&q(K.inspect)&&K.inspect!==r.inspect&&!(K.constructor&&K.constructor.prototype===K)){var z=K.inspect(Y,H);return E(z)||(z=f(H,z,Y)),z}var y=v(H,K);if(y)return y;var A=Object.keys(K),I=m(A);if(H.showHidden&&(A=Object.getOwnPropertyNames(K)),L(K)&&(A.indexOf("message")>=0||A.indexOf("description")>=0))return C(K);if(A.length===0){if(q(K)){var j=K.name?": "+K.name:"";return H.stylize("[Function"+j+"]","special")}if(O(K))return H.stylize(RegExp.prototype.toString.call(K),"regexp");if($(K))return H.stylize(Date.prototype.toString.call(K),"date");if(L(K))return C(K)}var D="",B=!1,V=["{","}"];if(s(K)&&(B=!0,V=["[","]"]),q(K)){var ee=K.name?": "+K.name:"";D=" [Function"+ee+"]"}if(O(K)&&(D=" "+RegExp.prototype.toString.call(K)),$(K)&&(D=" "+Date.prototype.toUTCString.call(K)),L(K)&&(D=" "+C(K)),A.length===0&&(!B||K.length==0))return V[0]+D+V[1];if(Y<0)return O(K)?H.stylize(RegExp.prototype.toString.call(K),"regexp"):H.stylize("[Object]","special");H.seen.push(K);var le;return B?le=S(H,K,Y,I,A):le=A.map(function(ue){return w(H,K,Y,I,ue,B)}),H.seen.pop(),c(le,D,V)}function v(H,K){if(b(K))return H.stylize("undefined","undefined");if(E(K)){var Y="'"+JSON.stringify(K).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return H.stylize(Y,"string")}if(g(K))return H.stylize(""+K,"number");if(a(K))return H.stylize(""+K,"boolean");if(h(K))return H.stylize("null","null")}function C(H){return"["+Error.prototype.toString.call(H)+"]"}function S(H,K,Y,z,y){for(var A=[],I=0,j=K.length;I<j;++I)F(K,String(I))?A.push(w(H,K,Y,z,String(I),!0)):A.push("");return y.forEach(function(D){D.match(/^\d+$/)||A.push(w(H,K,Y,z,D,!0))}),A}function w(H,K,Y,z,y,A){var I,j,D;if(D=Object.getOwnPropertyDescriptor(K,y)||{value:K[y]},D.get?D.set?j=H.stylize("[Getter/Setter]","special"):j=H.stylize("[Getter]","special"):D.set&&(j=H.stylize("[Setter]","special")),F(z,y)||(I="["+y+"]"),j||(H.seen.indexOf(D.value)<0?(h(Y)?j=f(H,D.value,null):j=f(H,D.value,Y-1),j.indexOf(`
`)>-1&&(A?j=j.split(`
`).map(function(B){return"  "+B}).join(`
`).slice(2):j=`
`+j.split(`
`).map(function(B){return"   "+B}).join(`
`))):j=H.stylize("[Circular]","special")),b(I)){if(A&&y.match(/^\d+$/))return j;I=JSON.stringify(""+y),I.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(I=I.slice(1,-1),I=H.stylize(I,"name")):(I=I.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),I=H.stylize(I,"string"))}return I+": "+j}function c(H,K,Y){var z=H.reduce(function(y,A){return A.indexOf(`
`)>=0,y+A.replace(/\u001b\[\d\d?m/g,"").length+1},0);return z>60?Y[0]+(K===""?"":K+`
 `)+" "+H.join(`,
  `)+" "+Y[1]:Y[0]+K+" "+H.join(", ")+" "+Y[1]}r.types=Uo;function s(H){return Array.isArray(H)}r.isArray=s;function a(H){return typeof H=="boolean"}r.isBoolean=a;function h(H){return H===null}r.isNull=h;function p(H){return H==null}r.isNullOrUndefined=p;function g(H){return typeof H=="number"}r.isNumber=g;function E(H){return typeof H=="string"}r.isString=E;function k(H){return typeof H=="symbol"}r.isSymbol=k;function b(H){return H===void 0}r.isUndefined=b;function O(H){return M(H)&&re(H)==="[object RegExp]"}r.isRegExp=O,r.types.isRegExp=O;function M(H){return typeof H=="object"&&H!==null}r.isObject=M;function $(H){return M(H)&&re(H)==="[object Date]"}r.isDate=$,r.types.isDate=$;function L(H){return M(H)&&(re(H)==="[object Error]"||H instanceof Error)}r.isError=L,r.types.isNativeError=L;function q(H){return typeof H=="function"}r.isFunction=q;function Z(H){return H===null||typeof H=="boolean"||typeof H=="number"||typeof H=="string"||typeof H=="symbol"||typeof H>"u"}r.isPrimitive=Z,r.isBuffer=Wh;function re(H){return Object.prototype.toString.call(H)}function ie(H){return H<10?"0"+H.toString(10):H.toString(10)}var ne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function x(){var H=new Date,K=[ie(H.getHours()),ie(H.getMinutes()),ie(H.getSeconds())].join(":");return[H.getDate(),ne[H.getMonth()],K].join(" ")}r.log=function(){console.log("%s - %s",x(),r.format.apply(r,arguments))},r.inherits=Wt,r._extend=function(H,K){if(!K||!M(K))return H;for(var Y=Object.keys(K),z=Y.length;z--;)H[Y[z]]=K[Y[z]];return H};function F(H,K){return Object.prototype.hasOwnProperty.call(H,K)}var P=typeof Symbol<"u"?Symbol("util.promisify.custom"):void 0;r.promisify=function(K){if(typeof K!="function")throw new TypeError('The "original" argument must be of type Function');if(P&&K[P]){var Y=K[P];if(typeof Y!="function")throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(Y,P,{value:Y,enumerable:!1,writable:!1,configurable:!0}),Y}function Y(){for(var z,y,A=new Promise(function(D,B){z=D,y=B}),I=[],j=0;j<arguments.length;j++)I.push(arguments[j]);I.push(function(D,B){D?y(D):z(B)});try{K.apply(this,I)}catch(D){y(D)}return A}return Object.setPrototypeOf(Y,Object.getPrototypeOf(K)),P&&Object.defineProperty(Y,P,{value:Y,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(Y,t(K))},r.promisify.custom=P;function U(H,K){if(!H){var Y=new Error("Promise was rejected with a falsy value");Y.reason=H,H=Y}return K(H)}function G(H){if(typeof H!="function")throw new TypeError('The "original" argument must be of type Function');function K(){for(var Y=[],z=0;z<arguments.length;z++)Y.push(arguments[z]);var y=Y.pop();if(typeof y!="function")throw new TypeError("The last argument must be of type Function");var A=this,I=function(){return y.apply(A,arguments)};H.apply(this,Y).then(function(j){be.nextTick(I.bind(null,null,j))},function(j){be.nextTick(U.bind(null,j,I))})}return Object.setPrototypeOf(K,Object.getPrototypeOf(H)),Object.defineProperties(K,t(H)),K}r.callbackify=G})(bt);var Es;function ta(){if(Es)return Ai;Es=1;function r(g){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},r(g)}function e(g,E){for(var k=0;k<E.length;k++){var b=E[k];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,i(b.key),b)}}function t(g,E,k){return E&&e(g.prototype,E),k&&e(g,k),Object.defineProperty(g,"prototype",{writable:!1}),g}function i(g){var E=l(g,"string");return r(E)==="symbol"?E:String(E)}function l(g,E){if(r(g)!=="object"||g===null)return g;var k=g[Symbol.toPrimitive];if(k!==void 0){var b=k.call(g,E||"default");if(r(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(E==="string"?String:Number)(g)}function _(g,E){if(!(g instanceof E))throw new TypeError("Cannot call a class as a function")}function d(g,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(E&&E.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),E&&n(g,E)}function n(g,E){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,O){return b.__proto__=O,b},n(g,E)}function o(g){var E=f();return function(){var b=v(g),O;if(E){var M=v(this).constructor;O=Reflect.construct(b,arguments,M)}else O=b.apply(this,arguments);return u(this,O)}}function u(g,E){if(E&&(r(E)==="object"||typeof E=="function"))return E;if(E!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m(g)}function m(g){if(g===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function f(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function v(g){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(k){return k.__proto__||Object.getPrototypeOf(k)},v(g)}var C={},S,w;function c(g,E,k){k||(k=Error);function b(M,$,L){return typeof E=="string"?E:E(M,$,L)}var O=function(M){d(L,M);var $=o(L);function L(q,Z,re){var ie;return _(this,L),ie=$.call(this,b(q,Z,re)),ie.code=g,ie}return t(L)}(k);C[g]=O}function s(g,E){if(Array.isArray(g)){var k=g.length;return g=g.map(function(b){return String(b)}),k>2?"one of ".concat(E," ").concat(g.slice(0,k-1).join(", "),", or ")+g[k-1]:k===2?"one of ".concat(E," ").concat(g[0]," or ").concat(g[1]):"of ".concat(E," ").concat(g[0])}else return"of ".concat(E," ").concat(String(g))}function a(g,E,k){return g.substr(!k||k<0?0:+k,E.length)===E}function h(g,E,k){return(k===void 0||k>g.length)&&(k=g.length),g.substring(k-E.length,k)===E}function p(g,E,k){return typeof k!="number"&&(k=0),k+E.length>g.length?!1:g.indexOf(E,k)!==-1}return c("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),c("ERR_INVALID_ARG_TYPE",function(g,E,k){S===void 0&&(S=kn()),S(typeof g=="string","'name' must be a string");var b;typeof E=="string"&&a(E,"not ")?(b="must not be",E=E.replace(/^not /,"")):b="must be";var O;if(h(g," argument"))O="The ".concat(g," ").concat(b," ").concat(s(E,"type"));else{var M=p(g,".")?"property":"argument";O='The "'.concat(g,'" ').concat(M," ").concat(b," ").concat(s(E,"type"))}return O+=". Received type ".concat(r(k)),O},TypeError),c("ERR_INVALID_ARG_VALUE",function(g,E){var k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"is invalid";w===void 0&&(w=bt);var b=w.inspect(E);return b.length>128&&(b="".concat(b.slice(0,128),"...")),"The argument '".concat(g,"' ").concat(k,". Received ").concat(b)},TypeError),c("ERR_INVALID_RETURN_VALUE",function(g,E,k){var b;return k&&k.constructor&&k.constructor.name?b="instance of ".concat(k.constructor.name):b="type ".concat(r(k)),"Expected ".concat(g,' to be returned from the "').concat(E,'"')+" function but got ".concat(b,".")},TypeError),c("ERR_MISSING_ARGS",function(){for(var g=arguments.length,E=new Array(g),k=0;k<g;k++)E[k]=arguments[k];S===void 0&&(S=kn()),S(E.length>0,"At least one arg needs to be specified");var b="The ",O=E.length;switch(E=E.map(function(M){return'"'.concat(M,'"')}),O){case 1:b+="".concat(E[0]," argument");break;case 2:b+="".concat(E[0]," and ").concat(E[1]," arguments");break;default:b+=E.slice(0,O-1).join(", "),b+=", and ".concat(E[O-1]," arguments");break}return"".concat(b," must be specified")},TypeError),Ai.codes=C,Ai}var Mi,Cs;function qh(){if(Cs)return Mi;Cs=1;function r(F,P){var U=Object.keys(F);if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(F);P&&(G=G.filter(function(H){return Object.getOwnPropertyDescriptor(F,H).enumerable})),U.push.apply(U,G)}return U}function e(F){for(var P=1;P<arguments.length;P++){var U=arguments[P]!=null?arguments[P]:{};P%2?r(Object(U),!0).forEach(function(G){t(F,G,U[G])}):Object.getOwnPropertyDescriptors?Object.defineProperties(F,Object.getOwnPropertyDescriptors(U)):r(Object(U)).forEach(function(G){Object.defineProperty(F,G,Object.getOwnPropertyDescriptor(U,G))})}return F}function t(F,P,U){return P=d(P),P in F?Object.defineProperty(F,P,{value:U,enumerable:!0,configurable:!0,writable:!0}):F[P]=U,F}function i(F,P){if(!(F instanceof P))throw new TypeError("Cannot call a class as a function")}function l(F,P){for(var U=0;U<P.length;U++){var G=P[U];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(F,d(G.key),G)}}function _(F,P,U){return P&&l(F.prototype,P),U&&l(F,U),Object.defineProperty(F,"prototype",{writable:!1}),F}function d(F){var P=n(F,"string");return a(P)==="symbol"?P:String(P)}function n(F,P){if(a(F)!=="object"||F===null)return F;var U=F[Symbol.toPrimitive];if(U!==void 0){var G=U.call(F,P||"default");if(a(G)!=="object")return G;throw new TypeError("@@toPrimitive must return a primitive value.")}return(P==="string"?String:Number)(F)}function o(F,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function");F.prototype=Object.create(P&&P.prototype,{constructor:{value:F,writable:!0,configurable:!0}}),Object.defineProperty(F,"prototype",{writable:!1}),P&&c(F,P)}function u(F){var P=S();return function(){var G=s(F),H;if(P){var K=s(this).constructor;H=Reflect.construct(G,arguments,K)}else H=G.apply(this,arguments);return m(this,H)}}function m(F,P){if(P&&(a(P)==="object"||typeof P=="function"))return P;if(P!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return f(F)}function f(F){if(F===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return F}function v(F){var P=typeof Map=="function"?new Map:void 0;return v=function(G){if(G===null||!w(G))return G;if(typeof G!="function")throw new TypeError("Super expression must either be null or a function");if(typeof P<"u"){if(P.has(G))return P.get(G);P.set(G,H)}function H(){return C(G,arguments,s(this).constructor)}return H.prototype=Object.create(G.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),c(H,G)},v(F)}function C(F,P,U){return S()?C=Reflect.construct.bind():C=function(H,K,Y){var z=[null];z.push.apply(z,K);var y=Function.bind.apply(H,z),A=new y;return Y&&c(A,Y.prototype),A},C.apply(null,arguments)}function S(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function w(F){return Function.toString.call(F).indexOf("[native code]")!==-1}function c(F,P){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,H){return G.__proto__=H,G},c(F,P)}function s(F){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(U){return U.__proto__||Object.getPrototypeOf(U)},s(F)}function a(F){"@babel/helpers - typeof";return a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},a(F)}var h=bt,p=h.inspect,g=ta(),E=g.codes.ERR_INVALID_ARG_TYPE;function k(F,P,U){return(U===void 0||U>F.length)&&(U=F.length),F.substring(U-P.length,U)===P}function b(F,P){if(P=Math.floor(P),F.length==0||P==0)return"";var U=F.length*P;for(P=Math.floor(Math.log(P)/Math.log(2));P;)F+=F,P--;return F+=F.substring(0,U-F.length),F}var O="",M="",$="",L="",q={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"},Z=10;function re(F){var P=Object.keys(F),U=Object.create(Object.getPrototypeOf(F));return P.forEach(function(G){U[G]=F[G]}),Object.defineProperty(U,"message",{value:F.message}),U}function ie(F){return p(F,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}function ne(F,P,U){var G="",H="",K=0,Y="",z=!1,y=ie(F),A=y.split(`
`),I=ie(P).split(`
`),j=0,D="";if(U==="strictEqual"&&a(F)==="object"&&a(P)==="object"&&F!==null&&P!==null&&(U="strictEqualObject"),A.length===1&&I.length===1&&A[0]!==I[0]){var B=A[0].length+I[0].length;if(B<=Z){if((a(F)!=="object"||F===null)&&(a(P)!=="object"||P===null)&&(F!==0||P!==0))return"".concat(q[U],`

`)+"".concat(A[0]," !== ").concat(I[0],`
`)}else if(U!=="strictEqualObject"){var V=be.stderr&&be.stderr.isTTY?be.stderr.columns:80;if(B<V){for(;A[0][j]===I[0][j];)j++;j>2&&(D=`
  `.concat(b(" ",j),"^"),j=0)}}}for(var ee=A[A.length-1],le=I[I.length-1];ee===le&&(j++<2?Y=`
  `.concat(ee).concat(Y):G=ee,A.pop(),I.pop(),!(A.length===0||I.length===0));)ee=A[A.length-1],le=I[I.length-1];var ue=Math.max(A.length,I.length);if(ue===0){var ce=y.split(`
`);if(ce.length>30)for(ce[26]="".concat(O,"...").concat(L);ce.length>27;)ce.pop();return"".concat(q.notIdentical,`

`).concat(ce.join(`
`),`
`)}j>3&&(Y=`
`.concat(O,"...").concat(L).concat(Y),z=!0),G!==""&&(Y=`
  `.concat(G).concat(Y),G="");var ge=0,oe=q[U]+`
`.concat(M,"+ actual").concat(L," ").concat($,"- expected").concat(L),Fe=" ".concat(O,"...").concat(L," Lines skipped");for(j=0;j<ue;j++){var He=j-K;if(A.length<j+1)He>1&&j>2&&(He>4?(H+=`
`.concat(O,"...").concat(L),z=!0):He>3&&(H+=`
  `.concat(I[j-2]),ge++),H+=`
  `.concat(I[j-1]),ge++),K=j,G+=`
`.concat($,"-").concat(L," ").concat(I[j]),ge++;else if(I.length<j+1)He>1&&j>2&&(He>4?(H+=`
`.concat(O,"...").concat(L),z=!0):He>3&&(H+=`
  `.concat(A[j-2]),ge++),H+=`
  `.concat(A[j-1]),ge++),K=j,H+=`
`.concat(M,"+").concat(L," ").concat(A[j]),ge++;else{var Oe=I[j],Ee=A[j],X=Ee!==Oe&&(!k(Ee,",")||Ee.slice(0,-1)!==Oe);X&&k(Oe,",")&&Oe.slice(0,-1)===Ee&&(X=!1,Ee+=","),X?(He>1&&j>2&&(He>4?(H+=`
`.concat(O,"...").concat(L),z=!0):He>3&&(H+=`
  `.concat(A[j-2]),ge++),H+=`
  `.concat(A[j-1]),ge++),K=j,H+=`
`.concat(M,"+").concat(L," ").concat(Ee),G+=`
`.concat($,"-").concat(L," ").concat(Oe),ge+=2):(H+=G,G="",(He===1||j===0)&&(H+=`
  `.concat(Ee),ge++))}if(ge>20&&j<ue-2)return"".concat(oe).concat(Fe,`
`).concat(H,`
`).concat(O,"...").concat(L).concat(G,`
`)+"".concat(O,"...").concat(L)}return"".concat(oe).concat(z?Fe:"",`
`).concat(H).concat(G).concat(Y).concat(D)}var x=function(F,P){o(G,F);var U=u(G);function G(H){var K;if(i(this,G),a(H)!=="object"||H===null)throw new E("options","Object",H);var Y=H.message,z=H.operator,y=H.stackStartFn,A=H.actual,I=H.expected,j=Error.stackTraceLimit;if(Error.stackTraceLimit=0,Y!=null)K=U.call(this,String(Y));else if(be.stderr&&be.stderr.isTTY&&(be.stderr&&be.stderr.getColorDepth&&be.stderr.getColorDepth()!==1?(O="\x1B[34m",M="\x1B[32m",L="\x1B[39m",$="\x1B[31m"):(O="",M="",L="",$="")),a(A)==="object"&&A!==null&&a(I)==="object"&&I!==null&&"stack"in A&&A instanceof Error&&"stack"in I&&I instanceof Error&&(A=re(A),I=re(I)),z==="deepStrictEqual"||z==="strictEqual")K=U.call(this,ne(A,I,z));else if(z==="notDeepStrictEqual"||z==="notStrictEqual"){var D=q[z],B=ie(A).split(`
`);if(z==="notStrictEqual"&&a(A)==="object"&&A!==null&&(D=q.notStrictEqualObject),B.length>30)for(B[26]="".concat(O,"...").concat(L);B.length>27;)B.pop();B.length===1?K=U.call(this,"".concat(D," ").concat(B[0])):K=U.call(this,"".concat(D,`

`).concat(B.join(`
`),`
`))}else{var V=ie(A),ee="",le=q[z];z==="notDeepEqual"||z==="notEqual"?(V="".concat(q[z],`

`).concat(V),V.length>1024&&(V="".concat(V.slice(0,1021),"..."))):(ee="".concat(ie(I)),V.length>512&&(V="".concat(V.slice(0,509),"...")),ee.length>512&&(ee="".concat(ee.slice(0,509),"...")),z==="deepEqual"||z==="equal"?V="".concat(le,`

`).concat(V,`

should equal

`):ee=" ".concat(z," ").concat(ee)),K=U.call(this,"".concat(V).concat(ee))}return Error.stackTraceLimit=j,K.generatedMessage=!Y,Object.defineProperty(f(K),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),K.code="ERR_ASSERTION",K.actual=A,K.expected=I,K.operator=z,Error.captureStackTrace&&Error.captureStackTrace(f(K),y),K.stack,K.name="AssertionError",m(K)}return _(G,[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:P,value:function(K,Y){return p(this,e(e({},Y),{},{customInspect:!1,depth:0}))}}]),G}(v(Error),p.custom);return Mi=x,Mi}var Rs=Object.prototype.toString,ra=function(e){var t=Rs.call(e),i=t==="[object Arguments]";return i||(i=t!=="[object Array]"&&e!==null&&typeof e=="object"&&typeof e.length=="number"&&e.length>=0&&Rs.call(e.callee)==="[object Function]"),i},Fi,As;function zh(){if(As)return Fi;As=1;var r;if(!Object.keys){var e=Object.prototype.hasOwnProperty,t=Object.prototype.toString,i=ra,l=Object.prototype.propertyIsEnumerable,_=!l.call({toString:null},"toString"),d=l.call(function(){},"prototype"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=function(v){var C=v.constructor;return C&&C.prototype===v},u={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},m=function(){if(typeof window>"u")return!1;for(var v in window)try{if(!u["$"+v]&&e.call(window,v)&&window[v]!==null&&typeof window[v]=="object")try{o(window[v])}catch{return!0}}catch{return!0}return!1}(),f=function(v){if(typeof window>"u"||!m)return o(v);try{return o(v)}catch{return!1}};r=function(C){var S=C!==null&&typeof C=="object",w=t.call(C)==="[object Function]",c=i(C),s=S&&t.call(C)==="[object String]",a=[];if(!S&&!w&&!c)throw new TypeError("Object.keys called on a non-object");var h=d&&w;if(s&&C.length>0&&!e.call(C,0))for(var p=0;p<C.length;++p)a.push(String(p));if(c&&C.length>0)for(var g=0;g<C.length;++g)a.push(String(g));else for(var E in C)!(h&&E==="prototype")&&e.call(C,E)&&a.push(String(E));if(_)for(var k=f(C),b=0;b<n.length;++b)!(k&&n[b]==="constructor")&&e.call(C,n[b])&&a.push(n[b]);return a}}return Fi=r,Fi}var Vh=Array.prototype.slice,Kh=ra,Ts=Object.keys,Wr=Ts?function(e){return Ts(e)}:zh(),Os=Object.keys;Wr.shim=function(){if(Object.keys){var e=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);e||(Object.keys=function(i){return Kh(i)?Os(Vh.call(i)):Os(i)})}else Object.keys=Wr;return Object.keys||Wr};var ia=Wr,Gh=ia,na=Fn(),sa=oi,ks=Object,Yh=sa("Array.prototype.push"),Ls=sa("Object.prototype.propertyIsEnumerable"),Xh=na?Object.getOwnPropertySymbols:null,Jh=function(e,t){if(e==null)throw new TypeError("target must be an object");var i=ks(e);if(arguments.length===1)return i;for(var l=1;l<arguments.length;++l){var _=ks(arguments[l]),d=Gh(_),n=na&&(Object.getOwnPropertySymbols||Xh);if(n)for(var o=n(_),u=0;u<o.length;++u){var m=o[u];Ls(_,m)&&Yh(d,m)}for(var f=0;f<d.length;++f){var v=d[f];if(Ls(_,v)){var C=_[v];i[v]=C}}}return i},Ni=Jh,Zh=function(){if(!Object.assign)return!1;for(var r="abcdefghijklmnopqrst",e=r.split(""),t={},i=0;i<e.length;++i)t[e[i]]=e[i];var l=Object.assign({},t),_="";for(var d in l)_+=d;return r!==_},Qh=function(){if(!Object.assign||!Object.preventExtensions)return!1;var r=Object.preventExtensions({1:2});try{Object.assign(r,"xy")}catch{return r[1]==="y"}return!1},eu=function(){return!Object.assign||Zh()||Qh()?Ni:Object.assign},Ds=function(r){return r!==r},oa=function(e,t){return e===0&&t===0?1/e===1/t:!!(e===t||Ds(e)&&Ds(t))},tu=oa,qn=function(){return typeof Object.is=="function"?Object.is:tu},ji,Bs;function li(){if(Bs)return ji;Bs=1;var r=ia,e=typeof Symbol=="function"&&typeof Symbol("foo")=="symbol",t=Object.prototype.toString,i=Array.prototype.concat,l=qo,_=function(u){return typeof u=="function"&&t.call(u)==="[object Function]"},d=Vo(),n=function(u,m,f,v){if(m in u){if(v===!0){if(u[m]===f)return}else if(!_(v)||!v())return}d?l(u,m,f,!0):l(u,m,f)},o=function(u,m){var f=arguments.length>2?arguments[2]:{},v=r(m);e&&(v=i.call(v,Object.getOwnPropertySymbols(m)));for(var C=0;C<v.length;C+=1)n(u,v[C],m[v[C]],f[v[C]])};return o.supportsDescriptors=!!d,ji=o,ji}var Ui,Is;function ru(){if(Is)return Ui;Is=1;var r=qn,e=li();return Ui=function(){var i=r();return e(Object,{is:i},{is:function(){return Object.is!==i}}),i},Ui}var Hi,Ps;function iu(){if(Ps)return Hi;Ps=1;var r=li(),e=si,t=oa,i=qn,l=ru(),_=e(i(),Object);return r(_,{getPolyfill:i,implementation:t,shim:l}),Hi=_,Hi}var $i,xs;function aa(){return xs||(xs=1,$i=function(e){return e!==e}),$i}var Wi,Ms;function la(){if(Ms)return Wi;Ms=1;var r=aa();return Wi=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r},Wi}var qi,Fs;function nu(){if(Fs)return qi;Fs=1;var r=li(),e=la();return qi=function(){var i=e();return r(Number,{isNaN:i},{isNaN:function(){return Number.isNaN!==i}}),i},qi}var zi,Ns;function su(){if(Ns)return zi;Ns=1;var r=si,e=li(),t=aa(),i=la(),l=nu(),_=r(i(),Number);return e(_,{getPolyfill:i,implementation:t,shim:l}),zi=_,zi}var Vi,js;function ou(){if(js)return Vi;js=1;function r(X,Q){return _(X)||l(X,Q)||t(X,Q)||e()}function e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t(X,Q){if(X){if(typeof X=="string")return i(X,Q);var he=Object.prototype.toString.call(X).slice(8,-1);if(he==="Object"&&X.constructor&&(he=X.constructor.name),he==="Map"||he==="Set")return Array.from(X);if(he==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(he))return i(X,Q)}}function i(X,Q){(Q==null||Q>X.length)&&(Q=X.length);for(var he=0,_e=new Array(Q);he<Q;he++)_e[he]=X[he];return _e}function l(X,Q){var he=X==null?null:typeof Symbol<"u"&&X[Symbol.iterator]||X["@@iterator"];if(he!=null){var _e,de,Se,ye,Te=[],me=!0,We=!1;try{if(Se=(he=he.call(X)).next,Q===0){if(Object(he)!==he)return;me=!1}else for(;!(me=(_e=Se.call(he)).done)&&(Te.push(_e.value),Te.length!==Q);me=!0);}catch(qe){We=!0,de=qe}finally{try{if(!me&&he.return!=null&&(ye=he.return(),Object(ye)!==ye))return}finally{if(We)throw de}}return Te}}function _(X){if(Array.isArray(X))return X}function d(X){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Q){return typeof Q}:function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},d(X)}var n=/a/g.flags!==void 0,o=function(Q){var he=[];return Q.forEach(function(_e){return he.push(_e)}),he},u=function(Q){var he=[];return Q.forEach(function(_e,de){return he.push([de,_e])}),he},m=Object.is?Object.is:iu(),f=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},v=Number.isNaN?Number.isNaN:su();function C(X){return X.call.bind(X)}var S=C(Object.prototype.hasOwnProperty),w=C(Object.prototype.propertyIsEnumerable),c=C(Object.prototype.toString),s=bt.types,a=s.isAnyArrayBuffer,h=s.isArrayBufferView,p=s.isDate,g=s.isMap,E=s.isRegExp,k=s.isSet,b=s.isNativeError,O=s.isBoxedPrimitive,M=s.isNumberObject,$=s.isStringObject,L=s.isBooleanObject,q=s.isBigIntObject,Z=s.isSymbolObject,re=s.isFloat32Array,ie=s.isFloat64Array;function ne(X){if(X.length===0||X.length>10)return!0;for(var Q=0;Q<X.length;Q++){var he=X.charCodeAt(Q);if(he<48||he>57)return!0}return X.length===10&&X>=Math.pow(2,32)}function x(X){return Object.keys(X).filter(ne).concat(f(X).filter(Object.prototype.propertyIsEnumerable.bind(X)))}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function F(X,Q){if(X===Q)return 0;for(var he=X.length,_e=Q.length,de=0,Se=Math.min(he,_e);de<Se;++de)if(X[de]!==Q[de]){he=X[de],_e=Q[de];break}return he<_e?-1:_e<he?1:0}var P=!0,U=!1,G=0,H=1,K=2,Y=3;function z(X,Q){return n?X.source===Q.source&&X.flags===Q.flags:RegExp.prototype.toString.call(X)===RegExp.prototype.toString.call(Q)}function y(X,Q){if(X.byteLength!==Q.byteLength)return!1;for(var he=0;he<X.byteLength;he++)if(X[he]!==Q[he])return!1;return!0}function A(X,Q){return X.byteLength!==Q.byteLength?!1:F(new Uint8Array(X.buffer,X.byteOffset,X.byteLength),new Uint8Array(Q.buffer,Q.byteOffset,Q.byteLength))===0}function I(X,Q){return X.byteLength===Q.byteLength&&F(new Uint8Array(X),new Uint8Array(Q))===0}function j(X,Q){return M(X)?M(Q)&&m(Number.prototype.valueOf.call(X),Number.prototype.valueOf.call(Q)):$(X)?$(Q)&&String.prototype.valueOf.call(X)===String.prototype.valueOf.call(Q):L(X)?L(Q)&&Boolean.prototype.valueOf.call(X)===Boolean.prototype.valueOf.call(Q):q(X)?q(Q)&&BigInt.prototype.valueOf.call(X)===BigInt.prototype.valueOf.call(Q):Z(Q)&&Symbol.prototype.valueOf.call(X)===Symbol.prototype.valueOf.call(Q)}function D(X,Q,he,_e){if(X===Q)return X!==0?!0:he?m(X,Q):!0;if(he){if(d(X)!=="object")return typeof X=="number"&&v(X)&&v(Q);if(d(Q)!=="object"||X===null||Q===null||Object.getPrototypeOf(X)!==Object.getPrototypeOf(Q))return!1}else{if(X===null||d(X)!=="object")return Q===null||d(Q)!=="object"?X==Q:!1;if(Q===null||d(Q)!=="object")return!1}var de=c(X),Se=c(Q);if(de!==Se)return!1;if(Array.isArray(X)){if(X.length!==Q.length)return!1;var ye=x(X),Te=x(Q);return ye.length!==Te.length?!1:V(X,Q,he,_e,H,ye)}if(de==="[object Object]"&&(!g(X)&&g(Q)||!k(X)&&k(Q)))return!1;if(p(X)){if(!p(Q)||Date.prototype.getTime.call(X)!==Date.prototype.getTime.call(Q))return!1}else if(E(X)){if(!E(Q)||!z(X,Q))return!1}else if(b(X)||X instanceof Error){if(X.message!==Q.message||X.name!==Q.name)return!1}else if(h(X)){if(!he&&(re(X)||ie(X))){if(!y(X,Q))return!1}else if(!A(X,Q))return!1;var me=x(X),We=x(Q);return me.length!==We.length?!1:V(X,Q,he,_e,G,me)}else{if(k(X))return!k(Q)||X.size!==Q.size?!1:V(X,Q,he,_e,K);if(g(X))return!g(Q)||X.size!==Q.size?!1:V(X,Q,he,_e,Y);if(a(X)){if(!I(X,Q))return!1}else if(O(X)&&!j(X,Q))return!1}return V(X,Q,he,_e,G)}function B(X,Q){return Q.filter(function(he){return w(X,he)})}function V(X,Q,he,_e,de,Se){if(arguments.length===5){Se=Object.keys(X);var ye=Object.keys(Q);if(Se.length!==ye.length)return!1}for(var Te=0;Te<Se.length;Te++)if(!S(Q,Se[Te]))return!1;if(he&&arguments.length===5){var me=f(X);if(me.length!==0){var We=0;for(Te=0;Te<me.length;Te++){var qe=me[Te];if(w(X,qe)){if(!w(Q,qe))return!1;Se.push(qe),We++}else if(w(Q,qe))return!1}var dt=f(Q);if(me.length!==dt.length&&B(Q,dt).length!==We)return!1}else{var Tt=f(Q);if(Tt.length!==0&&B(Q,Tt).length!==0)return!1}}if(Se.length===0&&(de===G||de===H&&X.length===0||X.size===0))return!0;if(_e===void 0)_e={val1:new Map,val2:new Map,position:0};else{var xt=_e.val1.get(X);if(xt!==void 0){var st=_e.val2.get(Q);if(st!==void 0)return xt===st}_e.position++}_e.val1.set(X,_e.position),_e.val2.set(Q,_e.position);var Mt=He(X,Q,he,Se,_e,de);return _e.val1.delete(X),_e.val2.delete(Q),Mt}function ee(X,Q,he,_e){for(var de=o(X),Se=0;Se<de.length;Se++){var ye=de[Se];if(D(Q,ye,he,_e))return X.delete(ye),!0}return!1}function le(X){switch(d(X)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":X=+X;case"number":if(v(X))return!1}return!0}function ue(X,Q,he){var _e=le(he);return _e??(Q.has(_e)&&!X.has(_e))}function ce(X,Q,he,_e,de){var Se=le(he);if(Se!=null)return Se;var ye=Q.get(Se);return ye===void 0&&!Q.has(Se)||!D(_e,ye,!1,de)?!1:!X.has(Se)&&D(_e,ye,!1,de)}function ge(X,Q,he,_e){for(var de=null,Se=o(X),ye=0;ye<Se.length;ye++){var Te=Se[ye];if(d(Te)==="object"&&Te!==null)de===null&&(de=new Set),de.add(Te);else if(!Q.has(Te)){if(he||!ue(X,Q,Te))return!1;de===null&&(de=new Set),de.add(Te)}}if(de!==null){for(var me=o(Q),We=0;We<me.length;We++){var qe=me[We];if(d(qe)==="object"&&qe!==null){if(!ee(de,qe,he,_e))return!1}else if(!he&&!X.has(qe)&&!ee(de,qe,he,_e))return!1}return de.size===0}return!0}function oe(X,Q,he,_e,de,Se){for(var ye=o(X),Te=0;Te<ye.length;Te++){var me=ye[Te];if(D(he,me,de,Se)&&D(_e,Q.get(me),de,Se))return X.delete(me),!0}return!1}function Fe(X,Q,he,_e){for(var de=null,Se=u(X),ye=0;ye<Se.length;ye++){var Te=r(Se[ye],2),me=Te[0],We=Te[1];if(d(me)==="object"&&me!==null)de===null&&(de=new Set),de.add(me);else{var qe=Q.get(me);if(qe===void 0&&!Q.has(me)||!D(We,qe,he,_e)){if(he||!ce(X,Q,me,We,_e))return!1;de===null&&(de=new Set),de.add(me)}}}if(de!==null){for(var dt=u(Q),Tt=0;Tt<dt.length;Tt++){var xt=r(dt[Tt],2),st=xt[0],Mt=xt[1];if(d(st)==="object"&&st!==null){if(!oe(de,X,st,Mt,he,_e))return!1}else if(!he&&(!X.has(st)||!D(X.get(st),Mt,!1,_e))&&!oe(de,X,st,Mt,!1,_e))return!1}return de.size===0}return!0}function He(X,Q,he,_e,de,Se){var ye=0;if(Se===K){if(!ge(X,Q,he,de))return!1}else if(Se===Y){if(!Fe(X,Q,he,de))return!1}else if(Se===H)for(;ye<X.length;ye++)if(S(X,ye)){if(!S(Q,ye)||!D(X[ye],Q[ye],he,de))return!1}else{if(S(Q,ye))return!1;for(var Te=Object.keys(X);ye<Te.length;ye++){var me=Te[ye];if(!S(Q,me)||!D(X[me],Q[me],he,de))return!1}return Te.length===Object.keys(Q).length}for(ye=0;ye<_e.length;ye++){var We=_e[ye];if(!D(X[We],Q[We],he,de))return!1}return!0}function Oe(X,Q){return D(X,Q,U)}function Ee(X,Q){return D(X,Q,P)}return Vi={isDeepEqual:Oe,isDeepStrictEqual:Ee},Vi}var Us;function kn(){if(Us)return Ri.exports;Us=1;function r(y){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(A){return typeof A}:function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},r(y)}function e(y,A){for(var I=0;I<A.length;I++){var j=A[I];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(y,i(j.key),j)}}function t(y,A,I){return A&&e(y.prototype,A),I&&e(y,I),Object.defineProperty(y,"prototype",{writable:!1}),y}function i(y){var A=l(y,"string");return r(A)==="symbol"?A:String(A)}function l(y,A){if(r(y)!=="object"||y===null)return y;var I=y[Symbol.toPrimitive];if(I!==void 0){var j=I.call(y,A||"default");if(r(j)!=="object")return j;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(y)}function _(y,A){if(!(y instanceof A))throw new TypeError("Cannot call a class as a function")}var d=ta(),n=d.codes,o=n.ERR_AMBIGUOUS_ARGUMENT,u=n.ERR_INVALID_ARG_TYPE,m=n.ERR_INVALID_ARG_VALUE,f=n.ERR_INVALID_RETURN_VALUE,v=n.ERR_MISSING_ARGS,C=qh(),S=bt,w=S.inspect,c=bt.types,s=c.isPromise,a=c.isRegExp,h=eu(),p=qn(),g=oi("RegExp.prototype.test"),E,k;function b(){var y=ou();E=y.isDeepEqual,k=y.isDeepStrictEqual}var O=!1,M=Ri.exports=re,$={};function L(y){throw y.message instanceof Error?y.message:new C(y)}function q(y,A,I,j,D){var B=arguments.length,V;if(B===0)V="Failed";else if(B===1)I=y,y=void 0;else{if(O===!1){O=!0;var ee=be.emitWarning?be.emitWarning:console.warn.bind(console);ee("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}B===2&&(j="!=")}if(I instanceof Error)throw I;var le={actual:y,expected:A,operator:j===void 0?"fail":j,stackStartFn:D||q};I!==void 0&&(le.message=I);var ue=new C(le);throw V&&(ue.message=V,ue.generatedMessage=!0),ue}M.fail=q,M.AssertionError=C;function Z(y,A,I,j){if(!I){var D=!1;if(A===0)D=!0,j="No value argument passed to `assert.ok()`";else if(j instanceof Error)throw j;var B=new C({actual:I,expected:!0,message:j,operator:"==",stackStartFn:y});throw B.generatedMessage=D,B}}function re(){for(var y=arguments.length,A=new Array(y),I=0;I<y;I++)A[I]=arguments[I];Z.apply(void 0,[re,A.length].concat(A))}M.ok=re,M.equal=function y(A,I,j){if(arguments.length<2)throw new v("actual","expected");A!=I&&L({actual:A,expected:I,message:j,operator:"==",stackStartFn:y})},M.notEqual=function y(A,I,j){if(arguments.length<2)throw new v("actual","expected");A==I&&L({actual:A,expected:I,message:j,operator:"!=",stackStartFn:y})},M.deepEqual=function y(A,I,j){if(arguments.length<2)throw new v("actual","expected");E===void 0&&b(),E(A,I)||L({actual:A,expected:I,message:j,operator:"deepEqual",stackStartFn:y})},M.notDeepEqual=function y(A,I,j){if(arguments.length<2)throw new v("actual","expected");E===void 0&&b(),E(A,I)&&L({actual:A,expected:I,message:j,operator:"notDeepEqual",stackStartFn:y})},M.deepStrictEqual=function y(A,I,j){if(arguments.length<2)throw new v("actual","expected");E===void 0&&b(),k(A,I)||L({actual:A,expected:I,message:j,operator:"deepStrictEqual",stackStartFn:y})},M.notDeepStrictEqual=ie;function ie(y,A,I){if(arguments.length<2)throw new v("actual","expected");E===void 0&&b(),k(y,A)&&L({actual:y,expected:A,message:I,operator:"notDeepStrictEqual",stackStartFn:ie})}M.strictEqual=function y(A,I,j){if(arguments.length<2)throw new v("actual","expected");p(A,I)||L({actual:A,expected:I,message:j,operator:"strictEqual",stackStartFn:y})},M.notStrictEqual=function y(A,I,j){if(arguments.length<2)throw new v("actual","expected");p(A,I)&&L({actual:A,expected:I,message:j,operator:"notStrictEqual",stackStartFn:y})};var ne=t(function y(A,I,j){var D=this;_(this,y),I.forEach(function(B){B in A&&(j!==void 0&&typeof j[B]=="string"&&a(A[B])&&g(A[B],j[B])?D[B]=j[B]:D[B]=A[B])})});function x(y,A,I,j,D,B){if(!(I in y)||!k(y[I],A[I])){if(!j){var V=new ne(y,D),ee=new ne(A,D,y),le=new C({actual:V,expected:ee,operator:"deepStrictEqual",stackStartFn:B});throw le.actual=y,le.expected=A,le.operator=B.name,le}L({actual:y,expected:A,message:j,operator:B.name,stackStartFn:B})}}function F(y,A,I,j){if(typeof A!="function"){if(a(A))return g(A,y);if(arguments.length===2)throw new u("expected",["Function","RegExp"],A);if(r(y)!=="object"||y===null){var D=new C({actual:y,expected:A,message:I,operator:"deepStrictEqual",stackStartFn:j});throw D.operator=j.name,D}var B=Object.keys(A);if(A instanceof Error)B.push("name","message");else if(B.length===0)throw new m("error",A,"may not be an empty object");return E===void 0&&b(),B.forEach(function(V){typeof y[V]=="string"&&a(A[V])&&g(A[V],y[V])||x(y,A,V,I,B,j)}),!0}return A.prototype!==void 0&&y instanceof A?!0:Error.isPrototypeOf(A)?!1:A.call({},y)===!0}function P(y){if(typeof y!="function")throw new u("fn","Function",y);try{y()}catch(A){return A}return $}function U(y){return s(y)||y!==null&&r(y)==="object"&&typeof y.then=="function"&&typeof y.catch=="function"}function G(y){return Promise.resolve().then(function(){var A;if(typeof y=="function"){if(A=y(),!U(A))throw new f("instance of Promise","promiseFn",A)}else if(U(y))A=y;else throw new u("promiseFn",["Function","Promise"],y);return Promise.resolve().then(function(){return A}).then(function(){return $}).catch(function(I){return I})})}function H(y,A,I,j){if(typeof I=="string"){if(arguments.length===4)throw new u("error",["Object","Error","Function","RegExp"],I);if(r(A)==="object"&&A!==null){if(A.message===I)throw new o("error/message",'The error message "'.concat(A.message,'" is identical to the message.'))}else if(A===I)throw new o("error/message",'The error "'.concat(A,'" is identical to the message.'));j=I,I=void 0}else if(I!=null&&r(I)!=="object"&&typeof I!="function")throw new u("error",["Object","Error","Function","RegExp"],I);if(A===$){var D="";I&&I.name&&(D+=" (".concat(I.name,")")),D+=j?": ".concat(j):".";var B=y.name==="rejects"?"rejection":"exception";L({actual:void 0,expected:I,operator:y.name,message:"Missing expected ".concat(B).concat(D),stackStartFn:y})}if(I&&!F(A,I,j,y))throw A}function K(y,A,I,j){if(A!==$){if(typeof I=="string"&&(j=I,I=void 0),!I||F(A,I)){var D=j?": ".concat(j):".",B=y.name==="doesNotReject"?"rejection":"exception";L({actual:A,expected:I,operator:y.name,message:"Got unwanted ".concat(B).concat(D,`
`)+'Actual message: "'.concat(A&&A.message,'"'),stackStartFn:y})}throw A}}M.throws=function y(A){for(var I=arguments.length,j=new Array(I>1?I-1:0),D=1;D<I;D++)j[D-1]=arguments[D];H.apply(void 0,[y,P(A)].concat(j))},M.rejects=function y(A){for(var I=arguments.length,j=new Array(I>1?I-1:0),D=1;D<I;D++)j[D-1]=arguments[D];return G(A).then(function(B){return H.apply(void 0,[y,B].concat(j))})},M.doesNotThrow=function y(A){for(var I=arguments.length,j=new Array(I>1?I-1:0),D=1;D<I;D++)j[D-1]=arguments[D];K.apply(void 0,[y,P(A)].concat(j))},M.doesNotReject=function y(A){for(var I=arguments.length,j=new Array(I>1?I-1:0),D=1;D<I;D++)j[D-1]=arguments[D];return G(A).then(function(B){return K.apply(void 0,[y,B].concat(j))})},M.ifError=function y(A){if(A!=null){var I="ifError got unwanted exception: ";r(A)==="object"&&typeof A.message=="string"?A.message.length===0&&A.constructor?I+=A.constructor.name:I+=A.message:I+=w(A);var j=new C({actual:A,expected:null,operator:"ifError",message:I,stackStartFn:y}),D=A.stack;if(typeof D=="string"){var B=D.split(`
`);B.shift();for(var V=j.stack.split(`
`),ee=0;ee<B.length;ee++){var le=V.indexOf(B[ee]);if(le!==-1){V=V.slice(0,le);break}}j.stack="".concat(V.join(`
`),`
`).concat(B.join(`
`))}throw j}};function Y(y,A,I,j,D){if(!a(A))throw new u("regexp","RegExp",A);var B=D==="match";if(typeof y!="string"||g(A,y)!==B){if(I instanceof Error)throw I;var V=!I;I=I||(typeof y!="string"?'The "string" argument must be of type string. Received type '+"".concat(r(y)," (").concat(w(y),")"):(B?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(w(A),`. Input:

`).concat(w(y),`
`));var ee=new C({actual:y,expected:A,message:I,operator:D,stackStartFn:j});throw ee.generatedMessage=V,ee}}M.match=function y(A,I,j){Y(A,I,j,y,"match")},M.doesNotMatch=function y(A,I,j){Y(A,I,j,y,"doesNotMatch")};function z(){for(var y=arguments.length,A=new Array(y),I=0;I<y;I++)A[I]=arguments[I];Z.apply(void 0,[z,A.length].concat(A))}return M.strict=h(z,M,{equal:M.strictEqual,deepEqual:M.deepStrictEqual,notEqual:M.notStrictEqual,notDeepEqual:M.notDeepStrictEqual}),M.strict.strict=M.strict,Ri.exports}(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.E=r.AssertionError=r.message=r.RangeError=r.TypeError=r.Error=void 0;const e=kn(),t=bt,i=typeof Symbol>"u"?"_kCode":Symbol("code"),l={};function _(S){return class extends S{constructor(c,...s){super(o(c,s)),this.code=c,this[i]=c,this.name=`${super.name} [${this[i]}]`}}}const d=typeof globalThis<"u"?globalThis:rt;class n extends d.Error{constructor(w){if(typeof w!="object"||w===null)throw new r.TypeError("ERR_INVALID_ARG_TYPE","options","object");w.message?super(w.message):super(`${t.inspect(w.actual).slice(0,128)} ${w.operator} ${t.inspect(w.expected).slice(0,128)}`),this.generatedMessage=!w.message,this.name="AssertionError [ERR_ASSERTION]",this.code="ERR_ASSERTION",this.actual=w.actual,this.expected=w.expected,this.operator=w.operator,r.Error.captureStackTrace(this,w.stackStartFunction)}}r.AssertionError=n;function o(S,w){e.strictEqual(typeof S,"string");const c=l[S];e(c,`An invalid error message key was used: ${S}.`);let s;if(typeof c=="function")s=c;else{if(s=t.format,w===void 0||w.length===0)return c;w.unshift(c)}return String(s.apply(null,w))}r.message=o;function u(S,w){l[S]=typeof w=="function"?w:String(w)}r.E=u,r.Error=_(d.Error),r.TypeError=_(d.TypeError),r.RangeError=_(d.RangeError),u("ERR_ARG_NOT_ITERABLE","%s must be iterable"),u("ERR_ASSERTION","%s"),u("ERR_BUFFER_OUT_OF_BOUNDS",C),u("ERR_CHILD_CLOSED_BEFORE_REPLY","Child closed before reply received"),u("ERR_CONSOLE_WRITABLE_STREAM","Console expects a writable stream instance for %s"),u("ERR_CPU_USAGE","Unable to obtain cpu usage %s"),u("ERR_DNS_SET_SERVERS_FAILED",(S,w)=>`c-ares failed to set servers: "${S}" [${w}]`),u("ERR_FALSY_VALUE_REJECTION","Promise was rejected with falsy value"),u("ERR_ENCODING_NOT_SUPPORTED",S=>`The "${S}" encoding is not supported`),u("ERR_ENCODING_INVALID_ENCODED_DATA",S=>`The encoded data was not valid for encoding ${S}`),u("ERR_HTTP_HEADERS_SENT","Cannot render headers after they are sent to the client"),u("ERR_HTTP_INVALID_STATUS_CODE","Invalid status code: %s"),u("ERR_HTTP_TRAILER_INVALID","Trailers are invalid with this transfer encoding"),u("ERR_INDEX_OUT_OF_RANGE","Index out of range"),u("ERR_INVALID_ARG_TYPE",m),u("ERR_INVALID_ARRAY_LENGTH",(S,w,c)=>(e.strictEqual(typeof c,"number"),`The array "${S}" (length ${c}) must be of length ${w}.`)),u("ERR_INVALID_BUFFER_SIZE","Buffer size must be a multiple of %s"),u("ERR_INVALID_CALLBACK","Callback must be a function"),u("ERR_INVALID_CHAR","Invalid character in %s"),u("ERR_INVALID_CURSOR_POS","Cannot set cursor row without setting its column"),u("ERR_INVALID_FD",'"fd" must be a positive integer: %s'),u("ERR_INVALID_FILE_URL_HOST",'File URL host must be "localhost" or empty on %s'),u("ERR_INVALID_FILE_URL_PATH","File URL path %s"),u("ERR_INVALID_HANDLE_TYPE","This handle type cannot be sent"),u("ERR_INVALID_IP_ADDRESS","Invalid IP address: %s"),u("ERR_INVALID_OPT_VALUE",(S,w)=>`The value "${String(w)}" is invalid for option "${S}"`),u("ERR_INVALID_OPT_VALUE_ENCODING",S=>`The value "${String(S)}" is invalid for option "encoding"`),u("ERR_INVALID_REPL_EVAL_CONFIG",'Cannot specify both "breakEvalOnSigint" and "eval" for REPL'),u("ERR_INVALID_SYNC_FORK_INPUT","Asynchronous forks do not support Buffer, Uint8Array or string input: %s"),u("ERR_INVALID_THIS",'Value of "this" must be of type %s'),u("ERR_INVALID_TUPLE","%s must be an iterable %s tuple"),u("ERR_INVALID_URL","Invalid URL: %s"),u("ERR_INVALID_URL_SCHEME",S=>`The URL must be ${v(S,"scheme")}`),u("ERR_IPC_CHANNEL_CLOSED","Channel closed"),u("ERR_IPC_DISCONNECTED","IPC channel is already disconnected"),u("ERR_IPC_ONE_PIPE","Child process can have only one IPC pipe"),u("ERR_IPC_SYNC_FORK","IPC cannot be used with synchronous forks"),u("ERR_MISSING_ARGS",f),u("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),u("ERR_NAPI_CONS_FUNCTION","Constructor must be a function"),u("ERR_NAPI_CONS_PROTOTYPE_OBJECT","Constructor.prototype must be an object"),u("ERR_NO_CRYPTO","Node.js is not compiled with OpenSSL crypto support"),u("ERR_NO_LONGER_SUPPORTED","%s is no longer supported"),u("ERR_PARSE_HISTORY_DATA","Could not parse history data in %s"),u("ERR_SOCKET_ALREADY_BOUND","Socket is already bound"),u("ERR_SOCKET_BAD_PORT","Port should be > 0 and < 65536"),u("ERR_SOCKET_BAD_TYPE","Bad socket type specified. Valid types are: udp4, udp6"),u("ERR_SOCKET_CANNOT_SEND","Unable to send data"),u("ERR_SOCKET_CLOSED","Socket is closed"),u("ERR_SOCKET_DGRAM_NOT_RUNNING","Not running"),u("ERR_STDERR_CLOSE","process.stderr cannot be closed"),u("ERR_STDOUT_CLOSE","process.stdout cannot be closed"),u("ERR_STREAM_WRAP","Stream has StringDecoder set or is in objectMode"),u("ERR_TLS_CERT_ALTNAME_INVALID","Hostname/IP does not match certificate's altnames: %s"),u("ERR_TLS_DH_PARAM_SIZE",S=>`DH parameter size ${S} is less than 2048`),u("ERR_TLS_HANDSHAKE_TIMEOUT","TLS handshake timeout"),u("ERR_TLS_RENEGOTIATION_FAILED","Failed to renegotiate"),u("ERR_TLS_REQUIRED_SERVER_NAME",'"servername" is required parameter for Server.addContext'),u("ERR_TLS_SESSION_ATTACK","TSL session renegotiation attack detected"),u("ERR_TRANSFORM_ALREADY_TRANSFORMING","Calling transform done when still transforming"),u("ERR_TRANSFORM_WITH_LENGTH_0","Calling transform done when writableState.length != 0"),u("ERR_UNKNOWN_ENCODING","Unknown encoding: %s"),u("ERR_UNKNOWN_SIGNAL","Unknown signal: %s"),u("ERR_UNKNOWN_STDIN_TYPE","Unknown stdin file type"),u("ERR_UNKNOWN_STREAM_TYPE","Unknown stream file type"),u("ERR_V8BREAKITERATOR","Full ICU data not installed. See https://github.com/nodejs/node/wiki/Intl");function m(S,w,c){e(S,"name is required");let s;w.includes("not ")?(s="must not be",w=w.split("not ")[1]):s="must be";let a;if(Array.isArray(S))a=`The ${S.map(p=>`"${p}"`).join(", ")} arguments ${s} ${v(w,"type")}`;else if(S.includes(" argument"))a=`The ${S} ${s} ${v(w,"type")}`;else{const h=S.includes(".")?"property":"argument";a=`The "${S}" ${h} ${s} ${v(w,"type")}`}return arguments.length>=3&&(a+=`. Received type ${c!==null?typeof c:"null"}`),a}function f(...S){e(S.length>0,"At least one arg needs to be specified");let w="The ";const c=S.length;switch(S=S.map(s=>`"${s}"`),c){case 1:w+=`${S[0]} argument`;break;case 2:w+=`${S[0]} and ${S[1]} arguments`;break;default:w+=S.slice(0,c-1).join(", "),w+=`, and ${S[c-1]} arguments`;break}return`${w} must be specified`}function v(S,w){if(e(S,"expected is required"),e(typeof w=="string","thing is required"),Array.isArray(S)){const c=S.length;return e(c>0,"At least one expected value needs to be specified"),S=S.map(s=>String(s)),c>2?`one of ${w} ${S.slice(0,c-1).join(", ")}, or `+S[c-1]:c===2?`one of ${w} ${S[0]} or ${S[1]}`:`of ${w} ${S[0]}`}else return`of ${w} ${String(S)}`}function C(S,w){return w?"Attempt to write outside buffer bounds":`"${S}" is outside of buffer bounds`}})(Mn);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.strToEncoding=r.assertEncoding=r.ENCODING_UTF8=void 0;const e=cr,t=Mn;r.ENCODING_UTF8="utf8";function i(_){if(_&&!e.Buffer.isEncoding(_))throw new t.TypeError("ERR_INVALID_OPT_VALUE_ENCODING",_)}r.assertEncoding=i;function l(_,d){return!d||d===r.ENCODING_UTF8?_:d==="buffer"?new e.Buffer(_):new e.Buffer(_).toString(d)}r.strToEncoding=l})(Cr);Object.defineProperty(dr,"__esModule",{value:!0});dr.Dirent=void 0;const au=Ct,lu=Cr,{S_IFMT:cu,S_IFDIR:hu,S_IFREG:uu,S_IFBLK:fu,S_IFCHR:du,S_IFLNK:_u,S_IFIFO:pu,S_IFSOCK:gu}=au.constants;class ci{constructor(){this.name="",this.path="",this.mode=0}static build(e,t){const i=new ci,{mode:l}=e.getNode();return i.name=(0,lu.strToEncoding)(e.getName(),t),i.mode=l,i.path=e.getPath(),i}_checkModeProperty(e){return(this.mode&cu)===e}isDirectory(){return this._checkModeProperty(hu)}isFile(){return this._checkModeProperty(uu)}isBlockDevice(){return this._checkModeProperty(fu)}isCharacterDevice(){return this._checkModeProperty(du)}isSymbolicLink(){return this._checkModeProperty(_u)}isFIFO(){return this._checkModeProperty(pu)}isSocket(){return this._checkModeProperty(gu)}}dr.Dirent=ci;dr.default=ci;var et={};function mt(r){if(typeof r!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(r))}function Hs(r,e){for(var t="",i=0,l=-1,_=0,d,n=0;n<=r.length;++n){if(n<r.length)d=r.charCodeAt(n);else{if(d===47)break;d=47}if(d===47){if(!(l===n-1||_===1))if(l!==n-1&&_===2){if(t.length<2||i!==2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){var o=t.lastIndexOf("/");if(o!==t.length-1){o===-1?(t="",i=0):(t=t.slice(0,o),i=t.length-1-t.lastIndexOf("/")),l=n,_=0;continue}}else if(t.length===2||t.length===1){t="",i=0,l=n,_=0;continue}}e&&(t.length>0?t+="/..":t="..",i=2)}else t.length>0?t+="/"+r.slice(l+1,n):t=r.slice(l+1,n),i=n-l-1;l=n,_=0}else d===46&&_!==-1?++_:_=-1}return t}function mu(r,e){var t=e.dir||e.root,i=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+i:t+r+i:i}var nr={resolve:function(){for(var e="",t=!1,i,l=arguments.length-1;l>=-1&&!t;l--){var _;l>=0?_=arguments[l]:(i===void 0&&(i=be.cwd()),_=i),mt(_),_.length!==0&&(e=_+"/"+e,t=_.charCodeAt(0)===47)}return e=Hs(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(mt(e),e.length===0)return".";var t=e.charCodeAt(0)===47,i=e.charCodeAt(e.length-1)===47;return e=Hs(e,!t),e.length===0&&!t&&(e="."),e.length>0&&i&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return mt(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var i=arguments[t];mt(i),i.length>0&&(e===void 0?e=i:e+="/"+i)}return e===void 0?".":nr.normalize(e)},relative:function(e,t){if(mt(e),mt(t),e===t||(e=nr.resolve(e),t=nr.resolve(t),e===t))return"";for(var i=1;i<e.length&&e.charCodeAt(i)===47;++i);for(var l=e.length,_=l-i,d=1;d<t.length&&t.charCodeAt(d)===47;++d);for(var n=t.length,o=n-d,u=_<o?_:o,m=-1,f=0;f<=u;++f){if(f===u){if(o>u){if(t.charCodeAt(d+f)===47)return t.slice(d+f+1);if(f===0)return t.slice(d+f)}else _>u&&(e.charCodeAt(i+f)===47?m=f:f===0&&(m=0));break}var v=e.charCodeAt(i+f),C=t.charCodeAt(d+f);if(v!==C)break;v===47&&(m=f)}var S="";for(f=i+m+1;f<=l;++f)(f===l||e.charCodeAt(f)===47)&&(S.length===0?S+="..":S+="/..");return S.length>0?S+t.slice(d+m):(d+=m,t.charCodeAt(d)===47&&++d,t.slice(d))},_makeLong:function(e){return e},dirname:function(e){if(mt(e),e.length===0)return".";for(var t=e.charCodeAt(0),i=t===47,l=-1,_=!0,d=e.length-1;d>=1;--d)if(t=e.charCodeAt(d),t===47){if(!_){l=d;break}}else _=!1;return l===-1?i?"/":".":i&&l===1?"//":e.slice(0,l)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');mt(e);var i=0,l=-1,_=!0,d;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var n=t.length-1,o=-1;for(d=e.length-1;d>=0;--d){var u=e.charCodeAt(d);if(u===47){if(!_){i=d+1;break}}else o===-1&&(_=!1,o=d+1),n>=0&&(u===t.charCodeAt(n)?--n===-1&&(l=d):(n=-1,l=o))}return i===l?l=o:l===-1&&(l=e.length),e.slice(i,l)}else{for(d=e.length-1;d>=0;--d)if(e.charCodeAt(d)===47){if(!_){i=d+1;break}}else l===-1&&(_=!1,l=d+1);return l===-1?"":e.slice(i,l)}},extname:function(e){mt(e);for(var t=-1,i=0,l=-1,_=!0,d=0,n=e.length-1;n>=0;--n){var o=e.charCodeAt(n);if(o===47){if(!_){i=n+1;break}continue}l===-1&&(_=!1,l=n+1),o===46?t===-1?t=n:d!==1&&(d=1):t!==-1&&(d=-1)}return t===-1||l===-1||d===0||d===1&&t===l-1&&t===i+1?"":e.slice(t,l)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof e);return mu("/",e)},parse:function(e){mt(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var i=e.charCodeAt(0),l=i===47,_;l?(t.root="/",_=1):_=0;for(var d=-1,n=0,o=-1,u=!0,m=e.length-1,f=0;m>=_;--m){if(i=e.charCodeAt(m),i===47){if(!u){n=m+1;break}continue}o===-1&&(u=!1,o=m+1),i===46?d===-1?d=m:f!==1&&(f=1):d!==-1&&(f=-1)}return d===-1||o===-1||f===0||f===1&&d===o-1&&d===n+1?o!==-1&&(n===0&&l?t.base=t.name=e.slice(1,o):t.base=t.name=e.slice(n,o)):(n===0&&l?(t.name=e.slice(1,d),t.base=e.slice(1,o)):(t.name=e.slice(n,d),t.base=e.slice(n,o)),t.ext=e.slice(d,o)),n>0?t.dir=e.slice(0,n-1):l&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};nr.posix=nr;var vu=nr,ca={},pr={};Object.defineProperty(pr,"__esModule",{value:!0});pr.createProcess=void 0;const yu=()=>{if(typeof be<"u")return be;try{return jo()}catch{return}};function ha(){const r=yu()||{};return r.cwd||(r.cwd=()=>"/"),r.emitWarning||(r.emitWarning=(e,t)=>{console.warn(`${t}${t?": ":""}${e}`)}),r.env||(r.env={}),r}pr.createProcess=ha;pr.default=ha();var zn={exports:{}},sr=typeof Reflect=="object"?Reflect:null,$s=sr&&typeof sr.apply=="function"?sr.apply:function(e,t,i){return Function.prototype.apply.call(e,t,i)},qr;sr&&typeof sr.ownKeys=="function"?qr=sr.ownKeys:Object.getOwnPropertySymbols?qr=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:qr=function(e){return Object.getOwnPropertyNames(e)};function bu(r){console&&console.warn&&console.warn(r)}var ua=Number.isNaN||function(e){return e!==e};function Ne(){Ne.init.call(this)}zn.exports=Ne;zn.exports.once=Cu;Ne.EventEmitter=Ne;Ne.prototype._events=void 0;Ne.prototype._eventsCount=0;Ne.prototype._maxListeners=void 0;var Ws=10;function hi(r){if(typeof r!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r)}Object.defineProperty(Ne,"defaultMaxListeners",{enumerable:!0,get:function(){return Ws},set:function(r){if(typeof r!="number"||r<0||ua(r))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+r+".");Ws=r}});Ne.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ne.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||ua(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function fa(r){return r._maxListeners===void 0?Ne.defaultMaxListeners:r._maxListeners}Ne.prototype.getMaxListeners=function(){return fa(this)};Ne.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var l=e==="error",_=this._events;if(_!==void 0)l=l&&_.error===void 0;else if(!l)return!1;if(l){var d;if(t.length>0&&(d=t[0]),d instanceof Error)throw d;var n=new Error("Unhandled error."+(d?" ("+d.message+")":""));throw n.context=d,n}var o=_[e];if(o===void 0)return!1;if(typeof o=="function")$s(o,this,t);else for(var u=o.length,m=ma(o,u),i=0;i<u;++i)$s(m[i],this,t);return!0};function da(r,e,t,i){var l,_,d;if(hi(t),_=r._events,_===void 0?(_=r._events=Object.create(null),r._eventsCount=0):(_.newListener!==void 0&&(r.emit("newListener",e,t.listener?t.listener:t),_=r._events),d=_[e]),d===void 0)d=_[e]=t,++r._eventsCount;else if(typeof d=="function"?d=_[e]=i?[t,d]:[d,t]:i?d.unshift(t):d.push(t),l=fa(r),l>0&&d.length>l&&!d.warned){d.warned=!0;var n=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");n.name="MaxListenersExceededWarning",n.emitter=r,n.type=e,n.count=d.length,bu(n)}return r}Ne.prototype.addListener=function(e,t){return da(this,e,t,!1)};Ne.prototype.on=Ne.prototype.addListener;Ne.prototype.prependListener=function(e,t){return da(this,e,t,!0)};function Su(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function _a(r,e,t){var i={fired:!1,wrapFn:void 0,target:r,type:e,listener:t},l=Su.bind(i);return l.listener=t,i.wrapFn=l,l}Ne.prototype.once=function(e,t){return hi(t),this.on(e,_a(this,e,t)),this};Ne.prototype.prependOnceListener=function(e,t){return hi(t),this.prependListener(e,_a(this,e,t)),this};Ne.prototype.removeListener=function(e,t){var i,l,_,d,n;if(hi(t),l=this._events,l===void 0)return this;if(i=l[e],i===void 0)return this;if(i===t||i.listener===t)--this._eventsCount===0?this._events=Object.create(null):(delete l[e],l.removeListener&&this.emit("removeListener",e,i.listener||t));else if(typeof i!="function"){for(_=-1,d=i.length-1;d>=0;d--)if(i[d]===t||i[d].listener===t){n=i[d].listener,_=d;break}if(_<0)return this;_===0?i.shift():wu(i,_),i.length===1&&(l[e]=i[0]),l.removeListener!==void 0&&this.emit("removeListener",e,n||t)}return this};Ne.prototype.off=Ne.prototype.removeListener;Ne.prototype.removeAllListeners=function(e){var t,i,l;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var _=Object.keys(i),d;for(l=0;l<_.length;++l)d=_[l],d!=="removeListener"&&this.removeAllListeners(d);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=i[e],typeof t=="function")this.removeListener(e,t);else if(t!==void 0)for(l=t.length-1;l>=0;l--)this.removeListener(e,t[l]);return this};function pa(r,e,t){var i=r._events;if(i===void 0)return[];var l=i[e];return l===void 0?[]:typeof l=="function"?t?[l.listener||l]:[l]:t?Eu(l):ma(l,l.length)}Ne.prototype.listeners=function(e){return pa(this,e,!0)};Ne.prototype.rawListeners=function(e){return pa(this,e,!1)};Ne.listenerCount=function(r,e){return typeof r.listenerCount=="function"?r.listenerCount(e):ga.call(r,e)};Ne.prototype.listenerCount=ga;function ga(r){var e=this._events;if(e!==void 0){var t=e[r];if(typeof t=="function")return 1;if(t!==void 0)return t.length}return 0}Ne.prototype.eventNames=function(){return this._eventsCount>0?qr(this._events):[]};function ma(r,e){for(var t=new Array(e),i=0;i<e;++i)t[i]=r[i];return t}function wu(r,e){for(;e+1<r.length;e++)r[e]=r[e+1];r.pop()}function Eu(r){for(var e=new Array(r.length),t=0;t<e.length;++t)e[t]=r[t].listener||r[t];return e}function Cu(r,e){return new Promise(function(t,i){function l(d){r.removeListener(e,_),i(d)}function _(){typeof r.removeListener=="function"&&r.removeListener("error",l),t([].slice.call(arguments))}va(r,e,_,{once:!0}),e!=="error"&&Ru(r,l,{once:!0})})}function Ru(r,e,t){typeof r.on=="function"&&va(r,"error",e,t)}function va(r,e,t,i){if(typeof r.on=="function")i.once?r.once(e,t):r.on(e,t);else if(typeof r.addEventListener=="function")r.addEventListener(e,function l(_){i.once&&r.removeEventListener(e,l),t(_)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof r)}var Tr=zn.exports;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.File=r.Link=r.Node=r.SEP=void 0;const e=pr,t=cr,i=Ct,l=Tr,_=$t,{S_IFMT:d,S_IFDIR:n,S_IFREG:o,S_IFLNK:u,O_APPEND:m}=i.constants,f=()=>{var c,s;return(s=(c=e.default.getuid)===null||c===void 0?void 0:c.call(e.default))!==null&&s!==void 0?s:0},v=()=>{var c,s;return(s=(c=e.default.getgid)===null||c===void 0?void 0:c.call(e.default))!==null&&s!==void 0?s:0};r.SEP="/";class C extends l.EventEmitter{constructor(s,a=438){super(),this._uid=f(),this._gid=v(),this._atime=new Date,this._mtime=new Date,this._ctime=new Date,this._perm=438,this.mode=o,this._nlink=1,this._perm=a,this.mode|=a,this.ino=s}set ctime(s){this._ctime=s}get ctime(){return this._ctime}set uid(s){this._uid=s,this.ctime=new Date}get uid(){return this._uid}set gid(s){this._gid=s,this.ctime=new Date}get gid(){return this._gid}set atime(s){this._atime=s,this.ctime=new Date}get atime(){return this._atime}set mtime(s){this._mtime=s,this.ctime=new Date}get mtime(){return this._mtime}set perm(s){this._perm=s,this.ctime=new Date}get perm(){return this._perm}set nlink(s){this._nlink=s,this.ctime=new Date}get nlink(){return this._nlink}getString(s="utf8"){return this.atime=new Date,this.getBuffer().toString(s)}setString(s){this.buf=(0,t.bufferFrom)(s,"utf8"),this.touch()}getBuffer(){return this.atime=new Date,this.buf||this.setBuffer((0,t.bufferAllocUnsafe)(0)),(0,t.bufferFrom)(this.buf)}setBuffer(s){this.buf=(0,t.bufferFrom)(s),this.touch()}getSize(){return this.buf?this.buf.length:0}setModeProperty(s){this.mode=this.mode&~d|s}setIsFile(){this.setModeProperty(o)}setIsDirectory(){this.setModeProperty(n)}setIsSymlink(){this.setModeProperty(u)}isFile(){return(this.mode&d)===o}isDirectory(){return(this.mode&d)===n}isSymlink(){return(this.mode&d)===u}makeSymlink(s){this.symlink=s,this.setIsSymlink()}write(s,a=0,h=s.length,p=0){if(this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),p+h>this.buf.length){const g=(0,t.bufferAllocUnsafe)(p+h);this.buf.copy(g,0,0,this.buf.length),this.buf=g}return s.copy(this.buf,p,a,a+h),this.touch(),h}read(s,a=0,h=s.byteLength,p=0){this.atime=new Date,this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0));let g=h;g>s.byteLength&&(g=s.byteLength),g+p>this.buf.length&&(g=this.buf.length-p);const E=s instanceof t.Buffer?s:t.Buffer.from(s.buffer);return this.buf.copy(E,a,p,p+g),g}truncate(s=0){if(!s)this.buf=(0,t.bufferAllocUnsafe)(0);else if(this.buf||(this.buf=(0,t.bufferAllocUnsafe)(0)),s<=this.buf.length)this.buf=this.buf.slice(0,s);else{const a=(0,t.bufferAllocUnsafe)(s);this.buf.copy(a),a.fill(0,this.buf.length),this.buf=a}this.touch()}chmod(s){this.perm=s,this.mode=this.mode&-512|s,this.touch()}chown(s,a){this.uid=s,this.gid=a,this.touch()}touch(){this.mtime=new Date,this.emit("change",this)}canRead(s=f(),a=v()){return!!(this.perm&4||a===this.gid&&this.perm&32||s===this.uid&&this.perm&256)}canWrite(s=f(),a=v()){return!!(this.perm&2||a===this.gid&&this.perm&16||s===this.uid&&this.perm&128)}del(){this.emit("delete",this)}toJSON(){return{ino:this.ino,uid:this.uid,gid:this.gid,atime:this.atime.getTime(),mtime:this.mtime.getTime(),ctime:this.ctime.getTime(),perm:this.perm,mode:this.mode,nlink:this.nlink,symlink:this.symlink,data:this.getString()}}}r.Node=C;class S extends l.EventEmitter{get steps(){return this._steps}set steps(s){this._steps=s;for(const[a,h]of this.children.entries())a==="."||a===".."||h==null||h.syncSteps()}constructor(s,a,h){super(),this.children=new Map,this._steps=[],this.ino=0,this.length=0,this.vol=s,this.parent=a,this.name=h,this.syncSteps()}setNode(s){this.node=s,this.ino=s.ino}getNode(){return this.node}createChild(s,a=this.vol.createNode()){const h=new S(this.vol,this,s);return h.setNode(a),a.isDirectory()&&(h.children.set(".",h),h.getNode().nlink++),this.setChild(s,h),h}setChild(s,a=new S(this.vol,this,s)){return this.children.set(s,a),a.parent=this,this.length++,a.getNode().isDirectory()&&(a.children.set("..",this),this.getNode().nlink++),this.getNode().mtime=new Date,this.emit("child:add",a,this),a}deleteChild(s){s.getNode().isDirectory()&&(s.children.delete(".."),this.getNode().nlink--),this.children.delete(s.getName()),this.length--,this.getNode().mtime=new Date,this.emit("child:delete",s,this)}getChild(s){return this.getNode().mtime=new Date,this.children.get(s)}getPath(){return this.steps.join(r.SEP)}getName(){return this.steps[this.steps.length-1]}walk(s,a=s.length,h=0){if(h>=s.length)return this;if(h>=a)return this;const p=s[h],g=this.getChild(p);return g?g.walk(s,a,h+1):null}toJSON(){return{steps:this.steps,ino:this.ino,children:Array.from(this.children.keys())}}syncSteps(){this.steps=this.parent?this.parent.steps.concat([this.name]):[this.name]}}r.Link=S;class w{constructor(s,a,h,p){this.link=s,this.node=a,this.flags=h,this.fd=p,this.position=0,this.flags&m&&(this.position=this.getSize())}getString(s="utf8"){return this.node.getString()}setString(s){this.node.setString(s)}getBuffer(){return this.node.getBuffer()}setBuffer(s){this.node.setBuffer(s)}getSize(){return this.node.getSize()}truncate(s){this.node.truncate(s)}seekTo(s){this.position=s}stats(){return _.default.build(this.node)}write(s,a=0,h=s.length,p){typeof p!="number"&&(p=this.position);const g=this.node.write(s,a,h,p);return this.position=p+g,g}read(s,a=0,h=s.byteLength,p){typeof p!="number"&&(p=this.position);const g=this.node.read(s,a,h,p);return this.position=p+g,g}chmod(s){this.node.chmod(s)}chown(s,a){this.node.chown(s,a)}}r.File=w})(ca);var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});let Ln;typeof setImmediate=="function"?Ln=setImmediate.bind(typeof globalThis<"u"?globalThis:rt):Ln=setTimeout.bind(typeof globalThis<"u"?globalThis:rt);Vn.default=Ln;var ui={};Object.defineProperty(ui,"__esModule",{value:!0});ui.default=typeof queueMicrotask=="function"?queueMicrotask:r=>Promise.resolve().then(()=>r()).catch(()=>{});var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});function Au(r,e,t){const i=setTimeout.apply(typeof globalThis<"u"?globalThis:rt,arguments);return i&&typeof i=="object"&&typeof i.unref=="function"&&i.unref(),i}Kn.default=Au;var Ki,qs;function ya(){return qs||(qs=1,Ki=Tr.EventEmitter),Ki}var Gi,zs;function Tu(){if(zs)return Gi;zs=1;function r(S,w){var c=Object.keys(S);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(S);w&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(S,a).enumerable})),c.push.apply(c,s)}return c}function e(S){for(var w=1;w<arguments.length;w++){var c=arguments[w]!=null?arguments[w]:{};w%2?r(Object(c),!0).forEach(function(s){t(S,s,c[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(c)):r(Object(c)).forEach(function(s){Object.defineProperty(S,s,Object.getOwnPropertyDescriptor(c,s))})}return S}function t(S,w,c){return w=d(w),w in S?Object.defineProperty(S,w,{value:c,enumerable:!0,configurable:!0,writable:!0}):S[w]=c,S}function i(S,w){if(!(S instanceof w))throw new TypeError("Cannot call a class as a function")}function l(S,w){for(var c=0;c<w.length;c++){var s=w[c];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(S,d(s.key),s)}}function _(S,w,c){return w&&l(S.prototype,w),c&&l(S,c),Object.defineProperty(S,"prototype",{writable:!1}),S}function d(S){var w=n(S,"string");return typeof w=="symbol"?w:String(w)}function n(S,w){if(typeof S!="object"||S===null)return S;var c=S[Symbol.toPrimitive];if(c!==void 0){var s=c.call(S,w||"default");if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(w==="string"?String:Number)(S)}var o=_r,u=o.Buffer,m=bt,f=m.inspect,v=f&&f.custom||"inspect";function C(S,w,c){u.prototype.copy.call(S,w,c)}return Gi=function(){function S(){i(this,S),this.head=null,this.tail=null,this.length=0}return _(S,[{key:"push",value:function(c){var s={data:c,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(c){var s={data:c,next:this.head};this.length===0&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(this.length!==0){var c=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,c}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(c){if(this.length===0)return"";for(var s=this.head,a=""+s.data;s=s.next;)a+=c+s.data;return a}},{key:"concat",value:function(c){if(this.length===0)return u.alloc(0);for(var s=u.allocUnsafe(c>>>0),a=this.head,h=0;a;)C(a.data,s,h),h+=a.data.length,a=a.next;return s}},{key:"consume",value:function(c,s){var a;return c<this.head.data.length?(a=this.head.data.slice(0,c),this.head.data=this.head.data.slice(c)):c===this.head.data.length?a=this.shift():a=s?this._getString(c):this._getBuffer(c),a}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(c){var s=this.head,a=1,h=s.data;for(c-=h.length;s=s.next;){var p=s.data,g=c>p.length?p.length:c;if(g===p.length?h+=p:h+=p.slice(0,c),c-=g,c===0){g===p.length?(++a,s.next?this.head=s.next:this.head=this.tail=null):(this.head=s,s.data=p.slice(g));break}++a}return this.length-=a,h}},{key:"_getBuffer",value:function(c){var s=u.allocUnsafe(c),a=this.head,h=1;for(a.data.copy(s),c-=a.data.length;a=a.next;){var p=a.data,g=c>p.length?p.length:c;if(p.copy(s,s.length-c,0,g),c-=g,c===0){g===p.length?(++h,a.next?this.head=a.next:this.head=this.tail=null):(this.head=a,a.data=p.slice(g));break}++h}return this.length-=h,s}},{key:v,value:function(c,s){return f(this,e(e({},s),{},{depth:0,customInspect:!1}))}}]),S}(),Gi}var Yi,Vs;function ba(){if(Vs)return Yi;Vs=1;function r(d,n){var o=this,u=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return u||m?(n?n(d):d&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,be.nextTick(l,this,d)):be.nextTick(l,this,d)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(d||null,function(f){!n&&f?o._writableState?o._writableState.errorEmitted?be.nextTick(t,o):(o._writableState.errorEmitted=!0,be.nextTick(e,o,f)):be.nextTick(e,o,f):n?(be.nextTick(t,o),n(f)):be.nextTick(t,o)}),this)}function e(d,n){l(d,n),t(d)}function t(d){d._writableState&&!d._writableState.emitClose||d._readableState&&!d._readableState.emitClose||d.emit("close")}function i(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function l(d,n){d.emit("error",n)}function _(d,n){var o=d._readableState,u=d._writableState;o&&o.autoDestroy||u&&u.autoDestroy?d.destroy(n):d.emit("error",n)}return Yi={destroy:r,undestroy:i,errorOrDestroy:_},Yi}var Xi={},Ks;function gr(){if(Ks)return Xi;Ks=1;function r(n,o){n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o}var e={};function t(n,o,u){u||(u=Error);function m(v,C,S){return typeof o=="string"?o:o(v,C,S)}var f=function(v){r(C,v);function C(S,w,c){return v.call(this,m(S,w,c))||this}return C}(u);f.prototype.name=u.name,f.prototype.code=n,e[n]=f}function i(n,o){if(Array.isArray(n)){var u=n.length;return n=n.map(function(m){return String(m)}),u>2?"one of ".concat(o," ").concat(n.slice(0,u-1).join(", "),", or ")+n[u-1]:u===2?"one of ".concat(o," ").concat(n[0]," or ").concat(n[1]):"of ".concat(o," ").concat(n[0])}else return"of ".concat(o," ").concat(String(n))}function l(n,o,u){return n.substr(!u||u<0?0:+u,o.length)===o}function _(n,o,u){return(u===void 0||u>n.length)&&(u=n.length),n.substring(u-o.length,u)===o}function d(n,o,u){return typeof u!="number"&&(u=0),u+o.length>n.length?!1:n.indexOf(o,u)!==-1}return t("ERR_INVALID_OPT_VALUE",function(n,o){return'The value "'+o+'" is invalid for option "'+n+'"'},TypeError),t("ERR_INVALID_ARG_TYPE",function(n,o,u){var m;typeof o=="string"&&l(o,"not ")?(m="must not be",o=o.replace(/^not /,"")):m="must be";var f;if(_(n," argument"))f="The ".concat(n," ").concat(m," ").concat(i(o,"type"));else{var v=d(n,".")?"property":"argument";f='The "'.concat(n,'" ').concat(v," ").concat(m," ").concat(i(o,"type"))}return f+=". Received type ".concat(typeof u),f},TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",function(n){return"The "+n+" method is not implemented"}),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",function(n){return"Cannot call "+n+" after a stream was destroyed"}),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",function(n){return"Unknown encoding: "+n},TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),Xi.codes=e,Xi}var Ji,Gs;function Sa(){if(Gs)return Ji;Gs=1;var r=gr().codes.ERR_INVALID_OPT_VALUE;function e(i,l,_){return i.highWaterMark!=null?i.highWaterMark:l?i[_]:null}function t(i,l,_,d){var n=e(l,d,_);if(n!=null){if(!(isFinite(n)&&Math.floor(n)===n)||n<0){var o=d?_:"highWaterMark";throw new r(o,n)}return Math.floor(n)}return i.objectMode?16:16*1024}return Ji={getHighWaterMark:t},Ji}var Zi,Ys;function Ou(){if(Ys)return Zi;Ys=1,Zi=r;function r(t,i){if(e("noDeprecation"))return t;var l=!1;function _(){if(!l){if(e("throwDeprecation"))throw new Error(i);e("traceDeprecation")?console.trace(i):console.warn(i),l=!0}return t.apply(this,arguments)}return _}function e(t){try{if(!rt.localStorage)return!1}catch{return!1}var i=rt.localStorage[t];return i==null?!1:String(i).toLowerCase()==="true"}return Zi}var Qi,Xs;function wa(){if(Xs)return Qi;Xs=1,Qi=b;function r(z){var y=this;this.next=null,this.entry=null,this.finish=function(){Y(y,z)}}var e;b.WritableState=E;var t={deprecate:Ou()},i=ya(),l=_r.Buffer,_=(typeof rt<"u"?rt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function d(z){return l.from(z)}function n(z){return l.isBuffer(z)||z instanceof _}var o=ba(),u=Sa(),m=u.getHighWaterMark,f=gr().codes,v=f.ERR_INVALID_ARG_TYPE,C=f.ERR_METHOD_NOT_IMPLEMENTED,S=f.ERR_MULTIPLE_CALLBACK,w=f.ERR_STREAM_CANNOT_PIPE,c=f.ERR_STREAM_DESTROYED,s=f.ERR_STREAM_NULL_VALUES,a=f.ERR_STREAM_WRITE_AFTER_END,h=f.ERR_UNKNOWN_ENCODING,p=o.errorOrDestroy;Wt(b,i);function g(){}function E(z,y,A){e=e||ur(),z=z||{},typeof A!="boolean"&&(A=y instanceof e),this.objectMode=!!z.objectMode,A&&(this.objectMode=this.objectMode||!!z.writableObjectMode),this.highWaterMark=m(this,z,"writableHighWaterMark",A),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var I=z.decodeStrings===!1;this.decodeStrings=!I,this.defaultEncoding=z.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(j){ie(y,j)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=z.emitClose!==!1,this.autoDestroy=!!z.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new r(this)}E.prototype.getBuffer=function(){for(var y=this.bufferedRequest,A=[];y;)A.push(y),y=y.next;return A},function(){try{Object.defineProperty(E.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var k;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(k=Function.prototype[Symbol.hasInstance],Object.defineProperty(b,Symbol.hasInstance,{value:function(y){return k.call(this,y)?!0:this!==b?!1:y&&y._writableState instanceof E}})):k=function(y){return y instanceof this};function b(z){e=e||ur();var y=this instanceof e;if(!y&&!k.call(b,this))return new b(z);this._writableState=new E(z,this,y),this.writable=!0,z&&(typeof z.write=="function"&&(this._write=z.write),typeof z.writev=="function"&&(this._writev=z.writev),typeof z.destroy=="function"&&(this._destroy=z.destroy),typeof z.final=="function"&&(this._final=z.final)),i.call(this)}b.prototype.pipe=function(){p(this,new w)};function O(z,y){var A=new a;p(z,A),be.nextTick(y,A)}function M(z,y,A,I){var j;return A===null?j=new s:typeof A!="string"&&!y.objectMode&&(j=new v("chunk",["string","Buffer"],A)),j?(p(z,j),be.nextTick(I,j),!1):!0}b.prototype.write=function(z,y,A){var I=this._writableState,j=!1,D=!I.objectMode&&n(z);return D&&!l.isBuffer(z)&&(z=d(z)),typeof y=="function"&&(A=y,y=null),D?y="buffer":y||(y=I.defaultEncoding),typeof A!="function"&&(A=g),I.ending?O(this,A):(D||M(this,I,z,A))&&(I.pendingcb++,j=L(this,I,D,z,y,A)),j},b.prototype.cork=function(){this._writableState.corked++},b.prototype.uncork=function(){var z=this._writableState;z.corked&&(z.corked--,!z.writing&&!z.corked&&!z.bufferProcessing&&z.bufferedRequest&&F(this,z))},b.prototype.setDefaultEncoding=function(y){if(typeof y=="string"&&(y=y.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((y+"").toLowerCase())>-1))throw new h(y);return this._writableState.defaultEncoding=y,this},Object.defineProperty(b.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function $(z,y,A){return!z.objectMode&&z.decodeStrings!==!1&&typeof y=="string"&&(y=l.from(y,A)),y}Object.defineProperty(b.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function L(z,y,A,I,j,D){if(!A){var B=$(y,I,j);I!==B&&(A=!0,j="buffer",I=B)}var V=y.objectMode?1:I.length;y.length+=V;var ee=y.length<y.highWaterMark;if(ee||(y.needDrain=!0),y.writing||y.corked){var le=y.lastBufferedRequest;y.lastBufferedRequest={chunk:I,encoding:j,isBuf:A,callback:D,next:null},le?le.next=y.lastBufferedRequest:y.bufferedRequest=y.lastBufferedRequest,y.bufferedRequestCount+=1}else q(z,y,!1,V,I,j,D);return ee}function q(z,y,A,I,j,D,B){y.writelen=I,y.writecb=B,y.writing=!0,y.sync=!0,y.destroyed?y.onwrite(new c("write")):A?z._writev(j,y.onwrite):z._write(j,D,y.onwrite),y.sync=!1}function Z(z,y,A,I,j){--y.pendingcb,A?(be.nextTick(j,I),be.nextTick(H,z,y),z._writableState.errorEmitted=!0,p(z,I)):(j(I),z._writableState.errorEmitted=!0,p(z,I),H(z,y))}function re(z){z.writing=!1,z.writecb=null,z.length-=z.writelen,z.writelen=0}function ie(z,y){var A=z._writableState,I=A.sync,j=A.writecb;if(typeof j!="function")throw new S;if(re(A),y)Z(z,A,I,y,j);else{var D=P(A)||z.destroyed;!D&&!A.corked&&!A.bufferProcessing&&A.bufferedRequest&&F(z,A),I?be.nextTick(ne,z,A,D,j):ne(z,A,D,j)}}function ne(z,y,A,I){A||x(z,y),y.pendingcb--,I(),H(z,y)}function x(z,y){y.length===0&&y.needDrain&&(y.needDrain=!1,z.emit("drain"))}function F(z,y){y.bufferProcessing=!0;var A=y.bufferedRequest;if(z._writev&&A&&A.next){var I=y.bufferedRequestCount,j=new Array(I),D=y.corkedRequestsFree;D.entry=A;for(var B=0,V=!0;A;)j[B]=A,A.isBuf||(V=!1),A=A.next,B+=1;j.allBuffers=V,q(z,y,!0,y.length,j,"",D.finish),y.pendingcb++,y.lastBufferedRequest=null,D.next?(y.corkedRequestsFree=D.next,D.next=null):y.corkedRequestsFree=new r(y),y.bufferedRequestCount=0}else{for(;A;){var ee=A.chunk,le=A.encoding,ue=A.callback,ce=y.objectMode?1:ee.length;if(q(z,y,!1,ce,ee,le,ue),A=A.next,y.bufferedRequestCount--,y.writing)break}A===null&&(y.lastBufferedRequest=null)}y.bufferedRequest=A,y.bufferProcessing=!1}b.prototype._write=function(z,y,A){A(new C("_write()"))},b.prototype._writev=null,b.prototype.end=function(z,y,A){var I=this._writableState;return typeof z=="function"?(A=z,z=null,y=null):typeof y=="function"&&(A=y,y=null),z!=null&&this.write(z,y),I.corked&&(I.corked=1,this.uncork()),I.ending||K(this,I,A),this},Object.defineProperty(b.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function P(z){return z.ending&&z.length===0&&z.bufferedRequest===null&&!z.finished&&!z.writing}function U(z,y){z._final(function(A){y.pendingcb--,A&&p(z,A),y.prefinished=!0,z.emit("prefinish"),H(z,y)})}function G(z,y){!y.prefinished&&!y.finalCalled&&(typeof z._final=="function"&&!y.destroyed?(y.pendingcb++,y.finalCalled=!0,be.nextTick(U,z,y)):(y.prefinished=!0,z.emit("prefinish")))}function H(z,y){var A=P(y);if(A&&(G(z,y),y.pendingcb===0&&(y.finished=!0,z.emit("finish"),y.autoDestroy))){var I=z._readableState;(!I||I.autoDestroy&&I.endEmitted)&&z.destroy()}return A}function K(z,y,A){y.ending=!0,H(z,y),A&&(y.finished?be.nextTick(A):z.once("finish",A)),y.ended=!0,z.writable=!1}function Y(z,y,A){var I=z.entry;for(z.entry=null;I;){var j=I.callback;y.pendingcb--,j(A),I=I.next}y.corkedRequestsFree.next=z}return Object.defineProperty(b.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(y){this._writableState&&(this._writableState.destroyed=y)}}),b.prototype.destroy=o.destroy,b.prototype._undestroy=o.undestroy,b.prototype._destroy=function(z,y){y(z)},Qi}var en,Js;function ur(){if(Js)return en;Js=1;var r=Object.keys||function(u){var m=[];for(var f in u)m.push(f);return m};en=d;var e=Ea(),t=wa();Wt(d,e);for(var i=r(t.prototype),l=0;l<i.length;l++){var _=i[l];d.prototype[_]||(d.prototype[_]=t.prototype[_])}function d(u){if(!(this instanceof d))return new d(u);e.call(this,u),t.call(this,u),this.allowHalfOpen=!0,u&&(u.readable===!1&&(this.readable=!1),u.writable===!1&&(this.writable=!1),u.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function n(){this._writableState.ended||be.nextTick(o,this)}function o(u){u.end()}return Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(m){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=m,this._writableState.destroyed=m)}}),en}var tn={},Ir={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var Zs;function ku(){return Zs||(Zs=1,function(r,e){var t=_r,i=t.Buffer;function l(d,n){for(var o in d)n[o]=d[o]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?r.exports=t:(l(t,e),e.Buffer=_);function _(d,n,o){return i(d,n,o)}_.prototype=Object.create(i.prototype),l(i,_),_.from=function(d,n,o){if(typeof d=="number")throw new TypeError("Argument must not be a number");return i(d,n,o)},_.alloc=function(d,n,o){if(typeof d!="number")throw new TypeError("Argument must be a number");var u=i(d);return n!==void 0?typeof o=="string"?u.fill(n,o):u.fill(n):u.fill(0),u},_.allocUnsafe=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return i(d)},_.allocUnsafeSlow=function(d){if(typeof d!="number")throw new TypeError("Argument must be a number");return t.SlowBuffer(d)}}(Ir,Ir.exports)),Ir.exports}var Qs;function eo(){if(Qs)return tn;Qs=1;var r=ku().Buffer,e=r.isEncoding||function(s){switch(s=""+s,s&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function t(s){if(!s)return"utf8";for(var a;;)switch(s){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return s;default:if(a)return;s=(""+s).toLowerCase(),a=!0}}function i(s){var a=t(s);if(typeof a!="string"&&(r.isEncoding===e||!e(s)))throw new Error("Unknown encoding: "+s);return a||s}tn.StringDecoder=l;function l(s){this.encoding=i(s);var a;switch(this.encoding){case"utf16le":this.text=f,this.end=v,a=4;break;case"utf8":this.fillLast=o,a=4;break;case"base64":this.text=C,this.end=S,a=3;break;default:this.write=w,this.end=c;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(a)}l.prototype.write=function(s){if(s.length===0)return"";var a,h;if(this.lastNeed){if(a=this.fillLast(s),a===void 0)return"";h=this.lastNeed,this.lastNeed=0}else h=0;return h<s.length?a?a+this.text(s,h):this.text(s,h):a||""},l.prototype.end=m,l.prototype.text=u,l.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length};function _(s){return s<=127?0:s>>5===6?2:s>>4===14?3:s>>3===30?4:s>>6===2?-1:-2}function d(s,a,h){var p=a.length-1;if(p<h)return 0;var g=_(a[p]);return g>=0?(g>0&&(s.lastNeed=g-1),g):--p<h||g===-2?0:(g=_(a[p]),g>=0?(g>0&&(s.lastNeed=g-2),g):--p<h||g===-2?0:(g=_(a[p]),g>=0?(g>0&&(g===2?g=0:s.lastNeed=g-3),g):0))}function n(s,a,h){if((a[0]&192)!==128)return s.lastNeed=0,"ï¿½";if(s.lastNeed>1&&a.length>1){if((a[1]&192)!==128)return s.lastNeed=1,"ï¿½";if(s.lastNeed>2&&a.length>2&&(a[2]&192)!==128)return s.lastNeed=2,"ï¿½"}}function o(s){var a=this.lastTotal-this.lastNeed,h=n(this,s);if(h!==void 0)return h;if(this.lastNeed<=s.length)return s.copy(this.lastChar,a,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,a,0,s.length),this.lastNeed-=s.length}function u(s,a){var h=d(this,s,a);if(!this.lastNeed)return s.toString("utf8",a);this.lastTotal=h;var p=s.length-(h-this.lastNeed);return s.copy(this.lastChar,0,p),s.toString("utf8",a,p)}function m(s){var a=s&&s.length?this.write(s):"";return this.lastNeed?a+"ï¿½":a}function f(s,a){if((s.length-a)%2===0){var h=s.toString("utf16le",a);if(h){var p=h.charCodeAt(h.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],h.slice(0,-1)}return h}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",a,s.length-1)}function v(s){var a=s&&s.length?this.write(s):"";if(this.lastNeed){var h=this.lastTotal-this.lastNeed;return a+this.lastChar.toString("utf16le",0,h)}return a}function C(s,a){var h=(s.length-a)%3;return h===0?s.toString("base64",a):(this.lastNeed=3-h,this.lastTotal=3,h===1?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",a,s.length-h))}function S(s){var a=s&&s.length?this.write(s):"";return this.lastNeed?a+this.lastChar.toString("base64",0,3-this.lastNeed):a}function w(s){return s.toString(this.encoding)}function c(s){return s&&s.length?this.write(s):""}return tn}var rn,to;function Gn(){if(to)return rn;to=1;var r=gr().codes.ERR_STREAM_PREMATURE_CLOSE;function e(_){var d=!1;return function(){if(!d){d=!0;for(var n=arguments.length,o=new Array(n),u=0;u<n;u++)o[u]=arguments[u];_.apply(this,o)}}}function t(){}function i(_){return _.setHeader&&typeof _.abort=="function"}function l(_,d,n){if(typeof d=="function")return l(_,null,d);d||(d={}),n=e(n||t);var o=d.readable||d.readable!==!1&&_.readable,u=d.writable||d.writable!==!1&&_.writable,m=function(){_.writable||v()},f=_._writableState&&_._writableState.finished,v=function(){u=!1,f=!0,o||n.call(_)},C=_._readableState&&_._readableState.endEmitted,S=function(){o=!1,C=!0,u||n.call(_)},w=function(h){n.call(_,h)},c=function(){var h;if(o&&!C)return(!_._readableState||!_._readableState.ended)&&(h=new r),n.call(_,h);if(u&&!f)return(!_._writableState||!_._writableState.ended)&&(h=new r),n.call(_,h)},s=function(){_.req.on("finish",v)};return i(_)?(_.on("complete",v),_.on("abort",c),_.req?s():_.on("request",s)):u&&!_._writableState&&(_.on("end",m),_.on("close",m)),_.on("end",S),_.on("finish",v),d.error!==!1&&_.on("error",w),_.on("close",c),function(){_.removeListener("complete",v),_.removeListener("abort",c),_.removeListener("request",s),_.req&&_.req.removeListener("finish",v),_.removeListener("end",m),_.removeListener("close",m),_.removeListener("finish",v),_.removeListener("end",S),_.removeListener("error",w),_.removeListener("close",c)}}return rn=l,rn}var nn,ro;function Lu(){if(ro)return nn;ro=1;var r;function e(h,p,g){return p=t(p),p in h?Object.defineProperty(h,p,{value:g,enumerable:!0,configurable:!0,writable:!0}):h[p]=g,h}function t(h){var p=i(h,"string");return typeof p=="symbol"?p:String(p)}function i(h,p){if(typeof h!="object"||h===null)return h;var g=h[Symbol.toPrimitive];if(g!==void 0){var E=g.call(h,p||"default");if(typeof E!="object")return E;throw new TypeError("@@toPrimitive must return a primitive value.")}return(p==="string"?String:Number)(h)}var l=Gn(),_=Symbol("lastResolve"),d=Symbol("lastReject"),n=Symbol("error"),o=Symbol("ended"),u=Symbol("lastPromise"),m=Symbol("handlePromise"),f=Symbol("stream");function v(h,p){return{value:h,done:p}}function C(h){var p=h[_];if(p!==null){var g=h[f].read();g!==null&&(h[u]=null,h[_]=null,h[d]=null,p(v(g,!1)))}}function S(h){be.nextTick(C,h)}function w(h,p){return function(g,E){h.then(function(){if(p[o]){g(v(void 0,!0));return}p[m](g,E)},E)}}var c=Object.getPrototypeOf(function(){}),s=Object.setPrototypeOf((r={get stream(){return this[f]},next:function(){var p=this,g=this[n];if(g!==null)return Promise.reject(g);if(this[o])return Promise.resolve(v(void 0,!0));if(this[f].destroyed)return new Promise(function(O,M){be.nextTick(function(){p[n]?M(p[n]):O(v(void 0,!0))})});var E=this[u],k;if(E)k=new Promise(w(E,this));else{var b=this[f].read();if(b!==null)return Promise.resolve(v(b,!1));k=new Promise(this[m])}return this[u]=k,k}},e(r,Symbol.asyncIterator,function(){return this}),e(r,"return",function(){var p=this;return new Promise(function(g,E){p[f].destroy(null,function(k){if(k){E(k);return}g(v(void 0,!0))})})}),r),c),a=function(p){var g,E=Object.create(s,(g={},e(g,f,{value:p,writable:!0}),e(g,_,{value:null,writable:!0}),e(g,d,{value:null,writable:!0}),e(g,n,{value:null,writable:!0}),e(g,o,{value:p._readableState.endEmitted,writable:!0}),e(g,m,{value:function(b,O){var M=E[f].read();M?(E[u]=null,E[_]=null,E[d]=null,b(v(M,!1))):(E[_]=b,E[d]=O)},writable:!0}),g));return E[u]=null,l(p,function(k){if(k&&k.code!=="ERR_STREAM_PREMATURE_CLOSE"){var b=E[d];b!==null&&(E[u]=null,E[_]=null,E[d]=null,b(k)),E[n]=k;return}var O=E[_];O!==null&&(E[u]=null,E[_]=null,E[d]=null,O(v(void 0,!0))),E[o]=!0}),p.on("readable",S.bind(null,E)),E};return nn=a,nn}var sn,io;function Du(){return io||(io=1,sn=function(){throw new Error("Readable.from is not available in the browser")}),sn}var on,no;function Ea(){if(no)return on;no=1,on=O;var r;O.ReadableState=b,Tr.EventEmitter;var e=function(B,V){return B.listeners(V).length},t=ya(),i=_r.Buffer,l=(typeof rt<"u"?rt:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function _(D){return i.from(D)}function d(D){return i.isBuffer(D)||D instanceof l}var n=bt,o;n&&n.debuglog?o=n.debuglog("stream"):o=function(){};var u=Tu(),m=ba(),f=Sa(),v=f.getHighWaterMark,C=gr().codes,S=C.ERR_INVALID_ARG_TYPE,w=C.ERR_STREAM_PUSH_AFTER_EOF,c=C.ERR_METHOD_NOT_IMPLEMENTED,s=C.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,a,h,p;Wt(O,t);var g=m.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(D,B,V){if(typeof D.prependListener=="function")return D.prependListener(B,V);!D._events||!D._events[B]?D.on(B,V):Array.isArray(D._events[B])?D._events[B].unshift(V):D._events[B]=[V,D._events[B]]}function b(D,B,V){r=r||ur(),D=D||{},typeof V!="boolean"&&(V=B instanceof r),this.objectMode=!!D.objectMode,V&&(this.objectMode=this.objectMode||!!D.readableObjectMode),this.highWaterMark=v(this,D,"readableHighWaterMark",V),this.buffer=new u,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=D.emitClose!==!1,this.autoDestroy=!!D.autoDestroy,this.destroyed=!1,this.defaultEncoding=D.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,D.encoding&&(a||(a=eo().StringDecoder),this.decoder=new a(D.encoding),this.encoding=D.encoding)}function O(D){if(r=r||ur(),!(this instanceof O))return new O(D);var B=this instanceof r;this._readableState=new b(D,this,B),this.readable=!0,D&&(typeof D.read=="function"&&(this._read=D.read),typeof D.destroy=="function"&&(this._destroy=D.destroy)),t.call(this)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(B){this._readableState&&(this._readableState.destroyed=B)}}),O.prototype.destroy=m.destroy,O.prototype._undestroy=m.undestroy,O.prototype._destroy=function(D,B){B(D)},O.prototype.push=function(D,B){var V=this._readableState,ee;return V.objectMode?ee=!0:typeof D=="string"&&(B=B||V.defaultEncoding,B!==V.encoding&&(D=i.from(D,B),B=""),ee=!0),M(this,D,B,!1,ee)},O.prototype.unshift=function(D){return M(this,D,null,!0,!1)};function M(D,B,V,ee,le){o("readableAddChunk",B);var ue=D._readableState;if(B===null)ue.reading=!1,ie(D,ue);else{var ce;if(le||(ce=L(ue,B)),ce)g(D,ce);else if(ue.objectMode||B&&B.length>0)if(typeof B!="string"&&!ue.objectMode&&Object.getPrototypeOf(B)!==i.prototype&&(B=_(B)),ee)ue.endEmitted?g(D,new s):$(D,ue,B,!0);else if(ue.ended)g(D,new w);else{if(ue.destroyed)return!1;ue.reading=!1,ue.decoder&&!V?(B=ue.decoder.write(B),ue.objectMode||B.length!==0?$(D,ue,B,!1):F(D,ue)):$(D,ue,B,!1)}else ee||(ue.reading=!1,F(D,ue))}return!ue.ended&&(ue.length<ue.highWaterMark||ue.length===0)}function $(D,B,V,ee){B.flowing&&B.length===0&&!B.sync?(B.awaitDrain=0,D.emit("data",V)):(B.length+=B.objectMode?1:V.length,ee?B.buffer.unshift(V):B.buffer.push(V),B.needReadable&&ne(D)),F(D,B)}function L(D,B){var V;return!d(B)&&typeof B!="string"&&B!==void 0&&!D.objectMode&&(V=new S("chunk",["string","Buffer","Uint8Array"],B)),V}O.prototype.isPaused=function(){return this._readableState.flowing===!1},O.prototype.setEncoding=function(D){a||(a=eo().StringDecoder);var B=new a(D);this._readableState.decoder=B,this._readableState.encoding=this._readableState.decoder.encoding;for(var V=this._readableState.buffer.head,ee="";V!==null;)ee+=B.write(V.data),V=V.next;return this._readableState.buffer.clear(),ee!==""&&this._readableState.buffer.push(ee),this._readableState.length=ee.length,this};var q=1073741824;function Z(D){return D>=q?D=q:(D--,D|=D>>>1,D|=D>>>2,D|=D>>>4,D|=D>>>8,D|=D>>>16,D++),D}function re(D,B){return D<=0||B.length===0&&B.ended?0:B.objectMode?1:D!==D?B.flowing&&B.length?B.buffer.head.data.length:B.length:(D>B.highWaterMark&&(B.highWaterMark=Z(D)),D<=B.length?D:B.ended?B.length:(B.needReadable=!0,0))}O.prototype.read=function(D){o("read",D),D=parseInt(D,10);var B=this._readableState,V=D;if(D!==0&&(B.emittedReadable=!1),D===0&&B.needReadable&&((B.highWaterMark!==0?B.length>=B.highWaterMark:B.length>0)||B.ended))return o("read: emitReadable",B.length,B.ended),B.length===0&&B.ended?A(this):ne(this),null;if(D=re(D,B),D===0&&B.ended)return B.length===0&&A(this),null;var ee=B.needReadable;o("need readable",ee),(B.length===0||B.length-D<B.highWaterMark)&&(ee=!0,o("length less than watermark",ee)),B.ended||B.reading?(ee=!1,o("reading or ended",ee)):ee&&(o("do read"),B.reading=!0,B.sync=!0,B.length===0&&(B.needReadable=!0),this._read(B.highWaterMark),B.sync=!1,B.reading||(D=re(V,B)));var le;return D>0?le=y(D,B):le=null,le===null?(B.needReadable=B.length<=B.highWaterMark,D=0):(B.length-=D,B.awaitDrain=0),B.length===0&&(B.ended||(B.needReadable=!0),V!==D&&B.ended&&A(this)),le!==null&&this.emit("data",le),le};function ie(D,B){if(o("onEofChunk"),!B.ended){if(B.decoder){var V=B.decoder.end();V&&V.length&&(B.buffer.push(V),B.length+=B.objectMode?1:V.length)}B.ended=!0,B.sync?ne(D):(B.needReadable=!1,B.emittedReadable||(B.emittedReadable=!0,x(D)))}}function ne(D){var B=D._readableState;o("emitReadable",B.needReadable,B.emittedReadable),B.needReadable=!1,B.emittedReadable||(o("emitReadable",B.flowing),B.emittedReadable=!0,be.nextTick(x,D))}function x(D){var B=D._readableState;o("emitReadable_",B.destroyed,B.length,B.ended),!B.destroyed&&(B.length||B.ended)&&(D.emit("readable"),B.emittedReadable=!1),B.needReadable=!B.flowing&&!B.ended&&B.length<=B.highWaterMark,z(D)}function F(D,B){B.readingMore||(B.readingMore=!0,be.nextTick(P,D,B))}function P(D,B){for(;!B.reading&&!B.ended&&(B.length<B.highWaterMark||B.flowing&&B.length===0);){var V=B.length;if(o("maybeReadMore read 0"),D.read(0),V===B.length)break}B.readingMore=!1}O.prototype._read=function(D){g(this,new c("_read()"))},O.prototype.pipe=function(D,B){var V=this,ee=this._readableState;switch(ee.pipesCount){case 0:ee.pipes=D;break;case 1:ee.pipes=[ee.pipes,D];break;default:ee.pipes.push(D);break}ee.pipesCount+=1,o("pipe count=%d opts=%j",ee.pipesCount,B);var le=(!B||B.end!==!1)&&D!==be.stdout&&D!==be.stderr,ue=le?ge:he;ee.endEmitted?be.nextTick(ue):V.once("end",ue),D.on("unpipe",ce);function ce(_e,de){o("onunpipe"),_e===V&&de&&de.hasUnpiped===!1&&(de.hasUnpiped=!0,He())}function ge(){o("onend"),D.end()}var oe=U(V);D.on("drain",oe);var Fe=!1;function He(){o("cleanup"),D.removeListener("close",X),D.removeListener("finish",Q),D.removeListener("drain",oe),D.removeListener("error",Ee),D.removeListener("unpipe",ce),V.removeListener("end",ge),V.removeListener("end",he),V.removeListener("data",Oe),Fe=!0,ee.awaitDrain&&(!D._writableState||D._writableState.needDrain)&&oe()}V.on("data",Oe);function Oe(_e){o("ondata");var de=D.write(_e);o("dest.write",de),de===!1&&((ee.pipesCount===1&&ee.pipes===D||ee.pipesCount>1&&j(ee.pipes,D)!==-1)&&!Fe&&(o("false write response, pause",ee.awaitDrain),ee.awaitDrain++),V.pause())}function Ee(_e){o("onerror",_e),he(),D.removeListener("error",Ee),e(D,"error")===0&&g(D,_e)}k(D,"error",Ee);function X(){D.removeListener("finish",Q),he()}D.once("close",X);function Q(){o("onfinish"),D.removeListener("close",X),he()}D.once("finish",Q);function he(){o("unpipe"),V.unpipe(D)}return D.emit("pipe",V),ee.flowing||(o("pipe resume"),V.resume()),D};function U(D){return function(){var V=D._readableState;o("pipeOnDrain",V.awaitDrain),V.awaitDrain&&V.awaitDrain--,V.awaitDrain===0&&e(D,"data")&&(V.flowing=!0,z(D))}}O.prototype.unpipe=function(D){var B=this._readableState,V={hasUnpiped:!1};if(B.pipesCount===0)return this;if(B.pipesCount===1)return D&&D!==B.pipes?this:(D||(D=B.pipes),B.pipes=null,B.pipesCount=0,B.flowing=!1,D&&D.emit("unpipe",this,V),this);if(!D){var ee=B.pipes,le=B.pipesCount;B.pipes=null,B.pipesCount=0,B.flowing=!1;for(var ue=0;ue<le;ue++)ee[ue].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=j(B.pipes,D);return ce===-1?this:(B.pipes.splice(ce,1),B.pipesCount-=1,B.pipesCount===1&&(B.pipes=B.pipes[0]),D.emit("unpipe",this,V),this)},O.prototype.on=function(D,B){var V=t.prototype.on.call(this,D,B),ee=this._readableState;return D==="data"?(ee.readableListening=this.listenerCount("readable")>0,ee.flowing!==!1&&this.resume()):D==="readable"&&!ee.endEmitted&&!ee.readableListening&&(ee.readableListening=ee.needReadable=!0,ee.flowing=!1,ee.emittedReadable=!1,o("on readable",ee.length,ee.reading),ee.length?ne(this):ee.reading||be.nextTick(H,this)),V},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(D,B){var V=t.prototype.removeListener.call(this,D,B);return D==="readable"&&be.nextTick(G,this),V},O.prototype.removeAllListeners=function(D){var B=t.prototype.removeAllListeners.apply(this,arguments);return(D==="readable"||D===void 0)&&be.nextTick(G,this),B};function G(D){var B=D._readableState;B.readableListening=D.listenerCount("readable")>0,B.resumeScheduled&&!B.paused?B.flowing=!0:D.listenerCount("data")>0&&D.resume()}function H(D){o("readable nexttick read 0"),D.read(0)}O.prototype.resume=function(){var D=this._readableState;return D.flowing||(o("resume"),D.flowing=!D.readableListening,K(this,D)),D.paused=!1,this};function K(D,B){B.resumeScheduled||(B.resumeScheduled=!0,be.nextTick(Y,D,B))}function Y(D,B){o("resume",B.reading),B.reading||D.read(0),B.resumeScheduled=!1,D.emit("resume"),z(D),B.flowing&&!B.reading&&D.read(0)}O.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function z(D){var B=D._readableState;for(o("flow",B.flowing);B.flowing&&D.read()!==null;);}O.prototype.wrap=function(D){var B=this,V=this._readableState,ee=!1;D.on("end",function(){if(o("wrapped end"),V.decoder&&!V.ended){var ce=V.decoder.end();ce&&ce.length&&B.push(ce)}B.push(null)}),D.on("data",function(ce){if(o("wrapped data"),V.decoder&&(ce=V.decoder.write(ce)),!(V.objectMode&&ce==null)&&!(!V.objectMode&&(!ce||!ce.length))){var ge=B.push(ce);ge||(ee=!0,D.pause())}});for(var le in D)this[le]===void 0&&typeof D[le]=="function"&&(this[le]=function(ge){return function(){return D[ge].apply(D,arguments)}}(le));for(var ue=0;ue<E.length;ue++)D.on(E[ue],this.emit.bind(this,E[ue]));return this._read=function(ce){o("wrapped _read",ce),ee&&(ee=!1,D.resume())},this},typeof Symbol=="function"&&(O.prototype[Symbol.asyncIterator]=function(){return h===void 0&&(h=Lu()),h(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(B){this._readableState&&(this._readableState.flowing=B)}}),O._fromList=y,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function y(D,B){if(B.length===0)return null;var V;return B.objectMode?V=B.buffer.shift():!D||D>=B.length?(B.decoder?V=B.buffer.join(""):B.buffer.length===1?V=B.buffer.first():V=B.buffer.concat(B.length),B.buffer.clear()):V=B.buffer.consume(D,B.decoder),V}function A(D){var B=D._readableState;o("endReadable",B.endEmitted),B.endEmitted||(B.ended=!0,be.nextTick(I,B,D))}function I(D,B){if(o("endReadableNT",D.endEmitted,D.length),!D.endEmitted&&D.length===0&&(D.endEmitted=!0,B.readable=!1,B.emit("end"),D.autoDestroy)){var V=B._writableState;(!V||V.autoDestroy&&V.finished)&&B.destroy()}}typeof Symbol=="function"&&(O.from=function(D,B){return p===void 0&&(p=Du()),p(O,D,B)});function j(D,B){for(var V=0,ee=D.length;V<ee;V++)if(D[V]===B)return V;return-1}return on}var an,so;function Ca(){if(so)return an;so=1,an=n;var r=gr().codes,e=r.ERR_METHOD_NOT_IMPLEMENTED,t=r.ERR_MULTIPLE_CALLBACK,i=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,l=r.ERR_TRANSFORM_WITH_LENGTH_0,_=ur();Wt(n,_);function d(m,f){var v=this._transformState;v.transforming=!1;var C=v.writecb;if(C===null)return this.emit("error",new t);v.writechunk=null,v.writecb=null,f!=null&&this.push(f),C(m);var S=this._readableState;S.reading=!1,(S.needReadable||S.length<S.highWaterMark)&&this._read(S.highWaterMark)}function n(m){if(!(this instanceof n))return new n(m);_.call(this,m),this._transformState={afterTransform:d.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,m&&(typeof m.transform=="function"&&(this._transform=m.transform),typeof m.flush=="function"&&(this._flush=m.flush)),this.on("prefinish",o)}function o(){var m=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(f,v){u(m,f,v)}):u(this,null,null)}n.prototype.push=function(m,f){return this._transformState.needTransform=!1,_.prototype.push.call(this,m,f)},n.prototype._transform=function(m,f,v){v(new e("_transform()"))},n.prototype._write=function(m,f,v){var C=this._transformState;if(C.writecb=v,C.writechunk=m,C.writeencoding=f,!C.transforming){var S=this._readableState;(C.needTransform||S.needReadable||S.length<S.highWaterMark)&&this._read(S.highWaterMark)}},n.prototype._read=function(m){var f=this._transformState;f.writechunk!==null&&!f.transforming?(f.transforming=!0,this._transform(f.writechunk,f.writeencoding,f.afterTransform)):f.needTransform=!0},n.prototype._destroy=function(m,f){_.prototype._destroy.call(this,m,function(v){f(v)})};function u(m,f,v){if(f)return m.emit("error",f);if(v!=null&&m.push(v),m._writableState.length)throw new l;if(m._transformState.transforming)throw new i;return m.push(null)}return an}var ln,oo;function Bu(){if(oo)return ln;oo=1,ln=e;var r=Ca();Wt(e,r);function e(t){if(!(this instanceof e))return new e(t);r.call(this,t)}return e.prototype._transform=function(t,i,l){l(null,t)},ln}var cn,ao;function Iu(){if(ao)return cn;ao=1;var r;function e(v){var C=!1;return function(){C||(C=!0,v.apply(void 0,arguments))}}var t=gr().codes,i=t.ERR_MISSING_ARGS,l=t.ERR_STREAM_DESTROYED;function _(v){if(v)throw v}function d(v){return v.setHeader&&typeof v.abort=="function"}function n(v,C,S,w){w=e(w);var c=!1;v.on("close",function(){c=!0}),r===void 0&&(r=Gn()),r(v,{readable:C,writable:S},function(a){if(a)return w(a);c=!0,w()});var s=!1;return function(a){if(!c&&!s){if(s=!0,d(v))return v.abort();if(typeof v.destroy=="function")return v.destroy();w(a||new l("pipe"))}}}function o(v){v()}function u(v,C){return v.pipe(C)}function m(v){return!v.length||typeof v[v.length-1]!="function"?_:v.pop()}function f(){for(var v=arguments.length,C=new Array(v),S=0;S<v;S++)C[S]=arguments[S];var w=m(C);if(Array.isArray(C[0])&&(C=C[0]),C.length<2)throw new i("streams");var c,s=C.map(function(a,h){var p=h<C.length-1,g=h>0;return n(a,p,g,function(E){c||(c=E),E&&s.forEach(o),!p&&(s.forEach(o),w(c))})});return C.reduce(u)}return cn=f,cn}var Pu=ut,Yn=Tr.EventEmitter,xu=Wt;xu(ut,Yn);ut.Readable=Ea();ut.Writable=wa();ut.Duplex=ur();ut.Transform=Ca();ut.PassThrough=Bu();ut.finished=Gn();ut.pipeline=Iu();ut.Stream=ut;function ut(){Yn.call(this)}ut.prototype.pipe=function(r,e){var t=this;function i(m){r.writable&&r.write(m)===!1&&t.pause&&t.pause()}t.on("data",i);function l(){t.readable&&t.resume&&t.resume()}r.on("drain",l),!r._isStdio&&(!e||e.end!==!1)&&(t.on("end",d),t.on("close",n));var _=!1;function d(){_||(_=!0,r.end())}function n(){_||(_=!0,typeof r.destroy=="function"&&r.destroy())}function o(m){if(u(),Yn.listenerCount(this,"error")===0)throw m}t.on("error",o),r.on("error",o);function u(){t.removeListener("data",i),r.removeListener("drain",l),t.removeListener("end",d),t.removeListener("close",n),t.removeListener("error",o),r.removeListener("error",o),t.removeListener("end",u),t.removeListener("close",u),r.removeListener("close",u)}return t.on("end",u),t.on("close",u),r.on("close",u),r.emit("pipe",t),r};var fi={},Or={},Dt={};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.FLAGS=Dt.ERRSTR=void 0;const Mu=Ct;Dt.ERRSTR={PATH_STR:"path must be a string or Buffer",FD:"fd must be a file descriptor",MODE_INT:"mode must be an int",CB:"callback must be a function",UID:"uid must be an unsigned int",GID:"gid must be an unsigned int",LEN:"len must be an integer",ATIME:"atime must be an integer",MTIME:"mtime must be an integer",PREFIX:"filename prefix is required",BUFFER:"buffer must be an instance of Buffer or StaticBuffer",OFFSET:"offset must be an integer",LENGTH:"length must be an integer",POSITION:"position must be an integer"};const{O_RDONLY:lo,O_WRONLY:Pr,O_RDWR:Kt,O_CREAT:kt,O_EXCL:xr,O_TRUNC:Mr,O_APPEND:Fr,O_SYNC:co}=Mu.constants;var ho;(function(r){r[r.r=lo]="r",r[r["r+"]=Kt]="r+",r[r.rs=lo|co]="rs",r[r.sr=r.rs]="sr",r[r["rs+"]=Kt|co]="rs+",r[r["sr+"]=r["rs+"]]="sr+",r[r.w=Pr|kt|Mr]="w",r[r.wx=Pr|kt|Mr|xr]="wx",r[r.xw=r.wx]="xw",r[r["w+"]=Kt|kt|Mr]="w+",r[r["wx+"]=Kt|kt|Mr|xr]="wx+",r[r["xw+"]=r["wx+"]]="xw+",r[r.a=Pr|Fr|kt]="a",r[r.ax=Pr|Fr|kt|xr]="ax",r[r.xa=r.ax]="xa",r[r["a+"]=Kt|Fr|kt]="a+",r[r["ax+"]=Kt|Fr|kt|xr]="ax+",r[r["xa+"]=r["ax+"]]="xa+"})(ho||(Dt.FLAGS=ho={}));var ei={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */ei.exports;(function(r,e){(function(t){var i=e&&!e.nodeType&&e,l=r&&!r.nodeType&&r,_=typeof rt=="object"&&rt;(_.global===_||_.window===_||_.self===_)&&(t=_);var d,n=2147483647,o=36,u=1,m=26,f=38,v=700,C=72,S=128,w="-",c=/^xn--/,s=/[^\x20-\x7E]/,a=/[\x2E\u3002\uFF0E\uFF61]/g,h={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=o-u,g=Math.floor,E=String.fromCharCode,k;function b(P){throw new RangeError(h[P])}function O(P,U){for(var G=P.length,H=[];G--;)H[G]=U(P[G]);return H}function M(P,U){var G=P.split("@"),H="";G.length>1&&(H=G[0]+"@",P=G[1]),P=P.replace(a,".");var K=P.split("."),Y=O(K,U).join(".");return H+Y}function $(P){for(var U=[],G=0,H=P.length,K,Y;G<H;)K=P.charCodeAt(G++),K>=55296&&K<=56319&&G<H?(Y=P.charCodeAt(G++),(Y&64512)==56320?U.push(((K&1023)<<10)+(Y&1023)+65536):(U.push(K),G--)):U.push(K);return U}function L(P){return O(P,function(U){var G="";return U>65535&&(U-=65536,G+=E(U>>>10&1023|55296),U=56320|U&1023),G+=E(U),G}).join("")}function q(P){return P-48<10?P-22:P-65<26?P-65:P-97<26?P-97:o}function Z(P,U){return P+22+75*(P<26)-((U!=0)<<5)}function re(P,U,G){var H=0;for(P=G?g(P/v):P>>1,P+=g(P/U);P>p*m>>1;H+=o)P=g(P/p);return g(H+(p+1)*P/(P+f))}function ie(P){var U=[],G=P.length,H,K=0,Y=S,z=C,y,A,I,j,D,B,V,ee,le;for(y=P.lastIndexOf(w),y<0&&(y=0),A=0;A<y;++A)P.charCodeAt(A)>=128&&b("not-basic"),U.push(P.charCodeAt(A));for(I=y>0?y+1:0;I<G;){for(j=K,D=1,B=o;I>=G&&b("invalid-input"),V=q(P.charCodeAt(I++)),(V>=o||V>g((n-K)/D))&&b("overflow"),K+=V*D,ee=B<=z?u:B>=z+m?m:B-z,!(V<ee);B+=o)le=o-ee,D>g(n/le)&&b("overflow"),D*=le;H=U.length+1,z=re(K-j,H,j==0),g(K/H)>n-Y&&b("overflow"),Y+=g(K/H),K%=H,U.splice(K++,0,Y)}return L(U)}function ne(P){var U,G,H,K,Y,z,y,A,I,j,D,B=[],V,ee,le,ue;for(P=$(P),V=P.length,U=S,G=0,Y=C,z=0;z<V;++z)D=P[z],D<128&&B.push(E(D));for(H=K=B.length,K&&B.push(w);H<V;){for(y=n,z=0;z<V;++z)D=P[z],D>=U&&D<y&&(y=D);for(ee=H+1,y-U>g((n-G)/ee)&&b("overflow"),G+=(y-U)*ee,U=y,z=0;z<V;++z)if(D=P[z],D<U&&++G>n&&b("overflow"),D==U){for(A=G,I=o;j=I<=Y?u:I>=Y+m?m:I-Y,!(A<j);I+=o)ue=A-j,le=o-j,B.push(E(Z(j+ue%le,0))),A=g(ue/le);B.push(E(Z(A,0))),Y=re(G,ee,H==K),G=0,++H}++G,++U}return B.join("")}function x(P){return M(P,function(U){return c.test(U)?ie(U.slice(4).toLowerCase()):U})}function F(P){return M(P,function(U){return s.test(U)?"xn--"+ne(U):U})}if(d={version:"1.4.1",ucs2:{decode:$,encode:L},decode:ie,encode:ne,toASCII:F,toUnicode:x},i&&l)if(r.exports==i)l.exports=d;else for(k in d)d.hasOwnProperty(k)&&(i[k]=d[k]);else t.punycode=d})(rt)})(ei,ei.exports);var Fu=ei.exports;const Nu=xo(Fu);function ju(r,e){return Object.prototype.hasOwnProperty.call(r,e)}var Uu=function(r,e,t,i){e=e||"&",t=t||"=";var l={};if(typeof r!="string"||r.length===0)return l;var _=/\+/g;r=r.split(e);var d=1e3;i&&typeof i.maxKeys=="number"&&(d=i.maxKeys);var n=r.length;d>0&&n>d&&(n=d);for(var o=0;o<n;++o){var u=r[o].replace(_,"%20"),m=u.indexOf(t),f,v,C,S;m>=0?(f=u.substr(0,m),v=u.substr(m+1)):(f=u,v=""),C=decodeURIComponent(f),S=decodeURIComponent(v),ju(l,C)?Hu(l[C])?l[C].push(S):l[C]=[l[C],S]:l[C]=S}return l},Hu=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"},mr=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}},$u=function(r,e,t,i){return e=e||"&",t=t||"=",r===null&&(r=void 0),typeof r=="object"?uo(qu(r),function(l){var _=encodeURIComponent(mr(l))+t;return Wu(r[l])?uo(r[l],function(d){return _+encodeURIComponent(mr(d))}).join(e):_+encodeURIComponent(mr(r[l]))}).join(e):i?encodeURIComponent(mr(i))+t+encodeURIComponent(mr(r)):""},Wu=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function uo(r,e){if(r.map)return r.map(e);for(var t=[],i=0;i<r.length;i++)t.push(e(r[i],i));return t}var qu=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e},Ra,Aa,zu=Aa=Uu,Vu=Ra=$u;function Ku(r){return encodeURIComponent(r)}function Gu(r){return decodeURIComponent(r)}var Yu={decode:zu,encode:Vu,parse:Aa,stringify:Ra,escape:Ku,unescape:Gu},Xu={isString:function(r){return typeof r=="string"},isObject:function(r){return typeof r=="object"&&r!==null},isNull:function(r){return r===null},isNullOrUndefined:function(r){return r==null}},Ju=Nu,vt=Xu,Zu=kr,Qu=ff,Ta=df,ef=uf,tf=ct;function ct(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var rf=/^([a-z0-9.+-]+:)/i,nf=/:[0-9]*$/,sf=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,of=["<",">",'"',"`"," ","\r",`
`,"	"],af=["{","}","|","\\","^","`"].concat(of),Dn=["'"].concat(af),fo=["%","/","?",";","#"].concat(Dn),_o=["/","?","#"],lf=255,po=/^[+a-z0-9A-Z_-]{0,63}$/,cf=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,hf={javascript:!0,"javascript:":!0},Bn={javascript:!0,"javascript:":!0},or={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},In=Yu;function kr(r,e,t){if(r&&vt.isObject(r)&&r instanceof ct)return r;var i=new ct;return i.parse(r,e,t),i}ct.prototype.parse=function(r,e,t){if(!vt.isString(r))throw new TypeError("Parameter 'url' must be a string, not "+typeof r);var i=r.indexOf("?"),l=i!==-1&&i<r.indexOf("#")?"?":"#",_=r.split(l),d=/\\/g;_[0]=_[0].replace(d,"/"),r=_.join(l);var n=r;if(n=n.trim(),!t&&r.split("#").length===1){var o=sf.exec(n);if(o)return this.path=n,this.href=n,this.pathname=o[1],o[2]?(this.search=o[2],e?this.query=In.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=rf.exec(n);if(u){u=u[0];var m=u.toLowerCase();this.protocol=m,n=n.substr(u.length)}if(t||u||n.match(/^\/\/[^@\/]+@[^@\/]+/)){var f=n.substr(0,2)==="//";f&&!(u&&Bn[u])&&(n=n.substr(2),this.slashes=!0)}if(!Bn[u]&&(f||u&&!or[u])){for(var v=-1,C=0;C<_o.length;C++){var S=n.indexOf(_o[C]);S!==-1&&(v===-1||S<v)&&(v=S)}var w,c;v===-1?c=n.lastIndexOf("@"):c=n.lastIndexOf("@",v),c!==-1&&(w=n.slice(0,c),n=n.slice(c+1),this.auth=decodeURIComponent(w)),v=-1;for(var C=0;C<fo.length;C++){var S=n.indexOf(fo[C]);S!==-1&&(v===-1||S<v)&&(v=S)}v===-1&&(v=n.length),this.host=n.slice(0,v),n=n.slice(v),this.parseHost(),this.hostname=this.hostname||"";var s=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!s)for(var a=this.hostname.split(/\./),C=0,h=a.length;C<h;C++){var p=a[C];if(p&&!p.match(po)){for(var g="",E=0,k=p.length;E<k;E++)p.charCodeAt(E)>127?g+="x":g+=p[E];if(!g.match(po)){var b=a.slice(0,C),O=a.slice(C+1),M=p.match(cf);M&&(b.push(M[1]),O.unshift(M[2])),O.length&&(n="/"+O.join(".")+n),this.hostname=b.join(".");break}}}this.hostname.length>lf?this.hostname="":this.hostname=this.hostname.toLowerCase(),s||(this.hostname=Ju.toASCII(this.hostname));var $=this.port?":"+this.port:"",L=this.hostname||"";this.host=L+$,this.href+=this.host,s&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),n[0]!=="/"&&(n="/"+n))}if(!hf[m])for(var C=0,h=Dn.length;C<h;C++){var q=Dn[C];if(n.indexOf(q)!==-1){var Z=encodeURIComponent(q);Z===q&&(Z=escape(q)),n=n.split(q).join(Z)}}var re=n.indexOf("#");re!==-1&&(this.hash=n.substr(re),n=n.slice(0,re));var ie=n.indexOf("?");if(ie!==-1?(this.search=n.substr(ie),this.query=n.substr(ie+1),e&&(this.query=In.parse(this.query)),n=n.slice(0,ie)):e&&(this.search="",this.query={}),n&&(this.pathname=n),or[m]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var $=this.pathname||"",ne=this.search||"";this.path=$+ne}return this.href=this.format(),this};function uf(r){return vt.isString(r)&&(r=kr(r)),r instanceof ct?r.format():ct.prototype.format.call(r)}ct.prototype.format=function(){var r=this.auth||"";r&&(r=encodeURIComponent(r),r=r.replace(/%3A/i,":"),r+="@");var e=this.protocol||"",t=this.pathname||"",i=this.hash||"",l=!1,_="";this.host?l=r+this.host:this.hostname&&(l=r+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(l+=":"+this.port)),this.query&&vt.isObject(this.query)&&Object.keys(this.query).length&&(_=In.stringify(this.query));var d=this.search||_&&"?"+_||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||or[e])&&l!==!1?(l="//"+(l||""),t&&t.charAt(0)!=="/"&&(t="/"+t)):l||(l=""),i&&i.charAt(0)!=="#"&&(i="#"+i),d&&d.charAt(0)!=="?"&&(d="?"+d),t=t.replace(/[?#]/g,function(n){return encodeURIComponent(n)}),d=d.replace("#","%23"),e+l+t+d+i};function ff(r,e){return kr(r,!1,!0).resolve(e)}ct.prototype.resolve=function(r){return this.resolveObject(kr(r,!1,!0)).format()};function df(r,e){return r?kr(r,!1,!0).resolveObject(e):e}ct.prototype.resolveObject=function(r){if(vt.isString(r)){var e=new ct;e.parse(r,!1,!0),r=e}for(var t=new ct,i=Object.keys(this),l=0;l<i.length;l++){var _=i[l];t[_]=this[_]}if(t.hash=r.hash,r.href==="")return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var d=Object.keys(r),n=0;n<d.length;n++){var o=d[n];o!=="protocol"&&(t[o]=r[o])}return or[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!or[r.protocol]){for(var u=Object.keys(r),m=0;m<u.length;m++){var f=u[m];t[f]=r[f]}return t.href=t.format(),t}if(t.protocol=r.protocol,!r.host&&!Bn[r.protocol]){for(var h=(r.pathname||"").split("/");h.length&&!(r.host=h.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),h[0]!==""&&h.unshift(""),h.length<2&&h.unshift(""),t.pathname=h.join("/")}else t.pathname=r.pathname;if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var v=t.pathname||"",C=t.search||"";t.path=v+C}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var S=t.pathname&&t.pathname.charAt(0)==="/",w=r.host||r.pathname&&r.pathname.charAt(0)==="/",c=w||S||t.host&&r.pathname,s=c,a=t.pathname&&t.pathname.split("/")||[],h=r.pathname&&r.pathname.split("/")||[],p=t.protocol&&!or[t.protocol];if(p&&(t.hostname="",t.port=null,t.host&&(a[0]===""?a[0]=t.host:a.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(h[0]===""?h[0]=r.host:h.unshift(r.host)),r.host=null),c=c&&(h[0]===""||a[0]==="")),w)t.host=r.host||r.host===""?r.host:t.host,t.hostname=r.hostname||r.hostname===""?r.hostname:t.hostname,t.search=r.search,t.query=r.query,a=h;else if(h.length)a||(a=[]),a.pop(),a=a.concat(h),t.search=r.search,t.query=r.query;else if(!vt.isNullOrUndefined(r.search)){if(p){t.hostname=t.host=a.shift();var g=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;g&&(t.auth=g.shift(),t.host=t.hostname=g.shift())}return t.search=r.search,t.query=r.query,(!vt.isNull(t.pathname)||!vt.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t}if(!a.length)return t.pathname=null,t.search?t.path="/"+t.search:t.path=null,t.href=t.format(),t;for(var E=a.slice(-1)[0],k=(t.host||r.host||a.length>1)&&(E==="."||E==="..")||E==="",b=0,O=a.length;O>=0;O--)E=a[O],E==="."?a.splice(O,1):E===".."?(a.splice(O,1),b++):b&&(a.splice(O,1),b--);if(!c&&!s)for(;b--;b)a.unshift("..");c&&a[0]!==""&&(!a[0]||a[0].charAt(0)!=="/")&&a.unshift(""),k&&a.join("/").substr(-1)!=="/"&&a.push("");var M=a[0]===""||a[0]&&a[0].charAt(0)==="/";if(p){t.hostname=t.host=M?"":a.length?a.shift():"";var g=t.host&&t.host.indexOf("@")>0?t.host.split("@"):!1;g&&(t.auth=g.shift(),t.host=t.hostname=g.shift())}return c=c||t.host&&a.length,c&&!M&&a.unshift(""),a.length?t.pathname=a.join("/"):(t.pathname=null,t.path=null),(!vt.isNull(t.pathname)||!vt.isNull(t.search))&&(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t};ct.prototype.parseHost=function(){var r=this.host,e=nf.exec(r);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),r=r.substr(0,r.length-e.length)),r&&(this.hostname=r)};function _f(r,e){for(var t=0,i=r.length-1;i>=0;i--){var l=r[i];l==="."?r.splice(i,1):l===".."?(r.splice(i,1),t++):t&&(r.splice(i,1),t--)}if(e)for(;t--;t)r.unshift("..");return r}function pf(){for(var r="",e=!1,t=arguments.length-1;t>=-1&&!e;t--){var i=t>=0?arguments[t]:"/";if(typeof i!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!i)continue;r=i+"/"+r,e=i.charAt(0)==="/"}return r=_f(gf(r.split("/"),function(l){return!!l}),!e).join("/"),(e?"/":"")+r||"."}function gf(r,e){if(r.filter)return r.filter(e);for(var t=[],i=0;i<r.length;i++)e(r[i],i,r)&&t.push(r[i]);return t}var Oa=function(r){function e(){var i=this||self;return delete r.prototype.__magic__,i}if(typeof globalThis=="object")return globalThis;if(this)return e();r.defineProperty(r.prototype,"__magic__",{configurable:!0,get:e});var t=__magic__;return t}(Object),mf=ef,ka=Zu,La=Qu,Da=tf,Bt=Oa.URL,Ba=Oa.URLSearchParams,vf=/%/g,yf=/\\/g,bf=/\n/g,Sf=/\r/g,wf=/\t/g,Ef=47;function Cf(r){var e=r??null;return!!(e!==null&&(e!=null&&e.href)&&(e!=null&&e.origin))}function Rf(r){if(r.hostname!=="")throw new TypeError('File URL host must be "localhost" or empty on browser');for(var e=r.pathname,t=0;t<e.length;t++)if(e[t]==="%"){var i=e.codePointAt(t+2)|32;if(e[t+1]==="2"&&i===102)throw new TypeError("File URL path must not include encoded / characters")}return decodeURIComponent(e)}function Af(r){return r.includes("%")&&(r=r.replace(vf,"%25")),r.includes("\\")&&(r=r.replace(yf,"%5C")),r.includes(`
`)&&(r=r.replace(bf,"%0A")),r.includes("\r")&&(r=r.replace(Sf,"%0D")),r.includes("	")&&(r=r.replace(wf,"%09")),r}var Ia=function(e){if(typeof e>"u")throw new TypeError('The "domain" argument must be specified');return new Bt("http://"+e).hostname},Pa=function(e){if(typeof e>"u")throw new TypeError('The "domain" argument must be specified');return new Bt("http://"+e).hostname},xa=function(e){var t=new Bt("file://"),i=pf(e),l=e.charCodeAt(e.length-1);return l===Ef&&i[i.length-1]!=="/"&&(i+="/"),t.pathname=Af(i),t},Ma=function(e){if(!Cf(e)&&typeof e!="string")throw new TypeError('The "path" argument must be of type string or an instance of URL. Received type '+typeof e+" ("+e+")");var t=new Bt(e);if(t.protocol!=="file:")throw new TypeError("The URL must be of scheme file");return Rf(t)},Fa=function(e,t){var i,l,_;if(t===void 0&&(t={}),!(e instanceof Bt))return mf(e);if(typeof t!="object"||t===null)throw new TypeError('The "options" argument must be of type object.');var d=(i=t.auth)!=null?i:!0,n=(l=t.fragment)!=null?l:!0,o=(_=t.search)!=null?_:!0,u=new Bt(e.toString());return d||(u.username="",u.password=""),n||(u.hash=""),o||(u.search=""),u.toString()},Tf={format:Fa,parse:ka,resolve:La,resolveObject:Ta,Url:Da,URL:Bt,URLSearchParams:Ba,domainToASCII:Ia,domainToUnicode:Pa,pathToFileURL:xa,fileURLToPath:Ma};const Of=Object.freeze(Object.defineProperty({__proto__:null,URL:Bt,URLSearchParams:Ba,Url:Da,default:Tf,domainToASCII:Ia,domainToUnicode:Pa,fileURLToPath:Ma,format:Fa,parse:ka,pathToFileURL:xa,resolve:La,resolveObject:Ta},Symbol.toStringTag,{value:"Module"})),kf=Jl(Of);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.unixify=r.bufferToEncoding=r.getWriteSyncArgs=r.getWriteArgs=r.bufToUint8=r.dataToBuffer=r.validateFd=r.isFd=r.flagsToNumber=r.genRndStr6=r.createError=r.pathToFilename=r.nullCheck=r.modeToNumber=r.validateCallback=r.promisify=r.isWin=void 0;const e=Dt,t=Mn,i=cr,l=Cr,_=cr,d=ui;r.isWin=be.platform==="win32";function n(y,A,I=j=>j){return(...j)=>new Promise((D,B)=>{y[A].bind(y)(...j,(V,ee)=>V?B(V):D(I(ee)))})}r.promisify=n;function o(y){if(typeof y!="function")throw TypeError(e.ERRSTR.CB);return y}r.validateCallback=o;function u(y,A){if(typeof y=="number")return y;if(typeof y=="string")return parseInt(y,8);if(A)return m(A)}function m(y,A){const I=u(y,A);if(typeof I!="number"||isNaN(I))throw new TypeError(e.ERRSTR.MODE_INT);return I}r.modeToNumber=m;function f(y,A){if((""+y).indexOf("\0")!==-1){const I=new Error("Path must be a string without null bytes");if(I.code="ENOENT",typeof A!="function")throw I;return(0,d.default)(()=>{A(I)}),!1}return!0}r.nullCheck=f;function v(y){if(y.hostname!=="")throw new t.TypeError("ERR_INVALID_FILE_URL_HOST",be.platform);const A=y.pathname;for(let I=0;I<A.length;I++)if(A[I]==="%"){const j=A.codePointAt(I+2)|32;if(A[I+1]==="2"&&j===102)throw new t.TypeError("ERR_INVALID_FILE_URL_PATH","must not include encoded / characters")}return decodeURIComponent(A)}function C(y){if(typeof y!="string"&&!i.Buffer.isBuffer(y)){try{if(!(y instanceof kf.URL))throw new TypeError(e.ERRSTR.PATH_STR)}catch{throw new TypeError(e.ERRSTR.PATH_STR)}y=v(y)}const A=String(y);return f(A),A}r.pathToFilename=C;const S="ENOENT",w="EBADF",c="EINVAL",s="EPERM",a="EPROTO",h="EEXIST",p="ENOTDIR",g="EMFILE",E="EACCES",k="EISDIR",b="ENOTEMPTY",O="ENOSYS",M="ERR_FS_EISDIR",$="ERR_OUT_OF_RANGE";function L(y,A="",I="",j=""){let D="";switch(I&&(D=` '${I}'`),j&&(D+=` -> '${j}'`),y){case S:return`ENOENT: no such file or directory, ${A}${D}`;case w:return`EBADF: bad file descriptor, ${A}${D}`;case c:return`EINVAL: invalid argument, ${A}${D}`;case s:return`EPERM: operation not permitted, ${A}${D}`;case a:return`EPROTO: protocol error, ${A}${D}`;case h:return`EEXIST: file already exists, ${A}${D}`;case p:return`ENOTDIR: not a directory, ${A}${D}`;case k:return`EISDIR: illegal operation on a directory, ${A}${D}`;case E:return`EACCES: permission denied, ${A}${D}`;case b:return`ENOTEMPTY: directory not empty, ${A}${D}`;case g:return`EMFILE: too many open files, ${A}${D}`;case O:return`ENOSYS: function not implemented, ${A}${D}`;case M:return`[ERR_FS_EISDIR]: Path is a directory: ${A} returned EISDIR (is a directory) ${I}`;case $:return`[ERR_OUT_OF_RANGE]: value out of range, ${A}${D}`;default:return`${y}: error occurred, ${A}${D}`}}function q(y,A="",I="",j="",D=Error){const B=new D(L(y,A,I,j));return B.code=y,I&&(B.path=I),B}r.createError=q;function Z(){const y=(Math.random()+1).toString(36).substring(2,8);return y.length===6?y:Z()}r.genRndStr6=Z;function re(y){if(typeof y=="number")return y;if(typeof y=="string"){const A=e.FLAGS[y];if(typeof A<"u")return A}throw new t.TypeError("ERR_INVALID_OPT_VALUE","flags",y)}r.flagsToNumber=re;function ie(y){return y>>>0===y}r.isFd=ie;function ne(y){if(!ie(y))throw TypeError(e.ERRSTR.FD)}r.validateFd=ne;function x(y,A=l.ENCODING_UTF8){return i.Buffer.isBuffer(y)?y:y instanceof Uint8Array?(0,_.bufferFrom)(y):(0,_.bufferFrom)(String(y),A)}r.dataToBuffer=x;const F=y=>new Uint8Array(y.buffer,y.byteOffset,y.byteLength);r.bufToUint8=F;const P=(y,A,I,j,D,B)=>{ne(y);let V=0,ee,le=null,ue,ce;const ge=typeof A,oe=typeof I,Fe=typeof j,He=typeof D;ge!=="string"?oe==="function"?ce=I:Fe==="function"?(V=I|0,ce=j):He==="function"?(V=I|0,ee=j,ce=D):(V=I|0,ee=j,le=D,ce=B):oe==="function"?ce=I:Fe==="function"?(le=I,ce=j):He==="function"&&(le=I,ue=j,ce=D);const Oe=x(A,ue);ge!=="string"?typeof ee>"u"&&(ee=Oe.length):(V=0,ee=Oe.length);const Ee=o(ce);return[y,ge==="string",Oe,V,ee,le,Ee]};r.getWriteArgs=P;const U=(y,A,I,j,D)=>{ne(y);let B,V,ee,le;const ue=typeof A!="string";ue?(V=(I||0)|0,ee=j,le=D):(le=I,B=j);const ce=x(A,B);return ue?typeof ee>"u"&&(ee=ce.length):(V=0,ee=ce.length),[y,ce,V||0,ee,le]};r.getWriteSyncArgs=U;function G(y,A){return!A||A==="buffer"?y:y.toString(A)}r.bufferToEncoding=G;const H=(y,A)=>{let I=y[A];return A>0&&(I==="/"||r.isWin&&I==="\\")},K=y=>{let A=y.length-1;if(A<2)return y;for(;H(y,A);)A--;return y.substr(0,A+1)},Y=(y,A)=>{if(typeof y!="string")throw new TypeError("expected a string");return y=y.replace(/[\\\/]+/g,"/"),A!==!1&&(y=K(y)),y},z=(y,A=!0)=>r.isWin?(y=Y(y,A),y.replace(/^([a-zA-Z]+:|\.\/)/,"")):y;r.unixify=z})(Or);Object.defineProperty(fi,"__esModule",{value:!0});fi.FileHandle=void 0;const it=Or;class Lf{constructor(e,t){this.fs=e,this.fd=t}appendFile(e,t){return(0,it.promisify)(this.fs,"appendFile")(this.fd,e,t)}chmod(e){return(0,it.promisify)(this.fs,"fchmod")(this.fd,e)}chown(e,t){return(0,it.promisify)(this.fs,"fchown")(this.fd,e,t)}close(){return(0,it.promisify)(this.fs,"close")(this.fd)}datasync(){return(0,it.promisify)(this.fs,"fdatasync")(this.fd)}read(e,t,i,l){return(0,it.promisify)(this.fs,"read",_=>({bytesRead:_,buffer:e}))(this.fd,e,t,i,l)}readv(e,t){return(0,it.promisify)(this.fs,"readv",i=>({bytesRead:i,buffers:e}))(this.fd,e,t)}readFile(e){return(0,it.promisify)(this.fs,"readFile")(this.fd,e)}stat(e){return(0,it.promisify)(this.fs,"fstat")(this.fd,e)}sync(){return(0,it.promisify)(this.fs,"fsync")(this.fd)}truncate(e){return(0,it.promisify)(this.fs,"ftruncate")(this.fd,e)}utimes(e,t){return(0,it.promisify)(this.fs,"futimes")(this.fd,e,t)}write(e,t,i,l){return(0,it.promisify)(this.fs,"write",_=>({bytesWritten:_,buffer:e}))(this.fd,e,t,i,l)}writev(e,t){return(0,it.promisify)(this.fs,"writev",i=>({bytesWritten:i,buffers:e}))(this.fd,e,t)}writeFile(e,t){return(0,it.promisify)(this.fs,"writeFile")(this.fd,e,t)}}fi.FileHandle=Lf;var di={};Object.defineProperty(di,"__esModule",{value:!0});di.FsPromises=void 0;const Me=Or,Df=Ct;class Bf{constructor(e,t){this.fs=e,this.FileHandle=t,this.constants=Df.constants,this.cp=(0,Me.promisify)(this.fs,"cp"),this.opendir=(0,Me.promisify)(this.fs,"opendir"),this.statfs=(0,Me.promisify)(this.fs,"statfs"),this.lutimes=(0,Me.promisify)(this.fs,"lutimes"),this.access=(0,Me.promisify)(this.fs,"access"),this.chmod=(0,Me.promisify)(this.fs,"chmod"),this.chown=(0,Me.promisify)(this.fs,"chown"),this.copyFile=(0,Me.promisify)(this.fs,"copyFile"),this.lchmod=(0,Me.promisify)(this.fs,"lchmod"),this.lchown=(0,Me.promisify)(this.fs,"lchown"),this.link=(0,Me.promisify)(this.fs,"link"),this.lstat=(0,Me.promisify)(this.fs,"lstat"),this.mkdir=(0,Me.promisify)(this.fs,"mkdir"),this.mkdtemp=(0,Me.promisify)(this.fs,"mkdtemp"),this.readdir=(0,Me.promisify)(this.fs,"readdir"),this.readlink=(0,Me.promisify)(this.fs,"readlink"),this.realpath=(0,Me.promisify)(this.fs,"realpath"),this.rename=(0,Me.promisify)(this.fs,"rename"),this.rmdir=(0,Me.promisify)(this.fs,"rmdir"),this.rm=(0,Me.promisify)(this.fs,"rm"),this.stat=(0,Me.promisify)(this.fs,"stat"),this.symlink=(0,Me.promisify)(this.fs,"symlink"),this.truncate=(0,Me.promisify)(this.fs,"truncate"),this.unlink=(0,Me.promisify)(this.fs,"unlink"),this.utimes=(0,Me.promisify)(this.fs,"utimes"),this.readFile=(i,l)=>(0,Me.promisify)(this.fs,"readFile")(i instanceof this.FileHandle?i.fd:i,l),this.appendFile=(i,l,_)=>(0,Me.promisify)(this.fs,"appendFile")(i instanceof this.FileHandle?i.fd:i,l,_),this.open=(i,l="r",_)=>(0,Me.promisify)(this.fs,"open",d=>new this.FileHandle(this.fs,d))(i,l,_),this.writeFile=(i,l,_)=>(0,Me.promisify)(this.fs,"writeFile")(i instanceof this.FileHandle?i.fd:i,l,_),this.watch=()=>{throw new Error("Not implemented")}}}di.FsPromises=Bf;var Na={},_i={};Object.defineProperty(_i,"__esModule",{value:!0});_i.printTree=void 0;const If=(r="",e)=>{e=e.filter(Boolean);let t="";for(let i=0;i<e.length;i++){const l=i>=e.length-1,_=e[i];if(!_)continue;const d=_(r+`${l?" ":"â"}  `);t+=`
${r}${d?l?"ââ":"ââ":"â "} ${d}`}return t};_i.printTree=If;var tt={};Object.defineProperty(tt,"__esModule",{value:!0});tt.newNotAllowedError=tt.newTypeMismatchError=tt.newNotFoundError=tt.assertCanWrite=tt.assertName=tt.basename=tt.ctx=void 0;const Pf=(r={})=>Object.assign({separator:"/",syncHandleAllowed:!1,mode:"read"},r);tt.ctx=Pf;const xf=(r,e)=>{r[r.length-1]===e&&(r=r.slice(0,-1));const t=r.lastIndexOf(e);return t===-1?r:r.slice(t+1)};tt.basename=xf;const Mf=/^(\.{1,2})$|^(.*([\/\\]).*)$/,Ff=(r,e,t)=>{if(!r||Mf.test(r))throw new TypeError(`Failed to execute '${e}' on '${t}': Name is not allowed.`)};tt.assertName=Ff;const Nf=r=>{if(r!=="readwrite")throw new DOMException("The request is not allowed by the user agent or the platform in the current context.","NotAllowedError")};tt.assertCanWrite=Nf;const jf=()=>new DOMException("A requested file or directory could not be found at the time an operation was processed.","NotFoundError");tt.newNotFoundError=jf;const Uf=()=>new DOMException("The path supplied exists, but was not an entry of requested type.","TypeMismatchError");tt.newTypeMismatchError=Uf;const Hf=()=>new DOMException("Permission not granted.","NotAllowedError");tt.newNotAllowedError=Hf;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.toTreeSync=void 0;const e=_i,t=tt,i=(l,_={})=>{var d;const n=_.separator||"/";let o=_.dir||n;o[o.length-1]!==n&&(o+=n);const u=_.tab||"",m=(d=_.depth)!==null&&d!==void 0?d:10;let f=" (...)";if(m>0){const C=l.readdirSync(o,{withFileTypes:!0});f=(0,e.printTree)(u,C.map(S=>w=>S.isDirectory()?(0,r.toTreeSync)(l,{dir:o+S.name,depth:m-1,tab:w}):S.isSymbolicLink()?""+S.name+" â "+l.readlinkSync(o+S.name):""+S.name))}return(0,t.basename)(o,n)+n+f};r.toTreeSync=i})(Na);var ja={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.getWriteFileOptions=r.writeFileDefaults=r.getRealpathOptsAndCb=r.getRealpathOptions=r.getStatOptsAndCb=r.getStatOptions=r.getAppendFileOptsAndCb=r.getAppendFileOpts=r.getReaddirOptsAndCb=r.getReaddirOptions=r.getReadFileOptions=r.getRmOptsAndCb=r.getRmdirOptions=r.getDefaultOptsAndCb=r.getDefaultOpts=r.optsDefaults=r.optsAndCbGenerator=r.optsGenerator=r.getOptions=r.getMkdirOptions=void 0;const e=Dt,t=Cr,i=Or,l={mode:511,recursive:!1},_=p=>typeof p=="number"?Object.assign({},l,{mode:p}):Object.assign({},l,p);r.getMkdirOptions=_;const d=p=>`Expected options to be either an object or a string, but got ${p} instead`;function n(p,g){let E;if(g){const k=typeof g;switch(k){case"string":E=Object.assign({},p,{encoding:g});break;case"object":E=Object.assign({},p,g);break;default:throw TypeError(d(k))}}else return p;return E.encoding!=="buffer"&&(0,t.assertEncoding)(E.encoding),E}r.getOptions=n;function o(p){return g=>n(p,g)}r.optsGenerator=o;function u(p){return(g,E)=>typeof g=="function"?[p(),g]:[p(g),(0,i.validateCallback)(E)]}r.optsAndCbGenerator=u,r.optsDefaults={encoding:"utf8"},r.getDefaultOpts=o(r.optsDefaults),r.getDefaultOptsAndCb=u(r.getDefaultOpts);const m={recursive:!1},f=p=>Object.assign({},m,p);r.getRmdirOptions=f;const v=o(r.optsDefaults);r.getRmOptsAndCb=u(v);const C={flag:"r"};r.getReadFileOptions=o(C);const S={encoding:"utf8",recursive:!1,withFileTypes:!1};r.getReaddirOptions=o(S),r.getReaddirOptsAndCb=u(r.getReaddirOptions);const w={encoding:"utf8",mode:438,flag:e.FLAGS[e.FLAGS.a]};r.getAppendFileOpts=o(w),r.getAppendFileOptsAndCb=u(r.getAppendFileOpts);const c={bigint:!1},s=(p={})=>Object.assign({},c,p);r.getStatOptions=s;const a=(p,g)=>typeof p=="function"?[(0,r.getStatOptions)(),p]:[(0,r.getStatOptions)(p),(0,i.validateCallback)(g)];r.getStatOptsAndCb=a;const h=r.optsDefaults;r.getRealpathOptions=o(h),r.getRealpathOptsAndCb=u(r.getRealpathOptions),r.writeFileDefaults={encoding:"utf8",mode:438,flag:e.FLAGS[e.FLAGS.w]},r.getWriteFileOptions=o(r.writeFileDefaults)})(ja);Object.defineProperty(et,"__esModule",{value:!0});et.FSWatcher=et.StatWatcher=et.Volume=et.toUnixTimestamp=et.dataToStr=et.pathToSteps=et.filenameToSteps=void 0;const yr=vu,hn=ca,un=$t,$f=dr,It=cr,Gt=Vn,pi=ui,Ua=pr,Wf=Kn,gi=Pu,qf=Ct,Ha=Tr,Ht=Cr,zf=fi,$a=bt,Vf=di,Kf=Na,br=Dt,xe=ja,te=Or,Gf=yr.resolve,{O_RDONLY:go,O_WRONLY:mo,O_RDWR:vo,O_CREAT:yo,O_EXCL:Yf,O_TRUNC:Xf,O_APPEND:Jf,O_DIRECTORY:Zf,O_SYMLINK:bo,F_OK:So,COPYFILE_EXCL:Qf,COPYFILE_FICLONE_FORCE:ed}=qf.constants,{sep:pt,relative:Sr,join:td,dirname:rd}=yr.posix?yr.posix:yr,id=128,nd="EPERM",Ye="ENOENT",fn="EBADF",sd="EINVAL",Ft="EEXIST",Yt="ENOTDIR",od="EMFILE",ad="EACCES",wo="EISDIR",ld="ENOTEMPTY",cd="ENOSYS",hd="ERR_FS_EISDIR",ud="ERR_OUT_OF_RANGE";let Er=(r,e=Ua.default.cwd())=>Gf(e,r);if(te.isWin){const r=Er;Er=(e,t)=>(0,te.unixify)(r(e,t))}function Ge(r,e){const i=Er(r,e).substring(1);return i?i.split(pt):[]}et.filenameToSteps=Ge;function fd(r){return Ge((0,te.pathToFilename)(r))}et.pathToSteps=fd;function dd(r,e=Ht.ENCODING_UTF8){return It.Buffer.isBuffer(r)?r.toString(e):r instanceof Uint8Array?(0,It.bufferFrom)(r).toString(e):String(r)}et.dataToStr=dd;function At(r){if(typeof r=="string"&&+r==r)return+r;if(r instanceof Date)return r.getTime()/1e3;if(isFinite(r))return r<0?Date.now()/1e3:r;throw new Error("Cannot parse time: "+r)}et.toUnixTimestamp=At;function Xt(r){if(typeof r!="number")throw TypeError(br.ERRSTR.UID)}function Jt(r){if(typeof r!="number")throw TypeError(br.ERRSTR.GID)}function _d(r){const e={};function t(i,l){for(const _ in l){const d=l[_],n=td(i,_);typeof d=="string"||d instanceof It.Buffer?e[n]=d:typeof d=="object"&&d!==null&&Object.keys(d).length>0?t(n,d):e[n]=null}}return t("",r),e}const Rt=()=>{throw new Error("Not implemented")};class ar{static fromJSON(e,t){const i=new ar;return i.fromJSON(e,t),i}static fromNestedJSON(e,t){const i=new ar;return i.fromNestedJSON(e,t),i}get promises(){if(this.promisesApi===null)throw new Error("Promise is not supported in this environment.");return this.promisesApi}constructor(e={}){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.maxFiles=1e4,this.openFiles=0,this.promisesApi=new Vf.FsPromises(this,zf.FileHandle),this.statWatchers={},this.cpSync=Rt,this.lutimesSync=Rt,this.statfsSync=Rt,this.opendirSync=Rt,this.cp=Rt,this.lutimes=Rt,this.statfs=Rt,this.openAsBlob=Rt,this.opendir=Rt,this.props=Object.assign({Node:hn.Node,Link:hn.Link,File:hn.File},e);const t=this.createLink();t.setNode(this.createNode(!0));const i=this;this.StatWatcher=class extends Wa{constructor(){super(i)}};const l=St;this.ReadStream=class extends l{constructor(...d){super(i,...d)}};const _=ft;this.WriteStream=class extends _{constructor(...d){super(i,...d)}},this.FSWatcher=class extends za{constructor(){super(i)}},t.setChild(".",t),t.getNode().nlink++,t.setChild("..",t),t.getNode().nlink++,this.root=t}createLink(e,t,i=!1,l){if(!e)return new this.props.Link(this,null,"");if(!t)throw new Error("createLink: name cannot be empty");return e.createChild(t,this.createNode(i,l))}deleteLink(e){const t=e.parent;return t?(t.deleteChild(e),!0):!1}newInoNumber(){const e=this.releasedInos.pop();return e||(this.ino=(this.ino+1)%4294967295,this.ino)}newFdNumber(){const e=this.releasedFds.pop();return typeof e=="number"?e:ar.fd--}createNode(e=!1,t){const i=new this.props.Node(this.newInoNumber(),t);return e&&i.setIsDirectory(),this.inodes[i.ino]=i,i}deleteNode(e){e.del(),delete this.inodes[e.ino],this.releasedInos.push(e.ino)}getLink(e){return this.root.walk(e)}getLinkOrThrow(e,t){const i=Ge(e),l=this.getLink(i);if(!l)throw(0,te.createError)(Ye,t,e);return l}getResolvedLink(e){let t=typeof e=="string"?Ge(e):e,i=this.root,l=0;for(;l<t.length;){const _=t[l];if(i=i.getChild(_),!i)return null;const d=i.getNode();if(d.isSymlink()){t=d.symlink.concat(t.slice(l+1)),i=this.root,l=0;continue}l++}return i}getResolvedLinkOrThrow(e,t){const i=this.getResolvedLink(e);if(!i)throw(0,te.createError)(Ye,t,e);return i}resolveSymlinks(e){return this.getResolvedLink(e.steps.slice(1))}getLinkAsDirOrThrow(e,t){const i=this.getLinkOrThrow(e,t);if(!i.getNode().isDirectory())throw(0,te.createError)(Yt,t,e);return i}getLinkParent(e){return this.root.walk(e,e.length-1)}getLinkParentAsDirOrThrow(e,t){const i=e instanceof Array?e:Ge(e),l=this.getLinkParent(i);if(!l)throw(0,te.createError)(Ye,t,pt+i.join(pt));if(!l.getNode().isDirectory())throw(0,te.createError)(Yt,t,pt+i.join(pt));return l}getFileByFd(e){return this.fds[String(e)]}getFileByFdOrThrow(e,t){if(!(0,te.isFd)(e))throw TypeError(br.ERRSTR.FD);const i=this.getFileByFd(e);if(!i)throw(0,te.createError)(fn,t);return i}wrapAsync(e,t,i){(0,te.validateCallback)(i),(0,Gt.default)(()=>{let l;try{l=e.apply(this,t)}catch(_){i(_);return}i(null,l)})}_toJSON(e=this.root,t={},i,l){let _=!0,d=e.children;e.getNode().isFile()&&(d=new Map([[e.getName(),e.parent.getChild(e.getName())]]),e=e.parent);for(const o of d.keys()){if(o==="."||o==="..")continue;_=!1;const u=e.getChild(o);if(!u)throw new Error("_toJSON: unexpected undefined");const m=u.getNode();if(m.isFile()){let f=u.getPath();i&&(f=Sr(i,f)),t[f]=l?m.getBuffer():m.getString()}else m.isDirectory()&&this._toJSON(u,t,i)}let n=e.getPath();return i&&(n=Sr(i,n)),n&&_&&(t[n]=null),t}toJSON(e,t={},i=!1,l=!1){const _=[];if(e){Array.isArray(e)||(e=[e]);for(const d of e){const n=(0,te.pathToFilename)(d),o=this.getResolvedLink(n);o&&_.push(o)}}else _.push(this.root);if(!_.length)return t;for(const d of _)this._toJSON(d,t,i?d.getPath():"",l);return t}fromJSON(e,t=Ua.default.cwd()){for(let i in e){const l=e[i];if(i=Er(i,t),typeof l=="string"||l instanceof It.Buffer){const _=rd(i);this.mkdirpBase(_,511),this.writeFileSync(i,l)}else this.mkdirpBase(i,511)}}fromNestedJSON(e,t){this.fromJSON(_d(e),t)}toTree(e={separator:pt}){return(0,Kf.toTreeSync)(this,e)}reset(){this.ino=0,this.inodes={},this.releasedInos=[],this.fds={},this.releasedFds=[],this.openFiles=0,this.root=this.createLink(),this.root.setNode(this.createNode(!0))}mountSync(e,t){this.fromJSON(t,e)}openLink(e,t,i=!0){if(this.openFiles>=this.maxFiles)throw(0,te.createError)(od,"open",e.getPath());let l=e;if(i&&(l=this.resolveSymlinks(e)),!l)throw(0,te.createError)(Ye,"open",e.getPath());const _=l.getNode();if(_.isDirectory()){if((t&(go|vo|mo))!==go)throw(0,te.createError)(wo,"open",e.getPath())}else if(t&Zf)throw(0,te.createError)(Yt,"open",e.getPath());if(!(t&mo)&&!_.canRead())throw(0,te.createError)(ad,"open",e.getPath());const d=new this.props.File(e,_,t,this.newFdNumber());return this.fds[d.fd]=d,this.openFiles++,t&Xf&&d.truncate(),d}openFile(e,t,i,l=!0){const _=Ge(e);let d=l?this.getResolvedLink(_):this.getLink(_);if(d&&t&Yf)throw(0,te.createError)(Ft,"open",e);if(!d&&t&yo){const n=this.getResolvedLink(_.slice(0,_.length-1));if(!n)throw(0,te.createError)(Ye,"open",pt+_.join(pt));t&yo&&typeof i=="number"&&(d=this.createLink(n,_[_.length-1],!1,i))}if(d)return this.openLink(d,t,l);throw(0,te.createError)(Ye,"open",e)}openBase(e,t,i,l=!0){const _=this.openFile(e,t,i,l);if(!_)throw(0,te.createError)(Ye,"open",e);return _.fd}openSync(e,t,i=438){const l=(0,te.modeToNumber)(i),_=(0,te.pathToFilename)(e),d=(0,te.flagsToNumber)(t);return this.openBase(_,d,l,!(d&bo))}open(e,t,i,l){let _=i,d=l;typeof i=="function"&&(_=438,d=i),_=_||438;const n=(0,te.modeToNumber)(_),o=(0,te.pathToFilename)(e),u=(0,te.flagsToNumber)(t);this.wrapAsync(this.openBase,[o,u,n,!(u&bo)],d)}closeFile(e){this.fds[e.fd]&&(this.openFiles--,delete this.fds[e.fd],this.releasedFds.push(e.fd))}closeSync(e){(0,te.validateFd)(e);const t=this.getFileByFdOrThrow(e,"close");this.closeFile(t)}close(e,t){(0,te.validateFd)(e),this.wrapAsync(this.closeSync,[e],t)}openFileOrGetById(e,t,i){if(typeof e=="number"){const l=this.fds[e];if(!l)throw(0,te.createError)(Ye);return l}else return this.openFile((0,te.pathToFilename)(e),t,i)}readBase(e,t,i,l,_){if(t.byteLength<l)throw(0,te.createError)(ud,"read",void 0,void 0,RangeError);const d=this.getFileByFdOrThrow(e);if(d.node.isSymlink())throw(0,te.createError)(nd,"read",d.link.getPath());return d.read(t,Number(i),Number(l),_===-1||typeof _!="number"?void 0:_)}readSync(e,t,i,l,_){return(0,te.validateFd)(e),this.readBase(e,t,i,l,_)}read(e,t,i,l,_,d){if((0,te.validateCallback)(d),l===0)return(0,pi.default)(()=>{d&&d(null,0,t)});(0,Gt.default)(()=>{try{const n=this.readBase(e,t,i,l,_);d(null,n,t)}catch(n){d(n)}})}readvBase(e,t,i){const l=this.getFileByFdOrThrow(e);let _=i??void 0;_===-1&&(_=void 0);let d=0;for(const n of t){const o=l.read(n,0,n.byteLength,_);if(_=void 0,d+=o,o<n.byteLength)break}return d}readv(e,t,i,l){let _=i,d=l;typeof i=="function"&&(_=null,d=i),(0,te.validateCallback)(d),(0,Gt.default)(()=>{try{const n=this.readvBase(e,t,_);d(null,n,t)}catch(n){d(n)}})}readvSync(e,t,i){return(0,te.validateFd)(e),this.readvBase(e,t,i)}readFileBase(e,t,i){let l;const d=typeof e=="number"&&(0,te.isFd)(e);let n;if(d)n=e;else{const o=(0,te.pathToFilename)(e),u=Ge(o),m=this.getResolvedLink(u);if(m&&m.getNode().isDirectory())throw(0,te.createError)(wo,"open",m.getPath());n=this.openSync(e,t)}try{l=(0,te.bufferToEncoding)(this.getFileByFdOrThrow(n).getBuffer(),i)}finally{d||this.closeSync(n)}return l}readFileSync(e,t){const i=(0,xe.getReadFileOptions)(t),l=(0,te.flagsToNumber)(i.flag);return this.readFileBase(e,l,i.encoding)}readFile(e,t,i){const[l,_]=(0,xe.optsAndCbGenerator)(xe.getReadFileOptions)(t,i),d=(0,te.flagsToNumber)(l.flag);this.wrapAsync(this.readFileBase,[e,d,l.encoding],_)}writeBase(e,t,i,l,_){const d=this.getFileByFdOrThrow(e,"write");if(d.node.isSymlink())throw(0,te.createError)(fn,"write",d.link.getPath());return d.write(t,i,l,_===-1||typeof _!="number"?void 0:_)}writeSync(e,t,i,l,_){const[,d,n,o,u]=(0,te.getWriteSyncArgs)(e,t,i,l,_);return this.writeBase(e,d,n,o,u)}write(e,t,i,l,_,d){const[,n,o,u,m,f,v]=(0,te.getWriteArgs)(e,t,i,l,_,d);(0,Gt.default)(()=>{try{const C=this.writeBase(e,o,u,m,f);n?v(null,C,t):v(null,C,o)}catch(C){v(C)}})}writevBase(e,t,i){const l=this.getFileByFdOrThrow(e);let _=i??void 0;_===-1&&(_=void 0);let d=0;for(const n of t){const o=It.Buffer.from(n.buffer,n.byteOffset,n.byteLength),u=l.write(o,0,o.byteLength,_);if(_=void 0,d+=u,u<o.byteLength)break}return d}writev(e,t,i,l){let _=i,d=l;typeof i=="function"&&(_=null,d=i),(0,te.validateCallback)(d),(0,Gt.default)(()=>{try{const n=this.writevBase(e,t,_);d(null,n,t)}catch(n){d(n)}})}writevSync(e,t,i){return(0,te.validateFd)(e),this.writevBase(e,t,i)}writeFileBase(e,t,i,l){const _=typeof e=="number";let d;_?d=e:d=this.openBase((0,te.pathToFilename)(e),i,l);let n=0,o=t.length,u=i&Jf?void 0:0;try{for(;o>0;){const m=this.writeSync(d,t,n,o,u);n+=m,o-=m,u!==void 0&&(u+=m)}}finally{_||this.closeSync(d)}}writeFileSync(e,t,i){const l=(0,xe.getWriteFileOptions)(i),_=(0,te.flagsToNumber)(l.flag),d=(0,te.modeToNumber)(l.mode),n=(0,te.dataToBuffer)(t,l.encoding);this.writeFileBase(e,n,_,d)}writeFile(e,t,i,l){let _=i,d=l;typeof i=="function"&&(_=xe.writeFileDefaults,d=i);const n=(0,te.validateCallback)(d),o=(0,xe.getWriteFileOptions)(_),u=(0,te.flagsToNumber)(o.flag),m=(0,te.modeToNumber)(o.mode),f=(0,te.dataToBuffer)(t,o.encoding);this.wrapAsync(this.writeFileBase,[e,f,u,m],n)}linkBase(e,t){const i=Ge(e),l=this.getLink(i);if(!l)throw(0,te.createError)(Ye,"link",e,t);const _=Ge(t),d=this.getLinkParent(_);if(!d)throw(0,te.createError)(Ye,"link",e,t);const n=_[_.length-1];if(d.getChild(n))throw(0,te.createError)(Ft,"link",e,t);const o=l.getNode();o.nlink++,d.createChild(n,o)}copyFileBase(e,t,i){const l=this.readFileSync(e);if(i&Qf&&this.existsSync(t))throw(0,te.createError)(Ft,"copyFile",e,t);if(i&ed)throw(0,te.createError)(cd,"copyFile",e,t);this.writeFileBase(t,l,br.FLAGS.w,438)}copyFileSync(e,t,i){const l=(0,te.pathToFilename)(e),_=(0,te.pathToFilename)(t);return this.copyFileBase(l,_,(i||0)|0)}copyFile(e,t,i,l){const _=(0,te.pathToFilename)(e),d=(0,te.pathToFilename)(t);let n,o;typeof i=="function"?(n=0,o=i):(n=i,o=l),(0,te.validateCallback)(o),this.wrapAsync(this.copyFileBase,[_,d,n],o)}linkSync(e,t){const i=(0,te.pathToFilename)(e),l=(0,te.pathToFilename)(t);this.linkBase(i,l)}link(e,t,i){const l=(0,te.pathToFilename)(e),_=(0,te.pathToFilename)(t);this.wrapAsync(this.linkBase,[l,_],i)}unlinkBase(e){const t=Ge(e),i=this.getLink(t);if(!i)throw(0,te.createError)(Ye,"unlink",e);if(i.length)throw Error("Dir not empty...");this.deleteLink(i);const l=i.getNode();l.nlink--,l.nlink<=0&&this.deleteNode(l)}unlinkSync(e){const t=(0,te.pathToFilename)(e);this.unlinkBase(t)}unlink(e,t){const i=(0,te.pathToFilename)(e);this.wrapAsync(this.unlinkBase,[i],t)}symlinkBase(e,t){const i=Ge(t),l=this.getLinkParent(i);if(!l)throw(0,te.createError)(Ye,"symlink",e,t);const _=i[i.length-1];if(l.getChild(_))throw(0,te.createError)(Ft,"symlink",e,t);const d=l.createChild(_);return d.getNode().makeSymlink(Ge(e)),d}symlinkSync(e,t,i){const l=(0,te.pathToFilename)(e),_=(0,te.pathToFilename)(t);this.symlinkBase(l,_)}symlink(e,t,i,l){const _=(0,te.validateCallback)(typeof i=="function"?i:l),d=(0,te.pathToFilename)(e),n=(0,te.pathToFilename)(t);this.wrapAsync(this.symlinkBase,[d,n],_)}realpathBase(e,t){const i=Ge(e),l=this.getResolvedLink(i);if(!l)throw(0,te.createError)(Ye,"realpath",e);return(0,Ht.strToEncoding)(l.getPath()||"/",t)}realpathSync(e,t){return this.realpathBase((0,te.pathToFilename)(e),(0,xe.getRealpathOptions)(t).encoding)}realpath(e,t,i){const[l,_]=(0,xe.getRealpathOptsAndCb)(t,i),d=(0,te.pathToFilename)(e);this.wrapAsync(this.realpathBase,[d,l.encoding],_)}lstatBase(e,t=!1,i=!1){const l=this.getLink(Ge(e));if(l)return un.default.build(l.getNode(),t);if(i)throw(0,te.createError)(Ye,"lstat",e)}lstatSync(e,t){const{throwIfNoEntry:i=!0,bigint:l=!1}=(0,xe.getStatOptions)(t);return this.lstatBase((0,te.pathToFilename)(e),l,i)}lstat(e,t,i){const[{throwIfNoEntry:l=!0,bigint:_=!1},d]=(0,xe.getStatOptsAndCb)(t,i);this.wrapAsync(this.lstatBase,[(0,te.pathToFilename)(e),_,l],d)}statBase(e,t=!1,i=!0){const l=this.getResolvedLink(Ge(e));if(l)return un.default.build(l.getNode(),t);if(i)throw(0,te.createError)(Ye,"stat",e)}statSync(e,t){const{bigint:i=!0,throwIfNoEntry:l=!0}=(0,xe.getStatOptions)(t);return this.statBase((0,te.pathToFilename)(e),i,l)}stat(e,t,i){const[{bigint:l=!1,throwIfNoEntry:_=!0},d]=(0,xe.getStatOptsAndCb)(t,i);this.wrapAsync(this.statBase,[(0,te.pathToFilename)(e),l,_],d)}fstatBase(e,t=!1){const i=this.getFileByFd(e);if(!i)throw(0,te.createError)(fn,"fstat");return un.default.build(i.node,t)}fstatSync(e,t){return this.fstatBase(e,(0,xe.getStatOptions)(t).bigint)}fstat(e,t,i){const[l,_]=(0,xe.getStatOptsAndCb)(t,i);this.wrapAsync(this.fstatBase,[e,l.bigint],_)}renameBase(e,t){const i=this.getLink(Ge(e));if(!i)throw(0,te.createError)(Ye,"rename",e,t);const l=Ge(t),_=this.getLinkParent(l);if(!_)throw(0,te.createError)(Ye,"rename",e,t);const d=i.parent;d&&d.deleteChild(i);const n=l[l.length-1];i.name=n,i.steps=[..._.steps,n],_.setChild(i.getName(),i)}renameSync(e,t){const i=(0,te.pathToFilename)(e),l=(0,te.pathToFilename)(t);this.renameBase(i,l)}rename(e,t,i){const l=(0,te.pathToFilename)(e),_=(0,te.pathToFilename)(t);this.wrapAsync(this.renameBase,[l,_],i)}existsBase(e){return!!this.statBase(e)}existsSync(e){try{return this.existsBase((0,te.pathToFilename)(e))}catch{return!1}}exists(e,t){const i=(0,te.pathToFilename)(e);if(typeof t!="function")throw Error(br.ERRSTR.CB);(0,Gt.default)(()=>{try{t(this.existsBase(i))}catch{t(!1)}})}accessBase(e,t){this.getLinkOrThrow(e,"access")}accessSync(e,t=So){const i=(0,te.pathToFilename)(e);t=t|0,this.accessBase(i,t)}access(e,t,i){let l=So,_;typeof t!="function"?(l=t|0,_=(0,te.validateCallback)(i)):_=t;const d=(0,te.pathToFilename)(e);this.wrapAsync(this.accessBase,[d,l],_)}appendFileSync(e,t,i){const l=(0,xe.getAppendFileOpts)(i);(!l.flag||(0,te.isFd)(e))&&(l.flag="a"),this.writeFileSync(e,t,l)}appendFile(e,t,i,l){const[_,d]=(0,xe.getAppendFileOptsAndCb)(i,l);(!_.flag||(0,te.isFd)(e))&&(_.flag="a"),this.writeFile(e,t,_,d)}readdirBase(e,t){const i=Ge(e),l=this.getResolvedLink(i);if(!l)throw(0,te.createError)(Ye,"readdir",e);if(!l.getNode().isDirectory())throw(0,te.createError)(Yt,"scandir",e);const d=[];for(const o of l.children.keys()){const u=l.getChild(o);if(!(!u||o==="."||o==="..")&&(d.push($f.default.build(u,t.encoding)),t.recursive&&u.children.size)){const m=Object.assign(Object.assign({},t),{recursive:!0,withFileTypes:!0}),f=this.readdirBase(u.getPath(),m);d.push(...f)}}if(!te.isWin&&t.encoding!=="buffer"&&d.sort((o,u)=>o.name<u.name?-1:o.name>u.name?1:0),t.withFileTypes)return d;let n=e;return te.isWin&&(n=n.replace(/\\/g,"/")),d.map(o=>t.recursive?o.path.replace(n+yr.posix.sep,""):o.name)}readdirSync(e,t){const i=(0,xe.getReaddirOptions)(t),l=(0,te.pathToFilename)(e);return this.readdirBase(l,i)}readdir(e,t,i){const[l,_]=(0,xe.getReaddirOptsAndCb)(t,i),d=(0,te.pathToFilename)(e);this.wrapAsync(this.readdirBase,[d,l],_)}readlinkBase(e,t){const l=this.getLinkOrThrow(e,"readlink").getNode();if(!l.isSymlink())throw(0,te.createError)(sd,"readlink",e);const _=pt+l.symlink.join(pt);return(0,Ht.strToEncoding)(_,t)}readlinkSync(e,t){const i=(0,xe.getDefaultOpts)(t),l=(0,te.pathToFilename)(e);return this.readlinkBase(l,i.encoding)}readlink(e,t,i){const[l,_]=(0,xe.getDefaultOptsAndCb)(t,i),d=(0,te.pathToFilename)(e);this.wrapAsync(this.readlinkBase,[d,l.encoding],_)}fsyncBase(e){this.getFileByFdOrThrow(e,"fsync")}fsyncSync(e){this.fsyncBase(e)}fsync(e,t){this.wrapAsync(this.fsyncBase,[e],t)}fdatasyncBase(e){this.getFileByFdOrThrow(e,"fdatasync")}fdatasyncSync(e){this.fdatasyncBase(e)}fdatasync(e,t){this.wrapAsync(this.fdatasyncBase,[e],t)}ftruncateBase(e,t){this.getFileByFdOrThrow(e,"ftruncate").truncate(t)}ftruncateSync(e,t){this.ftruncateBase(e,t)}ftruncate(e,t,i){const l=typeof t=="number"?t:0,_=(0,te.validateCallback)(typeof t=="number"?i:t);this.wrapAsync(this.ftruncateBase,[e,l],_)}truncateBase(e,t){const i=this.openSync(e,"r+");try{this.ftruncateSync(i,t)}finally{this.closeSync(i)}}truncateSync(e,t){if((0,te.isFd)(e))return this.ftruncateSync(e,t);this.truncateBase(e,t)}truncate(e,t,i){const l=typeof t=="number"?t:0,_=(0,te.validateCallback)(typeof t=="number"?i:t);if((0,te.isFd)(e))return this.ftruncate(e,l,_);this.wrapAsync(this.truncateBase,[e,l],_)}futimesBase(e,t,i){const _=this.getFileByFdOrThrow(e,"futimes").node;_.atime=new Date(t*1e3),_.mtime=new Date(i*1e3)}futimesSync(e,t,i){this.futimesBase(e,At(t),At(i))}futimes(e,t,i,l){this.wrapAsync(this.futimesBase,[e,At(t),At(i)],l)}utimesBase(e,t,i){const l=this.openSync(e,"r");try{this.futimesBase(l,t,i)}finally{this.closeSync(l)}}utimesSync(e,t,i){this.utimesBase((0,te.pathToFilename)(e),At(t),At(i))}utimes(e,t,i,l){this.wrapAsync(this.utimesBase,[(0,te.pathToFilename)(e),At(t),At(i)],l)}mkdirBase(e,t){const i=Ge(e);if(!i.length)throw(0,te.createError)(Ft,"mkdir",e);const l=this.getLinkParentAsDirOrThrow(e,"mkdir"),_=i[i.length-1];if(l.getChild(_))throw(0,te.createError)(Ft,"mkdir",e);l.createChild(_,this.createNode(!0,t))}mkdirpBase(e,t){const i=Er(e),l=i.substring(1),_=l?l.split(pt):[];let d=this.root,n=!1;for(let o=0;o<_.length;o++){const u=_[o];if(!d.getNode().isDirectory())throw(0,te.createError)(Yt,"mkdir",d.getPath());const m=d.getChild(u);if(m)if(m.getNode().isDirectory())d=m;else throw(0,te.createError)(Yt,"mkdir",m.getPath());else d=d.createChild(u,this.createNode(!0,t)),n=!0}return n?i:void 0}mkdirSync(e,t){const i=(0,xe.getMkdirOptions)(t),l=(0,te.modeToNumber)(i.mode,511),_=(0,te.pathToFilename)(e);if(i.recursive)return this.mkdirpBase(_,l);this.mkdirBase(_,l)}mkdir(e,t,i){const l=(0,xe.getMkdirOptions)(t),_=(0,te.validateCallback)(typeof t=="function"?t:i),d=(0,te.modeToNumber)(l.mode,511),n=(0,te.pathToFilename)(e);l.recursive?this.wrapAsync(this.mkdirpBase,[n,d],_):this.wrapAsync(this.mkdirBase,[n,d],_)}mkdtempBase(e,t,i=5){const l=e+(0,te.genRndStr6)();try{return this.mkdirBase(l,511),(0,Ht.strToEncoding)(l,t)}catch(_){if(_.code===Ft){if(i>1)return this.mkdtempBase(e,t,i-1);throw Error("Could not create temp dir.")}else throw _}}mkdtempSync(e,t){const{encoding:i}=(0,xe.getDefaultOpts)(t);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");return(0,te.nullCheck)(e),this.mkdtempBase(e,i)}mkdtemp(e,t,i){const[{encoding:l},_]=(0,xe.getDefaultOptsAndCb)(t,i);if(!e||typeof e!="string")throw new TypeError("filename prefix is required");(0,te.nullCheck)(e)&&this.wrapAsync(this.mkdtempBase,[e,l],_)}rmdirBase(e,t){const i=(0,xe.getRmdirOptions)(t),l=this.getLinkAsDirOrThrow(e,"rmdir");if(l.length&&!i.recursive)throw(0,te.createError)(ld,"rmdir",e);this.deleteLink(l)}rmdirSync(e,t){this.rmdirBase((0,te.pathToFilename)(e),t)}rmdir(e,t,i){const l=(0,xe.getRmdirOptions)(t),_=(0,te.validateCallback)(typeof t=="function"?t:i);this.wrapAsync(this.rmdirBase,[(0,te.pathToFilename)(e),l],_)}rmBase(e,t={}){const i=this.getResolvedLink(e);if(!i){if(!t.force)throw(0,te.createError)(Ye,"stat",e);return}if(i.getNode().isDirectory()&&!t.recursive)throw(0,te.createError)(hd,"rm",e);this.deleteLink(i)}rmSync(e,t){this.rmBase((0,te.pathToFilename)(e),t)}rm(e,t,i){const[l,_]=(0,xe.getRmOptsAndCb)(t,i);this.wrapAsync(this.rmBase,[(0,te.pathToFilename)(e),l],_)}fchmodBase(e,t){this.getFileByFdOrThrow(e,"fchmod").chmod(t)}fchmodSync(e,t){this.fchmodBase(e,(0,te.modeToNumber)(t))}fchmod(e,t,i){this.wrapAsync(this.fchmodBase,[e,(0,te.modeToNumber)(t)],i)}chmodBase(e,t){const i=this.openSync(e,"r");try{this.fchmodBase(i,t)}finally{this.closeSync(i)}}chmodSync(e,t){const i=(0,te.modeToNumber)(t),l=(0,te.pathToFilename)(e);this.chmodBase(l,i)}chmod(e,t,i){const l=(0,te.modeToNumber)(t),_=(0,te.pathToFilename)(e);this.wrapAsync(this.chmodBase,[_,l],i)}lchmodBase(e,t){const i=this.openBase(e,vo,0,!1);try{this.fchmodBase(i,t)}finally{this.closeSync(i)}}lchmodSync(e,t){const i=(0,te.modeToNumber)(t),l=(0,te.pathToFilename)(e);this.lchmodBase(l,i)}lchmod(e,t,i){const l=(0,te.modeToNumber)(t),_=(0,te.pathToFilename)(e);this.wrapAsync(this.lchmodBase,[_,l],i)}fchownBase(e,t,i){this.getFileByFdOrThrow(e,"fchown").chown(t,i)}fchownSync(e,t,i){Xt(t),Jt(i),this.fchownBase(e,t,i)}fchown(e,t,i,l){Xt(t),Jt(i),this.wrapAsync(this.fchownBase,[e,t,i],l)}chownBase(e,t,i){this.getResolvedLinkOrThrow(e,"chown").getNode().chown(t,i)}chownSync(e,t,i){Xt(t),Jt(i),this.chownBase((0,te.pathToFilename)(e),t,i)}chown(e,t,i,l){Xt(t),Jt(i),this.wrapAsync(this.chownBase,[(0,te.pathToFilename)(e),t,i],l)}lchownBase(e,t,i){this.getLinkOrThrow(e,"lchown").getNode().chown(t,i)}lchownSync(e,t,i){Xt(t),Jt(i),this.lchownBase((0,te.pathToFilename)(e),t,i)}lchown(e,t,i,l){Xt(t),Jt(i),this.wrapAsync(this.lchownBase,[(0,te.pathToFilename)(e),t,i],l)}watchFile(e,t,i){const l=(0,te.pathToFilename)(e);let _=t,d=i;if(typeof _=="function"&&(d=t,_=null),typeof d!="function")throw Error('"watchFile()" requires a listener function');let n=5007,o=!0;_&&typeof _=="object"&&(typeof _.interval=="number"&&(n=_.interval),typeof _.persistent=="boolean"&&(o=_.persistent));let u=this.statWatchers[l];return u||(u=new this.StatWatcher,u.start(l,o,n),this.statWatchers[l]=u),u.addListener("change",d),u}unwatchFile(e,t){const i=(0,te.pathToFilename)(e),l=this.statWatchers[i];l&&(typeof t=="function"?l.removeListener("change",t):l.removeAllListeners("change"),l.listenerCount("change")===0&&(l.stop(),delete this.statWatchers[i]))}createReadStream(e,t){return new this.ReadStream(e,t)}createWriteStream(e,t){return new this.WriteStream(e,t)}watch(e,t,i){const l=(0,te.pathToFilename)(e);let _=t;typeof t=="function"&&(i=t,_=null);let{persistent:d,recursive:n,encoding:o}=(0,xe.getDefaultOpts)(_);d===void 0&&(d=!0),n===void 0&&(n=!1);const u=new this.FSWatcher;return u.start(l,d,n,o),i&&u.addListener("change",i),u}}et.Volume=ar;ar.fd=2147483647;function pd(r){r.emit("stop")}class Wa extends Ha.EventEmitter{constructor(e){super(),this.onInterval=()=>{try{const t=this.vol.statSync(this.filename);this.hasChanged(t)&&(this.emit("change",t,this.prev),this.prev=t)}finally{this.loop()}},this.vol=e}loop(){this.timeoutRef=this.setTimeout(this.onInterval,this.interval)}hasChanged(e){return e.mtimeMs>this.prev.mtimeMs||e.nlink!==this.prev.nlink}start(e,t=!0,i=5007){this.filename=(0,te.pathToFilename)(e),this.setTimeout=t?setTimeout.bind(typeof globalThis<"u"?globalThis:rt):Wf.default,this.interval=i,this.prev=this.vol.statSync(this.filename),this.loop()}stop(){clearTimeout(this.timeoutRef),(0,pi.default)(()=>{pd.call(this,this)})}}et.StatWatcher=Wa;var at;function gd(r){at=(0,It.bufferAllocUnsafe)(r),at.used=0}$a.inherits(St,gi.Readable);et.ReadStream=St;function St(r,e,t){if(!(this instanceof St))return new St(r,e,t);if(this._vol=r,t=Object.assign({},(0,xe.getOptions)(t,{})),t.highWaterMark===void 0&&(t.highWaterMark=64*1024),gi.Readable.call(this,t),this.path=(0,te.pathToFilename)(e),this.fd=t.fd===void 0?null:t.fd,this.flags=t.flags===void 0?"r":t.flags,this.mode=t.mode===void 0?438:t.mode,this.start=t.start,this.end=t.end,this.autoClose=t.autoClose===void 0?!0:t.autoClose,this.pos=void 0,this.bytesRead=0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw new TypeError('"end" option must be a Number');if(this.start>this.end)throw new Error('"start" option must be <= "end" option');this.pos=this.start}typeof this.fd!="number"&&this.open(),this.on("end",function(){this.autoClose&&this.destroy&&this.destroy()})}St.prototype.open=function(){var r=this;this._vol.open(this.path,this.flags,this.mode,(e,t)=>{if(e){r.autoClose&&r.destroy&&r.destroy(),r.emit("error",e);return}r.fd=t,r.emit("open",t),r.read()})};St.prototype._read=function(r){if(typeof this.fd!="number")return this.once("open",function(){this._read(r)});if(this.destroyed)return;(!at||at.length-at.used<id)&&gd(this._readableState.highWaterMark);var e=at,t=Math.min(at.length-at.used,r),i=at.used;if(this.pos!==void 0&&(t=Math.min(this.end-this.pos+1,t)),t<=0)return this.push(null);var l=this;this._vol.read(this.fd,at,at.used,t,this.pos,_),this.pos!==void 0&&(this.pos+=t),at.used+=t;function _(d,n){if(d)l.autoClose&&l.destroy&&l.destroy(),l.emit("error",d);else{var o=null;n>0&&(l.bytesRead+=n,o=e.slice(i,i+n)),l.push(o)}}};St.prototype._destroy=function(r,e){this.close(t=>{e(r||t)})};St.prototype.close=function(r){var e;if(r&&this.once("close",r),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",qa);return}return(0,pi.default)(()=>this.emit("close"))}typeof((e=this._readableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._readableState.closed=!0:this.closed=!0,this._vol.close(this.fd,t=>{t?this.emit("error",t):this.emit("close")}),this.fd=null};function qa(r){this.close()}$a.inherits(ft,gi.Writable);et.WriteStream=ft;function ft(r,e,t){if(!(this instanceof ft))return new ft(r,e,t);if(this._vol=r,t=Object.assign({},(0,xe.getOptions)(t,{})),gi.Writable.call(this,t),this.path=(0,te.pathToFilename)(e),this.fd=t.fd===void 0?null:t.fd,this.flags=t.flags===void 0?"w":t.flags,this.mode=t.mode===void 0?438:t.mode,this.start=t.start,this.autoClose=t.autoClose===void 0?!0:!!t.autoClose,this.pos=void 0,this.bytesWritten=0,this.pending=!0,this.start!==void 0){if(typeof this.start!="number")throw new TypeError('"start" option must be a Number');if(this.start<0)throw new Error('"start" must be >= zero');this.pos=this.start}t.encoding&&this.setDefaultEncoding(t.encoding),typeof this.fd!="number"&&this.open(),this.once("finish",function(){this.autoClose&&this.close()})}ft.prototype.open=function(){this._vol.open(this.path,this.flags,this.mode,(function(r,e){if(r){this.autoClose&&this.destroy&&this.destroy(),this.emit("error",r);return}this.fd=e,this.pending=!1,this.emit("open",e)}).bind(this))};ft.prototype._write=function(r,e,t){if(!(r instanceof It.Buffer||r instanceof Uint8Array))return this.emit("error",new Error("Invalid data"));if(typeof this.fd!="number")return this.once("open",function(){this._write(r,e,t)});var i=this;this._vol.write(this.fd,r,0,r.length,this.pos,(l,_)=>{if(l)return i.autoClose&&i.destroy&&i.destroy(),t(l);i.bytesWritten+=_,t()}),this.pos!==void 0&&(this.pos+=r.length)};ft.prototype._writev=function(r,e){if(typeof this.fd!="number")return this.once("open",function(){this._writev(r,e)});const t=this,i=r.length,l=new Array(i);for(var _=0,d=0;d<i;d++){var n=r[d].chunk;l[d]=n,_+=n.length}const o=It.Buffer.concat(l);this._vol.write(this.fd,o,0,o.length,this.pos,(u,m)=>{if(u)return t.destroy&&t.destroy(),e(u);t.bytesWritten+=m,e()}),this.pos!==void 0&&(this.pos+=_)};ft.prototype.close=function(r){var e;if(r&&this.once("close",r),this.closed||typeof this.fd!="number"){if(typeof this.fd!="number"){this.once("open",qa);return}return(0,pi.default)(()=>this.emit("close"))}typeof((e=this._writableState)===null||e===void 0?void 0:e.closed)=="boolean"?this._writableState.closed=!0:this.closed=!0,this._vol.close(this.fd,t=>{t?this.emit("error",t):this.emit("close")}),this.fd=null};ft.prototype._destroy=St.prototype._destroy;ft.prototype.destroySoon=ft.prototype.end;class za extends Ha.EventEmitter{constructor(e){super(),this._filename="",this._filenameEncoded="",this._recursive=!1,this._encoding=Ht.ENCODING_UTF8,this._listenerRemovers=new Map,this._onParentChild=t=>{t.getName()===this._getName()&&this._emit("rename")},this._emit=t=>{this.emit("change",t,this._filenameEncoded)},this._persist=()=>{this._timer=setTimeout(this._persist,1e6)},this._vol=e}_getName(){return this._steps[this._steps.length-1]}start(e,t=!0,i=!1,l=Ht.ENCODING_UTF8){this._filename=(0,te.pathToFilename)(e),this._steps=Ge(this._filename),this._filenameEncoded=(0,Ht.strToEncoding)(this._filename),this._recursive=i,this._encoding=l;try{this._link=this._vol.getLinkOrThrow(this._filename,"FSWatcher")}catch(o){const u=new Error(`watch ${this._filename} ${o.code}`);throw u.code=o.code,u.errno=o.code,u}const _=o=>{var u;const m=o.getPath(),f=o.getNode(),v=()=>{let S=Sr(this._filename,m);return S||(S=this._getName()),this.emit("change","change",S)};f.on("change",v);const C=(u=this._listenerRemovers.get(f.ino))!==null&&u!==void 0?u:[];C.push(()=>f.removeListener("change",v)),this._listenerRemovers.set(f.ino,C)},d=o=>{var u;const m=o.getNode(),f=S=>{this.emit("change","rename",Sr(this._filename,S.getPath())),setTimeout(()=>{_(S),d(S)})},v=S=>{const w=c=>{const s=c.getNode().ino,a=this._listenerRemovers.get(s);a&&(a.forEach(h=>h()),this._listenerRemovers.delete(s));for(const[h,p]of c.children.entries())p&&h!=="."&&h!==".."&&w(p)};w(S),this.emit("change","rename",Sr(this._filename,S.getPath()))};for(const[S,w]of o.children.entries())w&&S!=="."&&S!==".."&&_(w);if(o.on("child:add",f),o.on("child:delete",v),((u=this._listenerRemovers.get(m.ino))!==null&&u!==void 0?u:[]).push(()=>{o.removeListener("child:add",f),o.removeListener("child:delete",v)}),i)for(const[S,w]of o.children.entries())w&&S!=="."&&S!==".."&&d(w)};_(this._link),d(this._link);const n=this._link.parent;n&&(n.setMaxListeners(n.getMaxListeners()+1),n.on("child:delete",this._onParentChild)),t&&this._persist()}close(){clearTimeout(this._timer),this._listenerRemovers.forEach(t=>{t.forEach(i=>i())}),this._listenerRemovers.clear();const e=this._link.parent;e&&e.removeListener("child:delete",this._onParentChild)}}et.FSWatcher=za;var mi={};Object.defineProperty(mi,"__esModule",{value:!0});mi.fsSynchronousApiList=void 0;mi.fsSynchronousApiList=["accessSync","appendFileSync","chmodSync","chownSync","closeSync","copyFileSync","existsSync","fchmodSync","fchownSync","fdatasyncSync","fstatSync","fsyncSync","ftruncateSync","futimesSync","lchmodSync","lchownSync","linkSync","lstatSync","mkdirSync","mkdtempSync","openSync","readdirSync","readFileSync","readlinkSync","readSync","readvSync","realpathSync","renameSync","rmdirSync","rmSync","statSync","symlinkSync","truncateSync","unlinkSync","utimesSync","writeFileSync","writeSync","writevSync"];var vi={};Object.defineProperty(vi,"__esModule",{value:!0});vi.fsCallbackApiList=void 0;vi.fsCallbackApiList=["access","appendFile","chmod","chown","close","copyFile","createReadStream","createWriteStream","exists","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchmod","lchown","link","lstat","mkdir","mkdtemp","open","read","readv","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","symlink","truncate","unlink","unwatchFile","utimes","watch","watchFile","write","writev","writeFile"];(function(r,e){Object.defineProperty(e,"__esModule",{value:!0}),e.memfs=e.fs=e.createFsFromVolume=e.vol=e.Volume=void 0;const t=$t,i=dr,l=et,_=Ct,d=mi,n=vi,{F_OK:o,R_OK:u,W_OK:m,X_OK:f}=_.constants;e.Volume=l.Volume,e.vol=new l.Volume;function v(S){const w={F_OK:o,R_OK:u,W_OK:m,X_OK:f,constants:_.constants,Stats:t.default,Dirent:i.default};for(const c of d.fsSynchronousApiList)typeof S[c]=="function"&&(w[c]=S[c].bind(S));for(const c of n.fsCallbackApiList)typeof S[c]=="function"&&(w[c]=S[c].bind(S));return w.StatWatcher=S.StatWatcher,w.FSWatcher=S.FSWatcher,w.WriteStream=S.WriteStream,w.ReadStream=S.ReadStream,w.promises=S.promises,w._toUnixTimestamp=l.toUnixTimestamp,w.__vol=S,w}e.createFsFromVolume=v,e.fs=v(e.vol);const C=(S={},w="/")=>{const c=e.Volume.fromNestedJSON(S,w);return{fs:v(c),vol:c}};e.memfs=C,r.exports=Object.assign(Object.assign({},r.exports),e.fs),r.exports.semantic=!0})(Sn,Sn.exports);var md=Sn.exports;const vd={Mello_OS:{home:{desktop:{},documents:{},pictures:{}}}};let Lt=md.memfs(vd).vol;function yd(){var e,t;let r=(t=(e=Lt.root.getChild("Mello_OS"))==null?void 0:e.getChild("home"))==null?void 0:t.getPath();return r==null?void 0:r.replaceAll("/","\\")}function ti(r,e){r=r==null?void 0:r.replaceAll("\\","/"),e=e.replaceAll("\\","/");let t=Lt.getResolvedLink(`${r}/${e}`),i=Lt.getResolvedLink(e);if(t)return t.getPath().replaceAll("/","\\");if(i)return i.getPath().replaceAll("/","\\")}function Va(r,e=void 0){var t;return r=r==null?void 0:r.replaceAll("\\","/"),e?(e=ti(r,e),e?(e=e.replaceAll("\\","/"),Lt.readdirSync(e)):[]):(e=(t=Lt.getResolvedLink(r))==null?void 0:t.getPath(),Lt.readdirSync(e))}function bd(r,e){r=r==null?void 0:r.replaceAll("\\","/"),e=e.replaceAll("\\","/");let t=`${r}/${e}`;Lt.mkdirSync(t,{recursive:!0})}function Sd(r,e,t=[]){r=r==null?void 0:r.replaceAll("\\","/"),e=e.replaceAll("\\","/");let i=!1;if(t.includes("/s")&&(i=!0),Va(r,e).length>0&&!i)return"Directory is not empty";if(r===`${r}/${e}`)return"Cannot delete current directory";let l=`${r}/${e}`;return Lt.rmdirSync(l,{recursive:i}),"Directory removed"}function wd(r,e){r.writeln("For more information on a specific command, type help command-name ");for(let[t,i]of Object.entries(e))r.writeln(`${t}: ${i.description}`)}async function Ed(r){r.clear()}function Cd(r,e){r.writeln(e.join(" "))}function Rd(r){var e,t,i,l,_,d;(d=(_=(l=(i=(t=(e=r.element)==null?void 0:e.parentElement)==null?void 0:t.parentElement)==null?void 0:i.parentElement)==null?void 0:l.parentElement)==null?void 0:_.parentElement)==null||d.remove(),r.dispose()}function Ad(r,e,t){if(e.length===0)r.writeln(`C:${t.current_dir}`);else{let i=ti(t.current_dir,e[0]);ti(t.current_dir,e[0])&&(t.current_dir=i,t.setPrompt(t.current_dir))}}function Td(r,e,t){for(let i of Va(t.current_dir,e[0]))r.writeln(i)}function Od(r,e,t){if(e.length===0){r.writeln("Error: No path argument found");return}bd(t.current_dir,e[0]),r.writeln("Directory created")}function kd(r,e,t){if(e.length===0){r.writeln("Error: No path argument found");return}let i=e.shift();if(!ti(t.current_dir,i)){r.writeln("Path doesnt exist or is not valid");return}let l=Dd(e,["/s","/q"],2);l.status?r.writeln(Sd(t.current_dir,i,e)):r.writeln(l.message)}let dn=2;async function Ld(r){if(dn!=0)r.writeln("access: PERMISSION DENIED."),dn--;else return new Promise(e=>{dn=3,r.writeln("access: PERMISSION DENIED....and....."),setTimeout(()=>{new ic({target:document.getElementById("icons"),props:{name:"DENIED",index:10}})},5e3);let t;setTimeout(()=>{t=setInterval(()=>{new er({target:document.getElementById("icons"),props:{randomPos:!0,type:"alert",action_type:"error",title:"YOU DIDNT SAY THE MAGIC WORD",message:"ERROR: YOU DIDNT SAY THE MAGIC WORD"}})},1e3)},7e3);let i=setInterval(()=>{r.writeln("YOU DIDN'T SAY THE MAGIC WORD!")},100);setTimeout(()=>{e(""),r.writeln("ERROR: PleAsE...HATE THIS HACKER CRAP....ABORTING..."),clearInterval(i),clearInterval(t)},2e4)})}function Dd(r,e,t){if(r.length>t)return{status:!1,message:"Error: Invalid flag count"};for(let i of r)if(!e.includes(i))return{status:!1,message:`Error: '${i}' not valid in command`};return{status:!0,message:""}}class Bd{constructor(e,t){ot(this,"term");ot(this,"command","");ot(this,"commands",{});ot(this,"_cmd");this.term=e,this._cmd=t,this.commands={help:{description:"Prints all commands",syntax:"help [command]",args:["command"],argsd:"command - display help info on that command",function:i=>wd(i,this.commands)},cls:{description:"Clear Terminal",syntax:"cls",function:i=>{Ed(i)}},echo:{description:"Displays messages",syntax:"echo [message]",args:["message"],argsd:"message - text to display",function:(i,l)=>{Cd(i,l)}},exit:{description:"Quits CMD program",syntax:"exit",function:i=>{Rd(i)}},access:{description:"Attempt to access a security system",syntax:"access <message>",argsd:"message - thing to access",function:async i=>{await Ld(i)}},cd:{description:"Displays the name of or changes the current directory",syntax:"cd [path]",argsd:"path - path of directory",function:(i,l)=>{Ad(i,l,this._cmd)}},dir:{description:"Displays a list of a directory's files",syntax:"dir [path]",argsd:"path - path of directory",function:(i,l)=>{Td(i,l,this._cmd)}},mkdir:{description:"Creates a directory",syntax:"mkdir <path>",argsd:"path - path of directory",function:(i,l)=>{Od(i,l,this._cmd)}},rmdir:{description:"Removes a directory",syntax:"rmdir <path> [/s]",argsd:`path - path of directory\r
	/s - deletes directory including subdirectories/files`,function:(i,l)=>{kd(i,l,this._cmd)}}}}addCommandChar(e){this.command+=e}async executeCommand(){let e=this.command.trim();if(e.length===0)return;let t=e.split(" "),i=t.shift()??"";if(this.command=i,!(this.command in this.commands)){this.term.writeln(`${this.command}: command not found`),this.command="";return}t[0]==="/?"?this.fetchHelp():await this.commands[this.command].function(this.term,t),this.command=""}removeCommandChar(){this.commandLength()>0&&(this.command=this.command.substring(0,this.command.length-1))}commandLength(){return this.command.length}fetchHelp(){this.commands[this.command]&&(this.term.writeln(`${this.commands[this.command].description}\r
`),this.term.writeln(`syntax: ${this.commands[this.command].syntax}`),this.commands[this.command].argsd&&this.term.writeln(`	${this.commands[this.command].argsd}`))}}var Id={foreground:"#F8F8F8",background:"#000",selection:"#5DA5D533",black:"#1E1E1D",brightBlack:"#262625",red:"#CE5C5C",brightRed:"#FF7272",green:"#5BCC5B",brightGreen:"#72FF72",yellow:"#CCCC5B",brightYellow:"#FFFF72",blue:"#5D5DD3",brightBlue:"#7279FF",magenta:"#BC5ED1",brightMagenta:"#E572FF",cyan:"#5DA5D5",brightCyan:"#72F0FF",white:"#F8F8F8",brightWhite:"#FFFFFF"};class Pd{constructor(e){ot(this,"term",new Zl.Terminal({allowProposedApi:!0,cursorBlink:!0,fontFamily:"VT323",theme:Id}));ot(this,"termFit",new cs.FitAddon);ot(this,"commands");ot(this,"current_dir",yd());ot(this,"_prompt",`C:${this.current_dir}>`);this.termFit=new cs.FitAddon,this.term.loadAddon(this.termFit),this.term.open(e),this.termFit.fit(),this.term.focus(),new ResizeObserver(i=>{this.termFit.fit()}).observe(e),this.commands=new Bd(this.term,this)}initTerm(){this.term.writeln("Mellosoft(R) Mello OS"),this.term.writeln("Copyright (C) Mellosoft Inc. All rights nonexistent."),this.prompt(),this.term.onData(async e=>{switch(e){case"":this.term.write("^C"),this.prompt();break;case"\r":this.term.writeln(""),await this.commands.executeCommand(),this.prompt();break;case"":this.term.buffer.normal.cursorX>this._prompt.length+1&&(this.term.write("\b \b"),this.commands.removeCommandChar());break;default:(e>=" "&&e<="~"||e>="Â ")&&(this.term.write(e),this.commands.addCommandChar(e));break}})}prompt(){this.term.write(`\r
${this._prompt} `)}setPrompt(e){this._prompt=`C:${e}>`}}function xd(r){let e;return{c(){e=ve("div"),fe(e,"class","input svelte-gmag9t")},m(t,i){Ae(t,e,i),r[3](e)},p:Ue,d(t){t&&Re(e),r[3](null)}}}function Md(r){let e,t,i;return t=new fr({props:{height:"100%",_class:"cmd-container",inset:!1,$$slots:{default:[xd]},$$scope:{ctx:r}}}),{c(){e=ve("div"),Be(t.$$.fragment),fe(e,"class","cmd svelte-gmag9t")},m(l,_){Ae(l,e,_),Le(t,e,null),i=!0},p(l,_){const d={};_&36&&(d.$$scope={dirty:_,ctx:l}),t.$set(d)},i(l){i||(we(t.$$.fragment,l),i=!0)},o(l){Ce(t.$$.fragment,l),i=!1},d(l){l&&Re(e),De(t)}}}function Fd(r){let e,t;return e=new lt({props:{name:r[1],index:r[0],$$slots:{default:[Md]},$$scope:{ctx:r}}}),{c(){Be(e.$$.fragment)},m(i,l){Le(e,i,l),t=!0},p(i,[l]){const _={};l&2&&(_.name=i[1]),l&1&&(_.index=i[0]),l&36&&(_.$$scope={dirty:l,ctx:i}),e.$set(_)},i(i){t||(we(e.$$.fragment,i),t=!0)},o(i){Ce(e.$$.fragment,i),t=!1},d(i){De(e,i)}}}function Nd(r,e,t){let{index:i}=e,{name:l}=e,_,d;Et(()=>{d=new Pd(_),d.initTerm()});function n(o){Ke[o?"unshift":"push"](()=>{_=o,t(2,_)})}return r.$$set=o=>{"index"in o&&t(0,i=o.index),"name"in o&&t(1,l=o.name)},[i,l,_,n]}class jd extends Ze{constructor(e){super(),Je(this,e,Nd,Fd,Xe,{index:0,name:1})}}function Eo(r,e,t){const i=r.slice();return i[8]=e[t],i}function Co(r){let e,t=lr(r[2]),i=[];for(let l=0;l<t.length;l+=1)i[l]=Ro(Eo(r,t,l));return{c(){e=ve("menu");for(let l=0;l<i.length;l+=1)i[l].c();fe(e,"class","toolbar-menu svelte-1fyo21s"),yt(e,"left",r[4]-5+"px")},m(l,_){Ae(l,e,_);for(let d=0;d<i.length;d+=1)i[d]&&i[d].m(e,null)},p(l,_){if(_&4){t=lr(l[2]);let d;for(d=0;d<t.length;d+=1){const n=Eo(l,t,d);i[d]?i[d].p(n,_):(i[d]=Ro(n),i[d].c(),i[d].m(e,null))}for(;d<i.length;d+=1)i[d].d(1);i.length=t.length}_&16&&yt(e,"left",l[4]-5+"px")},d(l){l&&Re(e),Pn(i,l)}}}function Ro(r){let e,t=r[8].name+"",i,l,_;return{c(){e=ve("li"),i=ht(t),fe(e,"class","menu-item svelte-1fyo21s")},m(d,n){Ae(d,e,n),pe(e,i),l||(_=nt(e,"click",function(){ri(r[8].action)&&r[8].action.apply(this,arguments)}),l=!0)},p(d,n){r=d,n&4&&t!==(t=r[8].name+"")&&Pt(i,t)},d(d){d&&Re(e),l=!1,_()}}}function Ud(r){let e,t,i,l,_,d,n=r[0]&&Co(r);return{c(){e=ve("button"),t=ht(r[1]),i=Pe(),n&&n.c(),l=Do(),fe(e,"class","svelte-1fyo21s")},m(o,u){Ae(o,e,u),pe(e,t),r[6](e),Ae(o,i,u),n&&n.m(o,u),Ae(o,l,u),_||(d=[nt(window,"click",r[5]),nt(e,"click",r[7])],_=!0)},p(o,[u]){u&2&&Pt(t,o[1]),o[0]?n?n.p(o,u):(n=Co(o),n.c(),n.m(l.parentNode,l)):n&&(n.d(1),n=null)},i:Ue,o:Ue,d(o){o&&(Re(e),Re(i),Re(l)),r[6](null),n&&n.d(o),_=!1,wt(d)}}}function Hd(r,e,t){let{open:i=!1}=e,{name:l}=e,{items:_}=e,d,n=0;Et(()=>{t(4,n=d.getBoundingClientRect().left)});const o=f=>{f.target!==d&&t(0,i=!1)};function u(f){Ke[f?"unshift":"push"](()=>{d=f,t(3,d)})}const m=()=>{t(0,i=!0)};return r.$$set=f=>{"open"in f&&t(0,i=f.open),"name"in f&&t(1,l=f.name),"items"in f&&t(2,_=f.items)},[i,l,_,d,n,o,u,m]}class $d extends Ze{constructor(e){super(),Je(this,e,Hd,Ud,Xe,{open:0,name:1,items:2})}}function Ao(r,e,t){const i=r.slice();return i[3]=e[t],i}function To(r){let e,t;return e=new $d({props:{name:r[3].name,items:r[3].items}}),{c(){Be(e.$$.fragment)},m(i,l){Le(e,i,l),t=!0},p(i,l){const _={};l&1&&(_.name=i[3].name),l&1&&(_.items=i[3].items),e.$set(_)},i(i){t||(we(e.$$.fragment,i),t=!0)},o(i){Ce(e.$$.fragment,i),t=!1},d(i){De(e,i)}}}function Wd(r){let e,t,i,l,_=lr(r[0]),d=[];for(let m=0;m<_.length;m+=1)d[m]=To(Ao(r,_,m));const n=m=>Ce(d[m],1,1,()=>{d[m]=null}),o=r[2].default,u=zr(o,r,r[1],null);return{c(){e=ve("div"),t=ve("div");for(let m=0;m<d.length;m+=1)d[m].c();i=Pe(),u&&u.c(),fe(t,"class","menus svelte-zlsazj"),fe(e,"class","toolbar svelte-zlsazj")},m(m,f){Ae(m,e,f),pe(e,t);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(t,null);pe(e,i),u&&u.m(e,null),l=!0},p(m,[f]){if(f&1){_=lr(m[0]);let v;for(v=0;v<_.length;v+=1){const C=Ao(m,_,v);d[v]?(d[v].p(C,f),we(d[v],1)):(d[v]=To(C),d[v].c(),we(d[v],1),d[v].m(t,null))}for(ll(),v=_.length;v<d.length;v+=1)n(v);cl()}u&&u.p&&(!l||f&2)&&Kr(u,o,m,m[1],l?Vr(o,m[1],f,null):Gr(m[1]),null)},i(m){if(!l){for(let f=0;f<_.length;f+=1)we(d[f]);we(u,m),l=!0}},o(m){d=d.filter(Boolean);for(let f=0;f<d.length;f+=1)Ce(d[f]);Ce(u,m),l=!1},d(m){m&&Re(e),Pn(d,m),u&&u.d(m)}}}function qd(r,e,t){let{$$slots:i={},$$scope:l}=e,{tools:_=[]}=e;return r.$$set=d=>{"tools"in d&&t(0,_=d.tools),"$$scope"in d&&t(1,l=d.$$scope)},[_,l,i]}class zd extends Ze{constructor(e){super(),Je(this,e,qd,Wd,Xe,{tools:0})}}function Vd(r){let e,t;return{c(){e=ve("iframe"),fe(e,"title",""),_n(e.src,t=r[4])||fe(e,"src",t),fe(e,"class","svelte-1cx4cr3")},m(i,l){Ae(i,e,l)},p(i,l){l&16&&!_n(e.src,t=i[4])&&fe(e,"src",t)},d(i){i&&Re(e)}}}function Kd(r){let e,t,i;return t=new fr({props:{background:"transparent",height:"100%",_class:"browser-container",$$slots:{default:[Vd]},$$scope:{ctx:r}}}),{c(){e=ve("div"),Be(t.$$.fragment),fe(e,"class","browser svelte-1cx4cr3")},m(l,_){Ae(l,e,_),Le(t,e,null),i=!0},p(l,_){const d={};_&4112&&(d.$$scope={dirty:_,ctx:l}),t.$set(d)},i(l){i||(we(t.$$.fragment,l),i=!0)},o(l){Ce(t.$$.fragment,l),i=!1},d(l){l&&Re(e),De(t)}}}function Gd(r){let e,t,i,l,_,d,n,o;function u(f){r[8](f)}let m={nolabel:!0,type:"url",width:"100%",dropdown:!0,dropdown_items:r[5]};return r[3]!==void 0&&(m.input=r[3]),l=new bn({props:m}),Ke.push(()=>hl(l,"input",u)),n=new Yr({props:{label:"GO",width:"24px",height:"24px"}}),n.$on("click",r[7]),{c(){e=ve("div"),t=ve("div"),t.textContent="Address:",i=Pe(),Be(l.$$.fragment),d=Pe(),Be(n.$$.fragment),fe(e,"class","addressbar svelte-1cx4cr3")},m(f,v){Ae(f,e,v),pe(e,t),pe(e,i),Le(l,e,null),pe(e,d),Le(n,e,null),o=!0},p(f,v){const C={};v&32&&(C.dropdown_items=f[5]),!_&&v&8&&(_=!0,C.input=f[3],sl(()=>_=!1)),l.$set(C)},i(f){o||(we(l.$$.fragment,f),we(n.$$.fragment,f),o=!0)},o(f){Ce(l.$$.fragment,f),Ce(n.$$.fragment,f),o=!1},d(f){f&&Re(e),De(l),De(n)}}}function Yd(r){let e,t;return e=new zd({props:{slot:"toolbar",tools:r[6],$$slots:{default:[Gd]},$$scope:{ctx:r}}}),{c(){Be(e.$$.fragment)},m(i,l){Le(e,i,l),t=!0},p(i,l){const _={};l&4136&&(_.$$scope={dirty:l,ctx:i}),e.$set(_)},i(i){t||(we(e.$$.fragment,i),t=!0)},o(i){Ce(e.$$.fragment,i),t=!1},d(i){De(e,i)}}}function Xd(r){let e,t,i={name:r[0],index:r[1],$$slots:{toolbar:[Yd],default:[Kd]},$$scope:{ctx:r}};return e=new lt({props:i}),r[9](e),{c(){Be(e.$$.fragment)},m(l,_){Le(e,l,_),t=!0},p(l,[_]){const d={};_&1&&(d.name=l[0]),_&2&&(d.index=l[1]),_&4152&&(d.$$scope={dirty:_,ctx:l}),e.$set(d)},i(l){t||(we(e.$$.fragment,l),t=!0)},o(l){Ce(e.$$.fragment,l),t=!1},d(l){r[9](null),De(e,l)}}}function Jd(r,e,t){let{index:i}=e,{name:l}=e,_=[{name:"File",items:[{name:"About",action:o},{name:"Quit",action:n}]}],d;function n(){d.$destroy()}function o(){new er({target:document.getElementById("icons"),props:{type:"alert",action_type:"info",title:"About browser",message:"Welcome to Browser. This browser is able to load websites from the 90s"}})}let u="",m="",f=["http://info.cern.ch/hypertext/WWW/TheProject.html"];async function v(){let w=await fetch(new Request(`https://archive.org/wayback/available?url=${u}&timestamp=1990`));if(t(0,l="Browser (loading url...)"),w.status===200){let c=await w.json();if(!c.archived_snapshots.closest){t(0,l="Browser (url error)"),new er({target:document.getElementById("icons"),props:{type:"alert",action_type:"error",title:"URL Not Found",message:"ERROR: URL cannot be found or does not exist"}});return}let s=c.archived_snapshots.closest.timestamp.slice(0,4);parseInt(s)>1999?(t(0,l="Browser (url error)"),new er({target:document.getElementById("icons"),props:{type:"alert",action_type:"error",title:"URL Not Found",message:"ERROR: URL cannot be found or does not exist"}})):(t(4,m=c.archived_snapshots.closest.url),f.includes(u)||t(5,f=[...f,u]),t(0,l=`Browser (${u})`))}else new er({target:document.getElementById("icons"),props:{type:"alert",action_type:"error",title:"Internal Error",message:"ERROR: Cannot process URL"}}),t(0,l="Browser (internal error)")}function C(w){u=w,t(3,u)}function S(w){Ke[w?"unshift":"push"](()=>{d=w,t(2,d)})}return r.$$set=w=>{"index"in w&&t(1,i=w.index),"name"in w&&t(0,l=w.name)},[l,i,d,u,m,f,_,v,C,S]}class Zd extends Ze{constructor(e){super(),Je(this,e,Jd,Xd,Xe,{index:1,name:0})}}function Qd(r){let e,t,i,l,_,d,n,o,u,m,f,v,C,S,w,c,s,a,h,p,g,E,k,b,O,M,$;return l=new _t({props:{name:"Welcome",icon:"https://win98icons.alexmeub.com/icons/png/world-3.png",program:Nl}}),d=new _t({props:{name:"Notepad",icon:"https://win98icons.alexmeub.com/icons/png/notepad-4.png",program:Wl}}),o=new _t({props:{name:"Wallet",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/briefcase-0.png",program:Xl}}),m=new _t({props:{name:"Not Dark Web",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/msagent-3.png",program:lt}}),v=new _t({props:{name:"CMD",icon:"https://win98icons.alexmeub.com/icons/png/console_prompt-0.png",program:jd}}),S=new _t({props:{name:"Calendar",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/calendar-3.png",program:lt}}),c=new _t({props:{name:"Not A Tracker",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/camera_2-0.png",program:lt}}),a=new _t({props:{name:"Browser",icon:"https://win98icons.alexmeub.com/icons/png/search_web-0.png",program:Zd}}),p=new _t({props:{name:"Finder",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/magnifying_glass_4-1.png",program:lt}}),E=new _t({props:{name:"Vacations",error:!0,icon:"https://win98icons.alexmeub.com/icons/png/kodak_imaging-0.png",program:lt}}),b=new _t({props:{name:"Program",error:!0,program:lt}}),M=new kl({props:{alignment:"bottom"}}),{c(){e=ve("div"),t=ve("div"),i=ve("div"),Be(l.$$.fragment),_=Pe(),Be(d.$$.fragment),n=Pe(),Be(o.$$.fragment),u=Pe(),Be(m.$$.fragment),f=Pe(),Be(v.$$.fragment),C=Pe(),Be(S.$$.fragment),w=Pe(),Be(c.$$.fragment),s=Pe(),Be(a.$$.fragment),h=Pe(),Be(p.$$.fragment),g=Pe(),Be(E.$$.fragment),k=Pe(),Be(b.$$.fragment),O=Pe(),Be(M.$$.fragment),fe(i,"id","icons-list"),fe(i,"class","svelte-1gvfuer"),fe(t,"id","icons"),fe(t,"class","svelte-1gvfuer"),fe(e,"id","desktop"),fe(e,"class","svelte-1gvfuer")},m(L,q){Ae(L,e,q),pe(e,t),pe(t,i),Le(l,i,null),pe(i,_),Le(d,i,null),pe(i,n),Le(o,i,null),pe(i,u),Le(m,i,null),pe(i,f),Le(v,i,null),pe(i,C),Le(S,i,null),pe(i,w),Le(c,i,null),pe(i,s),Le(a,i,null),pe(i,h),Le(p,i,null),pe(i,g),Le(E,i,null),pe(i,k),Le(b,i,null),pe(e,O),Le(M,e,null),$=!0},p:Ue,i(L){$||(we(l.$$.fragment,L),we(d.$$.fragment,L),we(o.$$.fragment,L),we(m.$$.fragment,L),we(v.$$.fragment,L),we(S.$$.fragment,L),we(c.$$.fragment,L),we(a.$$.fragment,L),we(p.$$.fragment,L),we(E.$$.fragment,L),we(b.$$.fragment,L),we(M.$$.fragment,L),$=!0)},o(L){Ce(l.$$.fragment,L),Ce(d.$$.fragment,L),Ce(o.$$.fragment,L),Ce(m.$$.fragment,L),Ce(v.$$.fragment,L),Ce(S.$$.fragment,L),Ce(c.$$.fragment,L),Ce(a.$$.fragment,L),Ce(p.$$.fragment,L),Ce(E.$$.fragment,L),Ce(b.$$.fragment,L),Ce(M.$$.fragment,L),$=!1},d(L){L&&Re(e),De(l),De(d),De(o),De(m),De(v),De(S),De(c),De(a),De(p),De(E),De(b),De(M)}}}class e_ extends Ze{constructor(e){super(),Je(this,e,null,Qd,Xe,{})}}function t_(r){let e,t;return e=new e_({}),{c(){Be(e.$$.fragment)},m(i,l){Le(e,i,l),t=!0},p:Ue,i(i){t||(we(e.$$.fragment,i),t=!0)},o(i){Ce(e.$$.fragment,i),t=!1},d(i){De(e,i)}}}class r_ extends Ze{constructor(e){super(),Je(this,e,null,t_,Xe,{})}}new r_({target:document.getElementById("app")});
